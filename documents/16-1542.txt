   Draft:Divisor (algebraic geometry)      Draft:Divisor (algebraic geometry)   Cartier divisor  A Cartier divisor in an algebraic variety X (see the paragraph below for the scheme case) can be represented by an open cover by affine subsets    U  i     subscript  U  i    {U_{i}}   of X , and a collection of rational functions     f  i     subscript  f  i    f_{i}   defined on    U  i     subscript  U  i    U_{i}   . The functions must be compatible in this sense: on the intersection of two sets in the cover, the quotient of the corresponding rational functions should be regular and invertible. A Cartier divisor is said to be effective if these    f  i     subscript  f  i    f_{i}   can be chosen to be regular functions , and in this case the Cartier divisor defines an associated subvariety of codimension 1 by forming the ideal sheaf generated locally by the    f  i     subscript  f  i    f_{i}   .  The notion of transition map associates naturally to every Cartier divisor D a line bundle (strictly, invertible sheaf ) commonly denoted by     O  X    (  D  )        subscript  O  X   D    O_{X}(D)   or sometimes also    â„’   (  D  )       â„’  D    \mathcal{L}(D)   .  More conceptually, the notion of Cartier divisors can be described with the abstract function field : in this setup X can be any scheme (in fact any ringed space ). For each affine open subset U , define M â€²( U ) to be the total quotient ring of O X ( U ). Because the affine open subsets form a basis for the topology on X , this defines a presheaf on X . (This is not the same as taking the total quotient ring of O X ( U ) for arbitrary U , since that does not define a presheaf. 1 ) The sheaf M X of rational functions on X is the sheaf associated to the presheaf M â€², and the quotient sheaf is the sheaf of local Cartier divisors.  A Cartier divisor is a global section of the quotient sheaf M X * / O X * . Taking the global sections of    1  â†’   ğ’ª  X  *   â†’   M  X  *   â†’    M  X  *   /   ğ’ª  X  *    â†’  1       normal-â†’  1   subscript   superscript  ğ’ª    X     normal-â†’     subscript   superscript  M    X     normal-â†’       subscript   superscript  M    X    subscript   superscript  ğ’ª    X      normal-â†’    1     1\to\mathcal{O}^{*}_{X}\to M^{*}_{X}\to M^{*}_{X}/\mathcal{O}^{*}_{X}\to 1   gives the exact sequence of abelian groups:       1  â†’   Î“   (  X  ,   O  X  *   )    â†’   Î“   (  X  ,   M  X  *   )    â†’   Î“   (  X  ,    M  X  *   /   O  X  *    )    â†’  ğ›¿    H  1    (  X  ,   O  X  *   )    =   Pic   (  X  )     .       normal-â†’  1    normal-Î“   X   subscript   superscript  O    X       normal-â†’      normal-Î“   X   subscript   superscript  M    X       normal-â†’      normal-Î“   X     subscript   superscript  M    X    subscript   superscript  O    X      Î´  normal-â†’    superscript  H  1    X   subscript   superscript  O    X           Pic  X      1\to\Gamma(X,O^{*}_{X})\to\Gamma(X,M^{*}_{X})\to\Gamma(X,M^{*}_{X}/O^{*}_{X})%
 \overset{\delta}{\to}H^{1}(X,O^{*}_{X})=\operatorname{Pic}(X).   We let     CDiv   (  X  )    =   Î“   (  X  ,    M  X  *   /   ğ’ª  X  *    )         CDiv  X     normal-Î“   X     subscript   superscript  M    X    subscript   superscript  ğ’ª    X        \operatorname{CDiv}(X)=\Gamma(X,M^{*}_{X}/\mathcal{O}^{*}_{X})   be the group of Cartier divisors. Note that, for any open subset U of X ,     CDiv   (  U  )    =   Î“   (  U  ,    M  U  *   /   O  U  *    )    =   Î“   (  U  ,    M  X  *   /   O  X  *    )           CDiv  U     normal-Î“   U     subscript   superscript  M    U    subscript   superscript  O    U             normal-Î“   U     subscript   superscript  M    X    subscript   superscript  O    X         \operatorname{CDiv}(U)=\Gamma(U,M^{*}_{U}/O^{*}_{U})=\Gamma(U,M^{*}_{X}/O^{*}_%
 {X})   ; i.e.,   CDiv   CDiv   \operatorname{CDiv}   is the sheaf     M  X  *   /   O  X  *        subscript   superscript  M    X    subscript   superscript  O    X     M^{*}_{X}/O^{*}_{X}   .  A Cartier divisor is said to be "principal" if it is in the image of the canonical homomorphism     Î“   (  X  ,   M  X  *   )    â†’   CDiv   (  X  )       normal-â†’    normal-Î“   X   subscript   superscript  M    X      CDiv  X     \Gamma(X,M^{*}_{X})\to\operatorname{CDiv}(X)   , which, as in the Weil-divisor case, is denoted by     f  â†¦   (  f  )    .     maps-to  f  f    f\mapsto(f).    2 Note also that the divisor class group       CCl   (  X  )    =    CDiv   (  X  )    /   {   (  f  )   |   f  âˆˆ   Î“   (  X  ,   M  X  *   )     }         CCl  X      CDiv  X    conditional-set  f    f    normal-Î“   X   subscript   superscript  M    X          \operatorname{CCl}(X)=\operatorname{CDiv}(X)/\{(f)|f\in\Gamma(X,M^{*}_{X})\}   naturally injects into the Picard group     Pic   (  X  )      Pic  X    \operatorname{Pic}(X)   through the connecting homomorphism Î´ in the exact sequence. In fact, up to the identification of Pic and H 1 (-, O * ), this Î´ is the same as the map induced by    D  â†¦    O  X    (  D  )       maps-to  D     subscript  O  X   D     D\mapsto O_{X}(D)   that was defined earlier.  The mapping    D  â†¦   â„’   (  D  )       maps-to  D    â„’  D     D\mapsto\mathcal{L}(D)   is a group homomorphism: the sum of divisors corresponds to the tensor product of line bundles, and isomorphism of bundles corresponds precisely to linear equivalence of Cartier divisors. The group of divisors classes modulo linear equivalence therefore injects into the Picard group . The mapping is not surjective for all compact complex manifolds, but surjectivity does hold for all smooth projective varieties. The latter is true because, by the Kodaira embedding theorem, the tensor product of any line bundle with a sufficiently high power of any positive line bundle becomes ample; thus, on any such manifold, any line bundle is the formal difference between two ample line bundles, and any ample line bundle may be viewed as an effective divisor.  By convention, one writes the group law on Cartier divisors additively; thus, for example, the fact that above canonical map is a homomorphism means:        (   f  g   )   =    (  f  )   +   (  g  )     .        f  g     f  g     (fg)=(f)+(g).   Also, by definition, ( f ) = 0 if and only if f is a global section of O X * .  A Cartier divisor D is said to be "effective" (see below for the relative case) if it is a global section of     ğ’ª  X   âˆ©   â„³  X  *        subscript  ğ’ª  X    superscript   subscript  â„³  X       \mathcal{O}_{X}\cap\mathcal{M}_{X}^{*}   . 3 Note: (f) â‰¥ 0 if and only if f is a global section of O X * ; i.e., a regular function when X is a variety. One writes D â‰¥ D' if D - D' is effective.  Remark : Although the notion of Cartier divisors exists in any sheaf (any ringed space ), if the sheaf is not rigid enough, the notion tends to lose some of its interest. For example in a fine sheaf (e.g. the sheaf of real-valued continuous, or smooth, functions on an open subset of a euclidean space , or locally homeomorphic, or diffeomorphic, to such a set, such as a topological manifold ), any local section is a divisor of 0, so that the total quotient sheaves are zero, so that the sheaf contains no non-trivial Cartier divisor.  From Cartier divisors to Weil divisor  There is a natural homomorphism from the group of Cartier divisors to that of Weil divisors, which is an isomorphism for integral separated Noetherian schemes provided that all local rings are unique factorization domains.  Global sections of line bundles and linear systems  Recall that the local equations of a Cartier divisor   D   D   D   in a variety   X   X   X   give rise to transition maps for a line bundle    â„’   (  D  )       â„’  D    \mathcal{L}(D)   , and linear equivalences induce isomorphism of line bundles.  Loosely speaking, a Cartier divisor D is said to be effective if it is the zero locus of a global section of its associated line bundle    â„’   (  D  )       â„’  D    \mathcal{L}(D)   . In terms of the definition above, this means that its local equations coincide with the equations of the vanishing locus of a global section.  From the divisor linear equivalence/line bundle isomorphism principle, a Cartier divisor is linearly equivalent to an effective divisor if, and only if, its associated line bundle    â„’   (  D  )       â„’  D    \mathcal{L}(D)   has non-zero global sections. Two collinear non-zero global sections have the same vanishing locus, and hence the projective space    â„™  Î“   (  X  ,   â„’   (  D  )    )       â„™  normal-Î“   X    â„’  D      \mathbb{P}\Gamma(X,\mathcal{L}(D))   over k identifies with the set of effective divisors linearly equivalent to   D   D   D   .  If   X   X   X   is a projective (or proper ) variety over a field   k   k   k   , then    Î“   (  X  ,   â„’   (  D  )    )       normal-Î“   X    â„’  D      \Gamma(X,\mathcal{L}(D))   is a finite-dimensional   k   k   k   -vector space, and the associated projective space over   k   k   k   is called the complete linear system of   D   D   D   . Its linear subspaces are called linear systems of divisors . The Riemann-Roch theorem for algebraic curves is a fundamental identity involving the dimension of complete linear systems in the setup of projective curves.     â„š   â„š   \mathbb{Q}   -divisors  Let X be a normal variety. A (Weil)   â„š   â„š   \mathbb{Q}   -divisor is a finite formal linear combination of irreducible subvarieties of codimension one of X with rational coefficients. (An   â„   â„   \mathbb{R}   -divisor is defined similarly.) A   â„š   â„š   \mathbb{Q}   -divisor is called effective if the coefficients are nonnegative. A   â„š   â„š   \mathbb{Q}   -divisor is called   â„š   â„š   \mathbb{Q}   -Cartier if some integral multiple of it is a Cartier divisor. If X is smooth, then any   â„š   â„š   \mathbb{Q}   -divisor is   â„š   â„š   \mathbb{Q}   -Cartier.  If    D  =   âˆ‘    a  j    Z  j         D       subscript  a  j    subscript  Z  j       D=\sum a_{j}Z_{j}   is a   â„š   â„š   \mathbb{Q}   -divisor, then its integer part is the divisor       [  D  ]   =   âˆ‘    [   a  j   ]    Z  j          delimited-[]  D        delimited-[]   subscript  a  j     subscript  Z  j       [D]=\sum[a_{j}]Z_{j}   where    [   a  j   ]     delimited-[]   subscript  a  j     [a_{j}]   are integer parts of    a  j     subscript  a  j    a_{j}   .  See also: multiplier ideal .  Relative Cartier divisors  An effective Cartier divisor in a scheme X over a ring R is a closed subscheme D of X that (1) is flat over R and (2) the ideal sheaf    I   (  D  )       I  D    I(D)   of D is locally free of rank one (i.e., invertible sheaf). Equivalently, a closed subscheme D of X is an effective Cartier divisor if there is an open affine cover     U  i   =   Spec   A  i         subscript  U  i    Spec   subscript  A  i      U_{i}=\operatorname{Spec}A_{i}   of X and nonzerodivisors     f  i   âˆˆ   A  i        subscript  f  i    subscript  A  i     f_{i}\in A_{i}   such that the intersection    D  âˆ©   U  i       D   subscript  U  i     D\cap U_{i}   is given by the equation     f  i   =  0       subscript  f  i   0    f_{i}=0   (called local equations) and its ideal sheaf       I   (  D  )    |    U  i    =    A  /   f  i    A        evaluated-at    I  D    subscript  U  i        A   subscript  f  i    A     I(D)|_{U_{i}}=A/f_{i}A   is flat over R and such that they are compatible.   If D and ''D' '' are effective Cartier divisors, then the sum    D  +   D  â€²       D   superscript  D  normal-â€²     D+D^{\prime}   is the effective Cartier divisor defined locally as     f  g   =  0        f  g   0    fg=0   if f , g give local equations for D and ''D' ''.  If D is an effective Cartier divisor and    R  â†’   R  â€²      normal-â†’  R   superscript  R  normal-â€²     R\to R^{\prime}   is a ring homomorphism, then    D   Ã—  R    R  â€²       subscript   R   D   superscript  R  normal-â€²     D\times_{R}R^{\prime}   is an effective Cartier divisor in    X   Ã—  R    R  â€²       subscript   R   X   superscript  R  normal-â€²     X\times_{R}R^{\prime}   .  If D is an effective Cartier divisor and    f  :    X  â€²   â†’  X      normal-:  f   normal-â†’   superscript  X  normal-â€²   X     f:X^{\prime}\to X   a flat morphism over R , then     D  â€²   =   D   Ã—  X    X  â€²         superscript  D  normal-â€²     subscript   X   D   superscript  X  normal-â€²      D^{\prime}=D\times_{X}X^{\prime}   is an effective Cartier divisor in ''X' '' with the ideal sheaf     I   (   D  â€²   )    =    f  *    (   I   (  D  )    )          I   superscript  D  normal-â€²       superscript  f      I  D      I(D^{\prime})=f^{*}(I(D))   .   Taking    I    (  D  )    -  1     âŠ—   ğ’ª  X    -     fragments  I   superscript   fragments  normal-(  D  normal-)     1     subscript  tensor-product   subscript  ğ’ª  X       I(D)^{-1}\otimes_{\mathcal{O}_{X}}-   of    0  â†’   I   (  D  )    â†’   ğ’ª  X   â†’   ğ’ª  D   â†’  0       normal-â†’  0    I  D     normal-â†’     subscript  ğ’ª  X     normal-â†’     subscript  ğ’ª  D     normal-â†’    0     0\to I(D)\to\mathcal{O}_{X}\to\mathcal{O}_{D}\to 0   gives the exact sequence      0  â†’   ğ’ª  X   â†’   I    (  D  )    -  1     â†’    I    (  D  )    -  1     âŠ—   ğ’ª  D    â†’  0       normal-â†’  0   subscript  ğ’ª  X     normal-â†’      I   superscript  D    1       normal-â†’     tensor-product    I   superscript  D    1      subscript  ğ’ª  D      normal-â†’    0     0\to\mathcal{O}_{X}\to I(D)^{-1}\to I(D)^{-1}\otimes\mathcal{O}_{D}\to 0   . This allows one to see global sections of    ğ’ª  X     subscript  ğ’ª  X    \mathcal{O}_{X}   as global sections of    I    (  D  )    -  1        I   superscript  D    1      I(D)^{-1}   . In particular, the constant 1 on X can be thought of as a section of    I    (  D  )    -  1        I   superscript  D    1      I(D)^{-1}   and D is then the zero locus of this section. Conversely, if   L   L   L   is a line bundle on X and s a global section of it that is a nonzerodivisor on    ğ’ª  X     subscript  ğ’ª  X    \mathcal{O}_{X}   and if    L  /   ğ’ª  X       L   subscript  ğ’ª  X     L/\mathcal{O}_{X}   is flat over R , then    s  =  0      s  0    s=0   defines an effective Cartier divisor whose ideal sheaf is isomorphic to the inverse of L .  From now on suppose X is a smooth curve (still over R ). Let D be an effective Cartier divisor in X and assume it is proper over R (which is immediate if X is proper.) Then    Î“   (  D  ,   ğ’ª  D   )       normal-Î“   D   subscript  ğ’ª  D      \Gamma(D,\mathcal{O}_{D})   is a locally free R -module of finite rank. This rank is called the degree of D and is denoted by    deg  D     deg  D    \operatorname{deg}D   . It is a locally constant function on    Spec  R     Spec  R    \operatorname{Spec}R   . If D and ''D' '' are proper effective Cartier divisors, then    D  +   D  â€²       D   superscript  D  normal-â€²     D+D^{\prime}   is proper over R and     deg   (   D  +   D  â€²    )    =    deg   (  D  )    +   deg   (   D  â€²   )          deg    D   superscript  D  normal-â€²        deg  D    deg   superscript  D  normal-â€²       \operatorname{deg}(D+D^{\prime})=\operatorname{deg}(D)+\operatorname{deg}(D^{%
 \prime})   . Let    f  :    X  â€²   â†’  X      normal-:  f   normal-â†’   superscript  X  normal-â€²   X     f:X^{\prime}\to X   be a finite flat morphism. Then     deg   (    f  *   D   )    =    deg   (  f  )     deg   (  D  )          deg     superscript  f    D       deg  f    deg  D      \operatorname{deg}(f^{*}D)=\operatorname{deg}(f)\operatorname{deg}(D)   . 4 On the other hand, a base change does not change degree     deg   (   D   Ã—  R    R  â€²    )    =   deg   (  D  )         deg    subscript   R   D   superscript  R  normal-â€²      deg  D     \operatorname{deg}(D\times_{R}R^{\prime})=\operatorname{deg}(D)   . 5  A closed subscheme D of X is finite, flat and of finite presentation if and only if it is an effective Cartier divisor that is proper over R . 6  The Cartier divisor of a coherent sheaf  Let X be a Noetherian scheme and F a coherent sheaf. We assume F has finite cohomological dimension; that means for each point x in X there is a neighborhood U of x and a resolution:      0  â†’   E  n   â†’  â‹¯  â†’   E  0   â†’  F  â†’  0       normal-â†’  0   subscript  E  n     normal-â†’    normal-â‹¯    normal-â†’     subscript  E  0     normal-â†’    F    normal-â†’    0     0\to E_{n}\to\cdots\to E_{0}\to F\to 0   by free sheaves E i 's on U . Outside the support of F we have the exact sequence      0  â†’   E  n   â†’  â‹¯  â†’   E  0   â†’  0       normal-â†’  0   subscript  E  n     normal-â†’    normal-â‹¯    normal-â†’     subscript  E  0     normal-â†’    0     0\to E_{n}\to\cdots\to E_{0}\to 0   and taking det of it gives:  See also   ample divisor  Arakelov divisor  nef divisor  Theta-divisor  Multiplier ideal (algebraic geometry)   Notes    References    Section 21 of  Section II.6 of  Ch. 5, Â§ 3 of     "  Category:Geometry of divisors     Kleiman, p. 203 â†©  Editorial note: This is how Hartshorne writes; EGA, on the other hand, write "div" for the map. â†©  â†©  â†©  â†©  â†©     