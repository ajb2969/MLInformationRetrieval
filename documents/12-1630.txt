   Conditioning (probability)      Conditioning (probability)   Beliefs depend on the available information. This idea is formalized in probability theory by conditioning . Conditional probabilities , conditional expectations and conditional distributions are treated on three levels: discrete probabilities , probability density functions , and measure theory . Conditioning leads to a non-random result if the condition is completely specified; otherwise, if the condition is left random, the result of conditioning is also random.  This article concentrates on interrelations between various kinds of conditioning, shown mostly by examples. For systematic treatment (and corresponding literature) see more specialized articles mentioned below.  Conditioning on the discrete level  Example. A fair coin is tossed 10 times; the random variable  X is the number of heads in these 10 tosses, and Y ‚Äî the number of heads in the first 3 tosses. In spite of the fact that Y emerges before X it may happen that someone knows X but not Y .  Conditional probability  Given that X = 1, the conditional probability of the event Y = 0 is P( Y = 0 | X = 1) = P( Y = 0, X = 1) / P( X = 1) = 0.7. More generally,      ‚Ñô   (  Y  =  0  |  X  =  x  )   =    (      7      x      )    (      10      x      )    =     7  !     (   10  -  x   )   !       (   7  -  x   )   !    10  !        fragments  P   fragments  normal-(  Y   0  normal-|  X   x  normal-)       binomial  7  x    binomial  10  x           7       10  x           7  x      10       \mathbb{P}(Y=0|X=x)=\frac{{\left({{7}\atop{x}}\right)}}{{\left({{10}\atop{x}}%
 \right)}}=\frac{7!(10-x)!}{(7-x)!10!}     for x = 0, 1, 2, 3, 4, 5, 6, 7; otherwise (for x = 8, 9, 10), P ( Y = 0 | X = x ) = 0. One may also treat the conditional probability as a random variable, ‚Äî a function of the random variable X , namely,      ‚Ñô   (  Y  =  0  |  X  )   =   {       (       7      X       )   /   (       10      X       )         for  X   ‚â§  7   ,       0      for  X   >  7.          fragments  P   fragments  normal-(  Y   0  normal-|  X  normal-)     cases     binomial  7  X    binomial  10  X        for  X   7   0      for  X   7.      \mathbb{P}(Y=0|X)=\begin{cases}{\left({{7}\atop{X}}\right)}/{\left({{10}\atop{%
 X}}\right)}&\text{for }X\leq 7,\\
 0&\text{for }X>7.\end{cases}     The expectation of this random variable is equal to the (unconditional) probability,      ùîº   (  ‚Ñô   (  Y  =  0  |  X  )   )   =   ‚àë  x   ‚Ñô   (  Y  =  0  |  X  =  x  )   ‚Ñô   (  X  =  x  )   =  ‚Ñô   (  Y  =  0  )   ,     fragments  E   fragments  normal-(  P   fragments  normal-(  Y   0  normal-|  X  normal-)   normal-)     subscript   x   P   fragments  normal-(  Y   0  normal-|  X   x  normal-)   P   fragments  normal-(  X   x  normal-)    P   fragments  normal-(  Y   0  normal-)   normal-,    \mathbb{E}(\mathbb{P}(Y=0|X))=\sum_{x}\mathbb{P}(Y=0|X=x)\mathbb{P}(X=x)=%
 \mathbb{P}(Y=0),     namely,         ‚àë   x  =  0   7       (      7      x      )    (      10      x      )    ‚ãÖ   1   2  10      (     10      x     )     =   1  8    ,        superscript   subscript     x  0    7      normal-‚ãÖ     binomial  7  x    binomial  10  x      1   superscript  2  10      binomial  10  x       1  8     \sum_{x=0}^{7}\frac{{\left({{7}\atop{x}}\right)}}{{\left({{10}\atop{x}}\right)%
 }}\cdot\frac{1}{2^{10}}{\left({{10}\atop{x}}\right)}=\frac{1}{8},     which is an instance of the law of total probability E ( P ( A | X ) ) = P ( A ).  Thus, P ( Y = 0 | X = 1 ) may be treated as the value of the random variable P ( Y = 0 | X ) corresponding to X = 1. On the other hand, P( Y = 0 | X = 1) is well-defined irrespective of other possible values of X .  Conditional expectation  Given that X = 1, the conditional expectation of the random variable Y is E ( Y | X = 1 ) = 0.3. More generally,      ùîº   (  Y  |  X  =  x  )   =   3  10   x     fragments  E   fragments  normal-(  Y  normal-|  X   x  normal-)      3  10   x    \mathbb{E}(Y|X=x)=\frac{3}{10}x     for x = 0, ..., 10. (In this example it appears to be a linear function, but in general it is nonlinear.) One may also treat the conditional expectation as a random variable, ‚Äî a function of the random variable X , namely,      ùîº   (  Y  |  X  )   =   3  10   X  .     fragments  E   fragments  normal-(  Y  normal-|  X  normal-)      3  10   X  normal-.    \mathbb{E}(Y|X)=\frac{3}{10}X.     The expectation of this random variable is equal to the (unconditional) expectation of Y ,      ùîº   (  ùîº   (  Y  |  X  )   )   =   ‚àë  x   ùîº   (  Y  |  X  =  x  )   ‚Ñô   (  X  =  x  )   =  ùîº   (  Y  )   ,     fragments  E   fragments  normal-(  E   fragments  normal-(  Y  normal-|  X  normal-)   normal-)     subscript   x   E   fragments  normal-(  Y  normal-|  X   x  normal-)   P   fragments  normal-(  X   x  normal-)    E   fragments  normal-(  Y  normal-)   normal-,    \mathbb{E}(\mathbb{E}(Y|X))=\sum_{x}\mathbb{E}(Y|X=x)\mathbb{P}(X=x)=\mathbb{E%
 }(Y),     namely,         ‚àë   x  =  0   10        3  10    x   ‚ãÖ    1   2  10       (     10      x     )     =    3  2     ,        superscript   subscript     x  0    10      normal-‚ãÖ      3  10   x     1   superscript  2  10      binomial  10  x       3  2     \sum_{x=0}^{10}\tfrac{3}{10}x\cdot\tfrac{1}{2^{10}}{\left({{10}\atop{x}}\right%
 )}=\tfrac{3}{2},     or simply        ùîº   (     3  10    X   )    =     3  10    ùîº   (  X  )    =     3  10    ‚ãÖ  5   =    3  2     ,          ùîº      3  10   X        3  10   ùîº  X         normal-‚ãÖ    3  10   5          3  2      \mathbb{E}\left(\tfrac{3}{10}X\right)=\tfrac{3}{10}\mathbb{E}(X)=\tfrac{3}{10}%
 \cdot 5=\tfrac{3}{2},     which is an instance of the law of total expectation E ( E ( Y | X ) ) = E ( Y ).  The random variable E( Y | X ) is the best predictor of Y given X . That is, it minimizes the mean square error E ( Y - f ( X ) ) 2 on the class of all random variables of the form f ( X ). This class of random variables remains intact if X is replaced, say, with 2 X . Thus, E ( Y | 2 X ) = E ( Y | X ). It does not mean that E ( Y | 2 X ) = 0.3 √ó 2 X ; rather, E ( Y | 2 X ) = 0.15 √ó 2 X = 0.3 X . In particular, E ( Y | 2 X =2) = 0.3. More generally, E ( Y | g ( X )) = E ( Y | X ) for every function g that is one-to-one on the set of all possible values of X . The values of X are irrelevant; what matters is the partition (denote it Œ± X )      Œ©  =   {  X  =   x  1   }   ‚äé   {  X  =   x  2   }   ‚äé  ‚Ä¶     fragments  Œ©    fragments  normal-{  X    subscript  x  1   normal-}   normal-‚äé   fragments  normal-{  X    subscript  x  2   normal-}   normal-‚äé  normal-‚Ä¶    \Omega=\{X=x_{1}\}\uplus\{X=x_{2}\}\uplus\dots   of the sample space Œ© into disjoint sets { X = x n }. (Here     x  1   ,   x  2   ,  ‚Ä¶      subscript  x  1    subscript  x  2   normal-‚Ä¶    x_{1},x_{2},\dots   are all possible values of X .) Given an arbitrary partition Œ± of Œ©, one may define the random variable E ( Y | Œ± ). Still, E ( E ( Y | Œ±)) = E ( Y ).  Conditional probability may be treated as a special case of conditional expectation. Namely, P ( A | X ) = E ( Y | X ) if Y is the indicator of A . Therefore the conditional probability also depends on the partition Œ± X generated by X rather than on X itself; P ( A | g ( X ) ) = P ( A | X ) = P ( A | Œ±), Œ± = Œ± X = Œ± g ( X ) .  On the other hand, conditioning on an event B is well-defined, provided that P ( B ) ‚â† 0, irrespective of any partition that may contain B as one of several parts.  Conditional distribution  Given X = x, the conditional distribution of Y is      ‚Ñô   (  Y  =  y  |  X  =  x  )   =     (      3      y      )    (      7       x  -  y       )     (      10      x      )    =     (      x      y      )    (       10  -  x        3  -  y       )     (      10      3      )       fragments  P   fragments  normal-(  Y   y  normal-|  X   x  normal-)         binomial  3  y    binomial  7    x  y      binomial  10  x          binomial  x  y    binomial    10  x     3  y      binomial  10  3      \mathbb{P}(Y=y|X=x)=\frac{{\left({{3}\atop{y}}\right)}{\left({{7}\atop{x-y}}%
 \right)}}{{\left({{10}\atop{x}}\right)}}=\frac{{\left({{x}\atop{y}}\right)}{%
 \left({{10-x}\atop{3-y}}\right)}}{{\left({{10}\atop{3}}\right)}}     for 0 ‚â§ y ‚â§ min ( 3, x ). It is the hypergeometric distribution H ( x ; 3, 7 ), or equivalently, H ( 3; x , 10- x ). The corresponding expectation 0.3 x , obtained from the general formula      n   R   R  +  W        n    R    R  W      n\frac{R}{R+W}     for H ( n ; R , W ), is nothing but the conditional expectation E ( Y | X = x ) = 0.3 x .  Treating H ( X ; 3, 7 ) as a random distribution (a random vector in the four-dimensional space of all measures on {0,1,2,3}), one may take its expectation, getting the unconditional distribution of Y , ‚Äî the binomial distribution Bin ( 3, 0.5 ). This fact amounts to the equality       ‚àë   x  =  0   10   ‚Ñô   (  Y  =  y  |  X  =  x  )   ‚Ñô   (  X  =  x  )   =  ‚Ñô   (  Y  =  y  )   =   1   2  3     (     3      y     )      fragments   superscript   subscript     x  0    10   P   fragments  normal-(  Y   y  normal-|  X   x  normal-)   P   fragments  normal-(  X   x  normal-)    P   fragments  normal-(  Y   y  normal-)      1   superscript  2  3     binomial  3  y     \sum_{x=0}^{10}\mathbb{P}(Y=y|X=x)\mathbb{P}(X=x)=\mathbb{P}(Y=y)=\frac{1}{2^{%
 3}}{\left({{3}\atop{y}}\right)}     for y = 0,1,2,3; just the law of total probability.  Conditioning on the level of densities  Example. A point of the sphere x 2 + y 2 + z 2 = 1 is chosen at random according to the uniform distribution on the sphere. 1 2 The random variables X , Y , Z are the coordinates of the random point. The joint density of X , Y , Z does not exist (since the sphere is of zero volume), but the joint density f X , Y of X , Y exists,        f   X  ,  Y     (  x  ,  y  )    =   {       1   2  œÄ    1  -   x  2   -   y  2              if   x  2    +   y  2    <  1   ,       0     otherwise  .              subscript  f   X  Y     x  y     cases    1    2  œÄ      1   superscript  x  2    superscript  y  2             if   superscript  x  2     superscript  y  2    1   0  otherwise     f_{X,Y}(x,y)=\begin{cases}\frac{1}{2\pi\sqrt{1-x^{2}-y^{2}}}&\text{if }x^{2}+y%
 ^{2}<1,\\
 0&\text{otherwise}.\end{cases}     (The density is non-constant because of a non-constant angle between the sphere and the plane. 3 ) The density of X may be calculated by integration,         f  X    (  x  )    =    ‚à´   -  ‚àû    +  ‚àû      f   X  ,  Y     (  x  ,  y  )   d  y    =    ‚à´   -    1  -   x  2       +    1  -   x  2          d  y    2  œÄ    1  -   x  2   -   y  2          ;           subscript  f  X   x     superscript   subscript                subscript  f   X  Y     x  y   normal-d  y           superscript   subscript         1   superscript  x  2             1   superscript  x  2           normal-d  y     2  œÄ      1   superscript  x  2    superscript  y  2           f_{X}(x)=\int_{-\infty}^{+\infty}f_{X,Y}(x,y)\,\mathrm{d}y=\int_{-\sqrt{1-x^{2%
 }}}^{+\sqrt{1-x^{2}}}\frac{\mathrm{d}y}{2\pi\sqrt{1-x^{2}-y^{2}}}\,;     surprisingly, the result does not depend on x in (‚àí1,1),      ‚Ñô   (  Y  ‚â§  y  |  X  =  x  )   =    1  2    +    1  œÄ    arcsin   y    1  -   x  2         fragments  P   fragments  normal-(  Y   y  normal-|  X   x  normal-)      1  2      1  œÄ      y      1   superscript  x  2        \mathbb{P}(Y\leq y|X=x)=\tfrac{1}{2}+\tfrac{1}{\pi}\arcsin\frac{y}{\sqrt{1-x^{%
 2}}}   More generally,       -    1  -   x  2      <  y  <    1  -   x  2                 1   superscript  x  2      y           1   superscript  x  2        \textstyle-\sqrt{1-x^{2}}   for all x and y such that ‚àí1 X ( x ) vanishes) and    ‚Ñô   (  Y  ‚â§  y  |  X  )   =   {     0       for   X  2    ‚â•   1  -    y  2   and  y    <  0   ,          1  2    +     1  œÄ     arcsin    y    1  -   X  2               for   X  2    <   1  -   y  2     ,       1      for   X  2    ‚â•   1  -    y  2   and  y    >  0.          fragments  P   fragments  normal-(  Y   y  normal-|  X  normal-)     cases  0        for   superscript  X  2      1     superscript  y  2   and  y         0        1  2       1  œÄ       y      1   superscript  X  2             for   superscript  X  2      1   superscript  y  2     1        for   superscript  X  2      1     superscript  y  2   and  y         0.       \mathbb{P}(Y\leq y|X)=\begin{cases}0&\text{for }X^{2}\geq 1-y^{2}\text{ and }y%
 <0,\\
 \frac{1}{2}+\frac{1}{\pi}\arcsin\frac{y}{\sqrt{1-X^{2}}}&\text{for }X^{2}<1-y^%
 {2},\\
 1&\text{for }X^{2}\geq 1-y^{2}\text{ and }y>0.\end{cases}   (otherwise the conditional probability degenerates to 0 or 1). One may also treat the conditional probability as a random variable, ‚Äî a function of the random variable X , namely,      ùîº   (  ‚Ñô   (  Y  ‚â§  y  |  X  )   )   =   ‚à´   -  ‚àû    +  ‚àû    ‚Ñô   (  Y  ‚â§  y  |  X  =  x  )    f  X    (  x  )   d  x  =  ‚Ñô   (  Y  ‚â§  y  )   ,     fragments  E   fragments  normal-(  P   fragments  normal-(  Y   y  normal-|  X  normal-)   normal-)     superscript   subscript             P   fragments  normal-(  Y   y  normal-|  X   x  normal-)    subscript  f  X    fragments  normal-(  x  normal-)   d  x   P   fragments  normal-(  Y   y  normal-)   normal-,    \mathbb{E}(\mathbb{P}(Y\leq y|X))=\int_{-\infty}^{+\infty}\mathbb{P}(Y\leq y|X%
 =x)f_{X}(x)\,\mathrm{d}x=\mathbb{P}(Y\leq y),   The expectation of this random variable is equal to the (unconditional) probability,       |  Z  |      Z    \displaystyle|Z|       which is an instance of the law of total probability E ( P ( A | X ) ) = P ( A ).  Interpretation  The conditional probability P ( Y ‚â§ 0.75 | X = 0.5 ) cannot be interpreted as P ( Y ‚â§ 0.75, X = 0.5 ) / P ( X = 0.5 ), since the latter gives 0/0. Accordingly, P ( Y ‚â§ 0.75 | X = 0.5 ) cannot be interpreted via empirical frequencies, since the exact value X = 0.5 has no chance to appear at random, not even once during an infinite sequence of independent trials.  The conditional probability can be interpreted as a limit,    \begin{align}   \mathbb{P} (Y\le0.75 | X=0.5) &= \lim_{\varepsilon\to0+} \mathbb{P} (Y\le0.75 | 0.5-\varepsilon  Conditional expectation  The conditional expectation E ( Y | X = 0.5 ) is of little interest; it vanishes just by symmetry. It is more interesting to calculate E ( | Z | | X = 0.5 ) treating | Z | as a function of X , Y :      ùîº   (  |  Z  |  |  X  =  x  )   =   2  œÄ     1  -   x  2        fragments  E   fragments  normal-(  normal-|  Z  normal-|  normal-|  X   x  normal-)      2  œÄ       1   superscript  x  2       \mathbb{E}(|Z||X=x)=\frac{2}{\pi}\sqrt{1-x^{2}}   More generally,      ùîº   (  ùîº   (  |  Z  |  |  X  )   )   =   ‚à´   -  ‚àû    +  ‚àû    ùîº   (  |  Z  |  |  X  =  x  )    f  X    (  x  )   d  x  =  ùîº   (  |  Z  |  )   ,     fragments  E   fragments  normal-(  E   fragments  normal-(  normal-|  Z  normal-|  normal-|  X  normal-)   normal-)     superscript   subscript             E   fragments  normal-(  normal-|  Z  normal-|  normal-|  X   x  normal-)    subscript  f  X    fragments  normal-(  x  normal-)   d  x   E   fragments  normal-(  normal-|  Z  normal-|  normal-)   normal-,    \mathbb{E}(\mathbb{E}(|Z||X))=\int_{-\infty}^{+\infty}\mathbb{E}(|Z||X=x)f_{X}%
 (x)\,\mathrm{d}x=\mathbb{E}(|Z|),   for ‚àí1  \mathbb{E} ( |Z| | X ) = \frac2\pi \sqrt{1-X^2}.  The expectation of this random variable is equal to the (unconditional) expectation of | Z |,         ‚à´   -  1    +  1       2  œÄ     1  -   x  2      ‚ãÖ    d  x   2     =    1  2     ,        superscript   subscript     1      1     normal-‚ãÖ      2  œÄ       1   superscript  x  2          normal-d  x   2       1  2     \int_{-1}^{+1}\frac{2}{\pi}\sqrt{1-x^{2}}\cdot\frac{\mathrm{d}x}{2}=\tfrac{1}{%
 2},   namely,       F   Y  |  X  =  x     (  y  )   =  ‚Ñô   (  Y  ‚â§  y  |  X  =  x  )   =   1  2   +   1  œÄ   arcsin   y    1  -   x  2         fragments   subscript  F   fragments  Y  normal-|  X   x     fragments  normal-(  y  normal-)    P   fragments  normal-(  Y   y  normal-|  X   x  normal-)      1  2      1  œÄ      y      1   superscript  x  2        F_{Y|X=x}(y)=\mathbb{P}(Y\leq y|X=x)=\frac{1}{2}+\frac{1}{\pi}\arcsin\frac{y}{%
 \sqrt{1-x^{2}}}   which is an instance of the law of total expectation E ( E ( Y | X ) ) = E ( Y ).  The random variable E(| Z | | X ) is the best predictor of | Z | given X . That is, it minimizes the mean square error E ( | Z | - f ( X ) ) 2 on the class of all random variables of the form f ( X ). Similarly to the discrete case, E ( | Z | | g ( X ) ) = E ( | Z | | X ) for every measurable function g that is one-to-one on (-1,1).  Conditional distribution  Given X = x, the conditional distribution of Y , given by the density f Y | X = x (y), is the (rescaled) arcsin distribution; its cumulative distribution function is      0.75      0.75    \sqrt{0.75}   for all x and y such that x 2 + y 2 \begin{align} & \int_{-\infty}^{+\infty} f_{Y|X=x} (y) f_X(x) \, \mathrm{d}x = f_Y(y), \\ & \int_{-\infty}^{+\infty} F_{Y|X=x} (y) f_X(x) \, \mathrm{d}x = F_Y(y), \end{align}  the latter being the instance of the law of total probability mentioned above .  What conditioning is not  On the discrete level conditioning is possible only if the condition is of nonzero probability (one cannot divide by zero). On the level of densities, conditioning on X = x is possible even though P ( X = x ) = 0. This success may create the illusion that conditioning is always possible. Regretfully, it is not, for several reasons presented below.  Geometric intuition: caution  The result P ( Y ‚â§ 0.75 | X = 0.5 ) = 5/6, mentioned above, is geometrically evident in the following sense. The points ( x , y , z ) of the sphere x 2 + y 2 + z 2 = 1, satisfying the condition x = 0.5, are a circle y 2 + z 2 = 0.75 of radius    ‚Ñô   (  A  |  B  )   =  ‚Ñô   (  A  ‚à©  B  )   /  ‚Ñô   (  B  )      fragments  P   fragments  normal-(  A  normal-|  B  normal-)    P   fragments  normal-(  A   B  normal-)    P   fragments  normal-(  B  normal-)     \textstyle\mathbb{P}(A|B)=\mathbb{P}(A\cap B)/\mathbb{P}(B)   on the plane x = 0.5. The inequality y ‚â§ 0.75 holds on an arc. The length of the arc is 5/6 of the length of the circle, which is why the conditional probability is equal to 5/6.  This successful geometric explanation may create the illusion that the following question is trivial.   A point of a given sphere is chosen at random (uniformly). Given that the point lies on a given plane, what is its conditional distribution?   It may seem evident that the conditional distribution must be uniform on the given circle (the intersection of the given sphere and the given plane). Sometimes it really is, but in general it is not. Especially, Z is distributed uniformly on (-1,+1) and independent of the ratio Y / X , thus, P ( Z ‚â§ 0.5 | Y / X ) = 0.75. On the other hand, the inequality z ‚â§ 0.5 holds on an arc of the circle x 2 + y 2 + z 2 = 1, y = cx (for any given c ). The length of the arc is 2/3 of the length of the circle. However, the conditional probability is 3/4, not 2/3. This is a manifestation of the classical Borel paradox. 4 5   Another example. A random rotation of the three-dimensional space is a rotation by a random angle around a random axis. Geometric intuition suggests that the angle is independent of the axis and distributed uniformly. However, the latter is wrong; small values of the angle are less probable.  The limiting procedure  Given an event B of zero probability, the formula    ‚Ñô   (  A  |  B  )   =   lim   n  ‚Üí  ‚àû    ‚Ñô   (  A  ‚à©   B  n   )   /  ‚Ñô   (   B  n   )      fragments  P   fragments  normal-(  A  normal-|  B  normal-)     subscript    normal-‚Üí  n     P   fragments  normal-(  A    subscript  B  n   normal-)    P   fragments  normal-(   subscript  B  n   normal-)     \textstyle\mathbb{P}(A|B)=\lim_{n\to\infty}\mathbb{P}(A\cap B_{n})/\mathbb{P}(%
 B_{n})   is useless, however, one can try     B  1   ‚äÉ   B  2   ‚äÉ  ‚Ä¶       superset-of   subscript  B  1    subscript  B  2     superset-of    normal-‚Ä¶     \textstyle B_{1}\supset B_{2}\supset\dots   for an appropriate sequence of events B n of nonzero probability such that B n ‚Üì B (that is,      B  1   ‚à©   B  2   ‚à©  ‚Ä¶   =  B         subscript  B  1    subscript  B  2   normal-‚Ä¶   B    \textstyle B_{1}\cap B_{2}\cap\dots=B   and      f  1    (  y  )    =   {      3  y        for  0   ‚â§  y  ‚â§   1  /  3    ,        1.5   (   1  -  y   )          for  1   /  3   ‚â§  y  ‚â§   2  /  3    ,       0.5        for  2   /  3   ‚â§  y  ‚â§  1   ,              subscript  f  1   y    cases    3  y         for  0   y         1  3       1.5    1  y            for  1   3   y         2  3     0.5          for  2   3   y       1       f_{1}(y)=\begin{cases}3y&\text{for }0\leq y\leq 1/3,\\
 1.5(1-y)&\text{for }1/3\leq y\leq 2/3,\\
 0.5&\text{for }2/3\leq y\leq 1,\end{cases}   ). One example is given above . Two more examples are Brownian bridge and Brownian excursion .  In the latter two examples the law of total probability is irrelevant, since only a single event (the condition) is given. By contrast, in the example above the law of total probability applies , since the event X = 0.5 is included into a family of events X = x where x runs over (‚àí1,1), and these events are a partition of the probability space.  In order to avoid paradoxes (such as the Borel's paradox ), the following important distinction should be taken into account. If a given event is of nonzero probability then conditioning on it is well-defined (irrespective of any other events), as was noted above . By contrast, if the given event is of zero probability then conditioning on it is ill-defined unless some additional input is provided. Wrong choice of this additional input leads to wrong conditional probabilities (expectations, distributions). In this sense, " the concept of a conditional probability with regard to an isolated hypothesis whose probability equals 0 is inadmissible. " ( Kolmogorov ; quoted in 6 ).  The additional input may be (a) a symmetry (invariance group); (b) a sequence of events B n such that B n ‚Üì B , P ( B n ) > 0; (c) a partition containing the given event. Measure-theoretic conditioning (below) investigates Case (c), discloses its relation to (b) in general and to (a) when applicable.  Some events of zero probability are beyond the reach of conditioning. An example: let X n be independent random variables distributed uniformly on (0,1), and B the event " X n ‚Üí 0 as n ‚Üí ‚àû"; what about P ( X n   Conditioning on the level of measure theory  Example. Let Y be a random variable distributed uniformly on (0,1), and X = f ( Y ) where f is a given function. Two cases are treated below: f = f 1 and f = f 2 , where f 1 is the continuous piecewise-linear function      I  =   {     1       if  Y   ‚â§   1  /  3    ,       0     otherwise  ,           I   cases  1      if  Y     1  3    0  otherwise     I=\begin{cases}1&\text{if }Y\leq 1/3,\\
 0&\text{otherwise},\end{cases}   and f 2 is the Weierstrass function .  Geometric intuition: caution  Given X = 0.75, two values of Y are possible, 0.25 and 0.5. It may seem evident that both values are of conditional probability 0.5 just because one point is congruent to another point. However, this is an illusion; see below.  Conditional probability  The conditional probability P ( Y ‚â§ 1/3 | X ) may be defined as the best predictor of the indicator      ùîº    (   I  -   g   (  X  )     )   2       ùîº   superscript    I    g  X    2     \displaystyle\mathbb{E}(I-g(X))^{2}   given X . That is, it minimizes the mean square error E ( I - g ( X ) ) 2 on the class of all random variables of the form g ( X ).  In the case f = f 1 the corresponding function g = g 1 may be calculated explicitly, Proof:        g  1    (  x  )    =   {     1       for  0   <  x  <  0.5   ,       0       for  x   =  0.5   ,        1  /  3       for  0.5   <  x  <  1.              subscript  g  1   x    cases  1        for  0   x       0.5    0      for  x   0.5     1  3         for  0.5   x       1.       g_{1}(x)=\begin{cases}1&\text{for }0   it remains to note that (1‚àí a ) 2 + 2 a 2 is minimal at a = 1/3.       g  1    (  x  )   =   lim   Œµ  ‚Üí   0  +     ‚Ñô   (  Y  ‚â§  1  /  3  |  x  -  Œµ  ‚â§  X  ‚â§  x  +  Œµ  )   ,     fragments   subscript  g  1    fragments  normal-(  x  normal-)     subscript    normal-‚Üí  Œµ   limit-from  0      P   fragments  normal-(  Y   1   3  normal-|  x   Œµ   X   x   Œµ  normal-)   normal-,    g_{1}(x)=\lim_{\varepsilon\to 0+}\mathbb{P}(Y\leq 1/3|x-\varepsilon\leq X\leq x%
 +\varepsilon)\,,     Alternatively, the limiting procedure may be used,      1  ‚ãÖ  ‚Ñô   (  X  <  0.5  )   +  0  ‚ãÖ  ‚Ñô   (  X  =  0.5  )   +   1  3   ‚ãÖ  ‚Ñô   (  X  >  0.5  )   =  1  ‚ãÖ   1  6   +  0  ‚ãÖ   1  3   +   1  3   ‚ãÖ   (   1  6   +   1  3   )   =   1  3   ,     fragments  1  normal-‚ãÖ  P   fragments  normal-(  X   0.5  normal-)    0  normal-‚ãÖ  P   fragments  normal-(  X   0.5  normal-)      1  3   normal-‚ãÖ  P   fragments  normal-(  X   0.5  normal-)    1  normal-‚ãÖ    1  6    0  normal-‚ãÖ    1  3      1  3   normal-‚ãÖ   fragments  normal-(    1  6      1  3   normal-)      1  3   normal-,    1\cdot\mathbb{P}(X<0.5)+0\cdot\mathbb{P}(X=0.5)+\frac{1}{3}\cdot\mathbb{P}(X>0%
 .5)=1\cdot\frac{1}{6}+0\cdot\frac{1}{3}+\frac{1}{3}\cdot\left(\frac{1}{6}+%
 \frac{1}{3}\right)=\frac{1}{3},   giving the same result.  Thus, P ( Y ‚â§ 1/3 | X ) = g 1 ( X ). The expectation of this random variable is equal to the (unconditional) probability, E ( P ( Y ‚â§ 1/3 | X ) ) = P ( Y ‚â§ 1/3 ), namely,         ‚à´  0  1     g  2    (    f  2    (  y  )    )   d  y    =    1  3     .        superscript   subscript   0   1      subscript  g  2      subscript  f  2   y   normal-d  y      1  3     \int_{0}^{1}g_{2}(f_{2}(y))\,\mathrm{d}y=\tfrac{1}{3}.   which is an instance of the law of total probability E ( P ( A | X ) ) = P ( A ).  In the case f = f 2 the corresponding function g = g 2 probably cannot be calculated explicitly. Nevertheless it exists, and can be computed numerically. Indeed, the space L 2 (Œ©) of all square integrable random variables is a Hilbert space ; the indicator I is a vector of this space; and random variables of the form g ( X ) are a (closed, linear) subspace. The orthogonal projection of this vector to this subspace is well-defined. It can be computed numerically, using finite-dimensional approximations to the infinite-dimensional Hilbert space.  Once again, the expectation of the random variable P ( Y ‚â§ 1/3 | X ) = g 2 ( X ) is equal to the (unconditional) probability, E ( P ( Y ‚â§ 1/3 | X ) ) = P ( Y ‚â§ 1/3 ), namely,       g  =    d  ŒΩ    d  Œº     ,      g      normal-d  ŒΩ     normal-d  Œº      g=\frac{\mathrm{d}\nu}{\mathrm{d}\mu},     However, the Hilbert space approach treats g 2 as an equivalence class of functions rather than an individual function. Measurability of g 2 is ensured, but continuity (or even Riemann integrability ) is not. The value g 2 (0.5) is determined uniquely, since the point 0.5 is an atom of the distribution of X . Other values x are not atoms, thus, corresponding values g 2 ( x ) are not determined uniquely. Once again, " the concept of a conditional probability with regard to an isolated hypothesis whose probability equals 0 is inadmissible. " ( Kolmogorov ; quoted in 7 ).  Alternatively, the same function g (be it g 1 or g 2 ) may be defined as the Radon‚ÄìNikodym derivative      Œº   (  B  )       Œº  B    \displaystyle\mu(B)   where measures Œº, ŒΩ are defined by       B  ‚äÇ  ‚Ñù   .      B  ‚Ñù    B\subset\mathbb{R}.   for all Borel sets    ŒΩ   (  B  )   =  ‚Ñô   (  X  ‚àà  B  |  Y  ‚â§    1  3    )   ‚Ñô   (  Y  ‚â§    1  3    )   =    1  3    ‚Ñô   (  X  ‚àà  B  |  Y  ‚â§    1  3    )   .     fragments  ŒΩ   fragments  normal-(  B  normal-)    P   fragments  normal-(  X   B  normal-|  Y     1  3   normal-)   P   fragments  normal-(  Y     1  3   normal-)      1  3   P   fragments  normal-(  X   B  normal-|  Y     1  3   normal-)   normal-.    \nu(B)=\mathbb{P}(X\in B|Y\leq\tfrac{1}{3})\mathbb{P}(Y\leq\tfrac{1}{3})=%
 \tfrac{1}{3}\mathbb{P}(X\in B|Y\leq\tfrac{1}{3}).   That is, Œº is the (unconditional) distribution of X , while ŒΩ is one third of its conditional distribution,      ùîº    (   Y  -    h  1    (  X  )     )   2       ùîº   superscript    Y     subscript  h  1   X    2     \displaystyle\mathbb{E}(Y-h_{1}(X))^{2}     Both approaches (via the Hilbert space, and via the Radon‚ÄìNikodym derivative) treat g as an equivalence class of functions; two functions g and g‚Ä≤ are treated as equivalent, if g ( X ) = g‚Ä≤ ( X ) almost surely. Accordingly, the conditional probability P ( Y ‚â§ 1/3 | X ) is treated as an equivalence class of random variables; as usual, two random variables are treated as equivalent if they are equal almost surely.  Conditional expectation  The conditional expectation E ( Y | X ) may be defined as the best predictor of Y given X . That is, it minimizes the mean square error E ( Y - h ( X ) ) 2 on the class of all random variables of the form h ( X ).  In the case f = f 1 the corresponding function h = h 1 may be calculated explicitly, Proof:        (   a  -   x  3    )   2   +   2    (    a  -  1   +    2  x   3    )   2         superscript    a    x  3    2     2   superscript      a  1       2  x   3    2      \left(a-\frac{x}{3}\right)^{2}+2\left(a-1+\frac{2x}{3}\right)^{2}     it remains to note that       a  =    2  -  x   3    ,      a      2  x   3     a=\frac{2-x}{3},   is minimal at      1  3    a  2    -    5  9   a           1  3    superscript  a  2        5  9   a     \frac{1}{3}a^{2}-\frac{5}{9}a   and     a  =   5  6    .      a    5  6     a=\tfrac{5}{6}.   is minimal at      h  1    (  x  )    =   {      x  /  3        for  0   <  x  <  0.5   ,        5  /  6        for  x   =  0.5   ,         (   2  -  x   )   /  3        for  0.5   <  x  <  1   ,              subscript  h  1   x    cases    x  3         for  0   x       0.5      5  6       for  x   0.5       2  x   3         for  0.5   x       1       h_{1}(x)=\begin{cases}x/3&\text{for }0          h  1    (  x  )   =   lim   Œµ  ‚Üí   0  +     ùîº   (  Y  |  x  -  Œµ  ‚â§  X  ‚â§  x  +  Œµ  )   ,     fragments   subscript  h  1    fragments  normal-(  x  normal-)     subscript    normal-‚Üí  Œµ   limit-from  0      E   fragments  normal-(  Y  normal-|  x   Œµ   X   x   Œµ  normal-)   normal-,    h_{1}(x)=\lim_{\varepsilon\to 0+}\mathbb{E}(Y|x-\varepsilon\leq X\leq x+%
 \varepsilon),     Alternatively, the limiting procedure may be used,         ‚à´  0  1      h  1    (    f  1    (  y  )    )   d  y    =      ‚à´  0   1  /  6          3  y   3     d  y    +         superscript   subscript   0   1      subscript  h  1      subscript  f  1   y   normal-d  y     limit-from    superscript   subscript   0     1  6          3  y   3   normal-d  y        \displaystyle\int_{0}^{1}h_{1}(f_{1}(y))\,\mathrm{d}y=\int_{0}^{1/6}\frac{3y}{%
 3}\,\mathrm{d}y+   giving the same result.  Thus, E ( Y | X ) = h 1 ( X ). The expectation of this random variable is equal to the (unconditional) expectation, E ( E ( Y | X ) ) = E ( Y ), namely,       h  =     d  ŒΩ    d  Œº      ,      h      normal-d  ŒΩ     normal-d  Œº      h=\frac{\mathrm{d}\nu}{\mathrm{d}\mu}\,,   which is an instance of the law of total expectation E ( E ( Y | X ) ) = E ( Y ).  In the case f = f 2 the corresponding function h = h 2 probably cannot be calculated explicitly. Nevertheless it exists, and can be computed numerically in the same way as g 2 above, ‚Äî as the orthogonal projection in the Hilbert space. The law of total expectation holds, since the projection cannot change the scalar product by the constant 1 belonging to the subspace.  Alternatively, the same function h (be it h 1 or h 2 ) may be defined as the Radon‚ÄìNikodym derivative      Œº   (  B  )       Œº  B    \displaystyle\mu(B)   where measures Œº, ŒΩ are defined by       B  ‚äÇ  ‚Ñù   .      B  ‚Ñù    B\subset\mathbb{R}.   for all Borel sets     F   Y  |  X  =   3  4      (  y  )   =  ‚Ñô   (  Y  ‚â§  y  |  X  =    3  4    )   =   lim   Œµ  ‚Üí   0  +     ‚Ñô   (  Y  ‚â§  y  |    3  4    -  Œµ  ‚â§  X  ‚â§    3  4    +  Œµ  )   =   {     0       for  -  ‚àû   <  y  <    1  4     ,         1  6         for  y   =    1  4     ,         1  3         for    1  4     <  y  <    1  2     ,         2  3         for  y   =    1  2     ,       1       for    1  2     <  y  <  ‚àû   ,          fragments   subscript  F   fragments  Y  normal-|  X     3  4      fragments  normal-(  y  normal-)    P   fragments  normal-(  Y   y  normal-|  X     3  4   normal-)     subscript    normal-‚Üí  Œµ   superscript  0      P   fragments  normal-(  Y   y  normal-|    3  4    Œµ   X     3  4    Œµ  normal-)     cases  0        for    y         1  4       1  6       for  y     1  4      1  3         for    1  4    y         1  2       2  3       for  y     1  2    1        for    1  2    y             F_{Y|X=\frac{3}{4}}(y)=\mathbb{P}\left(Y\leq y|X=\tfrac{3}{4}\right)=\lim_{%
 \varepsilon\to 0^{+}}\mathbb{P}\left(Y\leq y|\tfrac{3}{4}-\varepsilon\leq X%
 \leq\tfrac{3}{4}+\varepsilon\right)=\begin{cases}0&\text{for }-\infty   Here E ( Y ; A ) is the restricted expectation, not to be confused with the conditional expectation E ( Y | A ) = E ( Y ; A ) / P ( A ).  Conditional distribution  In the case f = f 1 the conditional cumulative distribution function may be calculated explicitly, similarly to g 1 . The limiting procedure gives       F   Y  |  X  =   3  4      (  y  )   =  ‚Ñô   (  Y  ‚â§  y  |  X  =    3  4    )   =   {     0       for  -  ‚àû   <  y  <    1  4     ,         1  3         for    1  4     ‚â§  y  <    1  2     ,       1      for    1  2     ‚â§  y  <  ‚àû          fragments   subscript  F   fragments  Y  normal-|  X     3  4      fragments  normal-(  y  normal-)    P   fragments  normal-(  Y   y  normal-|  X     3  4   normal-)     cases  0        for    y         1  4       1  3         for    1  4    y         1  2     1        for    1  2    y             F_{Y|X=\frac{3}{4}}(y)=\mathbb{P}\left(Y\leq y|X=\tfrac{3}{4}\right)=\begin{%
 cases}0&\text{for }-\infty   which cannot be correct, since a cumulative distribution function must be right-continuous !  This paradoxical result is explained by measure theory as follows. For a given y the corresponding F Y | X = x ( y ) = P ( Y ‚â§ y | X = x ) is well-defined (via the Hilbert space or the Radon‚ÄìNikodym derivative) as an equivalence class of functions (of x ). Treated as a function of y for a given x it is ill-defined unless some additional input is provided. Namely, a function (of x ) must be chosen within every (or at least almost every) equivalence class. Wrong choice leads to wrong conditional cumulative distribution functions.  A right choice can be made as follows. First, F Y | X = x ( y ) = P ( Y ‚â§ y | X = x ) is considered for rational numbers y only. (Any other dense countable set may be used equally well.) Thus, only a countable set of equivalence classes is used; all choices of functions within these classes are mutually equivalent, and the corresponding function of rational y is well-defined (for almost every x ). Second, the function is extended from rational numbers to real numbers by right continuity.  In general the conditional distribution is defined for almost all x (according to the distribution of X ), but sometimes the result is continuous in x , in which case individual values are acceptable. In the considered example this is the case; the correct result for x = 0.75,  $$F_{Y|X=\frac{3}{4}} (y) = \mathbb{P} \left  ( Y \le y | X = \tfrac{3}{4} \right ) = \begin{cases}
  0 &\text{for } -\infty < y < \tfrac{1}{4},\\
 \tfrac{1}{3} &\text{for } \tfrac{1}{4}\le y < \tfrac{1}{2},\\
  1 &\text{for } \tfrac{1}{2} \le y < \infty
 \end{cases}$$ shows that the conditional distribution of Y given X = 0.75 consists of two atoms, at 0.25 and 0.5, of probabilities 1/3 and 2/3 respectively.  Similarly, the conditional distribution may be calculated for all x in (0, 0.5) or (0.5, 1).  The value x = 0.5 is an atom of the distribution of X , thus, the corresponding conditional distribution is well-defined and may be calculated by elementary means (the denominator does not vanish); the conditional distribution of Y given X = 0.5 is uniform on (2/3, 1). Measure theory leads to the same result.  The mixture of all conditional distributions is the (unconditional) distribution of Y .  The conditional expectation E ( Y | X = x ) is nothing but the expectation with respect to the conditional distribution.  In the case f = f 2 the corresponding F Y | X = x (y) = P( Y ‚â§ y | X = x ) probably cannot be calculated explicitly. For a given y it is well-defined (via the Hilbert space or the Radon‚ÄìNikodym derivative) as an equivalence class of functions (of x ). The right choice of functions within these equivalence classes may be made as above; it leads to correct conditional cumulative distribution functions, thus, conditional distributions. In general, conditional distributions need not be atomic or absolutely continuous (nor mixtures of both types). Probably, in the considered example they are singular (like the Cantor distribution ).  Once again, the mixture of all conditional distributions is the (unconditional) distribution, and the conditional expectation is the expectation with respect to the conditional distribution.  Technical details    See also   Conditional probability  Conditional expectation  Conditional probability distribution  Joint probability distribution  Borel's paradox  Regular conditional probability  Disintegration theorem  Law of total variance  Law of total cumulance   Notes    References      "  Category:Probability theory     n-sphere#Generating points on the surface of the n-ball ‚Ü©  wikibooks: Uniform Spherical Distribution ‚Ü©  Area#General formula ‚Ü©  ‚Ü©  ‚Ü©       