<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1153">Multi-commodity flow problem</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Multi-commodity flow problem</h1>
<hr/>

<p>The <strong>multi-commodity flow problem</strong> is a <a href="flow_network" title="wikilink">network flow</a> problem with multiple commodities (flow demands) between different source and sink nodes.</p>
<h2 id="definition">Definition</h2>

<p>Given a flow network 

<math display="inline" id="Multi-commodity_flow_problem:0">
 <semantics>
  <mrow>
   <mpadded lspace="1.7pt" width="+1.7pt">
    <mi>G</mi>
   </mpadded>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>V</mi>
    <mo>,</mo>
    <mi>E</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>G</ci>
    <interval closure="open">
     <ci>V</ci>
     <ci>E</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,G(V,E)
  </annotation>
 </semantics>
</math>

, where edge 

<math display="inline" id="Multi-commodity_flow_problem:1">
 <semantics>
  <mrow>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>u</mi>
    <mo>,</mo>
    <mi>v</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>∈</mo>
   <mi>E</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <interval closure="open">
     <ci>u</ci>
     <ci>v</ci>
    </interval>
    <ci>E</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (u,v)\in E
  </annotation>
 </semantics>
</math>

 has capacity 

<math display="inline" id="Multi-commodity_flow_problem:2">
 <semantics>
  <mrow>
   <mpadded lspace="1.7pt" width="+1.7pt">
    <mi>c</mi>
   </mpadded>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>u</mi>
    <mo>,</mo>
    <mi>v</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>c</ci>
    <interval closure="open">
     <ci>u</ci>
     <ci>v</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,c(u,v)
  </annotation>
 </semantics>
</math>

. There are 

<math display="inline" id="Multi-commodity_flow_problem:3">
 <semantics>
  <mpadded lspace="1.7pt" width="+1.7pt">
   <mi>k</mi>
  </mpadded>
  <annotation-xml encoding="MathML-Content">
   <ci>k</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,k
  </annotation>
 </semantics>
</math>

 commodities 

<math display="inline" id="Multi-commodity_flow_problem:4">
 <semantics>
  <mrow>
   <msub>
    <mi>K</mi>
    <mn>1</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>K</mi>
    <mn>2</mn>
   </msub>
   <mo>,</mo>
   <mi mathvariant="normal">…</mi>
   <mo>,</mo>
   <msub>
    <mi>K</mi>
    <mi>k</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>K</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>K</ci>
     <cn type="integer">2</cn>
    </apply>
    <ci>normal-…</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>K</ci>
     <ci>k</ci>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   K_{1},K_{2},\dots,K_{k}
  </annotation>
 </semantics>
</math>

, defined by 

<math display="inline" id="Multi-commodity_flow_problem:5">
 <semantics>
  <mrow>
   <msub>
    <mpadded lspace="1.7pt" width="+1.7pt">
     <mi>K</mi>
    </mpadded>
    <mi>i</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>s</mi>
     <mi>i</mi>
    </msub>
    <mo>,</mo>
    <msub>
     <mi>t</mi>
     <mi>i</mi>
    </msub>
    <mo>,</mo>
    <msub>
     <mi>d</mi>
     <mi>i</mi>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>K</ci>
     <ci>i</ci>
    </apply>
    <vector>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>s</ci>
      <ci>i</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>t</ci>
      <ci>i</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>d</ci>
      <ci>i</ci>
     </apply>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,K_{i}=(s_{i},t_{i},d_{i})
  </annotation>
 </semantics>
</math>

, where 

<math display="inline" id="Multi-commodity_flow_problem:6">
 <semantics>
  <msub>
   <mpadded lspace="1.7pt" width="+1.7pt">
    <mi>s</mi>
   </mpadded>
   <mi>i</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>s</ci>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,s_{i}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Multi-commodity_flow_problem:7">
 <semantics>
  <msub>
   <mpadded lspace="1.7pt" width="+1.7pt">
    <mi>t</mi>
   </mpadded>
   <mi>i</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>t</ci>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,t_{i}
  </annotation>
 </semantics>
</math>

 is the <strong>source</strong> and <strong>sink</strong> of commodity 

<math display="inline" id="Multi-commodity_flow_problem:8">
 <semantics>
  <mpadded lspace="1.7pt" width="+1.7pt">
   <mi>i</mi>
  </mpadded>
  <annotation-xml encoding="MathML-Content">
   <ci>i</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,i
  </annotation>
 </semantics>
</math>

, and 

<math display="inline" id="Multi-commodity_flow_problem:9">
 <semantics>
  <msub>
   <mpadded lspace="1.7pt" width="+1.7pt">
    <mi>d</mi>
   </mpadded>
   <mi>i</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>d</ci>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,d_{i}
  </annotation>
 </semantics>
</math>

 is the demand. The flow of commodity 

<math display="inline" id="Multi-commodity_flow_problem:10">
 <semantics>
  <mpadded lspace="1.7pt" width="+1.7pt">
   <mi>i</mi>
  </mpadded>
  <annotation-xml encoding="MathML-Content">
   <ci>i</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,i
  </annotation>
 </semantics>
</math>

 along edge 

<math display="inline" id="Multi-commodity_flow_problem:11">
 <semantics>
  <mrow>
   <mo lspace="4.2pt" stretchy="false">(</mo>
   <mi>u</mi>
   <mo>,</mo>
   <mi>v</mi>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <interval closure="open">
    <ci>u</ci>
    <ci>v</ci>
   </interval>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,(u,v)
  </annotation>
 </semantics>
</math>

 is 

<math display="inline" id="Multi-commodity_flow_problem:12">
 <semantics>
  <mrow>
   <msub>
    <mpadded lspace="1.7pt" width="+1.7pt">
     <mi>f</mi>
    </mpadded>
    <mi>i</mi>
   </msub>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>u</mi>
    <mo>,</mo>
    <mi>v</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <ci>i</ci>
    </apply>
    <interval closure="open">
     <ci>u</ci>
     <ci>v</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,f_{i}(u,v)
  </annotation>
 </semantics>
</math>

. Find an assignment of flow which satisfies the constraints:</p>
<dl>
<dd>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p><strong>Capacity constraints</strong>:</p></td>
<td style="text-align: left;">
<p>

<math display="inline" id="Multi-commodity_flow_problem:13">
 <semantics>
  <mrow>
   <mrow>
    <msubsup>
     <mo largeop="true" lspace="4.2pt" symmetric="true">∑</mo>
     <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mn>1</mn>
     </mrow>
     <mi>k</mi>
    </msubsup>
    <mrow>
     <msub>
      <mi>f</mi>
      <mi>i</mi>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>u</mi>
      <mo>,</mo>
      <mi>v</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>≤</mo>
   <mrow>
    <mi>c</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>u</mi>
     <mo>,</mo>
     <mi>v</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <leq></leq>
    <apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <eq></eq>
        <ci>i</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <ci>k</ci>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>f</ci>
       <ci>i</ci>
      </apply>
      <interval closure="open">
       <ci>u</ci>
       <ci>v</ci>
      </interval>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>c</ci>
     <interval closure="open">
      <ci>u</ci>
      <ci>v</ci>
     </interval>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,\sum_{i=1}^{k}f_{i}(u,v)\leq c(u,v)
  </annotation>
 </semantics>
</math>

</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p><strong>Flow conservation</strong>:</p></td>
<td style="text-align: left;">
<p>

<math display="inline" id="Multi-commodity_flow_problem:14">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mo largeop="true" lspace="4.2pt" symmetric="true">∑</mo>
      <mrow>
       <mi>w</mi>
       <mo>∈</mo>
       <mi>V</mi>
      </mrow>
     </msub>
     <mrow>
      <msub>
       <mi>f</mi>
       <mi>i</mi>
      </msub>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>u</mi>
       <mo>,</mo>
       <mi>w</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mn>0</mn>
     <mi>when</mi>
    </mrow>
   </mrow>
   <mrow>
    <mi>u</mi>
    <mo>≠</mo>
    <mrow>
     <msub>
      <mi>s</mi>
      <mi>i</mi>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>t</mi>
      <mi>i</mi>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <in></in>
        <ci>w</ci>
        <ci>V</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>f</ci>
        <ci>i</ci>
       </apply>
       <interval closure="open">
        <ci>u</ci>
        <ci>w</ci>
       </interval>
      </apply>
     </apply>
     <list>
      <cn type="integer">0</cn>
      <ci>when</ci>
     </list>
    </apply>
    <apply>
     <neq></neq>
     <ci>u</ci>
     <list>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>s</ci>
       <ci>i</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>t</ci>
       <ci>i</ci>
      </apply>
     </list>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,\sum_{w\in V}f_{i}(u,w)=0\quad\mathrm{when}\quad u\neq s_{i},t_{i}
  </annotation>
 </semantics>
</math>

</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">
<p>

<math display="inline" id="Multi-commodity_flow_problem:15">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo lspace="4.2pt">∀</mo>
     <mi>v</mi>
    </mrow>
    <mo>,</mo>
    <mi>u</mi>
    <mo rspace="4.2pt">,</mo>
    <mrow>
     <msub>
      <mi>f</mi>
      <mi>i</mi>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>u</mi>
      <mo>,</mo>
      <mi>v</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo>-</mo>
    <mrow>
     <msub>
      <mi>f</mi>
      <mi>i</mi>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>v</mi>
      <mo>,</mo>
      <mi>u</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <list>
     <apply>
      <csymbol cd="latexml">for-all</csymbol>
      <ci>v</ci>
     </apply>
     <ci>u</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>f</ci>
       <ci>i</ci>
      </apply>
      <interval closure="open">
       <ci>u</ci>
       <ci>v</ci>
      </interval>
     </apply>
    </list>
    <apply>
     <minus></minus>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>f</ci>
       <ci>i</ci>
      </apply>
      <interval closure="open">
       <ci>v</ci>
       <ci>u</ci>
      </interval>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,\forall v,u,\,f_{i}(u,v)=-f_{i}(v,u)
  </annotation>
 </semantics>
</math>

</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p><strong>Demand satisfaction</strong>:</p></td>
<td style="text-align: left;">
<p>

<math display="inline" id="Multi-commodity_flow_problem:16">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mo largeop="true" lspace="4.2pt" symmetric="true">∑</mo>
     <mrow>
      <mi>w</mi>
      <mo>∈</mo>
      <mi>V</mi>
     </mrow>
    </msub>
    <mrow>
     <msub>
      <mi>f</mi>
      <mi>i</mi>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <msub>
       <mi>s</mi>
       <mi>i</mi>
      </msub>
      <mo>,</mo>
      <mi>w</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mo largeop="true" symmetric="true">∑</mo>
     <mrow>
      <mi>w</mi>
      <mo>∈</mo>
      <mi>V</mi>
     </mrow>
    </msub>
    <mrow>
     <msub>
      <mi>f</mi>
      <mi>i</mi>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>w</mi>
      <mo>,</mo>
      <msub>
       <mi>t</mi>
       <mi>i</mi>
      </msub>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>=</mo>
   <msub>
    <mi>d</mi>
    <mi>i</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <in></in>
        <ci>w</ci>
        <ci>V</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>f</ci>
        <ci>i</ci>
       </apply>
       <interval closure="open">
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>s</ci>
         <ci>i</ci>
        </apply>
        <ci>w</ci>
       </interval>
      </apply>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <in></in>
        <ci>w</ci>
        <ci>V</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>f</ci>
        <ci>i</ci>
       </apply>
       <interval closure="open">
        <ci>w</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>t</ci>
         <ci>i</ci>
        </apply>
       </interval>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>d</ci>
      <ci>i</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,\sum_{w\in V}f_{i}(s_{i},w)=\sum_{w\in V}f_{i}(w,t_{i})=d_{i}
  </annotation>
 </semantics>
</math>

</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>

<p>In the <strong>minimum cost multi-commodity flow problem</strong>, there is a cost 

<math display="inline" id="Multi-commodity_flow_problem:17">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>a</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>u</mi>
      <mo>,</mo>
      <mi>v</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>⋅</mo>
    <mi>f</mi>
   </mrow>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>u</mi>
    <mo>,</mo>
    <mi>v</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <ci>normal-⋅</ci>
     <apply>
      <times></times>
      <ci>a</ci>
      <interval closure="open">
       <ci>u</ci>
       <ci>v</ci>
      </interval>
     </apply>
     <ci>f</ci>
    </apply>
    <interval closure="open">
     <ci>u</ci>
     <ci>v</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a(u,v)\cdot f(u,v)
  </annotation>
 </semantics>
</math>

 for sending flow on 

<math display="inline" id="Multi-commodity_flow_problem:18">
 <semantics>
  <mrow>
   <mo lspace="4.2pt" stretchy="false">(</mo>
   <mi>u</mi>
   <mo>,</mo>
   <mi>v</mi>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <interval closure="open">
    <ci>u</ci>
    <ci>v</ci>
   </interval>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \,(u,v)
  </annotation>
 </semantics>
</math>

. You then need to minimize</p>

<p>

<math display="block" id="Multi-commodity_flow_problem:19">
 <semantics>
  <mrow>
   <munder>
    <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
    <mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>u</mi>
      <mo>,</mo>
      <mi>v</mi>
      <mo stretchy="false">)</mo>
     </mrow>
     <mo>∈</mo>
     <mi>E</mi>
    </mrow>
   </munder>
   <mrow>
    <mo>(</mo>
    <mrow>
     <mi>a</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>u</mi>
      <mo>,</mo>
      <mi>v</mi>
      <mo stretchy="false">)</mo>
     </mrow>
     <mrow>
      <munderover>
       <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
       <mrow>
        <mi>i</mi>
        <mo>=</mo>
        <mn>1</mn>
       </mrow>
       <mi>k</mi>
      </munderover>
      <mrow>
       <msub>
        <mi>f</mi>
        <mi>i</mi>
       </msub>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>u</mi>
        <mo>,</mo>
        <mi>v</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
    </mrow>
    <mo>)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <sum></sum>
     <apply>
      <in></in>
      <interval closure="open">
       <ci>u</ci>
       <ci>v</ci>
      </interval>
      <ci>E</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>a</ci>
     <interval closure="open">
      <ci>u</ci>
      <ci>v</ci>
     </interval>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>i</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>k</ci>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>f</ci>
        <ci>i</ci>
       </apply>
       <interval closure="open">
        <ci>u</ci>
        <ci>v</ci>
       </interval>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sum_{(u,v)\in E}\left(a(u,v)\sum_{i=1}^{k}f_{i}(u,v)\right)
  </annotation>
 </semantics>
</math>

</p>

<p>In the <strong>maximum multi-commodity flow problem</strong>, there are no hard demands on each commodity, but the total throughput is maximised:</p>

<p>

<math display="block" id="Multi-commodity_flow_problem:20">
 <semantics>
  <mrow>
   <munderover>
    <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
    <mrow>
     <mi>i</mi>
     <mo>=</mo>
     <mn>1</mn>
    </mrow>
    <mi>k</mi>
   </munderover>
   <mrow>
    <munder>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mrow>
      <mi>w</mi>
      <mo>∈</mo>
      <mi>V</mi>
     </mrow>
    </munder>
    <mrow>
     <msub>
      <mi>f</mi>
      <mi>i</mi>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <msub>
       <mi>s</mi>
       <mi>i</mi>
      </msub>
      <mo>,</mo>
      <mi>w</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <eq></eq>
       <ci>i</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>k</ci>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <in></in>
       <ci>w</ci>
       <ci>V</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>f</ci>
       <ci>i</ci>
      </apply>
      <interval closure="open">
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>s</ci>
        <ci>i</ci>
       </apply>
       <ci>w</ci>
      </interval>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sum_{i=1}^{k}\sum_{w\in V}f_{i}(s_{i},w)
  </annotation>
 </semantics>
</math>

</p>

<p>In the <strong>maximum concurrent flow problem</strong>, the task is to maximise the minimal fraction of the flow of each commodity to its demand:</p>

<p>

<math display="block" id="Multi-commodity_flow_problem:21">
 <semantics>
  <mrow>
   <munder>
    <mi>min</mi>
    <mrow>
     <mn>1</mn>
     <mo>≤</mo>
     <mi>i</mi>
     <mo>≤</mo>
     <mi>k</mi>
    </mrow>
   </munder>
   <mfrac>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">∑</mo>
      <mrow>
       <mi>w</mi>
       <mo>∈</mo>
       <mi>V</mi>
      </mrow>
     </msub>
     <mrow>
      <msub>
       <mi>f</mi>
       <mi>i</mi>
      </msub>
      <mrow>
       <mo stretchy="false">(</mo>
       <msub>
        <mi>s</mi>
        <mi>i</mi>
       </msub>
       <mo>,</mo>
       <mi>w</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
    <msub>
     <mi>d</mi>
     <mi>i</mi>
    </msub>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <min></min>
     <apply>
      <and></and>
      <apply>
       <leq></leq>
       <cn type="integer">1</cn>
       <ci>i</ci>
      </apply>
      <apply>
       <leq></leq>
       <share href="#.cmml">
       </share>
       <ci>k</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <divide></divide>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <in></in>
        <ci>w</ci>
        <ci>V</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>f</ci>
        <ci>i</ci>
       </apply>
       <interval closure="open">
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>s</ci>
         <ci>i</ci>
        </apply>
        <ci>w</ci>
       </interval>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>d</ci>
      <ci>i</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \min_{1\leq i\leq k}\frac{\sum_{w\in V}f_{i}(s_{i},w)}{d_{i}}
  </annotation>
 </semantics>
</math>

</p>
<h2 id="relation-to-other-problems">Relation to other problems</h2>

<p>The minimum cost variant is a generalisation of the <a href="minimum_cost_flow_problem" title="wikilink">minimum cost flow problem</a>. Variants of the <a href="circulation_problem" title="wikilink">circulation problem</a> are generalisations of all flow problems.</p>
<h2 id="usage">Usage</h2>

<p><a href="Routing_and_wavelength_assignment" title="wikilink">Routing and wavelength assignment</a> (RWA) in <a href="optical_burst_switching" title="wikilink">optical burst switching</a> of <a href="SONET" title="wikilink">Optical Network</a> would be approached via multi-commodity flow formulas.</p>
<h2 id="solutions">Solutions</h2>

<p>In the decision version of problems, the problem of producing an integer flow satisfying all demands is <a class="uri" href="NP-complete" title="wikilink">NP-complete</a>,<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> even for only two commodities and unit capacities (making the problem <a href="strongly_NP-complete" title="wikilink">strongly NP-complete</a> in this case).</p>

<p>If fractional flows are allowed, the problem can be solved in polynomial time through <a href="linear_programming" title="wikilink">linear programming</a>.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> Or through (typically much faster) <a href="fully_polynomial_time_approximation_scheme" title="wikilink">fully polynomial time approximation schemes</a>.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a></p>
<h2 id="external-resources">External resources</h2>
<ul>
<li>Papers by Clifford Stein about this problem: <a class="uri" href="http://www.columbia.edu/~cs2035/papers/#mcf">http://www.columbia.edu/~cs2035/papers/#mcf</a></li>
<li>Software solving the problem: <a class="uri" href="http://typo.zib.de/opt-long_projects/Software/Mcf/">http://typo.zib.de/opt-long_projects/Software/Mcf/</a></li>
</ul>
<h2 id="references">References</h2>
<references>
</references>

<p>"</p>

<p><a href="Category:Network_flow" title="wikilink">Category:Network flow</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2"><a href="#fnref2">↩</a></li>
<li id="fn3"><a href="#fnref3">↩</a></li>
</ol>
</section>
</body>
</html>
