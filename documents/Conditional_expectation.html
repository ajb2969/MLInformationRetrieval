<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="883">Conditional expectation</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Conditional expectation</h1>
<hr/>

<p>In <a href="probability_theory" title="wikilink">probability theory</a>, the <strong>conditional expectation</strong> of a <a href="random_variable" title="wikilink">random variable</a> is another random variable equal to the average of the former over each possible "condition". In the case when the random variable is defined over a discrete <a href="probability_space" title="wikilink">probability space</a>, the "conditions" are a <a href="partition_of_a_set" title="wikilink">partition</a> of this probability space. This definition is then generalized to any probability space using <a href="measure_theory" title="wikilink">measure theory</a>.</p>

<p>Conditional expectation is also known as <strong>conditional expected value</strong> or <strong>conditional mean</strong>.</p>

<p>In modern probability theory the concept of <a href="conditional_probability" title="wikilink">conditional probability</a> is defined in terms of conditional expectation.</p>
<h2 id="concept">Concept</h2>

<p>The concept of conditional probability can be nicely illustrated through the following example. Suppose we have daily rainfall data (mm of rain each day) collected by a weather station on every day of the ten year period from Jan 1, 1990 to Dec 31, 1999. The conditional expectation of daily rainfall knowing the month of the year is the average of daily rainfall over all days of the ten year period that fall in a given month. These data then may be considered either as a function of each day (so for example its value for Mar 3, 1992, would be the sum of daily rainfalls on all days that are in the month of March during the ten years, divided by the number of these days, which is 310) or as a function of just the month (so for example the value for March would be equal to the value of the previous example).</p>

<p>It is important to note the following.</p>
<ul>
<li>The conditional expectation of daily rainfall knowing that we are in a month of March of the given ten years is not a monthly rainfall data, that is it is not the average of the ten monthly total March rainfalls. That number would be 31 times higher.</li>
<li>The average daily rainfall in March 1992 is not equal to the conditional expectation of daily rainfall knowing that we are in a month of March of the given ten years, because we have restricted ourselves to 1992, that is we have more conditions than just that of being in March. This shows that reasoning as "we are in March 1992, so I know we are in March, so the average daily rainfall is the March average daily rainfall" is incorrect. Stated differently, although we use the expression "conditional expectation knowing that we are in March" this really means "conditional expectation knowing <strong>nothing other than</strong> that we are in March".</li>
</ul>
<h2 id="history">History</h2>

<p>The related concept of <a href="conditional_probability" title="wikilink">conditional probability</a> dates back at least to <a href="Pierre-Simon_Laplace" title="wikilink">Laplace</a> who calculated conditional distributions. It was <a href="Andrey_Nikolaevich_Kolmogorov" title="wikilink">Andrey Kolmogorov</a> who in 1933 formalized it using the <a href="Radon‚ÄìNikodym_theorem" title="wikilink">Radon‚ÄìNikodym theorem</a>.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> In works of <a href="Paul_Halmos" title="wikilink">Paul Halmos</a> 1950<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> and <a href="Joseph_L._Doob" title="wikilink">Joseph L. Doob</a> 1953<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> conditional expectation was generalized to its now usual definition using <a href="sigma-algebra" title="wikilink">sub-sigma-algebras</a>.<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></p>
<h2 id="classical-definition">Classical definition</h2>
<h3 id="conditional-expectation-with-respect-to-an-event">Conditional expectation with respect to an event</h3>

<p>In <a href="Classical_definition_of_probability" title="wikilink">classical probability theory</a> the <strong>conditional expectation</strong> of <em>X</em> given an event <em>H</em> (which may be the event <em>Y=y</em> for a random variable <em>Y</em>) is the average of <em>X</em> over all outcomes in <em>H</em>, that is</p>

<p>

<math display="block" id="Conditional_expectation:0">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi>H</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">‚àë</mo>
      <mrow>
       <mi>œâ</mi>
       <mo>‚àà</mo>
       <mi>H</mi>
      </mrow>
     </msub>
     <mrow>
      <mi>X</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>œâ</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
    <mrow>
     <mo stretchy="false">|</mo>
     <mi>H</mi>
     <mo stretchy="false">|</mo>
    </mrow>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-E</ci>
     <ci>X</ci>
     <ci>H</ci>
    </apply>
    <apply>
     <divide></divide>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <in></in>
        <ci>œâ</ci>
        <ci>H</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>X</ci>
       <ci>œâ</ci>
      </apply>
     </apply>
     <apply>
      <abs></abs>
      <ci>H</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid H)=\frac{\sum_{\omega\in H}X(\omega)}{|H|}
  </annotation>
 </semantics>
</math>

</p>

<p>The sum above can be grouped by different values of 

<math display="inline" id="Conditional_expectation:1">
 <semantics>
  <mrow>
   <mi>X</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>œâ</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>X</ci>
    <ci>œâ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle X(\omega)
  </annotation>
 </semantics>
</math>

, to get a sum over the <a href="Range_(mathematics)" title="wikilink">range</a> 

<math display="inline" id="Conditional_expectation:2">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ùí≥</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ùí≥</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{X}
  </annotation>
 </semantics>
</math>

 of <em>X</em></p>

<p>

<math display="block" id="Conditional_expectation:3">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi>H</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <munder>
     <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
     <mrow>
      <mi>x</mi>
      <mo>‚àà</mo>
      <mi class="ltx_font_mathcaligraphic">ùí≥</mi>
     </mrow>
    </munder>
    <mrow>
     <mpadded width="+1.7pt">
      <mi>x</mi>
     </mpadded>
     <mfrac>
      <mrow>
       <mo stretchy="false">|</mo>
       <mrow>
        <mo stretchy="false">{</mo>
        <mrow>
         <mi>œâ</mi>
         <mo>‚àà</mo>
         <mi>H</mi>
        </mrow>
        <mo>‚à£</mo>
        <mrow>
         <mrow>
          <mi>X</mi>
          <mrow>
           <mo stretchy="false">(</mo>
           <mi>œâ</mi>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
         <mo>=</mo>
         <mi>x</mi>
        </mrow>
        <mo stretchy="false">}</mo>
       </mrow>
       <mo stretchy="false">|</mo>
      </mrow>
      <mrow>
       <mo stretchy="false">|</mo>
       <mi>H</mi>
       <mo stretchy="false">|</mo>
      </mrow>
     </mfrac>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-E</ci>
     <ci>X</ci>
     <ci>H</ci>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <in></in>
       <ci>x</ci>
       <ci>ùí≥</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>x</ci>
      <apply>
       <divide></divide>
       <apply>
        <abs></abs>
        <apply>
         <csymbol cd="latexml">conditional-set</csymbol>
         <apply>
          <in></in>
          <ci>œâ</ci>
          <ci>H</ci>
         </apply>
         <apply>
          <eq></eq>
          <apply>
           <times></times>
           <ci>X</ci>
           <ci>œâ</ci>
          </apply>
          <ci>x</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <abs></abs>
        <ci>H</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid H)=\sum_{x\in\mathcal{X}}x\,\frac{|\{\omega\in H\mid X(%
\omega)=x\}|}{|H|}
  </annotation>
 </semantics>
</math>

</p>

<p>In modern probability theory, when <em>H</em> is an event with strictly positive probability, it is possible to give a similar formula. This is notably the case for a <a href="discrete_random_variable" title="wikilink">discrete random variable</a> <em>Y</em> and for <em>y</em> in the range of <em>Y</em> if the event <em>H</em> is <em>Y=y</em>. Let 

<math display="inline" id="Conditional_expectation:4">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mi mathvariant="normal">Œ©</mi>
   <mo>,</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
   <mo>,</mo>
   <mi>P</mi>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <vector>
    <ci>normal-Œ©</ci>
    <ci>‚Ñ±</ci>
    <ci>P</ci>
   </vector>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle(\Omega,\mathcal{F},P)
  </annotation>
 </semantics>
</math>

 be a probability space, <em>X</em> a random variable on that probability space, and 

<math display="inline" id="Conditional_expectation:5">
 <semantics>
  <mrow>
   <mi>H</mi>
   <mo>‚àà</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>H</ci>
    <ci>‚Ñ±</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle H\in\mathcal{F}
  </annotation>
 </semantics>
</math>

 an event with strictly positive probability 

<math display="inline" id="Conditional_expectation:6">
 <semantics>
  <mrow>
   <mrow>
    <mi>P</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>H</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>></mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <gt></gt>
    <apply>
     <times></times>
     <ci>P</ci>
     <ci>H</ci>
    </apply>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle P(H)>0
  </annotation>
 </semantics>
</math>

. Then the <strong>conditional expectation</strong> of <em>X</em> given the event <em>H</em> is</p>

<p>

<math display="block" id="Conditional_expectation:7">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo>E</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>X</mi>
      <mo>‚à£</mo>
      <mi>H</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mfrac>
     <mrow>
      <mo>E</mo>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <msub>
         <mn>1</mn>
         <mi>H</mi>
        </msub>
        <mi>X</mi>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mrow>
      <mo>P</mo>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>H</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mfrac>
    <mo>=</mo>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">‚à´</mo>
      <mrow>
       <mi>x</mi>
       <mo>‚àà</mo>
       <mi class="ltx_font_mathcaligraphic">ùí≥</mi>
      </mrow>
     </msub>
     <mrow>
      <mi>x</mi>
      <mrow>
       <mo>P</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mrow>
         <mi>d</mi>
         <mi>x</mi>
        </mrow>
        <mo>‚à£</mo>
        <mi>H</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <ci>normal-E</ci>
      <ci>X</ci>
      <ci>H</ci>
     </apply>
     <apply>
      <divide></divide>
      <apply>
       <ci>normal-E</ci>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <cn type="integer">1</cn>
         <ci>H</ci>
        </apply>
        <ci>X</ci>
       </apply>
      </apply>
      <apply>
       <ci>normal-P</ci>
       <ci>H</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <int></int>
       <apply>
        <in></in>
        <ci>x</ci>
        <ci>ùí≥</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>x</ci>
       <apply>
        <ci>normal-P</ci>
        <apply>
         <times></times>
         <ci>d</ci>
         <ci>x</ci>
        </apply>
        <ci>H</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid H)=\frac{\operatorname{E}(1_{H}X)}{\operatorname{P}(H)}%
=\int_{x\in\mathcal{X}}x\operatorname{P}(dx\mid H),
  </annotation>
 </semantics>
</math>

</p>

<p>where 

<math display="inline" id="Conditional_expectation:8">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ùí≥</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ùí≥</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{X}
  </annotation>
 </semantics>
</math>

 is the range of <em>X</em> and 

<math display="inline" id="Conditional_expectation:9">
 <semantics>
  <mrow>
   <mrow>
    <mo>P</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>A</mi>
     <mo>‚à£</mo>
     <mi>H</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <mo>P</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>A</mi>
       <mo>‚à©</mo>
       <mi>H</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mrow>
     <mo>P</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>H</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-P</ci>
     <ci>A</ci>
     <ci>H</ci>
    </apply>
    <apply>
     <divide></divide>
     <apply>
      <ci>normal-P</ci>
      <apply>
       <intersect></intersect>
       <ci>A</ci>
       <ci>H</ci>
      </apply>
     </apply>
     <apply>
      <ci>normal-P</ci>
      <ci>H</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{P}(A\mid H)=\frac{\operatorname{P}(A\cap H)}{\operatorname{P}(H)}
  </annotation>
 </semantics>
</math>

 is the conditional probability of <em>A</em> knowing <em>H</em>.</p>

<p>When <em>P</em>(<em>H</em>) = 0 (for instance if <em>Y</em> is a <a href="continuous_random_variable" title="wikilink">continuous random variable</a> and <em>H</em> is the event <em>Y=y</em>, this is in general the case), the <a href="Borel‚ÄìKolmogorov_paradox" title="wikilink">Borel‚ÄìKolmogorov paradox</a> demonstrates the ambiguity of attempting to define the conditional probability knowing the event <em>H</em>. The above formula shows that this problem transposes to the conditional expectation. So instead one only defines the conditional expectation with respect to a sigma-algebra or a random variable.</p>
<h3 id="conditional-expectation-with-respect-to-a-random-variable">Conditional expectation with respect to a random variable</h3>

<p>If <em>Y</em> is a discrete random variable with range 

<math display="inline" id="Conditional_expectation:10">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ùí¥</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ùí¥</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{Y}
  </annotation>
 </semantics>
</math>

, then we can define on 

<math display="inline" id="Conditional_expectation:11">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ùí¥</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ùí¥</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{Y}
  </annotation>
 </semantics>
</math>

 the function</p>

<p>

<math display="block" id="Conditional_expectation:12">
 <semantics>
  <mrow>
   <mrow>
    <mi>g</mi>
    <mo>:</mo>
    <mrow>
     <mi>y</mi>
     <mo>‚Ü¶</mo>
     <mrow>
      <mo>E</mo>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>X</mi>
       <mo>‚à£</mo>
       <mrow>
        <mi>Y</mi>
        <mo>=</mo>
        <mi>y</mi>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>g</ci>
    <apply>
     <csymbol cd="latexml">maps-to</csymbol>
     <ci>y</ci>
     <apply>
      <ci>normal-E</ci>
      <ci>X</ci>
      <apply>
       <eq></eq>
       <ci>Y</ci>
       <ci>y</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   g:y\mapsto\operatorname{E}(X\mid Y=y).
  </annotation>
 </semantics>
</math>

</p>

<p>Sometimes this function is called the conditional expectation of <em>X</em> with respect to <em>Y</em>. In fact, according to the modern definition, it is 

<math display="inline" id="Conditional_expectation:13">
 <semantics>
  <mrow>
   <mi>g</mi>
   <mo>‚àò</mo>
   <mi>Y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <compose></compose>
    <ci>g</ci>
    <ci>Y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle g\circ Y
  </annotation>
 </semantics>
</math>

 that is called the conditional expectation of <em>X</em> with respect to <em>Y</em>, so that we have</p>

<p>

<math display="block" id="Conditional_expectation:14">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo>E</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>X</mi>
      <mo>‚à£</mo>
      <mi>Y</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>:</mo>
    <mrow>
     <mi>œâ</mi>
     <mo>‚Ü¶</mo>
     <mrow>
      <mo>E</mo>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>X</mi>
       <mo>‚à£</mo>
       <mrow>
        <mi>Y</mi>
        <mo>=</mo>
        <mrow>
         <mi>Y</mi>
         <mrow>
          <mo stretchy="false">(</mo>
          <mi>œâ</mi>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <apply>
     <ci>normal-E</ci>
     <ci>X</ci>
     <ci>Y</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">maps-to</csymbol>
     <ci>œâ</ci>
     <apply>
      <ci>normal-E</ci>
      <ci>X</ci>
      <apply>
       <eq></eq>
       <ci>Y</ci>
       <apply>
        <times></times>
        <ci>Y</ci>
        <ci>œâ</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid Y):\omega\mapsto\operatorname{E}(X\mid Y=Y(\omega)).
  </annotation>
 </semantics>
</math>

</p>

<p>which is a random variable.</p>

<p>As mentioned above, if <em>Y</em> is a continuous random variable, it is not possible to define 

<math display="inline" id="Conditional_expectation:15">
 <semantics>
  <mrow>
   <mo>E</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi>Y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-E</ci>
    <ci>X</ci>
    <ci>Y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\operatorname{E}(X\mid Y)
  </annotation>
 </semantics>
</math>

 by this method. As explained in the <a href="Borel‚ÄìKolmogorov_paradox" title="wikilink">Borel‚ÄìKolmogorov paradox</a>, we have to specify what limiting procedure produces the set <em>Y</em>¬†=¬†<em>y</em>. This can be naturally done by defining the set 

<math display="inline" id="Conditional_expectation:16">
 <semantics>
  <mrow>
   <msubsup>
    <mi>H</mi>
    <mi>y</mi>
    <mi>œµ</mi>
   </msubsup>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">{</mo>
    <mi>œâ</mi>
    <mo>‚à£</mo>
    <mrow>
     <mrow>
      <mo>‚à•</mo>
      <mrow>
       <mrow>
        <mi>Y</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>œâ</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
       <mo>-</mo>
       <mi>y</mi>
      </mrow>
      <mo>‚à•</mo>
     </mrow>
     <mo><</mo>
     <mi>œµ</mi>
    </mrow>
    <mo stretchy="false">}</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>H</ci>
      <ci>y</ci>
     </apply>
     <ci>œµ</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">conditional-set</csymbol>
     <ci>œâ</ci>
     <apply>
      <lt></lt>
      <apply>
       <csymbol cd="latexml">norm</csymbol>
       <apply>
        <minus></minus>
        <apply>
         <times></times>
         <ci>Y</ci>
         <ci>œâ</ci>
        </apply>
        <ci>y</ci>
       </apply>
      </apply>
      <ci>œµ</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle H_{y}^{\epsilon}=\{\omega\mid\|Y(\omega)-y\|<\epsilon\}
  </annotation>
 </semantics>
</math>

, and taking the limit 

<math display="inline" id="Conditional_expectation:17">
 <semantics>
  <mrow>
   <mi>œµ</mi>
   <mo>‚Üí</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-‚Üí</ci>
    <ci>œµ</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\epsilon\to 0
  </annotation>
 </semantics>
</math>

, so that if 

<math display="inline" id="Conditional_expectation:18">
 <semantics>
  <mrow>
   <mrow>
    <mi>P</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <msubsup>
      <mi>H</mi>
      <mi>y</mi>
      <mi>œµ</mi>
     </msubsup>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>></mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <gt></gt>
    <apply>
     <times></times>
     <ci>P</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>H</ci>
       <ci>y</ci>
      </apply>
      <ci>œµ</ci>
     </apply>
    </apply>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle P(H_{y}^{\epsilon})>0
  </annotation>
 </semantics>
</math>

 for all 

<math display="inline" id="Conditional_expectation:19">
 <semantics>
  <mrow>
   <mi>œµ</mi>
   <mo>></mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <gt></gt>
    <ci>œµ</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\epsilon>0
  </annotation>
 </semantics>
</math>

, then</p>

<p>

<math display="block" id="Conditional_expectation:20">
 <semantics>
  <mrow>
   <mi>g</mi>
   <mo>:</mo>
   <mrow>
    <mi>y</mi>
    <mo>‚Ü¶</mo>
    <mrow>
     <munder>
      <mo movablelimits="false">lim</mo>
      <mrow>
       <mi>œµ</mi>
       <mo>‚Üí</mo>
       <mn>0</mn>
      </mrow>
     </munder>
     <mrow>
      <mo>E</mo>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>X</mi>
       <mo>‚à£</mo>
       <msubsup>
        <mi>H</mi>
        <mi>y</mi>
        <mi>Œµ</mi>
       </msubsup>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>g</ci>
    <apply>
     <csymbol cd="latexml">maps-to</csymbol>
     <ci>y</ci>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <limit></limit>
       <apply>
        <ci>normal-‚Üí</ci>
        <ci>œµ</ci>
        <cn type="integer">0</cn>
       </apply>
      </apply>
      <apply>
       <ci>normal-E</ci>
       <ci>X</ci>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>H</ci>
         <ci>y</ci>
        </apply>
        <ci>Œµ</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   g:y\mapsto\lim_{\epsilon\to 0}\operatorname{E}(X\mid H_{y}^{\varepsilon})
  </annotation>
 </semantics>
</math>

.</p>

<p>The modern definition is analogous to the above except that the above limiting process is replaced by the <a href="Radon‚ÄìNikodym_derivative" title="wikilink">Radon‚ÄìNikodym derivative</a>, so the result holds more generally.</p>
<h2 id="formal-definition">Formal definition</h2>
<h3 id="conditional-expectation-with-respect-to-a-œÉ-algebra">Conditional expectation with respect to a œÉ-algebra</h3>

<p>[[<a class="uri" href="File:LokaleMittelwertbildung.svg|thumb|upright=1.5">File:LokaleMittelwertbildung.svg|thumb|upright=1.5</a>|<strong>Conditional expectation with respect to a sigma-algebra:</strong> in this example the probability space 

<math display="inline" id="Conditional_expectation:21">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mi mathvariant="normal">Œ©</mi>
   <mo>,</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
   <mo>,</mo>
   <mo>P</mo>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <vector>
    <ci>normal-Œ©</ci>
    <ci>‚Ñ±</ci>
    <ci>normal-P</ci>
   </vector>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle(\Omega,\mathcal{F},\operatorname{P})
  </annotation>
 </semantics>
</math>

 is the [0,1] interval with the <a href="Lebesgue_measure" title="wikilink">Lebesgue measure</a>. We define the following œÉ-algebras

<math display="block" id="Conditional_expectation:22">
 <semantics>
  <mrow>
   <mi class="ltx_font_mathcaligraphic">ùíú</mi>
   <mo>=</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>ùíú</ci>
    <ci>‚Ñ±</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{A}=\mathcal{F}
  </annotation>
 </semantics>
</math>

 while 

<math display="inline" id="Conditional_expectation:23">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñ¨</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñ¨</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{B}
  </annotation>
 </semantics>
</math>

 is the œÉ-algebra generated by the intervals with end-points 0, ¬º, ¬Ω, ¬æ, 1 and 

<math display="inline" id="Conditional_expectation:24">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ùíû</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ùíû</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{C}
  </annotation>
 </semantics>
</math>

 is the œÉ-algebra generated by the intervals with end-points 0, ¬Ω, 1. Here the conditional expectation is effectively the average over the minimal sets of the œÉ-algebra.]]</p>

<p>Consider the following</p>
<ul>
<li>

<math display="inline" id="Conditional_expectation:25">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mi mathvariant="normal">Œ©</mi>
   <mo>,</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
   <mo>,</mo>
   <mo>P</mo>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <vector>
    <ci>normal-Œ©</ci>
    <ci>‚Ñ±</ci>
    <ci>normal-P</ci>
   </vector>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle(\Omega,\mathcal{F},\operatorname{P})
  </annotation>
 </semantics>
</math>

 is a <a href="probability_space" title="wikilink">probability space</a></li>
<li>

<math display="inline" id="Conditional_expectation:26">
 <semantics>
  <mrow>
   <mi>X</mi>
   <mo>:</mo>
   <mrow>
    <mi mathvariant="normal">Œ©</mi>
    <mo>‚Üí</mo>
    <msup>
     <mi>‚Ñù</mi>
     <mi>n</mi>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>X</ci>
    <apply>
     <ci>normal-‚Üí</ci>
     <ci>normal-Œ©</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>‚Ñù</ci>
      <ci>n</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle X:\Omega\to\mathbb{R}^{n}
  </annotation>
 </semantics>
</math>

 is a <a href="random_variable#Formal_definition" title="wikilink">random variable</a> on that probability space</li>
<li>

<math display="inline" id="Conditional_expectation:27">
 <semantics>
  <mrow>
   <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
   <mo>‚äÜ</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <subset></subset>
    <ci>‚Ñã</ci>
    <ci>‚Ñ±</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{H}\subseteq\mathcal{F}
  </annotation>
 </semantics>
</math>

 is a sub-<a href="sigma-algebra" title="wikilink">œÉ-algebra</a> of 

<math display="inline" id="Conditional_expectation:28">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñ±</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{F}
  </annotation>
 </semantics>
</math>

</li>
</ul>

<p>Then a <strong>conditional expectation</strong> of <em>X</em> given 

<math display="inline" id="Conditional_expectation:29">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{H}
  </annotation>
 </semantics>
</math>

, denoted as 

<math display="inline" id="Conditional_expectation:30">
 <semantics>
  <mrow>
   <mo>E</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-E</ci>
    <ci>X</ci>
    <ci>‚Ñã</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\operatorname{E}(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

, is any 

<math display="inline" id="Conditional_expectation:31">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{H}
  </annotation>
 </semantics>
</math>

-<a href="measurable_function" title="wikilink">measurable function</a> (

<math display="inline" id="Conditional_expectation:32">
 <semantics>
  <mrow>
   <mi mathvariant="normal">Œ©</mi>
   <mo>‚Üí</mo>
   <msup>
    <mi>‚Ñù</mi>
    <mi>n</mi>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-‚Üí</ci>
    <ci>normal-Œ©</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>‚Ñù</ci>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\Omega\to\mathbb{R}^{n}
  </annotation>
 </semantics>
</math>

) which satisfies:</p>

<p>

<math display="block" id="Conditional_expectation:33">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">‚à´</mo>
      <mi>H</mi>
     </msub>
     <mrow>
      <mrow>
       <mo>E</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>X</mi>
        <mo>‚à£</mo>
        <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
        <mo rspace="5.3pt" stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mi>d</mi>
      <msub>
       <mi>P</mi>
       <mrow>
        <mo stretchy="false">|</mo>
        <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
       </mrow>
      </msub>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mrow>
      <msub>
       <mo largeop="true" symmetric="true">‚à´</mo>
       <mi>H</mi>
      </msub>
      <mrow>
       <mpadded width="+2.8pt">
        <mi>X</mi>
       </mpadded>
       <mi>d</mi>
       <mi>P</mi>
      </mrow>
     </mrow>
     <mtext>for each</mtext>
    </mrow>
   </mrow>
   <mrow>
    <mi>H</mi>
    <mo>‚àà</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <int></int>
       <ci>H</ci>
      </apply>
      <apply>
       <times></times>
       <apply>
        <ci>normal-E</ci>
        <ci>X</ci>
        <ci>‚Ñã</ci>
       </apply>
       <ci>d</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>P</ci>
        <cerror>
         <csymbol cd="ambiguous">fragments</csymbol>
         <ci>normal-|</ci>
         <csymbol cd="unknown">H</csymbol>
        </cerror>
       </apply>
      </apply>
     </apply>
     <list>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <int></int>
        <ci>H</ci>
       </apply>
       <apply>
        <times></times>
        <ci>X</ci>
        <ci>d</ci>
        <ci>P</ci>
       </apply>
      </apply>
      <mtext>for each</mtext>
     </list>
    </apply>
    <apply>
     <in></in>
     <ci>H</ci>
     <ci>‚Ñã</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \int_{H}\operatorname{E}(X\mid\mathcal{H})\;dP_{|\mathcal{H}}=\int_{H}X\;dP%
\qquad\text{for each}\quad H\in\mathcal{H}
  </annotation>
 </semantics>
</math>

.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a></p>

<p>The existence of 

<math display="inline" id="Conditional_expectation:34">
 <semantics>
  <mrow>
   <mo>E</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-E</ci>
    <ci>X</ci>
    <ci>‚Ñã</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\operatorname{E}(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

 can be established by noting that 

<math display="inline" id="Conditional_expectation:35">
 <semantics>
  <mrow>
   <msup>
    <mi>Œº</mi>
    <mi>X</mi>
   </msup>
   <mo>:</mo>
   <mrow>
    <mi>F</mi>
    <mo>‚Ü¶</mo>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">‚à´</mo>
      <mi>F</mi>
     </msub>
     <mi>X</mi>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>Œº</ci>
     <ci>X</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">maps-to</csymbol>
     <ci>F</ci>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <int></int>
       <ci>F</ci>
      </apply>
      <ci>X</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mu^{X}:F\mapsto\int_{F}X
  </annotation>
 </semantics>
</math>

 for 

<math display="inline" id="Conditional_expectation:36">
 <semantics>
  <mrow>
   <mi>F</mi>
   <mo>‚àà</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>F</ci>
    <ci>‚Ñ±</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle F\in\mathcal{F}
  </annotation>
 </semantics>
</math>

is a measure on 

<math display="inline" id="Conditional_expectation:37">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mi mathvariant="normal">Œ©</mi>
   <mo>,</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <interval closure="open">
    <ci>normal-Œ©</ci>
    <ci>‚Ñ±</ci>
   </interval>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle(\Omega,\mathcal{F})
  </annotation>
 </semantics>
</math>

 that is <a href="absolute_continuity" title="wikilink">absolutely continuous</a> with respect to 

<math display="inline" id="Conditional_expectation:38">
 <semantics>
  <mi>P</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>P</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle P
  </annotation>
 </semantics>
</math>

. Furthermore, if 

<math display="inline" id="Conditional_expectation:39">
 <semantics>
  <mi>h</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>h</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle h
  </annotation>
 </semantics>
</math>

 is the <a href="natural_injection" title="wikilink">natural injection</a> from 

<math display="inline" id="Conditional_expectation:40">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{H}
  </annotation>
 </semantics>
</math>

 to 

<math display="inline" id="Conditional_expectation:41">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñ±</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{F}
  </annotation>
 </semantics>
</math>

 then 

<math display="inline" id="Conditional_expectation:42">
 <semantics>
  <mrow>
   <mrow>
    <msup>
     <mi>Œº</mi>
     <mi>X</mi>
    </msup>
    <mo>‚àò</mo>
    <mi>h</mi>
   </mrow>
   <mo>=</mo>
   <msubsup>
    <mi>Œº</mi>
    <mrow>
     <mo stretchy="false">|</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    </mrow>
    <mi>X</mi>
   </msubsup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <compose></compose>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>Œº</ci>
      <ci>X</ci>
     </apply>
     <ci>h</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>Œº</ci>
      <ci>X</ci>
     </apply>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-|</ci>
      <csymbol cd="unknown">H</csymbol>
     </cerror>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mu^{X}\circ h=\mu^{X}_{|\mathcal{H}}
  </annotation>
 </semantics>
</math>

 is the restriction of 

<math display="inline" id="Conditional_expectation:43">
 <semantics>
  <msup>
   <mi>Œº</mi>
   <mi>X</mi>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>Œº</ci>
    <ci>X</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mu^{X}
  </annotation>
 </semantics>
</math>

 to 

<math display="inline" id="Conditional_expectation:44">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{H}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Conditional_expectation:45">
 <semantics>
  <mrow>
   <mrow>
    <mi>P</mi>
    <mo>‚àò</mo>
    <mi>h</mi>
   </mrow>
   <mo>=</mo>
   <msub>
    <mi>P</mi>
    <mrow>
     <mo stretchy="false">|</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    </mrow>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <compose></compose>
     <ci>P</ci>
     <ci>h</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>P</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-|</ci>
      <csymbol cd="unknown">H</csymbol>
     </cerror>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle P\circ h=P_{|\mathcal{H}}
  </annotation>
 </semantics>
</math>

 is the restriction of 

<math display="inline" id="Conditional_expectation:46">
 <semantics>
  <mi>P</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>P</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle P
  </annotation>
 </semantics>
</math>

 to 

<math display="inline" id="Conditional_expectation:47">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{H}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Conditional_expectation:48">
 <semantics>
  <mrow>
   <msup>
    <mi>Œº</mi>
    <mi>X</mi>
   </msup>
   <mo>‚àò</mo>
   <mi>h</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <compose></compose>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>Œº</ci>
     <ci>X</ci>
    </apply>
    <ci>h</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mu^{X}\circ h
  </annotation>
 </semantics>
</math>

 is absolutely continuous with respect to 

<math display="inline" id="Conditional_expectation:49">
 <semantics>
  <mrow>
   <mi>P</mi>
   <mo>‚àò</mo>
   <mi>h</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <compose></compose>
    <ci>P</ci>
    <ci>h</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle P\circ h
  </annotation>
 </semantics>
</math>

 since 

<math display="inline" id="Conditional_expectation:50">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mrow>
      <mi>P</mi>
      <mo>‚àò</mo>
      <mi>h</mi>
     </mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>H</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mn>0</mn>
   </mrow>
   <mo>‚áî</mo>
   <mrow>
    <mrow>
     <mi>P</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>h</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>H</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mn>0</mn>
    <mo>‚áí</mo>
    <mrow>
     <msup>
      <mi>Œº</mi>
      <mi>X</mi>
     </msup>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>h</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>H</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mn>0</mn>
   </mrow>
   <mo>‚áî</mo>
   <mrow>
    <mrow>
     <mrow>
      <msup>
       <mi>Œº</mi>
       <mi>X</mi>
      </msup>
      <mo>‚àò</mo>
      <mi>h</mi>
     </mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>H</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mn>0</mn>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <ci>normal-‚áî</ci>
     <apply>
      <eq></eq>
      <apply>
       <times></times>
       <apply>
        <compose></compose>
        <ci>P</ci>
        <ci>h</ci>
       </apply>
       <ci>H</ci>
      </apply>
      <cn type="integer">0</cn>
     </apply>
     <apply>
      <and></and>
      <apply>
       <eq></eq>
       <apply>
        <times></times>
        <ci>P</ci>
        <apply>
         <times></times>
         <ci>h</ci>
         <ci>H</ci>
        </apply>
       </apply>
       <cn type="integer">0</cn>
      </apply>
      <apply>
       <ci>normal-‚áí</ci>
       <share href="#.cmml">
       </share>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>Œº</ci>
         <ci>X</ci>
        </apply>
        <apply>
         <times></times>
         <ci>h</ci>
         <ci>H</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <eq></eq>
       <share href="#.cmml">
       </share>
       <cn type="integer">0</cn>
      </apply>
     </apply>
    </apply>
    <apply>
     <ci>normal-‚áî</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <eq></eq>
      <apply>
       <times></times>
       <apply>
        <compose></compose>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>Œº</ci>
         <ci>X</ci>
        </apply>
        <ci>h</ci>
       </apply>
       <ci>H</ci>
      </apply>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle P\circ h(H)=0\Leftrightarrow P(h(H))=0\Rightarrow\mu^{X}(h(H))=0%
\Leftrightarrow\mu^{X}\circ h(H)=0
  </annotation>
 </semantics>
</math>

. Thus, we have</p>

<p>

<math display="block" id="Conditional_expectation:51">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <mi>d</mi>
     <msubsup>
      <mi>Œº</mi>
      <mrow>
       <mo stretchy="false">|</mo>
       <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
      </mrow>
      <mi>X</mi>
     </msubsup>
    </mrow>
    <mrow>
     <mi>d</mi>
     <msub>
      <mi>P</mi>
      <mrow>
       <mo stretchy="false">|</mo>
       <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
      </mrow>
     </msub>
    </mrow>
   </mfrac>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <mi>d</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <msup>
        <mi>Œº</mi>
        <mi>X</mi>
       </msup>
       <mo>‚àò</mo>
       <mi>h</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mrow>
     <mi>d</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>P</mi>
       <mo>‚àò</mo>
       <mi>h</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <ci>normal-E</ci>
      <ci>X</ci>
      <ci>‚Ñã</ci>
     </apply>
     <apply>
      <divide></divide>
      <apply>
       <times></times>
       <ci>d</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>Œº</ci>
         <ci>X</ci>
        </apply>
        <cerror>
         <csymbol cd="ambiguous">fragments</csymbol>
         <ci>normal-|</ci>
         <csymbol cd="unknown">H</csymbol>
        </cerror>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>d</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>P</ci>
        <cerror>
         <csymbol cd="ambiguous">fragments</csymbol>
         <ci>normal-|</ci>
         <csymbol cd="unknown">H</csymbol>
        </cerror>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <divide></divide>
      <apply>
       <times></times>
       <ci>d</ci>
       <apply>
        <compose></compose>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>Œº</ci>
         <ci>X</ci>
        </apply>
        <ci>h</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>d</ci>
       <apply>
        <compose></compose>
        <ci>P</ci>
        <ci>h</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid\mathcal{H})=\frac{d\mu^{X}_{|\mathcal{H}}}{dP_{|%
\mathcal{H}}}=\frac{d(\mu^{X}\circ h)}{d(P\circ h)}
  </annotation>
 </semantics>
</math>

</p>

<p>where the derivatives are <a href="Radon‚ÄìNikodym_theorem" title="wikilink">Radon‚ÄìNikodym derivatives</a> of measures.</p>
<h3 id="conditional-expectation-with-respect-to-a-random-variable-1">Conditional expectation with respect to a random variable</h3>

<p>Consider further to the above</p>
<ul>
<li>

<math display="inline" id="Conditional_expectation:52">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mi>U</mi>
   <mo>,</mo>
   <mi mathvariant="normal">Œ£</mi>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <interval closure="open">
    <ci>U</ci>
    <ci>normal-Œ£</ci>
   </interval>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle(U,\Sigma)
  </annotation>
 </semantics>
</math>

 is a <a href="measurable_space" title="wikilink">measurable space</a></li>
<li>

<math display="inline" id="Conditional_expectation:53">
 <semantics>
  <mrow>
   <mi>Y</mi>
   <mo>:</mo>
   <mrow>
    <mi mathvariant="normal">Œ©</mi>
    <mo>‚Üí</mo>
    <mi>U</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>Y</ci>
    <apply>
     <ci>normal-‚Üí</ci>
     <ci>normal-Œ©</ci>
     <ci>U</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle Y:\Omega\to U
  </annotation>
 </semantics>
</math>

 is a random variable</li>
</ul>

<p>Then for any 

<math display="inline" id="Conditional_expectation:54">
 <semantics>
  <mi mathvariant="normal">Œ£</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-Œ£</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\Sigma
  </annotation>
 </semantics>
</math>

-<a href="measurable_function" title="wikilink">measurable function</a> 

<math display="inline" id="Conditional_expectation:55">
 <semantics>
  <mrow>
   <mi>g</mi>
   <mo>:</mo>
   <mrow>
    <mi>U</mi>
    <mo>‚Üí</mo>
    <msup>
     <mi>‚Ñù</mi>
     <mi>n</mi>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>g</ci>
    <apply>
     <ci>normal-‚Üí</ci>
     <ci>U</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>‚Ñù</ci>
      <ci>n</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle g:U\to\mathbb{R}^{n}
  </annotation>
 </semantics>
</math>

 which satisfies:</p>

<p>

<math display="block" id="Conditional_expectation:56">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo largeop="true" symmetric="true">‚à´</mo>
     <mrow>
      <mi>g</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>Y</mi>
       <mo stretchy="false">)</mo>
      </mrow>
      <mi>f</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>Y</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mrow>
      <mo largeop="true" symmetric="true">‚à´</mo>
      <mrow>
       <mi>X</mi>
       <mi>f</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>Y</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
     <mrow>
      <mtext>for every</mtext>
      <mi mathvariant="normal">Œ£</mi>
      <mtext>-measurable function</mtext>
     </mrow>
     <mi>f</mi>
    </mrow>
   </mrow>
   <mo>:</mo>
   <mrow>
    <mi>U</mi>
    <mo>‚Üí</mo>
    <msup>
     <mi>‚Ñù</mi>
     <mi>n</mi>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <apply>
     <eq></eq>
     <apply>
      <int></int>
      <apply>
       <times></times>
       <ci>g</ci>
       <ci>Y</ci>
       <ci>f</ci>
       <ci>Y</ci>
      </apply>
     </apply>
     <list>
      <apply>
       <int></int>
       <apply>
        <times></times>
        <ci>X</ci>
        <ci>f</ci>
        <ci>Y</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <mtext>for every</mtext>
       <ci>normal-Œ£</ci>
       <mtext>-measurable function</mtext>
      </apply>
      <ci>f</ci>
     </list>
    </apply>
    <apply>
     <ci>normal-‚Üí</ci>
     <ci>U</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>‚Ñù</ci>
      <ci>n</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \int g(Y)f(Y)=\int Xf(Y)\qquad\text{for every }\Sigma\text{-measurable %
function}\quad f:U\to\mathbb{R}^{n}
  </annotation>
 </semantics>
</math>

.</p>

<p>the random variable 

<math display="inline" id="Conditional_expectation:57">
 <semantics>
  <mrow>
   <mi>g</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>Y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>g</ci>
    <ci>Y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle g(Y)
  </annotation>
 </semantics>
</math>

, denoted as 

<math display="inline" id="Conditional_expectation:58">
 <semantics>
  <mrow>
   <mo>E</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi>Y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-E</ci>
    <ci>X</ci>
    <ci>Y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\operatorname{E}(X\mid Y)
  </annotation>
 </semantics>
</math>

, is a <strong>conditional expectation</strong> of <em>X</em> given 

<math display="inline" id="Conditional_expectation:59">
 <semantics>
  <mi>Y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle Y
  </annotation>
 </semantics>
</math>

.</p>

<p>This definition is equivalent to defining the conditional expectation using the <a class="uri" href="pre-image" title="wikilink">pre-image</a> of <em>Œ£</em> with respect to <em>Y</em>. If we define</p>

<p>

<math display="block" id="Conditional_expectation:60">
 <semantics>
  <mrow>
   <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
   <mo>=</mo>
   <mrow>
    <mi>œÉ</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>Y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>:=</mo>
   <mrow>
    <msup>
     <mi>Y</mi>
     <mrow>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
    </msup>
    <mrow>
     <mo>(</mo>
     <mi mathvariant="normal">Œ£</mi>
     <mo>)</mo>
    </mrow>
   </mrow>
   <mo>:=</mo>
   <mrow>
    <mo stretchy="false">{</mo>
    <mrow>
     <msup>
      <mi>Y</mi>
      <mrow>
       <mo>-</mo>
       <mn>1</mn>
      </mrow>
     </msup>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>B</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>:</mo>
    <mrow>
     <mi>B</mi>
     <mo>‚àà</mo>
     <mi mathvariant="normal">Œ£</mi>
    </mrow>
    <mo stretchy="false">}</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>‚Ñã</ci>
     <apply>
      <times></times>
      <ci>œÉ</ci>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <csymbol cd="latexml">assign</csymbol>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>Y</ci>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <ci>normal-Œ£</ci>
     </apply>
    </apply>
    <apply>
     <csymbol cd="latexml">assign</csymbol>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="latexml">conditional-set</csymbol>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>Y</ci>
        <apply>
         <minus></minus>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>B</ci>
      </apply>
      <apply>
       <in></in>
       <ci>B</ci>
       <ci>normal-Œ£</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}=\sigma(Y):=Y^{-1}\left(\Sigma\right):=\{Y^{-1}(B):B\in\Sigma\}
  </annotation>
 </semantics>
</math>

</p>

<p>then</p>

<p>

<math display="block" id="Conditional_expectation:61">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi>Y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mfrac>
     <mrow>
      <mi>d</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <msup>
         <mi>Œº</mi>
         <mi>X</mi>
        </msup>
        <mo>‚àò</mo>
        <msup>
         <mi>Y</mi>
         <mrow>
          <mo>-</mo>
          <mn>1</mn>
         </mrow>
        </msup>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mrow>
      <mi>d</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mi>P</mi>
        <mo>‚àò</mo>
        <msup>
         <mi>Y</mi>
         <mrow>
          <mo>-</mo>
          <mn>1</mn>
         </mrow>
        </msup>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mfrac>
    <mo>‚àò</mo>
    <mi>Y</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <ci>normal-E</ci>
      <ci>X</ci>
      <ci>Y</ci>
     </apply>
     <apply>
      <ci>normal-E</ci>
      <ci>X</ci>
      <ci>‚Ñã</ci>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <compose></compose>
      <apply>
       <divide></divide>
       <apply>
        <times></times>
        <ci>d</ci>
        <apply>
         <compose></compose>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>Œº</ci>
          <ci>X</ci>
         </apply>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>Y</ci>
          <apply>
           <minus></minus>
           <cn type="integer">1</cn>
          </apply>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <ci>d</ci>
        <apply>
         <compose></compose>
         <ci>P</ci>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>Y</ci>
          <apply>
           <minus></minus>
           <cn type="integer">1</cn>
          </apply>
         </apply>
        </apply>
       </apply>
      </apply>
      <ci>Y</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid Y)=\operatorname{E}(X\mid\mathcal{H})=\frac{d(\mu^{X}%
\circ Y^{-1})}{d(P\circ Y^{-1})}\circ Y
  </annotation>
 </semantics>
</math>

.</p>
<h3 id="discussion">Discussion</h3>

<p>A couple of points worth noting about the definition:</p>
<ul>
<li>This is not a constructive definition; we are merely given the required property that a conditional expectation must satisfy.
<ul>
<li>The definition of 

<math display="inline" id="Conditional_expectation:62">
 <semantics>
  <mrow>
   <mo>E</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-E</ci>
    <ci>X</ci>
    <ci>‚Ñã</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\operatorname{E}(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

 may resemble that of 

<math display="inline" id="Conditional_expectation:63">
 <semantics>
  <mrow>
   <mo>E</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi>H</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-E</ci>
    <ci>X</ci>
    <ci>H</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\operatorname{E}(X\mid H)
  </annotation>
 </semantics>
</math>

 but these are very different objects, the former being a 

<math display="inline" id="Conditional_expectation:64">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{H}
  </annotation>
 </semantics>
</math>

-measurable function 

<math display="inline" id="Conditional_expectation:65">
 <semantics>
  <mrow>
   <mi mathvariant="normal">Œ©</mi>
   <mo>‚Üí</mo>
   <msup>
    <mi>‚Ñù</mi>
    <mi>n</mi>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-‚Üí</ci>
    <ci>normal-Œ©</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>‚Ñù</ci>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\Omega\to\mathbb{R}^{n}
  </annotation>
 </semantics>
</math>

, while the latter is an element of 

<math display="inline" id="Conditional_expectation:66">
 <semantics>
  <msup>
   <mi>‚Ñù</mi>
   <mi>n</mi>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>‚Ñù</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathbb{R}^{n}
  </annotation>
 </semantics>
</math>

 for fixed 

<math display="inline" id="Conditional_expectation:67">
 <semantics>
  <mi>H</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>H</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle H
  </annotation>
 </semantics>
</math>

, or a function 

<math display="inline" id="Conditional_expectation:68">
 <semantics>
  <mrow>
   <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
   <mo>‚Üí</mo>
   <msup>
    <mi>‚Ñù</mi>
    <mi>n</mi>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-‚Üí</ci>
    <ci>‚Ñ±</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>‚Ñù</ci>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{F}\to\mathbb{R}^{n}
  </annotation>
 </semantics>
</math>

 if considered as the function 

<math display="inline" id="Conditional_expectation:69">
 <semantics>
  <mrow>
   <mi>H</mi>
   <mo>‚Ü¶</mo>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi>H</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">maps-to</csymbol>
    <ci>H</ci>
    <apply>
     <ci>normal-E</ci>
     <ci>X</ci>
     <ci>H</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle H\mapsto\operatorname{E}(X\mid H)
  </annotation>
 </semantics>
</math>

.</li>
<li>Existence of a conditional expectation function is determined by the <a href="Radon‚ÄìNikodym_theorem" title="wikilink">Radon‚ÄìNikodym theorem</a>, a sufficient condition is that the (unconditional) expected value for <em>X</em> exist.</li>
<li>Uniqueness can be shown to be <a href="almost_surely" title="wikilink">almost sure</a>: that is, versions of the same conditional expectation will only differ on a <a href="null_set" title="wikilink">set of probability zero</a>.</li>
</ul></li>
<li>The œÉ-algebra 

<math display="inline" id="Conditional_expectation:70">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{H}
  </annotation>
 </semantics>
</math>

 controls the "granularity" of the conditioning. A conditional expectation 

<math display="inline" id="Conditional_expectation:71">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle{E}(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

 over a finer-grained œÉ-algebra 

<math display="inline" id="Conditional_expectation:72">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{H}
  </annotation>
 </semantics>
</math>

 will allow us to condition on a wider variety of events.</li>
</ul>
<h2 id="conditioning-as-factorization">Conditioning as factorization</h2>

<p>In the definition of conditional expectation that we provided above, the fact that 

<math display="inline" id="Conditional_expectation:73">
 <semantics>
  <mi>Y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y
  </annotation>
 </semantics>
</math>

 is a <em>real</em> random element is irrelevant. Let 

<math display="inline" id="Conditional_expectation:74">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mi>U</mi>
   <mo>,</mo>
   <mi mathvariant="normal">Œ£</mi>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <interval closure="open">
    <ci>U</ci>
    <ci>normal-Œ£</ci>
   </interval>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (U,\Sigma)
  </annotation>
 </semantics>
</math>

 be a measurable space, where 

<math display="inline" id="Conditional_expectation:75">
 <semantics>
  <mrow>
   <mi mathvariant="normal">Œ£</mi>
   <mo>‚äÇ</mo>
   <mrow>
    <mi class="ltx_font_mathcaligraphic">ùí´</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>U</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <subset></subset>
    <ci>normal-Œ£</ci>
    <apply>
     <times></times>
     <ci>ùí´</ci>
     <ci>U</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Sigma\subset\mathcal{P}(U)
  </annotation>
 </semantics>
</math>

 is a œÉ-algebra in 

<math display="inline" id="Conditional_expectation:76">
 <semantics>
  <mi>U</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>U</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   U
  </annotation>
 </semantics>
</math>

. <em>A 

<math display="inline" id="Conditional_expectation:77">
 <semantics>
  <mi>U</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>U</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   U
  </annotation>
 </semantics>
</math>

-valued random element</em> is a measurable function 

<math display="inline" id="Conditional_expectation:78">
 <semantics>
  <mrow>
   <mi>Y</mi>
   <mo>:</mo>
   <mrow>
    <mi mathvariant="normal">Œ©</mi>
    <mo>‚Üí</mo>
    <mi>U</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>Y</ci>
    <apply>
     <ci>normal-‚Üí</ci>
     <ci>normal-Œ©</ci>
     <ci>U</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y\colon\Omega\to U
  </annotation>
 </semantics>
</math>

, i.e. 

<math display="inline" id="Conditional_expectation:79">
 <semantics>
  <mrow>
   <mrow>
    <msup>
     <mi>Y</mi>
     <mrow>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
    </msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>B</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>‚àà</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>Y</ci>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>B</ci>
    </apply>
    <ci>‚Ñ±</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y^{-1}(B)\in\mathcal{F}
  </annotation>
 </semantics>
</math>

 for all 

<math display="inline" id="Conditional_expectation:80">
 <semantics>
  <mrow>
   <mi>B</mi>
   <mo>‚àà</mo>
   <mi mathvariant="normal">Œ£</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>B</ci>
    <ci>normal-Œ£</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   B\in\Sigma
  </annotation>
 </semantics>
</math>

. The <em>distribution</em> of 

<math display="inline" id="Conditional_expectation:81">
 <semantics>
  <mi>Y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y
  </annotation>
 </semantics>
</math>

 is the probability measure 

<math display="inline" id="Conditional_expectation:82">
 <semantics>
  <mrow>
   <msub>
    <mi>‚Ñô</mi>
    <mi>Y</mi>
   </msub>
   <mo>:</mo>
   <mrow>
    <mi mathvariant="normal">Œ£</mi>
    <mo>‚Üí</mo>
    <mi>‚Ñù</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>‚Ñô</ci>
     <ci>Y</ci>
    </apply>
    <apply>
     <ci>normal-‚Üí</ci>
     <ci>normal-Œ£</ci>
     <ci>‚Ñù</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{P}_{Y}:\Sigma\to\mathbb{R}
  </annotation>
 </semantics>
</math>

 such that 

<math display="inline" id="Conditional_expectation:83">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>‚Ñô</mi>
     <mi>Y</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>B</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>‚Ñô</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <msup>
       <mi>Y</mi>
       <mrow>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </msup>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>B</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñô</ci>
      <ci>Y</ci>
     </apply>
     <ci>B</ci>
    </apply>
    <apply>
     <times></times>
     <ci>‚Ñô</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>Y</ci>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <ci>B</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{P}_{Y}(B)=\mathbb{P}(Y^{-1}(B))
  </annotation>
 </semantics>
</math>

.</p>

<p><strong>Theorem</strong>. If 

<math display="inline" id="Conditional_expectation:84">
 <semantics>
  <mrow>
   <mi>X</mi>
   <mo>:</mo>
   <mrow>
    <mi mathvariant="normal">Œ©</mi>
    <mo>‚Üí</mo>
    <mi>‚Ñù</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>X</ci>
    <apply>
     <ci>normal-‚Üí</ci>
     <ci>normal-Œ©</ci>
     <ci>‚Ñù</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X:\Omega\to\mathbb{R}
  </annotation>
 </semantics>
</math>

 is an integrable random variable, then there exists a 

<math display="inline" id="Conditional_expectation:85">
 <semantics>
  <msub>
   <mi>‚Ñô</mi>
   <mi>Y</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>‚Ñô</ci>
    <ci>Y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{P}_{Y}
  </annotation>
 </semantics>
</math>

-unique integrable random element 

<math display="inline" id="Conditional_expectation:86">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi>Y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>:</mo>
   <mrow>
    <mi>U</mi>
    <mo>‚Üí</mo>
    <mi>‚Ñù</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <apply>
     <ci>normal-E</ci>
     <ci>X</ci>
     <ci>Y</ci>
    </apply>
    <apply>
     <ci>normal-‚Üí</ci>
     <ci>U</ci>
     <ci>‚Ñù</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid Y):U\to\mathbb{R}
  </annotation>
 </semantics>
</math>

, such that</p>

<p>

<math display="block" id="Conditional_expectation:87">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">‚à´</mo>
      <mrow>
       <msup>
        <mi>Y</mi>
        <mrow>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </msup>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>B</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </msub>
     <mrow>
      <mpadded width="+2.8pt">
       <mi>X</mi>
      </mpadded>
      <mi>d</mi>
      <mo>‚Ñô</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">‚à´</mo>
      <mi>B</mi>
     </msub>
     <mrow>
      <mrow>
       <mo>E</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>X</mi>
        <mo>‚à£</mo>
        <mi>Y</mi>
        <mo rspace="5.3pt" stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mi>d</mi>
      <msub>
       <mi>‚Ñô</mi>
       <mi mathvariant="normal">Y</mi>
      </msub>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <int></int>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>Y</ci>
        <apply>
         <minus></minus>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>B</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>X</ci>
      <ci>d</ci>
      <ci>‚Ñô</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <int></int>
      <ci>B</ci>
     </apply>
     <apply>
      <times></times>
      <apply>
       <ci>normal-E</ci>
       <ci>X</ci>
       <ci>Y</ci>
      </apply>
      <ci>d</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>‚Ñô</ci>
       <ci>normal-Y</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \int_{Y^{-1}(B)}X\;d\operatorname{\mathbb{P}}=\int_{B}\operatorname{E}(X\mid Y%
)\;d\operatorname{\mathbb{P}_{Y}},
  </annotation>
 </semantics>
</math>

</p>

<p>for all 

<math display="inline" id="Conditional_expectation:88">
 <semantics>
  <mrow>
   <mi>B</mi>
   <mo>‚àà</mo>
   <mi mathvariant="normal">Œ£</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>B</ci>
    <ci>normal-Œ£</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   B\in\Sigma
  </annotation>
 </semantics>
</math>

.</p>

<p><strong>Proof sketch</strong></p>

<p>Let 

<math display="inline" id="Conditional_expectation:89">
 <semantics>
  <mrow>
   <mi>Œº</mi>
   <mo>:</mo>
   <mrow>
    <mi mathvariant="normal">Œ£</mi>
    <mo>‚Üí</mo>
    <mi>‚Ñù</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>Œº</ci>
    <apply>
     <ci>normal-‚Üí</ci>
     <ci>normal-Œ£</ci>
     <ci>‚Ñù</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mu:\Sigma\to\mathbb{R}
  </annotation>
 </semantics>
</math>

 be such that 

<math display="inline" id="Conditional_expectation:90">
 <semantics>
  <mrow>
   <mrow>
    <mi>Œº</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>B</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mo largeop="true" symmetric="true">‚à´</mo>
     <mrow>
      <msup>
       <mi>Y</mi>
       <mrow>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </msup>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>B</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </msub>
    <mrow>
     <mpadded width="+2.8pt">
      <mi>X</mi>
     </mpadded>
     <mi>d</mi>
     <mo>‚Ñô</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>Œº</ci>
     <ci>B</ci>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <int></int>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>Y</ci>
        <apply>
         <minus></minus>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>B</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>X</ci>
      <ci>d</ci>
      <ci>‚Ñô</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mu(B)=\int_{Y^{-1}(B)}X\;d\operatorname{\mathbb{P}}
  </annotation>
 </semantics>
</math>

. Then 

<math display="inline" id="Conditional_expectation:91">
 <semantics>
  <mi>Œº</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Œº</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mu
  </annotation>
 </semantics>
</math>

 is a signed measure which is absolutely continuous with respect to 

<math display="inline" id="Conditional_expectation:92">
 <semantics>
  <msub>
   <mi>‚Ñô</mi>
   <mi>Y</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>‚Ñô</ci>
    <ci>Y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{P}_{Y}
  </annotation>
 </semantics>
</math>

. Indeed 

<math display="inline" id="Conditional_expectation:93">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>‚Ñô</mi>
     <mi>Y</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>B</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñô</ci>
      <ci>Y</ci>
     </apply>
     <ci>B</ci>
    </apply>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{P}_{Y}(B)=0
  </annotation>
 </semantics>
</math>

 means exactly that 

<math display="inline" id="Conditional_expectation:94">
 <semantics>
  <mrow>
   <mrow>
    <mi>‚Ñô</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <msup>
       <mi>Y</mi>
       <mrow>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </msup>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>B</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>‚Ñô</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>Y</ci>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <ci>B</ci>
     </apply>
    </apply>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{P}(Y^{-1}(B))=0
  </annotation>
 </semantics>
</math>

. Since the integral of an integrable function on a set of probability 0 is 0, this proves absolute continuity. The <a href="Radon‚ÄìNikodym_theorem" title="wikilink">Radon‚ÄìNikodym theorem</a> then proves the existence of a density of 

<math display="inline" id="Conditional_expectation:95">
 <semantics>
  <mi>Œº</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Œº</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mu
  </annotation>
 </semantics>
</math>

 with respect to 

<math display="inline" id="Conditional_expectation:96">
 <semantics>
  <msub>
   <mi>‚Ñô</mi>
   <mi>Y</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>‚Ñô</ci>
    <ci>Y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{P}_{Y}
  </annotation>
 </semantics>
</math>

, which we denote by 

<math display="inline" id="Conditional_expectation:97">
 <semantics>
  <mrow>
   <mo>E</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi>Y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-E</ci>
    <ci>X</ci>
    <ci>Y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid Y)
  </annotation>
 </semantics>
</math>

. 

<math display="inline" id="Conditional_expectation:98">
 <semantics>
  <mi mathvariant="normal">‚ñ°</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-‚ñ°</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \square
  </annotation>
 </semantics>
</math>

</p>

<p>Comparing with conditional expectation with respect to sub-sigma algebras, it holds that</p>

<p>

<math display="block" id="Conditional_expectation:99">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mrow>
      <mo>E</mo>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>X</mi>
       <mo>‚à£</mo>
       <mi>Y</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>‚àò</mo>
     <mi>Y</mi>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mo>E</mo>
     <mrow>
      <mo>(</mo>
      <mi>X</mi>
      <mo>‚à£</mo>
      <mrow>
       <msup>
        <mi>Y</mi>
        <mrow>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </msup>
       <mrow>
        <mo>(</mo>
        <mi mathvariant="normal">Œ£</mi>
        <mo>)</mo>
       </mrow>
      </mrow>
      <mo>)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <compose></compose>
     <apply>
      <ci>normal-E</ci>
      <ci>X</ci>
      <ci>Y</ci>
     </apply>
     <ci>Y</ci>
    </apply>
    <apply>
     <ci>normal-E</ci>
     <ci>X</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>Y</ci>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <ci>normal-Œ£</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid Y)\circ Y=\operatorname{E}\left(X\mid Y^{-1}\left(%
\Sigma\right)\right).
  </annotation>
 </semantics>
</math>

</p>

<p>We can further interpret this equality by considering the abstract <a href="change_of_variables" title="wikilink">change of variables</a> formula to transport the integral on the right hand side to an integral over Œ©:</p>

<p>

<math display="block" id="Conditional_expectation:100">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">‚à´</mo>
      <mrow>
       <msup>
        <mi>Y</mi>
        <mrow>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </msup>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>B</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </msub>
     <mrow>
      <mpadded width="+5pt">
       <mi>X</mi>
      </mpadded>
      <mi>d</mi>
      <mo>‚Ñô</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">‚à´</mo>
      <mrow>
       <msup>
        <mi>Y</mi>
        <mrow>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </msup>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>B</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </msub>
     <mrow>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mrow>
         <mo>E</mo>
         <mrow>
          <mo stretchy="false">(</mo>
          <mi>X</mi>
          <mo>‚à£</mo>
          <mi>Y</mi>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
        <mo>‚àò</mo>
        <mi>Y</mi>
       </mrow>
       <mo rspace="7.5pt" stretchy="false">)</mo>
      </mrow>
      <mi>d</mi>
      <mo>‚Ñô</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <int></int>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>Y</ci>
        <apply>
         <minus></minus>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>B</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>X</ci>
      <ci>d</ci>
      <ci>‚Ñô</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <int></int>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>Y</ci>
        <apply>
         <minus></minus>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>B</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <compose></compose>
       <apply>
        <ci>normal-E</ci>
        <ci>X</ci>
        <ci>Y</ci>
       </apply>
       <ci>Y</ci>
      </apply>
      <ci>d</ci>
      <ci>‚Ñô</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \int_{Y^{-1}(B)}X\ d\operatorname{\mathbb{P}}=\int_{Y^{-1}(B)}(\operatorname{E%
}(X\mid Y)\circ Y)\ d\operatorname{\mathbb{P}}.
  </annotation>
 </semantics>
</math>

</p>

<p>The equation means that the integrals of 

<math display="inline" id="Conditional_expectation:101">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 and the composition 

<math display="inline" id="Conditional_expectation:102">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi>Y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>‚àò</mo>
   <mi>Y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <compose></compose>
    <apply>
     <ci>normal-E</ci>
     <ci>X</ci>
     <ci>Y</ci>
    </apply>
    <ci>Y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid Y)\circ Y
  </annotation>
 </semantics>
</math>

 over sets of the form 

<math display="inline" id="Conditional_expectation:103">
 <semantics>
  <mrow>
   <msup>
    <mi>Y</mi>
    <mrow>
     <mo>-</mo>
     <mn>1</mn>
    </mrow>
   </msup>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>B</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>Y</ci>
     <apply>
      <minus></minus>
      <cn type="integer">1</cn>
     </apply>
    </apply>
    <ci>B</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y^{-1}(B)
  </annotation>
 </semantics>
</math>

, for 

<math display="inline" id="Conditional_expectation:104">
 <semantics>
  <mrow>
   <mi>B</mi>
   <mo>‚àà</mo>
   <mi mathvariant="normal">Œ£</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>B</ci>
    <ci>normal-Œ£</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   B\in\Sigma
  </annotation>
 </semantics>
</math>

, are identical.</p>

<p>This equation can be interpreted to say that the following diagram is <a href="commutative_diagram" title="wikilink">commutative</a> <em>in the average</em>.</p>
<dl>
<dd>
</dd>
</dl>

<p><br/>
</p>
<h2 id="computation">Computation</h2>

<p>When <em>X</em> and <em>Y</em> are both <a href="discrete_random_variable" title="wikilink">discrete random variables</a>, then the <strong>conditional expectation</strong> of <em>X</em> given the event <em>Y=y</em> can be considered as function of <em>y</em> for <em>y</em> in the range of <em>Y</em></p>

<p>

<math display="block" id="Conditional_expectation:105">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo>E</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>X</mi>
      <mo>‚à£</mo>
      <mrow>
       <mi>Y</mi>
       <mo>=</mo>
       <mi>y</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <munder>
      <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
      <mrow>
       <mi>x</mi>
       <mo>‚àà</mo>
       <mi class="ltx_font_mathcaligraphic">ùí≥</mi>
      </mrow>
     </munder>
     <mrow>
      <mpadded width="+5pt">
       <mi>x</mi>
      </mpadded>
      <mrow>
       <mo>P</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mrow>
         <mi>X</mi>
         <mo>=</mo>
         <mi>x</mi>
        </mrow>
        <mo>‚à£</mo>
        <mrow>
         <mi>Y</mi>
         <mo>=</mo>
         <mi>y</mi>
        </mrow>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <munder>
      <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
      <mrow>
       <mi>x</mi>
       <mo>‚àà</mo>
       <mi class="ltx_font_mathcaligraphic">ùí≥</mi>
      </mrow>
     </munder>
     <mrow>
      <mpadded width="+5pt">
       <mi>x</mi>
      </mpadded>
      <mfrac>
       <mrow>
        <mo>P</mo>
        <mrow>
         <mo stretchy="false">(</mo>
         <mrow>
          <mi>X</mi>
          <mo>=</mo>
          <mi>x</mi>
         </mrow>
         <mo>,</mo>
         <mrow>
          <mi>Y</mi>
          <mo>=</mo>
          <mi>y</mi>
         </mrow>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
       <mrow>
        <mo>P</mo>
        <mrow>
         <mo stretchy="false">(</mo>
         <mrow>
          <mi>Y</mi>
          <mo>=</mo>
          <mi>y</mi>
         </mrow>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mfrac>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <ci>normal-E</ci>
      <ci>X</ci>
      <apply>
       <eq></eq>
       <ci>Y</ci>
       <ci>y</ci>
      </apply>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <in></in>
        <ci>x</ci>
        <ci>ùí≥</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>x</ci>
       <apply>
        <ci>normal-P</ci>
        <apply>
         <eq></eq>
         <ci>X</ci>
         <ci>x</ci>
        </apply>
        <apply>
         <eq></eq>
         <ci>Y</ci>
         <ci>y</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <in></in>
        <ci>x</ci>
        <ci>ùí≥</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>x</ci>
       <apply>
        <divide></divide>
        <apply>
         <ci>normal-P</ci>
         <apply>
          <eq></eq>
          <ci>X</ci>
          <ci>x</ci>
         </apply>
         <apply>
          <eq></eq>
          <ci>Y</ci>
          <ci>y</ci>
         </apply>
        </apply>
        <apply>
         <ci>normal-P</ci>
         <apply>
          <eq></eq>
          <ci>Y</ci>
          <ci>y</ci>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid Y=y)=\sum_{x\in\mathcal{X}}x\ \operatorname{P}(X=x\mid Y%
=y)=\sum_{x\in\mathcal{X}}x\ \frac{\operatorname{P}(X=x,Y=y)}{\operatorname{P}%
(Y=y)},
  </annotation>
 </semantics>
</math>

</p>

<p>where 

<math display="inline" id="Conditional_expectation:106">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ùí≥</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ùí≥</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{X}
  </annotation>
 </semantics>
</math>

 is the <a href="Range_(mathematics)" title="wikilink">range</a> of <em>X</em>.</p>

<p>If <em>X</em> is a <a href="continuous_random_variable" title="wikilink">continuous random variable</a>, while <em>Y</em> remains a discrete variable, the <strong>conditional expectation</strong> is:</p>

<p>

<math display="block" id="Conditional_expectation:107">
 <semantics>
  <mrow>
   <mo>E</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi>Y</mi>
    <mo>=</mo>
    <mi>y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <msub>
    <mo largeop="true" symmetric="true">‚à´</mo>
    <mi class="ltx_font_mathcaligraphic">ùí≥</mi>
   </msub>
   <mi>x</mi>
   <msub>
    <mi>f</mi>
    <mi>X</mi>
   </msub>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo>‚à£</mo>
    <mi>Y</mi>
    <mo>=</mo>
    <mi>y</mi>
    <mo rspace="4.2pt" stretchy="false">)</mo>
   </mrow>
   <mi>d</mi>
   <mi>x</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <ci>normal-E</ci>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">Y</csymbol>
     <eq></eq>
     <csymbol cd="unknown">y</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <int></int>
     <ci>ùí≥</ci>
    </apply>
    <csymbol cd="unknown">x</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <ci>X</ci>
    </apply>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">Y</csymbol>
     <eq></eq>
     <csymbol cd="unknown">y</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">d</csymbol>
    <csymbol cd="unknown">x</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid Y=y)=\int_{\mathcal{X}}xf_{X}(x\mid Y=y)\,dx
  </annotation>
 </semantics>
</math>

</p>

<p>with 

<math display="inline" id="Conditional_expectation:108">
 <semantics>
  <mrow>
   <msub>
    <mi>f</mi>
    <mi>X</mi>
   </msub>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo>‚à£</mo>
    <mi>Y</mi>
    <mo>=</mo>
    <mi>y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <msub>
      <mi>f</mi>
      <mrow>
       <mi>X</mi>
       <mo>,</mo>
       <mi>Y</mi>
      </mrow>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>x</mi>
      <mo>,</mo>
      <mi>y</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mrow>
     <mo>P</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>Y</mi>
       <mo>=</mo>
       <mi>y</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <ci>X</ci>
    </apply>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">Y</csymbol>
     <eq></eq>
     <csymbol cd="unknown">y</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <apply>
     <divide></divide>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>f</ci>
       <list>
        <ci>X</ci>
        <ci>Y</ci>
       </list>
      </apply>
      <interval closure="open">
       <ci>x</ci>
       <ci>y</ci>
      </interval>
     </apply>
     <apply>
      <ci>normal-P</ci>
      <apply>
       <eq></eq>
       <ci>Y</ci>
       <ci>y</ci>
      </apply>
     </apply>
    </apply>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{X}(x\mid Y=y)=\frac{f_{X,Y}(x,y)}{\operatorname{P}(Y=y)}
  </annotation>
 </semantics>
</math>

 (where <em>f<sub>X,Y</sub></em>(<em>x, y</em>) gives the <a href="joint_distribution" title="wikilink">joint density</a> of <em>X</em> and <em>Y</em>) is the <a href="conditional_density" title="wikilink">conditional density</a> of <em>X</em> given <em>Y=y</em>.</p>

<p>If both <em>X</em> and <em>Y</em> are continuous random variables, then the <strong>conditional expectation</strong> is:</p>

<p>

<math display="block" id="Conditional_expectation:109">
 <semantics>
  <mrow>
   <mo>E</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi>Y</mi>
    <mo>=</mo>
    <mi>y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <msub>
    <mo largeop="true" symmetric="true">‚à´</mo>
    <mi class="ltx_font_mathcaligraphic">ùí≥</mi>
   </msub>
   <mi>x</mi>
   <msub>
    <mi>f</mi>
    <mrow>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi>Y</mi>
    </mrow>
   </msub>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo>‚à£</mo>
    <mi>y</mi>
    <mo rspace="4.2pt" stretchy="false">)</mo>
   </mrow>
   <mi>d</mi>
   <mi>x</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <ci>normal-E</ci>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">Y</csymbol>
     <eq></eq>
     <csymbol cd="unknown">y</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <int></int>
     <ci>ùí≥</ci>
    </apply>
    <csymbol cd="unknown">x</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <csymbol cd="unknown">X</csymbol>
      <ci>normal-‚à£</ci>
      <csymbol cd="unknown">Y</csymbol>
     </cerror>
    </apply>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">y</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">d</csymbol>
    <csymbol cd="unknown">x</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\mid Y=y)=\int_{\mathcal{X}}xf_{X\mid Y}(x\mid y)\,dx
  </annotation>
 </semantics>
</math>

</p>

<p>where 

<math display="inline" id="Conditional_expectation:110">
 <semantics>
  <mrow>
   <msub>
    <mi>f</mi>
    <mrow>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi>Y</mi>
    </mrow>
   </msub>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo>‚à£</mo>
    <mi>y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <msub>
      <mi>f</mi>
      <mrow>
       <mi>X</mi>
       <mo>,</mo>
       <mi>Y</mi>
      </mrow>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>x</mi>
      <mo>,</mo>
      <mi>y</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mrow>
     <msub>
      <mi>f</mi>
      <mi>Y</mi>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>y</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <csymbol cd="unknown">X</csymbol>
      <ci>normal-‚à£</ci>
      <csymbol cd="unknown">Y</csymbol>
     </cerror>
    </apply>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">y</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <apply>
     <divide></divide>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>f</ci>
       <list>
        <ci>X</ci>
        <ci>Y</ci>
       </list>
      </apply>
      <interval closure="open">
       <ci>x</ci>
       <ci>y</ci>
      </interval>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>f</ci>
       <ci>Y</ci>
      </apply>
      <ci>y</ci>
     </apply>
    </apply>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{X\mid Y}(x\mid y)=\frac{f_{X,Y}(x,y)}{f_{Y}(y)}
  </annotation>
 </semantics>
</math>

 (where <em>f</em><sub><em>Y</em></sub>(<em>y</em>) gives the density of <em>Y</em>).</p>
<h2 id="basic-properties">Basic properties</h2>

<p>All the following formulas are to be understood in an almost sure sense. The sigma-algebra 

<math display="inline" id="Conditional_expectation:111">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mathcal{H}
  </annotation>
 </semantics>
</math>

 could be replaced by a random variable 

<math display="inline" id="Conditional_expectation:112">
 <semantics>
  <mi>Z</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Z</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle Z
  </annotation>
 </semantics>
</math>

</p>
<ul>
<li>Pulling out independent factors:
<ul>
<li>If 

<math display="inline" id="Conditional_expectation:113">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 is <a href="Independence_(probability_theory)" title="wikilink">independent</a> of 

<math display="inline" id="Conditional_expectation:114">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}
  </annotation>
 </semantics>
</math>

, then 

<math display="inline" id="Conditional_expectation:115">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(X\mid\mathcal{H})=E(X)
  </annotation>
 </semantics>
</math>

.</li>
</ul></li>
</ul>

<p>Let 

<math display="inline" id="Conditional_expectation:116">
 <semantics>
  <mrow>
   <mi>B</mi>
   <mo>‚àà</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>B</ci>
    <ci>‚Ñã</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   B\in\mathcal{H}
  </annotation>
 </semantics>
</math>

. Then 

<math display="inline" id="Conditional_expectation:117">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 is independent of 

<math display="inline" id="Conditional_expectation:118">
 <semantics>
  <msub>
   <mn>1</mn>
   <mi>B</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <cn type="integer">1</cn>
    <ci>B</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   1_{B}
  </annotation>
 </semantics>
</math>

, so we get that</p>

<p>

<math display="block" id="Conditional_expectation:119">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mo largeop="true" symmetric="true">‚à´</mo>
     <mi>B</mi>
    </msub>
    <mrow>
     <mi>X</mi>
     <mi>d</mi>
     <mi>P</mi>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>X</mi>
      <msub>
       <mn>1</mn>
       <mi>B</mi>
      </msub>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo stretchy="false">)</mo>
    </mrow>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mn>1</mn>
      <mi>B</mi>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo stretchy="false">)</mo>
    </mrow>
    <mi>P</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>B</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mo largeop="true" symmetric="true">‚à´</mo>
     <mi>B</mi>
    </msub>
    <mrow>
     <mi>E</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>X</mi>
      <mo stretchy="false">)</mo>
     </mrow>
     <mi>d</mi>
     <mi>P</mi>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <int></int>
       <ci>B</ci>
      </apply>
      <apply>
       <times></times>
       <ci>X</ci>
       <ci>d</ci>
       <ci>P</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>E</ci>
      <apply>
       <times></times>
       <ci>X</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <cn type="integer">1</cn>
        <ci>B</ci>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>E</ci>
      <ci>X</ci>
      <ci>E</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <cn type="integer">1</cn>
       <ci>B</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>E</ci>
      <ci>X</ci>
      <ci>P</ci>
      <ci>B</ci>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <int></int>
       <ci>B</ci>
      </apply>
      <apply>
       <times></times>
       <ci>E</ci>
       <ci>X</ci>
       <ci>d</ci>
       <ci>P</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \int_{B}XdP=E(X1_{B})=E(X)E(1_{B})=E(X)P(B)=\int_{B}E(X)dP
  </annotation>
 </semantics>
</math>

 Thus the definition of conditional expectation is satisfied by the constant random variable 

<math display="inline" id="Conditional_expectation:120">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>E</ci>
    <ci>X</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(X)
  </annotation>
 </semantics>
</math>

, as desired. </p>
<ul>
<li><ul>
<li>If 

<math display="inline" id="Conditional_expectation:121">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 is independent of 

<math display="inline" id="Conditional_expectation:122">
 <semantics>
  <mrow>
   <mi>œÉ</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>Y</mi>
    <mo>,</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>œÉ</ci>
    <interval closure="open">
     <ci>Y</ci>
     <ci>‚Ñã</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sigma(Y,\mathcal{H})
  </annotation>
 </semantics>
</math>

, then 

<math display="inline" id="Conditional_expectation:123">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mi>Y</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo rspace="4.2pt" stretchy="false">)</mo>
   </mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>Y</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <csymbol cd="unknown">Y</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">Y</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(XY\mid\mathcal{H})=E(X)\,E(Y\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

. Note that this is not necessarily the case if 

<math display="inline" id="Conditional_expectation:124">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 is only independent of 

<math display="inline" id="Conditional_expectation:125">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}
  </annotation>
 </semantics>
</math>

 and of 

<math display="inline" id="Conditional_expectation:126">
 <semantics>
  <mi>Y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y
  </annotation>
 </semantics>
</math>

.</li>
<li>If 

<math display="inline" id="Conditional_expectation:127">
 <semantics>
  <mrow>
   <mi>X</mi>
   <mo>,</mo>
   <mi>Y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <ci>X</ci>
    <ci>Y</ci>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X,Y
  </annotation>
 </semantics>
</math>

 are independent, 

<math display="inline" id="Conditional_expectation:128">
 <semantics>
  <mrow>
   <mi class="ltx_font_mathcaligraphic">ùí¢</mi>
   <mo>,</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <ci>ùí¢</ci>
    <ci>‚Ñã</ci>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{G},\mathcal{H}
  </annotation>
 </semantics>
</math>

 are independent, 

<math display="inline" id="Conditional_expectation:129">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 is independent of 

<math display="inline" id="Conditional_expectation:130">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Conditional_expectation:131">
 <semantics>
  <mi>Y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y
  </annotation>
 </semantics>
</math>

 is independent of 

<math display="inline" id="Conditional_expectation:132">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ùí¢</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ùí¢</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{G}
  </annotation>
 </semantics>
</math>

, then 

<math display="inline" id="Conditional_expectation:133">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mi>Y</mi>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">ùí¢</mi>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>Y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mi>Y</mi>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">ùí¢</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">E</csymbol>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-(</ci>
      <csymbol cd="unknown">X</csymbol>
      <csymbol cd="unknown">Y</csymbol>
      <ci>normal-‚à£</ci>
      <csymbol cd="unknown">G</csymbol>
      <ci>normal-)</ci>
     </cerror>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">Y</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">E</csymbol>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-(</ci>
      <csymbol cd="unknown">X</csymbol>
      <csymbol cd="unknown">Y</csymbol>
      <ci>normal-‚à£</ci>
      <csymbol cd="unknown">H</csymbol>
      <ci>normal-)</ci>
     </cerror>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">G</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <ci>normal-.</ci>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(E(XY\mid\mathcal{G})\mid\mathcal{H})=E(X)E(Y)=E(E(XY\mid\mathcal{H})\mid%
\mathcal{G}).
  </annotation>
 </semantics>
</math>

</li>
</ul></li>
</ul>
<ul>
<li>Stability:
<ul>
<li>If 

<math display="inline" id="Conditional_expectation:134">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 is 

<math display="inline" id="Conditional_expectation:135">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}
  </annotation>
 </semantics>
</math>

-measurable, then 

<math display="inline" id="Conditional_expectation:136">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>X</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">X</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(X\mid\mathcal{H})=X
  </annotation>
 </semantics>
</math>

.</li>
<li>If <em>Z</em> is a random variable, then 

<math display="inline" id="Conditional_expectation:137">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>f</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>Z</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>‚à£</mo>
     <mi>Z</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>f</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>Z</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-E</ci>
     <apply>
      <times></times>
      <ci>f</ci>
      <ci>Z</ci>
     </apply>
     <ci>Z</ci>
    </apply>
    <apply>
     <times></times>
     <ci>f</ci>
     <ci>Z</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(f(Z)\mid Z)=f(Z)
  </annotation>
 </semantics>
</math>

 and in its simplest form

<math display="block" id="Conditional_expectation:138">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>Z</mi>
     <mo>‚à£</mo>
     <mi>Z</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mi>Z</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-E</ci>
     <ci>Z</ci>
     <ci>Z</ci>
    </apply>
    <ci>Z</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(Z\mid Z)=Z
  </annotation>
 </semantics>
</math>

</li>
</ul></li>
</ul>
<ul>
<li>Pulling out known factors:
<ul>
<li>If 

<math display="inline" id="Conditional_expectation:139">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 is 

<math display="inline" id="Conditional_expectation:140">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}
  </annotation>
 </semantics>
</math>

-measurable, then 

<math display="inline" id="Conditional_expectation:141">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mi>Y</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mpadded width="+1.7pt">
    <mi>X</mi>
   </mpadded>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>Y</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <csymbol cd="unknown">Y</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">X</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">Y</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(XY\mid\mathcal{H})=X\,E(Y\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

.</li>
<li>If <em>Z</em> is a random variable, then 

<math display="inline" id="Conditional_expectation:142">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>f</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>Z</mi>
       <mo stretchy="false">)</mo>
      </mrow>
      <mi>Y</mi>
     </mrow>
     <mo>‚à£</mo>
     <mi>Z</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>f</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>Z</mi>
     <mo stretchy="false">)</mo>
    </mrow>
    <mrow>
     <mo>E</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>Y</mi>
      <mo>‚à£</mo>
      <mi>Z</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-E</ci>
     <apply>
      <times></times>
      <ci>f</ci>
      <ci>Z</ci>
      <ci>Y</ci>
     </apply>
     <ci>Z</ci>
    </apply>
    <apply>
     <times></times>
     <ci>f</ci>
     <ci>Z</ci>
     <apply>
      <ci>normal-E</ci>
      <ci>Y</ci>
      <ci>Z</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(f(Z)Y\mid Z)=f(Z)\operatorname{E}(Y\mid Z)
  </annotation>
 </semantics>
</math>

</li>
</ul></li>
</ul>
<ul>
<li><a href="Law_of_total_expectation" title="wikilink">Law of total expectation</a>

<math display="block" id="Conditional_expectation:143">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">E</csymbol>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-(</ci>
      <csymbol cd="unknown">X</csymbol>
      <ci>normal-‚à£</ci>
      <csymbol cd="unknown">H</csymbol>
      <ci>normal-)</ci>
     </cerror>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(E(X\mid\mathcal{H}))=E(X)
  </annotation>
 </semantics>
</math>

.</li>
</ul>
<ul>
<li>Tower property: for sub-œÉ-algebras 

<math display="inline" id="Conditional_expectation:144">
 <semantics>
  <mrow>
   <msub>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mn>1</mn>
   </msub>
   <mo>‚äÇ</mo>
   <msub>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mn>2</mn>
   </msub>
   <mo>‚äÇ</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <subset></subset>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñã</ci>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñã</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <apply>
     <subset></subset>
     <share href="#.cmml">
     </share>
     <ci>‚Ñ±</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}_{1}\subset\mathcal{H}_{2}\subset\mathcal{F}
  </annotation>
 </semantics>
</math>

 we have 

<math display="inline" id="Conditional_expectation:145">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <msub>
      <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
      <mn>2</mn>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>‚à£</mo>
    <msub>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mn>1</mn>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <msub>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mn>1</mn>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo stretchy="false">|</mo>
     <msub>
      <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
      <mn>1</mn>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>‚à£</mo>
    <msub>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mn>2</mn>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">E</csymbol>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-(</ci>
      <csymbol cd="unknown">X</csymbol>
      <ci>normal-‚à£</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>‚Ñã</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-)</ci>
     </cerror>
     <ci>normal-‚à£</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñã</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñã</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">E</csymbol>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-(</ci>
      <csymbol cd="unknown">X</csymbol>
      <ci>normal-|</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>‚Ñã</ci>
       <cn type="integer">1</cn>
      </apply>
      <ci>normal-)</ci>
     </cerror>
     <ci>normal-‚à£</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñã</ci>
      <cn type="integer">2</cn>
     </apply>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(E(X\mid\mathcal{H}_{2})\mid\mathcal{H}_{1})=E(X\mid\mathcal{H}_{1})=E(E(X|%
\mathcal{H}_{1})\mid\mathcal{H}_{2})
  </annotation>
 </semantics>
</math>

.
<ul>
<li>A special case is when <em>Z</em> is a 

<math display="inline" id="Conditional_expectation:146">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}
  </annotation>
 </semantics>
</math>

-measurable random variable. Then 

<math display="inline" id="Conditional_expectation:147">
 <semantics>
  <mrow>
   <mrow>
    <mi>œÉ</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>Z</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>‚äÇ</mo>
   <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <subset></subset>
    <apply>
     <times></times>
     <ci>œÉ</ci>
     <ci>Z</ci>
    </apply>
    <ci>‚Ñã</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sigma(Z)\subset\mathcal{H}
  </annotation>
 </semantics>
</math>

 and thus 

<math display="inline" id="Conditional_expectation:148">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>‚à£</mo>
    <mi>Z</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi>Z</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">E</csymbol>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-(</ci>
      <csymbol cd="unknown">X</csymbol>
      <ci>normal-‚à£</ci>
      <csymbol cd="unknown">H</csymbol>
      <ci>normal-)</ci>
     </cerror>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">Z</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">Z</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(E(X\mid\mathcal{H})\mid Z)=E(X\mid Z)
  </annotation>
 </semantics>
</math>

</li>
<li><a href="Doob_martingale" title="wikilink">Doob martingale</a> property: the above with 

<math display="inline" id="Conditional_expectation:149">
 <semantics>
  <mrow>
   <mi>Z</mi>
   <mo>=</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">Z</csymbol>
    <eq></eq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z=E(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

 (which is 

<math display="inline" id="Conditional_expectation:150">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}
  </annotation>
 </semantics>
</math>

-measurable), and using also 

<math display="inline" id="Conditional_expectation:151">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>Z</mi>
     <mo>‚à£</mo>
     <mi>Z</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mi>Z</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-E</ci>
     <ci>Z</ci>
     <ci>Z</ci>
    </apply>
    <ci>Z</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(Z\mid Z)=Z
  </annotation>
 </semantics>
</math>

, gives 

<math display="inline" id="Conditional_expectation:152">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">E</csymbol>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-(</ci>
      <csymbol cd="unknown">X</csymbol>
      <ci>normal-‚à£</ci>
      <csymbol cd="unknown">H</csymbol>
      <ci>normal-)</ci>
     </cerror>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(X\mid E(X\mid\mathcal{H}))=E(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

.</li>
</ul></li>
</ul>
<ul>
<li>Linearity: we have 

<math display="inline" id="Conditional_expectation:153">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>X</mi>
     <mn>1</mn>
    </msub>
    <mo>+</mo>
    <msub>
     <mi>X</mi>
     <mn>2</mn>
    </msub>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>X</mi>
     <mn>1</mn>
    </msub>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>+</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>X</mi>
     <mn>2</mn>
    </msub>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <cn type="integer">1</cn>
     </apply>
     <plus></plus>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <cn type="integer">2</cn>
     </apply>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <plus></plus>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <cn type="integer">2</cn>
     </apply>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(X_{1}+X_{2}\mid\mathcal{H})=E(X_{1}\mid\mathcal{H})+E(X_{2}\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Conditional_expectation:154">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>a</mi>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mpadded width="+1.7pt">
    <mi>a</mi>
   </mpadded>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">a</csymbol>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">a</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(aX\mid\mathcal{H})=a\,E(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

 for 

<math display="inline" id="Conditional_expectation:155">
 <semantics>
  <mrow>
   <mi>a</mi>
   <mo>‚àà</mo>
   <merror class="ltx_ERROR undefined undefined">
    <mtext>\R</mtext>
   </merror>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>a</ci>
    <mtext>\R</mtext>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a\in\R
  </annotation>
 </semantics>
</math>

.</li>
</ul>
<ul>
<li>Positivity: If 

<math display="inline" id="Conditional_expectation:156">
 <semantics>
  <mrow>
   <mi>X</mi>
   <mo>‚â•</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <geq></geq>
    <ci>X</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X\geq 0
  </annotation>
 </semantics>
</math>

 then 

<math display="inline" id="Conditional_expectation:157">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>‚â•</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <geq></geq>
    <cn type="integer">0</cn>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(X\mid\mathcal{H})\geq 0
  </annotation>
 </semantics>
</math>

.</li>
</ul>
<ul>
<li>Monotonicity: If 

<math display="inline" id="Conditional_expectation:158">
 <semantics>
  <mrow>
   <msub>
    <mi>X</mi>
    <mn>1</mn>
   </msub>
   <mo>‚â§</mo>
   <msub>
    <mi>X</mi>
    <mn>2</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <leq></leq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>X</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>X</ci>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X_{1}\leq X_{2}
  </annotation>
 </semantics>
</math>

 then 

<math display="inline" id="Conditional_expectation:159">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>X</mi>
     <mn>1</mn>
    </msub>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>‚â§</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>X</mi>
     <mn>2</mn>
    </msub>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <leq></leq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <cn type="integer">2</cn>
     </apply>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(X_{1}\mid\mathcal{H})\leq E(X_{2}\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

.</li>
</ul>
<ul>
<li><a href="Monotone_convergence_theorem" title="wikilink">Monotone convergence</a>: If 

<math display="inline" id="Conditional_expectation:160">
 <semantics>
  <mrow>
   <mn>0</mn>
   <mo>‚â§</mo>
   <msub>
    <mi>X</mi>
    <mi>n</mi>
   </msub>
   <mo>‚Üë</mo>
   <mi>X</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <leq></leq>
     <cn type="integer">0</cn>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <ci>normal-‚Üë</ci>
     <share href="#.cmml">
     </share>
     <ci>X</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   0\leq X_{n}\uparrow X
  </annotation>
 </semantics>
</math>

 then 

<math display="inline" id="Conditional_expectation:161">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>X</mi>
     <mi>n</mi>
    </msub>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>‚Üë</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <ci>normal-‚Üë</ci>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(X_{n}\mid\mathcal{H})\uparrow E(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

.</li>
</ul>
<ul>
<li><a href="Dominated_convergence_theorem" title="wikilink">Dominated convergence</a>: If 

<math display="inline" id="Conditional_expectation:162">
 <semantics>
  <mrow>
   <msub>
    <mi>X</mi>
    <mi>n</mi>
   </msub>
   <mo>‚Üí</mo>
   <mi>X</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-‚Üí</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>X</ci>
     <ci>n</ci>
    </apply>
    <ci>X</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X_{n}\to X
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Conditional_expectation:163">
 <semantics>
  <mrow>
   <mrow>
    <mo stretchy="false">|</mo>
    <msub>
     <mi>X</mi>
     <mi>n</mi>
    </msub>
    <mo stretchy="false">|</mo>
   </mrow>
   <mo>‚â§</mo>
   <mi>Y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <leq></leq>
    <apply>
     <abs></abs>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <ci>n</ci>
     </apply>
    </apply>
    <ci>Y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   |X_{n}|\leq Y
  </annotation>
 </semantics>
</math>

 with 

<math display="inline" id="Conditional_expectation:164">
 <semantics>
  <mrow>
   <mi>Y</mi>
   <mo>‚àà</mo>
   <msup>
    <mi>L</mi>
    <mn>1</mn>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>Y</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>L</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y\in L^{1}
  </annotation>
 </semantics>
</math>

 then 

<math display="inline" id="Conditional_expectation:165">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>X</mi>
     <mi>n</mi>
    </msub>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>‚Üí</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <ci>normal-‚Üí</ci>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(X_{n}\mid\mathcal{H})\to E(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

.</li>
</ul>
<ul>
<li><a href="Fatou's_lemma" title="wikilink">Fatou's lemma</a>: If 

<math display="inline" id="Conditional_expectation:166">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mo>inf</mo>
     <mi>n</mi>
    </msub>
    <msub>
     <mi>X</mi>
     <mi>n</mi>
    </msub>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>></mo>
   <mo>-</mo>
   <mi mathvariant="normal">‚àû</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <csymbol cd="latexml">infimum</csymbol>
      <ci>n</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <gt></gt>
    <minus></minus>
    <infinity></infinity>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \textstyle E(\inf_{n}X_{n}\mid\mathcal{H})>-\infty
  </annotation>
 </semantics>
</math>

 then 

<math display="inline" id="Conditional_expectation:167">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mo>lim inf</mo>
     <mrow>
      <mi>n</mi>
      <mo>‚Üí</mo>
      <mi mathvariant="normal">‚àû</mi>
     </mrow>
    </msub>
    <msub>
     <mi>X</mi>
     <mi>n</mi>
    </msub>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>‚â§</mo>
   <msub>
    <mo>lim inf</mo>
    <mrow>
     <mi>n</mi>
     <mo>‚Üí</mo>
     <mi mathvariant="normal">‚àû</mi>
    </mrow>
   </msub>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>X</mi>
     <mi>n</mi>
    </msub>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <csymbol cd="latexml">limit-infimum</csymbol>
      <apply>
       <ci>normal-‚Üí</ci>
       <ci>n</ci>
       <infinity></infinity>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <leq></leq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <csymbol cd="latexml">limit-infimum</csymbol>
     <apply>
      <ci>normal-‚Üí</ci>
      <ci>n</ci>
      <infinity></infinity>
     </apply>
    </apply>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \textstyle E(\liminf_{n\to\infty}X_{n}\mid\mathcal{H})\leq\liminf_{n\to\infty}%
E(X_{n}\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

.</li>
</ul>
<ul>
<li><a href="Jensen's_inequality" title="wikilink">Jensen's inequality</a>: If 

<math display="inline" id="Conditional_expectation:168">
 <semantics>
  <mrow>
   <mi>f</mi>
   <mo>:</mo>
   <mrow>
    <mi>‚Ñù</mi>
    <mo>‚Üí</mo>
    <mi>‚Ñù</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>f</ci>
    <apply>
     <ci>normal-‚Üí</ci>
     <ci>‚Ñù</ci>
     <ci>‚Ñù</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f\colon\mathbb{R}\rightarrow\mathbb{R}
  </annotation>
 </semantics>
</math>

 is a <a href="convex_function" title="wikilink">convex function</a>, then 

<math display="inline" id="Conditional_expectation:169">
 <semantics>
  <mrow>
   <mi>f</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>‚â§</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>f</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">f</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">E</csymbol>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-(</ci>
      <csymbol cd="unknown">X</csymbol>
      <ci>normal-‚à£</ci>
      <csymbol cd="unknown">H</csymbol>
      <ci>normal-)</ci>
     </cerror>
     <ci>normal-)</ci>
    </cerror>
    <leq></leq>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">f</csymbol>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-(</ci>
      <csymbol cd="unknown">X</csymbol>
      <ci>normal-)</ci>
     </cerror>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f(E(X\mid\mathcal{H}))\leq E(f(X)\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

.</li>
</ul>
<ul>
<li><a href="Conditional_variance" title="wikilink">Conditional variance</a>: Using the conditional expectation we can define, by analogy with the definition of the <a class="uri" href="variance" title="wikilink">variance</a> as the mean square deviation from the average, the conditional variance
<ul>
<li>Definition

<math display="block" id="Conditional_expectation:170">
 <semantics>
  <mrow>
   <mrow>
    <mo>Var</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo maxsize="120%" minsize="120%">(</mo>
     <msup>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mi>X</mi>
        <mo>-</mo>
        <mrow>
         <mo>E</mo>
         <mrow>
          <mo stretchy="false">(</mo>
          <mi>X</mi>
          <mo>‚à£</mo>
          <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
      <mn>2</mn>
     </msup>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo maxsize="120%" minsize="120%">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>Var</ci>
     <ci>X</ci>
     <ci>‚Ñã</ci>
    </apply>
    <apply>
     <ci>normal-E</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <minus></minus>
       <ci>X</ci>
       <apply>
        <ci>normal-E</ci>
        <ci>X</ci>
        <ci>‚Ñã</ci>
       </apply>
      </apply>
      <cn type="integer">2</cn>
     </apply>
     <ci>‚Ñã</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{Var}(X\mid\mathcal{H})=\operatorname{E}\bigl((X-\operatorname{E}%
(X\mid\mathcal{H}))^{2}\mid\mathcal{H}\bigr)
  </annotation>
 </semantics>
</math>

</li>
<li><a href="Algebraic_formula_for_the_variance" title="wikilink">Algebraic formula for the variance</a>

<math display="block" id="Conditional_expectation:171">
 <semantics>
  <mrow>
   <mrow>
    <mo>Var</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mo>E</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <msup>
       <mi>X</mi>
       <mn>2</mn>
      </msup>
      <mo>‚à£</mo>
      <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>-</mo>
    <msup>
     <mrow>
      <mo maxsize="120%" minsize="120%">(</mo>
      <mrow>
       <mo>E</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>X</mi>
        <mo>‚à£</mo>
        <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo maxsize="120%" minsize="120%">)</mo>
     </mrow>
     <mn>2</mn>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>Var</ci>
     <ci>X</ci>
     <ci>‚Ñã</ci>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <ci>normal-E</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>X</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>‚Ñã</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <ci>normal-E</ci>
       <ci>X</ci>
       <ci>‚Ñã</ci>
      </apply>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{Var}(X\mid\mathcal{H})=\operatorname{E}(X^{2}\mid\mathcal{H})-%
\bigl(\operatorname{E}(X\mid\mathcal{H})\bigr)^{2}
  </annotation>
 </semantics>
</math>

</li>
<li><a href="Law_of_total_variance" title="wikilink">Law of total variance</a>

<math display="block" id="Conditional_expectation:172">
 <semantics>
  <mrow>
   <mrow>
    <mo>Var</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mo>E</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mo>Var</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>X</mi>
        <mo>‚à£</mo>
        <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>+</mo>
    <mrow>
     <mo>Var</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mo>E</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>X</mi>
        <mo>‚à£</mo>
        <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>Var</ci>
     <ci>X</ci>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <ci>normal-E</ci>
      <apply>
       <ci>Var</ci>
       <ci>X</ci>
       <ci>‚Ñã</ci>
      </apply>
     </apply>
     <apply>
      <ci>Var</ci>
      <apply>
       <ci>normal-E</ci>
       <ci>X</ci>
       <ci>‚Ñã</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{Var}(X)=\operatorname{E}(\operatorname{Var}(X\mid\mathcal{H}))+%
\operatorname{Var}(\operatorname{E}(X\mid\mathcal{H}))
  </annotation>
 </semantics>
</math>

.</li>
</ul></li>
</ul>
<ul>
<li><a href="Martingale_convergence_theorem" title="wikilink">Martingale convergence</a>: For a random variable 

<math display="inline" id="Conditional_expectation:173">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

, that has finite expectation, we have 

<math display="inline" id="Conditional_expectation:174">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <msub>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mi>n</mi>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>‚Üí</mo>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñã</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-)</ci>
    </cerror>
    <ci>normal-‚Üí</ci>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(X\mid\mathcal{H}_{n})\to E(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

, if either 

<math display="inline" id="Conditional_expectation:175">
 <semantics>
  <mrow>
   <msub>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mn>1</mn>
   </msub>
   <mo>‚äÇ</mo>
   <msub>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mn>2</mn>
   </msub>
   <mo>‚äÇ</mo>
   <mi mathvariant="normal">‚ãØ</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <subset></subset>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñã</ci>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñã</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <apply>
     <subset></subset>
     <share href="#.cmml">
     </share>
     <ci>normal-‚ãØ</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}_{1}\subset\mathcal{H}_{2}\subset\cdots
  </annotation>
 </semantics>
</math>

 is an increasing series of sub-œÉ-algebras and 

<math display="inline" id="Conditional_expectation:176">
 <semantics>
  <mrow>
   <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
   <mo>=</mo>
   <mrow>
    <mi>œÉ</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <msubsup>
       <mo largeop="true" mathsize="160%" stretchy="false" symmetric="true">‚ãÉ</mo>
       <mrow>
        <mi>n</mi>
        <mo>=</mo>
        <mn>1</mn>
       </mrow>
       <mi mathvariant="normal">‚àû</mi>
      </msubsup>
      <msub>
       <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
       <mi>n</mi>
      </msub>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>‚Ñã</ci>
    <apply>
     <times></times>
     <ci>œÉ</ci>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <union></union>
        <apply>
         <eq></eq>
         <ci>n</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <infinity></infinity>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>‚Ñã</ci>
       <ci>n</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \textstyle\mathcal{H}=\sigma(\bigcup_{n=1}^{\infty}\mathcal{H}_{n})
  </annotation>
 </semantics>
</math>

 or if 

<math display="inline" id="Conditional_expectation:177">
 <semantics>
  <mrow>
   <msub>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mn>1</mn>
   </msub>
   <mo>‚äÉ</mo>
   <msub>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mn>2</mn>
   </msub>
   <mo>‚äÉ</mo>
   <mi mathvariant="normal">‚ãØ</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <csymbol cd="latexml">superset-of</csymbol>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñã</ci>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñã</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <apply>
     <csymbol cd="latexml">superset-of</csymbol>
     <share href="#.cmml">
     </share>
     <ci>normal-‚ãØ</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}_{1}\supset\mathcal{H}_{2}\supset\cdots
  </annotation>
 </semantics>
</math>

 is a decreasing series of sub-œÉ-algebras and 

<math display="inline" id="Conditional_expectation:178">
 <semantics>
  <mrow>
   <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
   <mo>=</mo>
   <mrow>
    <msubsup>
     <mo largeop="true" mathsize="160%" stretchy="false" symmetric="true">‚ãÇ</mo>
     <mrow>
      <mi>n</mi>
      <mo>=</mo>
      <mn>1</mn>
     </mrow>
     <mi mathvariant="normal">‚àû</mi>
    </msubsup>
    <msub>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mi>n</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>‚Ñã</ci>
    <apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <intersect></intersect>
       <apply>
        <eq></eq>
        <ci>n</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <infinity></infinity>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñã</ci>
      <ci>n</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \textstyle\mathcal{H}=\bigcap_{n=1}^{\infty}\mathcal{H}_{n}
  </annotation>
 </semantics>
</math>

.</li>
</ul>
<ul>
<li>Conditional expectation as 

<math display="inline" id="Conditional_expectation:179">
 <semantics>
  <msup>
   <mi>L</mi>
   <mn>2</mn>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>L</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   L^{2}
  </annotation>
 </semantics>
</math>

-projection: If 

<math display="inline" id="Conditional_expectation:180">
 <semantics>
  <mrow>
   <mi>X</mi>
   <mo>,</mo>
   <mi>Y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <ci>X</ci>
    <ci>Y</ci>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X,Y
  </annotation>
 </semantics>
</math>

 are in the <a href="Hilbert_space" title="wikilink">Hilbert space</a> of <a class="uri" href="square-integrable" title="wikilink">square-integrable</a> real random variables (real random variables with finite second moment) then
<ul>
<li>for 

<math display="inline" id="Conditional_expectation:181">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}
  </annotation>
 </semantics>
</math>

-measurable 

<math display="inline" id="Conditional_expectation:182">
 <semantics>
  <mi>Y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y
  </annotation>
 </semantics>
</math>

 we have 

<math display="inline" id="Conditional_expectation:183">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>Y</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>-</mo>
     <mi>E</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>X</mi>
      <mo>‚à£</mo>
      <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
      <mo stretchy="false">)</mo>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">Y</csymbol>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-(</ci>
      <csymbol cd="unknown">X</csymbol>
      <minus></minus>
      <csymbol cd="unknown">E</csymbol>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <ci>normal-(</ci>
       <csymbol cd="unknown">X</csymbol>
       <ci>normal-‚à£</ci>
       <csymbol cd="unknown">H</csymbol>
       <ci>normal-)</ci>
      </cerror>
      <ci>normal-)</ci>
     </cerror>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <cn type="integer">0</cn>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(Y(X-E(X\mid\mathcal{H})))=0
  </annotation>
 </semantics>
</math>

, i.e. the conditional expectation 

<math display="inline" id="Conditional_expectation:184">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>‚à£</mo>
    <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-‚à£</ci>
     <csymbol cd="unknown">H</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

 is in the sense of the <a href="Lp_space" title="wikilink"><em>L</em><sup>2</sup>(<em>P</em>)</a> scalar product the <a href="orthogonal_projection" title="wikilink">orthogonal projection</a> from 

<math display="inline" id="Conditional_expectation:185">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 to the <a href="linear_subspace" title="wikilink">linear subspace</a> of 

<math display="inline" id="Conditional_expectation:186">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>‚Ñã</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{H}
  </annotation>
 </semantics>
</math>

-measurable functions. (This allows to define and prove the existence of the conditional expectation based on the <a href="Hilbert_projection_theorem" title="wikilink">Hilbert projection theorem</a>.)</li>
<li>the mapping 

<math display="inline" id="Conditional_expectation:187">
 <semantics>
  <mrow>
   <mi>X</mi>
   <mo>‚Ü¶</mo>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo>‚à£</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">maps-to</csymbol>
    <ci>X</ci>
    <apply>
     <ci>normal-E</ci>
     <ci>X</ci>
     <ci>‚Ñã</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X\mapsto\operatorname{E}(X\mid\mathcal{H})
  </annotation>
 </semantics>
</math>

 is <a href="self-adjoint_operator" title="wikilink">self-adjoint</a>

<math display="block" id="Conditional_expectation:188">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>X</mi>
      <mrow>
       <mo>E</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>Y</mi>
        <mo>‚à£</mo>
        <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo>(</mo>
     <mrow>
      <mrow>
       <mo>E</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>X</mi>
        <mo>‚à£</mo>
        <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mrow>
       <mo>E</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>Y</mi>
        <mo>‚à£</mo>
        <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
     <mo>)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo>E</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mrow>
       <mo>E</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>X</mi>
        <mo>‚à£</mo>
        <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mi>Y</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <ci>normal-E</ci>
      <apply>
       <times></times>
       <ci>X</ci>
       <apply>
        <ci>normal-E</ci>
        <ci>Y</ci>
        <ci>‚Ñã</ci>
       </apply>
      </apply>
     </apply>
     <apply>
      <ci>normal-E</ci>
      <apply>
       <times></times>
       <apply>
        <ci>normal-E</ci>
        <ci>X</ci>
        <ci>‚Ñã</ci>
       </apply>
       <apply>
        <ci>normal-E</ci>
        <ci>Y</ci>
        <ci>‚Ñã</ci>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <ci>normal-E</ci>
      <apply>
       <times></times>
       <apply>
        <ci>normal-E</ci>
        <ci>X</ci>
        <ci>‚Ñã</ci>
       </apply>
       <ci>Y</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(X\operatorname{E}(Y\mid\mathcal{H}))=\operatorname{E}\left(%
\operatorname{E}(X\mid\mathcal{H})\operatorname{E}(Y\mid\mathcal{H})\right)=%
\operatorname{E}(\operatorname{E}(X\mid\mathcal{H})Y)
  </annotation>
 </semantics>
</math>

</li>
</ul></li>
</ul>
<ul>
<li>Conditioning is a <a href="Contraction_(operator_theory)" title="wikilink">contractive</a> projection of <a href="Lp_space" title="wikilink"><em>L</em><sup>p</sup></a> spaces 

<math display="inline" id="Conditional_expectation:189">
 <semantics>
  <mrow>
   <mrow>
    <msubsup>
     <mi>L</mi>
     <mi>P</mi>
     <mi>s</mi>
    </msubsup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi mathvariant="normal">Œ©</mi>
     <mo>;</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>‚Üí</mo>
   <mrow>
    <msubsup>
     <mi>L</mi>
     <mi>P</mi>
     <mi>s</mi>
    </msubsup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi mathvariant="normal">Œ©</mi>
     <mo>;</mo>
     <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-‚Üí</ci>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>L</ci>
       <ci>s</ci>
      </apply>
      <ci>P</ci>
     </apply>
     <list>
      <ci>normal-Œ©</ci>
      <ci>‚Ñ±</ci>
     </list>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>L</ci>
       <ci>s</ci>
      </apply>
      <ci>P</ci>
     </apply>
     <list>
      <ci>normal-Œ©</ci>
      <ci>‚Ñã</ci>
     </list>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   L^{s}_{P}(\Omega;\mathcal{F})\rightarrow L^{s}_{P}(\Omega;\mathcal{H})
  </annotation>
 </semantics>
</math>

 i.e. 

<math display="inline" id="Conditional_expectation:190">
 <semantics>
  <mrow>
   <mrow>
    <mo>E</mo>
    <msup>
     <mrow>
      <mo stretchy="false">|</mo>
      <mrow>
       <mo>E</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>X</mi>
        <mo>‚à£</mo>
        <mi class="ltx_font_mathcaligraphic">‚Ñã</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">|</mo>
     </mrow>
     <mi>s</mi>
    </msup>
   </mrow>
   <mo>‚â§</mo>
   <mrow>
    <mo>E</mo>
    <msup>
     <mrow>
      <mo stretchy="false">|</mo>
      <mi>X</mi>
      <mo stretchy="false">|</mo>
     </mrow>
     <mi>s</mi>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <leq></leq>
    <apply>
     <ci>normal-E</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <abs></abs>
       <apply>
        <ci>normal-E</ci>
        <ci>X</ci>
        <ci>‚Ñã</ci>
       </apply>
      </apply>
      <ci>s</ci>
     </apply>
    </apply>
    <apply>
     <ci>normal-E</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <abs></abs>
       <ci>X</ci>
      </apply>
      <ci>s</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}|\operatorname{E}(X\mid\mathcal{H})|^{s}\leq\operatorname{E}|X%
|^{s}
  </annotation>
 </semantics>
</math>

 for any <em>s</em>¬†‚â•¬†1.</li>
</ul>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Non-commutative_conditional_expectation" title="wikilink">Non-commutative conditional expectation</a></li>
<li><a href="Law_of_total_probability" title="wikilink">Law of total probability</a></li>
<li><a href="Law_of_total_expectation" title="wikilink">Law of total expectation</a></li>
<li><a href="Law_of_total_variance" title="wikilink">Law of total variance</a></li>
<li><a href="Law_of_total_cumulance" title="wikilink">Law of total cumulance</a> (generalizes the other three)</li>
<li><a href="Conditioning_(probability)" title="wikilink">Conditioning (probability)</a></li>
<li><a href="Joint_probability_distribution" title="wikilink">Joint probability distribution</a></li>
<li><a href="Disintegration_theorem" title="wikilink">Disintegration theorem</a></li>
</ul>
<h2 id="notes">Notes</h2>
<h2 id="references">References</h2>
<ul>
<li><a href="William_Feller" title="wikilink">William Feller</a>, <em>An Introduction to Probability Theory and its Applications</em>, vol 1, 1950, page 223</li>
<li>Paul A. Meyer, <em>Probability and Potentials</em>, Blaisdell Publishing Co., 1966 </li>
<li>

<p>, pages 67‚Äì69</p></li>
</ul>
<h2 id="external-links">External links</h2>
<ul>
<li></li>
</ul>

<p>"</p>

<p><a href="Category:Probability_theory" title="wikilink">Category:Probability theory</a> <a href="Category:Statistical_terminology" title="wikilink">Category:Statistical terminology</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"></li>
<li id="fn2"></li>
<li id="fn3"></li>
<li id="fn4">Olav Kallenberg: <em>Foundations of Modern Probability.</em> 2. edition. Springer, New York 2002, ISBN 0-387-95313-2, S. 573.<a href="#fnref4">‚Ü©</a></li>
<li id="fn5"></li>
</ol>
</section>
</body>
</html>
