   Vannaâ€“Volga pricing      Vannaâ€“Volga pricing   The Vannaâ€“Volga method is a mathematical tool used in finance . It is a technique for pricing first-generation exotic options in foreign exchange market (FX) derivatives .  It consists of adjusting the Blackâ€“Scholes theoretical value (BSTV) by the cost of a portfolio which hedges three main risks associated to the volatility of the option: the Vega    ð’±   ð’±   \mathcal{V}   , the Vanna and the Volga. The Vanna is the sensitivity of the Vega with respect to a change in the spot FX rate:      Vanna  =    âˆ‚  ð’±    âˆ‚  S        Vanna      ð’±     S      \textrm{Vanna}=\frac{\partial\mathcal{V}}{\partial S}   .  Similarly, the Volga is the sensitivity of the Vega with respect to a change of the implied volatility    Ïƒ   Ïƒ   \sigma   :      Volga  =    âˆ‚  ð’±    âˆ‚  Ïƒ        Volga      ð’±     Ïƒ      \textrm{Volga}=\frac{\partial\mathcal{V}}{\partial\sigma}   .  If we consider a smile volatility term structure     Ïƒ   (  K  )       Ïƒ  K    \sigma(K)   with ATM strike    K  0     subscript  K  0    K_{0}   , ATM volatility    Ïƒ  0     subscript  Ïƒ  0    \sigma_{0}   , and where    K   c  /  p      subscript  K    c  p     K_{c/p}   are the 25-Delta call/put strikes (obtained by solving the equations      Î”   c  a  l  l     (   K  c   ,   Ïƒ  0   )    =   1  /  4          subscript  normal-Î”    c  a  l  l      subscript  K  c    subscript  Ïƒ  0       1  4     \Delta_{call}(K_{c},\sigma_{0})=1/4   and      Î”   p  u  t     (   K  p   ,   Ïƒ  0   )    =   -   1  /  4           subscript  normal-Î”    p  u  t      subscript  K  p    subscript  Ïƒ  0         1  4      \Delta_{put}(K_{p},\sigma_{0})=-1/4   where     Î”     c  a  l  l   /  p   u  t     (  K  ,  Ïƒ  )        subscript  normal-Î”        c  a  l  l   p   u  t     K  Ïƒ     \Delta_{call/put}(K,\sigma)   denotes the Blackâ€“Scholes Delta sensitivity ) then the hedging portfolio will be composed of the at-the-money (ATM), risk-reversal (RR) and butterfly (BF) strategies:         ATM   (   K  0   )        =     1  2     (    Call   (   K  0   ,   Ïƒ  0   )    +   Put   (   K  0   ,   Ïƒ  0   )     )          RR   (   K  c   ,   K  p   )        =          Call   (   K  c   ,   Ïƒ   (   K  c   )    )    -   Put   (   K  p   ,   Ïƒ   (   K  p   )    )           BF   (   K  c   ,   K  p   )        =      1  2     (    Call   (   K  c   ,   Ïƒ   (   K  c   )    )    +   Put   (   K  p   ,   Ïƒ   (   K  p   )    )     )    -   ATM   (   K  0   )              ATM   subscript  K  0      absent      1  2       Call    subscript  K  0    subscript  Ïƒ  0       Put    subscript  K  0    subscript  Ïƒ  0            RR    subscript  K  c    subscript  K  p       absent        absent  absent   Call    subscript  K  c     Ïƒ   subscript  K  c        Put    subscript  K  p     Ïƒ   subscript  K  p            BF    subscript  K  c    subscript  K  p       absent        1  2       Call    subscript  K  c     Ïƒ   subscript  K  c        Put    subscript  K  p     Ïƒ   subscript  K  p          ATM   subscript  K  0         \begin{aligned}\displaystyle\textrm{ATM}(K_{0})&\displaystyle=\frac{1}{2}\left%
 (\textrm{Call}(K_{0},\sigma_{0})+\textrm{Put}(K_{0},\sigma_{0})\right)\\
 \displaystyle\textrm{RR}(K_{c},K_{p})&\displaystyle=\frac{}{}\textrm{Call}(K_{%
 c},\sigma(K_{c}))-\textrm{Put}(K_{p},\sigma(K_{p}))\\
 \displaystyle\textrm{BF}(K_{c},K_{p})&\displaystyle=\frac{1}{2}\left(\textrm{%
 Call}(K_{c},\sigma(K_{c}))+\textrm{Put}(K_{p},\sigma(K_{p}))\right)-\textrm{%
 ATM}(K_{0})\end{aligned}     with    Call   (  K  ,  Ïƒ  )       Call   K  Ïƒ     \textrm{Call}(K,\sigma)   the Blackâ€“Scholes price of a call option (similarly for the put).  The simplest formulation of the Vannaâ€“Volga method suggests that the Vannaâ€“Volga price    X   V  V      superscript  X    V  V     X^{VV}   of an exotic instrument   X   X   X   is given by       X  VV   =    X   B  S    +       X   v  a  n  n  a     RR   v  a  n  n  a     âŸ    w   R  R     R   R   c  o  s  t     +       X   v  o  l  g  a     BF   v  o  l  g  a     âŸ    w   B  F     B   F   c  o  s  t           superscript  X  VV      superscript  X    B  S       subscript   normal-âŸ     subscript  X    v  a  n  n  a     subscript  RR    v  a  n  n  a       subscript  w    R  R     R   subscript  R    c  o  s  t        subscript   normal-âŸ     subscript  X    v  o  l  g  a     subscript  BF    v  o  l  g  a       subscript  w    B  F     B   subscript  F    c  o  s  t        X^{\rm VV}=X^{BS}+\underbrace{\frac{\textrm{X}_{vanna}}{\textrm{RR}_{vanna}}}_%
 {w_{RR}}{RR}_{cost}+\underbrace{\frac{\textrm{X}_{volga}}{\textrm{BF}_{volga}}%
 }_{w_{BF}}{BF}_{cost}     where by    X   B  S      superscript  X    B  S     X^{BS}   denotes the Blackâ€“Scholes price of the exotic and the Greeks are calculated with ATM volatility and         R   R   c  o  s  t         =    [    Call   (   K  c   ,   Ïƒ   (   K  c   )    )    -   Put   (   K  p   ,   Ïƒ   (   K  p   )    )     ]   -   [    Call   (   K  c   ,   Ïƒ  0   )    -   Put   (   K  p   ,   Ïƒ  0   )     ]          B   F   c  o  s  t         =      1  2     [    Call   (   K  c   ,   Ïƒ   (   K  c   )    )    +   Put   (   K  p   ,   Ïƒ   (   K  p   )    )     ]    -     1  2     [    Call   (   K  c   ,   Ïƒ  0   )    +   Put   (   K  p   ,   Ïƒ  0   )     ]              R   subscript  R    c  o  s  t       absent     delimited-[]      Call    subscript  K  c     Ïƒ   subscript  K  c        Put    subscript  K  p     Ïƒ   subscript  K  p         delimited-[]      Call    subscript  K  c    subscript  Ïƒ  0       Put    subscript  K  p    subscript  Ïƒ  0             B   subscript  F    c  o  s  t       absent        1  2    delimited-[]      Call    subscript  K  c     Ïƒ   subscript  K  c        Put    subscript  K  p     Ïƒ   subscript  K  p             1  2    delimited-[]      Call    subscript  K  c    subscript  Ïƒ  0       Put    subscript  K  p    subscript  Ïƒ  0             \begin{aligned}\displaystyle RR_{cost}&\displaystyle=\left[\textrm{Call}(K_{c}%
 ,\sigma(K_{c}))-\textrm{Put}(K_{p},\sigma(K_{p}))\right]-\left[\textrm{Call}(K%
 _{c},\sigma_{0})-\textrm{Put}(K_{p},\sigma_{0})\right]\\
 \displaystyle BF_{cost}&\displaystyle=\frac{1}{2}\left[\textrm{Call}(K_{c},%
 \sigma(K_{c}))+\textrm{Put}(K_{p},\sigma(K_{p}))\right]-\frac{1}{2}\left[%
 \textrm{Call}(K_{c},\sigma_{0})+\textrm{Put}(K_{p},\sigma_{0})\right]\end{aligned}     These quantities represent a smile cost , namely the difference between the price computed with/without including the smile effect.  The rationale behind the above formulation of the Vanna-Volga price is that one can extract the smile cost of an exotic option by measuring the smile cost of a portfolio designed to hedge its Vanna and Volga risks. The reason why one chooses the strategies BF and RR to do this is because they are liquid FX instruments and they carry mainly Volga, and respectively Vanna risks. The weighting factors    w   R  R      subscript  w    R  R     w_{RR}   and    w   B  F      subscript  w    B  F     w_{BF}   represent respectively the amount of RR needed to replicate the option's Vanna, and the amount of BF needed to replicate the option's Volga. The above approach ignores the small (but non-zero) fraction of Volga carried by the RR and the small fraction of Vanna carried by the BF. It further neglects the cost of hedging the Vega risk. This has led to a more general formulation of the Vanna-Volga method in which one considers that within the Blackâ€“Scholes assumptions the exotic option's Vega, Vanna and Volga can be replicated by the weighted sum of three instruments:       X  i   =      w   A  T  M     A  T   M  i    +     w   R  R     R   R  i    +     w   B  F     B    F  i    i  =vega, vanna, volga         subscript  X  i        subscript  w    A  T  M    A  T   subscript  M  i       subscript  w    R  R    R   subscript  R  i       subscript  w    B  F    B   subscript  F  i   i  =vega, vanna, volga      X_{i}=w_{ATM}\,{ATM_{i}}+w_{RR}\,{RR_{i}}+w_{BF}\,{BF_{i}}\,\,\,\,\,i\text{=%
 vega, vanna, volga}     where the weightings are obtained by solving the system:     x  â†’   =   ð”¸   w  â†’         normal-â†’  x     ð”¸   normal-â†’  w      \vec{x}=\mathbb{A}\vec{w}     with      ð”¸  =   (      A  T   M   v  e  g  a        R   R   v  e  g  a        B   F   v  e  g  a          A  T   M   v  a  n  n  a        R   R   v  a  n  n  a        B   F   v  a  n  n  a          A  T   M   v  o  l  g  a        R   R   v  o  l  g  a        B   F   v  o  l  g  a        )       ð”¸      A  T   subscript  M    v  e  g  a       R   subscript  R    v  e  g  a       B   subscript  F    v  e  g  a         A  T   subscript  M    v  a  n  n  a       R   subscript  R    v  a  n  n  a       B   subscript  F    v  a  n  n  a         A  T   subscript  M    v  o  l  g  a       R   subscript  R    v  o  l  g  a       B   subscript  F    v  o  l  g  a         \mathbb{A}=\begin{pmatrix}ATM_{vega}&RR_{vega}&BF_{vega}\\
 ATM_{vanna}&RR_{vanna}&BF_{vanna}\\
 ATM_{volga}&RR_{volga}&BF_{volga}\end{pmatrix}   ,     w  â†’   =   (      w   A  T  M         w   R  R         w   B  F       )        normal-â†’  w      subscript  w    A  T  M       subscript  w    R  R       subscript  w    B  F        \vec{w}=\begin{pmatrix}w_{ATM}\\
 w_{RR}\\
 w_{BF}\end{pmatrix}   ,     x  â†’   =   (      X   v  e  g  a         X   v  a  n  n  a         X   v  o  l  g  a       )        normal-â†’  x      subscript  X    v  e  g  a       subscript  X    v  a  n  n  a       subscript  X    v  o  l  g  a        \vec{x}=\begin{pmatrix}X_{vega}\\
 X_{vanna}\\
 X_{volga}\end{pmatrix}     Given this replication, the Vannaâ€“Volga method adjusts the BS price of an exotic option by the smile cost of the above weighted sum (note that the ATM smile cost is zero by construction):         X  VV       =    X   B  S    +    w   R  R     (    R   R   m  k  t     -   R   R   B  S      )    +    w   B  F     (    B   F   m  k  t     -   B   F   B  S      )             =    X   B  S    +     x  â†’   T     (   ð”¸  T   )    -  1     I  â†’             =    X   B  S    +     X   v  e  g  a      Î©   v  e  g  a     +     X   v  a  n  n  a      Î©   v  a  n  n  a     +     X   v  o  l  g  a      Î©   v  o  l  g  a              superscript  X  VV     absent     superscript  X    B  S       subscript  w    R  R        R   superscript  R    m  k  t       R   superscript  R    B  S          subscript  w    B  F        B   superscript  F    m  k  t       B   superscript  F    B  S            missing-subexpression     absent     superscript  X    B  S       superscript   normal-â†’  x   T    superscript   superscript  ð”¸  T     1     normal-â†’  I         missing-subexpression     absent     superscript  X    B  S       subscript  X    v  e  g  a     subscript  normal-Î©    v  e  g  a        subscript  X    v  a  n  n  a     subscript  normal-Î©    v  a  n  n  a        subscript  X    v  o  l  g  a     subscript  normal-Î©    v  o  l  g  a          \begin{aligned}\displaystyle X^{\rm VV}&\displaystyle=X^{BS}+w_{RR}({RR}^{mkt}%
 -{RR}^{BS})+w_{BF}({BF}^{mkt}-{BF}^{BS})\\
 &\displaystyle=X^{BS}+\vec{x}^{T}(\mathbb{A}^{T})^{-1}\vec{I}\\
 &\displaystyle=X^{BS}+X_{vega}\,\Omega_{vega}+X_{vanna}\,\Omega_{vanna}+X_{%
 volga}\,\Omega_{volga}\\
 \end{aligned}     where       I  â†’   =   (     0        R   R   m  k  t     -   R   R   B  S            B   F   m  k  t     -   B   F   B  S         )        normal-â†’  I     0        R   superscript  R    m  k  t       R   superscript  R    B  S            B   superscript  F    m  k  t       B   superscript  F    B  S          \vec{I}=\begin{pmatrix}0\\
 {RR}^{mkt}-{RR}^{BS}\\
 {BF}^{mkt}-{BF}^{BS}\end{pmatrix}     and       (      Î©   v  e  g  a         Î©   v  a  n  n  a         Î©   v  o  l  g  a       )   =     (   ð”¸  T   )    -  1     I  â†’           subscript  normal-Î©    v  e  g  a       subscript  normal-Î©    v  a  n  n  a       subscript  normal-Î©    v  o  l  g  a         superscript   superscript  ð”¸  T     1     normal-â†’  I      \begin{pmatrix}\Omega_{vega}\\
 \Omega_{vanna}\\
 \Omega_{volga}\end{pmatrix}=(\mathbb{A}^{T})^{-1}\vec{I}     The quantities    Î©  i     subscript  normal-Î©  i    \Omega_{i}   can be interpreted as the market prices attached to a unit amount of Vega, Vanna and Volga, respectively. The resulting correction, however, typically turns out to be too large. Market practitioners thus modify    X   V  V      superscript  X    V  V     X^{VV}   to         X  VV       =    X   B  S    +    p   v  a  n  n  a     X   v  a  n  n  a     Î©   v  a  n  n  a     +    p   v  o  l  g  a     X   v  o  l  g  a     Î©   v  o  l  g  a              superscript  X  VV     absent     superscript  X    B  S       subscript  p    v  a  n  n  a     subscript  X    v  a  n  n  a     subscript  normal-Î©    v  a  n  n  a        subscript  p    v  o  l  g  a     subscript  X    v  o  l  g  a     subscript  normal-Î©    v  o  l  g  a          \begin{aligned}\displaystyle X^{\rm VV}&\displaystyle=X^{BS}+p_{vanna}X_{vanna%
 }\Omega_{vanna}+p_{volga}X_{volga}\Omega_{volga}\end{aligned}     The Vega contribution turns out to be several orders of magnitude smaller than the Vanna and Volga terms in all practical situations, hence one neglects it.  The terms    p   v  a  n  n  a      subscript  p    v  a  n  n  a     p_{vanna}   and    p   v  o  l  g  a      subscript  p    v  o  l  g  a     p_{volga}   are put in by-hand and represent factors that ensure the correct behaviour of the price of an exotic option near a barrier: as the knock-out barrier level   B   B   B   of an option is gradually moved toward the spot level    S  0     subscript  S  0    S_{0}   , the BSTV price of a knock-out option must be a monotonically decreasing function, converging to zero exactly at    B  =   S  0       B   subscript  S  0     B=S_{0}   . Since the Vanna-Volga method is a simple rule-of-thumb and not a rigorous model, there is no guarantee that this will be a priori the case. The attenuation factors are of a different from for the Vanna or the Volga of an instrument. This is because for barrier values close to the spot they behave differently: the Vanna becomes large while, on the contrary, the Volga becomes small. Hence the attenuation factors take the form:         p  vanna       =    a   Î³         p  volga       =   b  +   c  Î³            subscript  p  vanna     absent    a  Î³       subscript  p  volga     absent    b    c  Î³        \begin{aligned}\displaystyle p_{\rm vanna}&\displaystyle=a\,\gamma\\
 \displaystyle p_{\rm volga}&\displaystyle=b+c\gamma\end{aligned}     where    Î³  âˆˆ   [  0  ,  1  ]       Î³   0  1     \gamma\in[0,1]   represents some measure of the barrier(s) vicinity to the spot with the features         Î³  =  0        f  o  r    S  0    â†’  B        Î³  =  1        f  o  r    |    S  0   -  B   |    â‰«  0           Î³  0    normal-â†’     f  o  r    subscript  S  0    B       Î³  1    much-greater-than     f  o  r        subscript  S  0   B     0      \begin{aligned}\displaystyle\gamma=0&\displaystyle{for}\ \ S_{0}\to B\\
 \displaystyle\gamma=1&\displaystyle{for}\ \ |S_{0}-B|\gg 0\end{aligned}     The coefficients    a  ,  b  ,  c     a  b  c    a,b,c   are found through calibration of the model to ensure that it reproduces the vanilla smile. Good candidates for   Î³   Î³   \gamma   that ensure the appropriate behaviour close to the barriers are the survival probability and the expected first exit time . Both of these quantities offer the desirable property that they vanish close to a barrier.  Survival probability  The survival probability     p   s  u  r  v    âˆˆ   [  0  ,  1  ]        subscript  p    s  u  r  v     0  1     p_{surv}\in[0,1]   refers to the probability that the spot does not touch one or more barrier levels    {   B  i   }      subscript  B  i     \{B_{i}\}   . For example, for a single barrier option we have      DF   (   t  tod   ,   t  mat   )       DF    subscript  t  tod    subscript  t  mat      \mathrm{DF}(t_{\textrm{tod}},t_{\textrm{mat}})   is the value of a no-touch option and    u   (   S  t   ,  t  )       u    subscript  S  t   t     u(S_{t},t)   the discount factor between today and maturity. Similarly, for options with two barriers the survival probability is given through the undiscounted value of a double-no-touch option.  First-exit time  The first exit time (FET) is the minimum between: (i) the time in the future when the spot is expected to exit a barrier zone before maturity, and (ii) maturity, if the spot has not hit any of the barrier levels up to maturity. That is, if we denote the FET by     u   (   S  t   ,  t  )    =         u    subscript  S  t   t    absent    u(S_{t},t)=   then    {  Ï•  ,  T  }     Ï•  T    \{\phi,T\}   min    Ï•  =  inf   {  â„“  âˆˆ   [  0  ,  T  )   }      fragments  Ï•   inf   fragments  normal-{  â„“    fragments  normal-[  0  normal-,  T  normal-)   normal-}     \phi=\textrm{inf}\{\ell\in[0,T)\}   where     S   t  +  â„“    >  H       subscript  S    t  normal-â„“    H    S_{t+\ell}>H   such that    S  t     subscript  S  t    S_{t}   or        âˆ‚  u    (  S  ,  t  )     âˆ‚  t    +    1  2    Ïƒ  2    S  2       âˆ‚  2   u    (  S  ,  t  )     âˆ‚   S  2      +   Î¼  S     âˆ‚  u    (  S  ,  t  )     âˆ‚  S      =  0              u    S  t      t        1  2    superscript  Ïƒ  2    superscript  S  2         superscript   2   u    S  t       superscript  S  2        Î¼  S        u    S  t      S      0    \frac{\partial u(S,t)}{\partial t}+\frac{1}{2}\sigma^{2}S^{2}\frac{\partial^{2%
 }u(S,t)}{\partial S^{2}}+\mu S\frac{\partial u(S,t)}{\partial S}=0   are the 'low' vs 'high' barrier levels and     u   (  S  ,  T  )    =  T        u   S  T    T    u(S,T)=T   the spot of today.  The first-exit time is the solution of the following PDE     T   T   T     This equation is solved backwards in time starting from the terminal condition     u   (  L  ,   t  â€²   )    =   u   (  H  ,   t  â€²   )    =   t  â€²           u   L   superscript  t  normal-â€²       u   H   superscript  t  normal-â€²           superscript  t  normal-â€²      u(L,t^{\prime})=u(H,t^{\prime})=t^{\prime}   where    H  â‰«   S  0      much-greater-than  H   subscript  S  0     H\gg S_{0}   is the time to maturity and boundary conditions    L  â‰ª   S  0      much-less-than  L   subscript  S  0     L\ll S_{0}   . In case of a single barrier option we use the same PDE with either   Î¼   Î¼   \mu   or $L\ll
 S_0$ . The parameter $\mu$ represents the risk-neutral drift of the underlying stochastic process.  References           [ http://www.google.com/patents/about?id=4sChAAAAEBAJ&dq; ;=7315838 US patent 7315838]   "  Category:Mathematical finance  Category:Derivatives (finance)  Category:Portfolio theories   