<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1766">YaDICs</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>YaDICs</h1>
<hr/>

<p><strong>YaDICs</strong> is a program written to perform <a href="digital_image_correlation" title="wikilink">digital image correlation</a> on 2D and 3D tomographic images. The program was designed to be both modular, by its plugin strategy and efficient, by it multithreading strategy. It incorporates different transformations (Global, Elastic, Local), optimizing strategy (Gauss-Newton, Steepest descent), Global and/or local shape functions (Rigid-body motions, homogeneous dilatations, flexural and Brazilian test models)...</p>

<p>Yadics is <a href="free_software" title="wikilink">free software</a> so that users may contribute back to the project. The program is available for download for <a class="uri" href="Linux" title="wikilink">Linux</a>.</p>
<h2 id="yadics-theoretical-background">YaDICs theoretical background</h2>
<h3 id="context">Context</h3>

<p>In solid mechanics <a href="Digital_image_correlation" title="wikilink">Digital image correlation</a> is a tool that allows to identify the displacement field to register an reference image (called herein Fixed image) to images during a experiment (Mobile image). For example it is possible to observe the face of an specimen with a painted speckle on it in order to determine its displacement fields during a <a href="tensile_test" title="wikilink">tensile test</a>. Before the apparition of such methods researcher usually used <a href="strain_gauge" title="wikilink">strain gauge</a> to measure the mechanical state of the material but strain gauges only measure the strain on a point and doesn't allow to understand material with an heterogeneous behavior. One can obtain a full in plane <a href="strain_tensor" title="wikilink">strain tensor</a> by derivation of the displacement fields. A lot of methods are based upon the <a href="Optical_flow" title="wikilink">Optical flow</a></p>

<p>In fluid mechanics a similar method is used and it is called <a href="Particle_Image_Velocimetry" title="wikilink">Particle Image Velocimetry</a> (PIV), the algorithms are similar to those of DIC but it is impossible to ensure that the optical flow is conserved so a vast majority of the softwares used the Normalized Cross Correlation metric.</p>

<p>In mechanics the displacement or velocity fields are the only concern, registering images is just a side effect. There is another process called <a href="Image_Registration" title="wikilink">Image Registration</a> using the same algorithms (on monomodal images) but where the goal is to register images and thereby identifying the displacement field is just a side effect.</p>

<p><strong>YaDICs</strong> uses the general principle of Image Registration with a particular attention to the displacement fields basis.</p>
<h3 id="image-registration-principle">Image Registration Principle</h3>

<p>YaDICs can be explained using the classical Image Registration framework:<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>
<h3 id="image-registration-general-scheme">Image registration general scheme</h3>

<p>The common idea of Image Registration and Digital Image Correlation is to find the transformation between a fixed image and a moving one for a given metric using an optimization scheme. While there are a lot of methods to achieve such a goal, Yadics focuses on registering images with the same modality. The idea behind the creation of this software is to be able to process data that comes from a µ-tomograph i.e.: data cube over 1000³ voxels. With such a size it is not possible to use naive approach usually used in a 2D- context. In order to get sufficient performances <a class="uri" href="OpenMP" title="wikilink">OpenMP</a> parallelism is used and data are not globally stored in memory. As an extensive description of the different algorithms is given in.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></p>
<h3 id="sampling">Sampling</h3>

<p>Contrary to Image Registration, Digital Image Correlation targets the transformation, one wants to extracted the most accurate transformation from the two images and not just match the images. Yadics uses the whole image as a sampling grid: it is thus a total sampling.</p>
<h3 id="interpolator">Interpolator</h3>

<p>It is possible to choose between <a href="bilinear_interpolation" title="wikilink">bilinear interpolation</a> and <a href="bicubic_interpolation" title="wikilink">bicubic interpolation</a> for the grey level evaluation at non integer coordinates. The bi-cubic interpolation is the recommended one.</p>
<h3 id="metrics">Metrics</h3>
<h4 id="sum-of-squared-differences-ssd">Sum of Squared differences (SSD)</h4>

<p>The SSD is also known as <a href="Mean_squared_error" title="wikilink">Mean squared error</a>. The equation below defines the SSD metric :</p>

<p>

<math display="inline" id="YaDICs:0">
 <semantics>
  <mrow>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>D</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>μ</mi>
     <mo>,</mo>
     <msub>
      <mi class="ltx_font_mathcaligraphic">ℐ</mi>
      <mi class="ltx_font_mathcaligraphic">ℱ</mi>
     </msub>
     <mo>,</mo>
     <msub>
      <mi class="ltx_font_mathcaligraphic">ℐ</mi>
      <mi class="ltx_font_mathcaligraphic">ℳ</mi>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mstyle displaystyle="true">
     <mfrac>
      <mn>1</mn>
      <mrow>
       <mo>|</mo>
       <msub>
        <mi mathvariant="normal">Ω</mi>
        <mi>F</mi>
       </msub>
       <mo>|</mo>
      </mrow>
     </mfrac>
    </mstyle>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">∑</mo>
      <mrow>
       <msub>
        <mi>x</mi>
        <mi>i</mi>
       </msub>
       <mo>∈</mo>
       <msub>
        <mi mathvariant="normal">Ω</mi>
        <mi>F</mi>
       </msub>
      </mrow>
     </msub>
     <msup>
      <mrow>
       <mo>(</mo>
       <mrow>
        <mrow>
         <msub>
          <mi class="ltx_font_mathcaligraphic">ℐ</mi>
          <mi class="ltx_font_mathcaligraphic">ℱ</mi>
         </msub>
         <mrow>
          <mo stretchy="false">(</mo>
          <msub>
           <mi>x</mi>
           <mi>i</mi>
          </msub>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
        <mo>-</mo>
        <mrow>
         <msub>
          <mi class="ltx_font_mathcaligraphic">ℐ</mi>
          <mi class="ltx_font_mathcaligraphic">ℳ</mi>
         </msub>
         <mrow>
          <mo stretchy="false">(</mo>
          <mrow>
           <msub>
            <mi>T</mi>
            <mi>μ</mi>
           </msub>
           <mrow>
            <mo stretchy="false">(</mo>
            <msub>
             <mi>x</mi>
             <mi>i</mi>
            </msub>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
       </mrow>
       <mo>)</mo>
      </mrow>
      <mn>2</mn>
     </msup>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>S</ci>
     <ci>S</ci>
     <ci>D</ci>
     <vector>
      <ci>μ</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>ℐ</ci>
       <ci>ℱ</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>ℐ</ci>
       <ci>ℳ</ci>
      </apply>
     </vector>
    </apply>
    <apply>
     <times></times>
     <apply>
      <divide></divide>
      <cn type="integer">1</cn>
      <apply>
       <abs></abs>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>normal-Ω</ci>
        <ci>F</ci>
       </apply>
      </apply>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <in></in>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <ci>i</ci>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>normal-Ω</ci>
         <ci>F</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <minus></minus>
        <apply>
         <times></times>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>ℐ</ci>
          <ci>ℱ</ci>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>x</ci>
          <ci>i</ci>
         </apply>
        </apply>
        <apply>
         <times></times>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>ℐ</ci>
          <ci>ℳ</ci>
         </apply>
         <apply>
          <times></times>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>T</ci>
           <ci>μ</ci>
          </apply>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>x</ci>
           <ci>i</ci>
          </apply>
         </apply>
        </apply>
       </apply>
       <cn type="integer">2</cn>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   SSD(\mu,\mathcal{I_{F}},\mathcal{I_{M}})=\dfrac{1}{\left|\Omega_{F}\right|}%
\sum_{x_{i}\in\Omega_{F}}\left(\mathcal{I_{F}}(x_{i})-\mathcal{I_{M}}({T}_{\mu%
}(x_{i}))\right)^{2}
  </annotation>
 </semantics>
</math>

</p>

<p>where 

<math display="inline" id="YaDICs:1">
 <semantics>
  <msub>
   <mi class="ltx_font_mathcaligraphic">ℐ</mi>
   <mi class="ltx_font_mathcaligraphic">ℱ</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>ℐ</ci>
    <ci>ℱ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{I_{F}}
  </annotation>
 </semantics>
</math>

 is the fixed image, 

<math display="inline" id="YaDICs:2">
 <semantics>
  <msub>
   <mi class="ltx_font_mathcaligraphic">ℐ</mi>
   <mi class="ltx_font_mathcaligraphic">ℳ</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>ℐ</ci>
    <ci>ℳ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{I_{M}}
  </annotation>
 </semantics>
</math>

 the moving one, 

<math display="inline" id="YaDICs:3">
 <semantics>
  <msub>
   <mi mathvariant="normal">Ω</mi>
   <mi>F</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>normal-Ω</ci>
    <ci>F</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Omega_{F}
  </annotation>
 </semantics>
</math>

 the integration area 

<math display="inline" id="YaDICs:4">
 <semantics>
  <mrow>
   <mo>|</mo>
   <msub>
    <mi mathvariant="normal">Ω</mi>
    <mi>F</mi>
   </msub>
   <mo>|</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <abs></abs>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>normal-Ω</ci>
     <ci>F</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \left|\Omega_{F}\right|
  </annotation>
 </semantics>
</math>

 the number of pi(vo)xels (cardinal) and 

<math display="inline" id="YaDICs:5">
 <semantics>
  <msub>
   <mi>T</mi>
   <mi>μ</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>T</ci>
    <ci>μ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   {T}_{\mu}
  </annotation>
 </semantics>
</math>

 the transformation parametrized by μ</p>

<p>The transformation can be written as :</p>

<p>

<math display="inline" id="YaDICs:6">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>T</mi>
     <mi>μ</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>x</mi>
    <mo>+</mo>
    <mrow>
     <msup>
      <mrow>
       <mo>{</mo>
       <mrow>
        <mi mathvariant="normal">Φ</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>x</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
       <mo>}</mo>
      </mrow>
      <mi>t</mi>
     </msup>
     <mrow>
      <mo>{</mo>
      <mi>μ</mi>
      <mo>}</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>T</ci>
      <ci>μ</ci>
     </apply>
     <ci>x</ci>
    </apply>
    <apply>
     <plus></plus>
     <ci>x</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <set>
        <apply>
         <times></times>
         <ci>normal-Φ</ci>
         <ci>x</ci>
        </apply>
       </set>
       <ci>t</ci>
      </apply>
      <set>
       <ci>μ</ci>
      </set>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   T_{\mu}(x)=x+\left\{\Phi(x)\right\}^{t}\left\{\mu\right\}
  </annotation>
 </semantics>
</math>

</p>

<p>This metric is the main used in the Yadics as it works well with same modality images. One has to find the minimum of this metric</p>
<h4 id="normalized-cross-correlation-ncc"><a href="Normalized_cross-correlation" title="wikilink">Normalized cross-correlation</a> (NCC)</h4>

<p>The NCC is used when one cannot assure the optical flow conservation, it happens in case of change of lighting or if particles disappear from the scene can occur in Particule Images Velocimetry (PIV).</p>

<p>The NCC is defined by : 

<math display="inline" id="YaDICs:7">
 <semantics>
  <mrow>
   <mrow>
    <mi>N</mi>
    <mi>C</mi>
    <mi>C</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>μ</mi>
     <mo>,</mo>
     <msub>
      <mi class="ltx_font_mathcaligraphic">ℐ</mi>
      <mi class="ltx_font_mathcaligraphic">ℱ</mi>
     </msub>
     <mo>,</mo>
     <msub>
      <mi class="ltx_font_mathcaligraphic">ℐ</mi>
      <mi class="ltx_font_mathcaligraphic">ℳ</mi>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mstyle displaystyle="true">
    <mfrac>
     <mrow>
      <msub>
       <mo largeop="true" symmetric="true">∑</mo>
       <mrow>
        <msub>
         <mi>x</mi>
         <mi>i</mi>
        </msub>
        <mo>∈</mo>
        <msub>
         <mi mathvariant="normal">Ω</mi>
         <mi>F</mi>
        </msub>
       </mrow>
      </msub>
      <mrow>
       <mrow>
        <mo>(</mo>
        <mrow>
         <mrow>
          <msub>
           <mi class="ltx_font_mathcaligraphic">ℐ</mi>
           <mi class="ltx_font_mathcaligraphic">ℱ</mi>
          </msub>
          <mrow>
           <mo stretchy="false">(</mo>
           <msub>
            <mi>x</mi>
            <mi>i</mi>
           </msub>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
         <mo>-</mo>
         <mover accent="true">
          <msub>
           <mi class="ltx_font_mathcaligraphic">ℐ</mi>
           <mi class="ltx_font_mathcaligraphic">ℱ</mi>
          </msub>
          <mo>¯</mo>
         </mover>
        </mrow>
        <mo>)</mo>
       </mrow>
       <mrow>
        <mo>(</mo>
        <mrow>
         <mrow>
          <msub>
           <mi class="ltx_font_mathcaligraphic">ℐ</mi>
           <mi class="ltx_font_mathcaligraphic">ℳ</mi>
          </msub>
          <mrow>
           <mo stretchy="false">(</mo>
           <mrow>
            <msub>
             <mi>T</mi>
             <mi>μ</mi>
            </msub>
            <mrow>
             <mo stretchy="false">(</mo>
             <msub>
              <mi>x</mi>
              <mi>i</mi>
             </msub>
             <mo stretchy="false">)</mo>
            </mrow>
           </mrow>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
         <mo>-</mo>
         <mover accent="true">
          <msub>
           <mi class="ltx_font_mathcaligraphic">ℐ</mi>
           <mi class="ltx_font_mathcaligraphic">ℳ</mi>
          </msub>
          <mo>¯</mo>
         </mover>
        </mrow>
        <mo>)</mo>
       </mrow>
      </mrow>
     </mrow>
     <msqrt>
      <mrow>
       <msub>
        <mo largeop="true" symmetric="true">∑</mo>
        <mrow>
         <msub>
          <mi>x</mi>
          <mi>i</mi>
         </msub>
         <mo>∈</mo>
         <msub>
          <mi mathvariant="normal">Ω</mi>
          <mi>F</mi>
         </msub>
        </mrow>
       </msub>
       <mrow>
        <msup>
         <mrow>
          <mo>(</mo>
          <mrow>
           <mrow>
            <msub>
             <mi class="ltx_font_mathcaligraphic">ℐ</mi>
             <mi class="ltx_font_mathcaligraphic">ℱ</mi>
            </msub>
            <mrow>
             <mo stretchy="false">(</mo>
             <msub>
              <mi>x</mi>
              <mi>i</mi>
             </msub>
             <mo stretchy="false">)</mo>
            </mrow>
           </mrow>
           <mo>-</mo>
           <mover accent="true">
            <msub>
             <mi class="ltx_font_mathcaligraphic">ℐ</mi>
             <mi class="ltx_font_mathcaligraphic">ℱ</mi>
            </msub>
            <mo>¯</mo>
           </mover>
          </mrow>
          <mo>)</mo>
         </mrow>
         <mn>2</mn>
        </msup>
        <mrow>
         <msub>
          <mo largeop="true" symmetric="true">∑</mo>
          <mrow>
           <msub>
            <mi>x</mi>
            <mi>i</mi>
           </msub>
           <mo>∈</mo>
           <msub>
            <mi mathvariant="normal">Ω</mi>
            <mi>F</mi>
           </msub>
          </mrow>
         </msub>
         <msup>
          <mrow>
           <mo>(</mo>
           <mrow>
            <mrow>
             <msub>
              <mi class="ltx_font_mathcaligraphic">ℐ</mi>
              <mi class="ltx_font_mathcaligraphic">ℳ</mi>
             </msub>
             <mrow>
              <mo stretchy="false">(</mo>
              <mrow>
               <msub>
                <mi>T</mi>
                <mi>μ</mi>
               </msub>
               <mrow>
                <mo stretchy="false">(</mo>
                <msub>
                 <mi>x</mi>
                 <mi>i</mi>
                </msub>
                <mo stretchy="false">)</mo>
               </mrow>
              </mrow>
              <mo stretchy="false">)</mo>
             </mrow>
            </mrow>
            <mo>-</mo>
            <mover accent="true">
             <msub>
              <mi class="ltx_font_mathcaligraphic">ℐ</mi>
              <mi class="ltx_font_mathcaligraphic">ℳ</mi>
             </msub>
             <mo>¯</mo>
            </mover>
           </mrow>
           <mo>)</mo>
          </mrow>
          <mn>2</mn>
         </msup>
        </mrow>
       </mrow>
      </mrow>
     </msqrt>
    </mfrac>
   </mstyle>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>N</ci>
     <ci>C</ci>
     <ci>C</ci>
     <vector>
      <ci>μ</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>ℐ</ci>
       <ci>ℱ</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>ℐ</ci>
       <ci>ℳ</ci>
      </apply>
     </vector>
    </apply>
    <apply>
     <divide></divide>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <in></in>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <ci>i</ci>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>normal-Ω</ci>
         <ci>F</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <times></times>
       <apply>
        <minus></minus>
        <apply>
         <times></times>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>ℐ</ci>
          <ci>ℱ</ci>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>x</ci>
          <ci>i</ci>
         </apply>
        </apply>
        <apply>
         <ci>normal-¯</ci>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>ℐ</ci>
          <ci>ℱ</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <minus></minus>
        <apply>
         <times></times>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>ℐ</ci>
          <ci>ℳ</ci>
         </apply>
         <apply>
          <times></times>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>T</ci>
           <ci>μ</ci>
          </apply>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>x</ci>
           <ci>i</ci>
          </apply>
         </apply>
        </apply>
        <apply>
         <ci>normal-¯</ci>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>ℐ</ci>
          <ci>ℳ</ci>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
     <apply>
      <root></root>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <in></in>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>x</ci>
          <ci>i</ci>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>normal-Ω</ci>
          <ci>F</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <minus></minus>
          <apply>
           <times></times>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>ℐ</ci>
            <ci>ℱ</ci>
           </apply>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>x</ci>
            <ci>i</ci>
           </apply>
          </apply>
          <apply>
           <ci>normal-¯</ci>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>ℐ</ci>
            <ci>ℱ</ci>
           </apply>
          </apply>
         </apply>
         <cn type="integer">2</cn>
        </apply>
        <apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <sum></sum>
          <apply>
           <in></in>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>x</ci>
            <ci>i</ci>
           </apply>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>normal-Ω</ci>
            <ci>F</ci>
           </apply>
          </apply>
         </apply>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <apply>
           <minus></minus>
           <apply>
            <times></times>
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>ℐ</ci>
             <ci>ℳ</ci>
            </apply>
            <apply>
             <times></times>
             <apply>
              <csymbol cd="ambiguous">subscript</csymbol>
              <ci>T</ci>
              <ci>μ</ci>
             </apply>
             <apply>
              <csymbol cd="ambiguous">subscript</csymbol>
              <ci>x</ci>
              <ci>i</ci>
             </apply>
            </apply>
           </apply>
           <apply>
            <ci>normal-¯</ci>
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>ℐ</ci>
             <ci>ℳ</ci>
            </apply>
           </apply>
          </apply>
          <cn type="integer">2</cn>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   NCC(\mu,\mathcal{I_{F}},\mathcal{I_{M}})=\dfrac{\sum_{x_{i}\in\Omega_{F}}\left%
(\mathcal{I_{F}}(x_{i})-\overline{\mathcal{I_{F}}}\right)\left(\mathcal{I_{M}}%
({T}_{\mu}(x_{i}))-\overline{\mathcal{I_{M}}}\right)}{\sqrt{\sum_{x_{i}\in%
\Omega_{F}}\left(\mathcal{I_{F}}(x_{i})-\overline{\mathcal{I_{F}}}\right)^{2}%
\sum_{x_{i}\in\Omega_{F}}\left(\mathcal{I_{M}}({T}_{\mu}(x_{i}))-\overline{%
\mathcal{I_{M}}}\right)^{2}}}
  </annotation>
 </semantics>
</math>

</p>

<p>where 

<math display="inline" id="YaDICs:8">
 <semantics>
  <mover accent="true">
   <msub>
    <mi class="ltx_font_mathcaligraphic">ℐ</mi>
    <mi class="ltx_font_mathcaligraphic">ℱ</mi>
   </msub>
   <mo>¯</mo>
  </mover>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-¯</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>ℐ</ci>
     <ci>ℱ</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \overline{\mathcal{I_{F}}}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="YaDICs:9">
 <semantics>
  <mover accent="true">
   <msub>
    <mi class="ltx_font_mathcaligraphic">ℐ</mi>
    <mi class="ltx_font_mathcaligraphic">ℳ</mi>
   </msub>
   <mo>¯</mo>
  </mover>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-¯</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>ℐ</ci>
     <ci>ℳ</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \overline{\mathcal{I_{M}}}
  </annotation>
 </semantics>
</math>

 are the mean values of the fixed and mobile images</p>

<p>This metric is only used to find local translation in Yadics. This metric with translation transform can be solved using cross-correlation methods, which are non iterative and can be accelerated using Fast Fourier Transform .</p>
<h3 id="classification-of-transformations">Classification of transformations</h3>

<p>There are three categories of parametrization, elastic, global and local transformation. The elastic transformations respect the partition of unity, there are no holes created or surfaces counted several times. This is commonly used in Image Registration by the use of <a class="uri" href="B-Spline" title="wikilink">B-Spline</a> functions<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a><a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a> and in solid mechanics with finite element basis.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a><a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a> The global transformations are defined on the whole picture using rigid body or affine transformation (which is equivalent to homogeneous strain transformation). More complex transformations can be defined such as mechanically based one. These transformations have been used for stress intensity factor identification by <a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a><a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a> and for rod strain by.<a class="footnoteRef" href="#fn9" id="fnref9"><sup>9</sup></a> The local transformation can be considered as the same global transformation defined on several Zone Of Interest (ZOI) of the fixed image.</p>
<h4 id="global">Global</h4>

<p>Several global transforms have been implemented :</p>
<ul>
<li>Rigid and homogeneous (Tx,Ty,Rz in 2D ; Tx,Ty,Tz,Rx,Ry,Rz,Exx,Eyy,Ezz,Eyz,Exz,Exy in 3D),</li>
<li>Brazilian <a class="footnoteRef" href="#fn10" id="fnref10"><sup>10</sup></a> (Only in 2D),</li>
<li>Dynamic Flexion,</li>
</ul>
<h4 id="elastic">Elastic</h4>

<p>First order quadrangular Finite Elements Q4P1 are used in Yadics Local</p>

<p>Every Global transform can be used on a local mesh.</p>
<h3 id="optimization">Optimization</h3>

<p>The yadics optimization process follows a gradient descent scheme</p>

<p>The first step is to compute the gradient of the metric regarding the transform parameters 

<math display="inline" id="YaDICs:10">
 <semantics>
  <mtable>
   <mtr>
    <mtd columnalign="left">
     <mstyle displaystyle="true">
      <mfrac>
       <mrow>
        <mrow>
         <mo>∂</mo>
         <mrow>
          <mi>S</mi>
          <mi>S</mi>
          <mi>D</mi>
         </mrow>
        </mrow>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>μ</mi>
         <mo>,</mo>
         <msub>
          <mi class="ltx_font_mathcaligraphic">ℐ</mi>
          <mi class="ltx_font_mathcaligraphic">ℱ</mi>
         </msub>
         <mo>,</mo>
         <msub>
          <mi class="ltx_font_mathcaligraphic">ℐ</mi>
          <mi class="ltx_font_mathcaligraphic">ℳ</mi>
         </msub>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
       <mrow>
        <mo>∂</mo>
        <mi>μ</mi>
       </mrow>
      </mfrac>
     </mstyle>
    </mtd>
    <mtd columnalign="center">
     <mo>=</mo>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mstyle displaystyle="true">
       <mfrac>
        <mn>2</mn>
        <mrow>
         <mo>|</mo>
         <msub>
          <mi mathvariant="normal">Ω</mi>
          <mi>F</mi>
         </msub>
         <mo>|</mo>
        </mrow>
       </mfrac>
      </mstyle>
      <mrow>
       <msub>
        <mo largeop="true" symmetric="true">∑</mo>
        <mrow>
         <msub>
          <mi>x</mi>
          <mi>i</mi>
         </msub>
         <mo>∈</mo>
         <msub>
          <mi mathvariant="normal">Ω</mi>
          <mi>F</mi>
         </msub>
        </mrow>
       </msub>
       <mrow>
        <mrow>
         <mo>(</mo>
         <mrow>
          <mrow>
           <msub>
            <mi class="ltx_font_mathcaligraphic">ℐ</mi>
            <mi class="ltx_font_mathcaligraphic">ℱ</mi>
           </msub>
           <mrow>
            <mo stretchy="false">(</mo>
            <msub>
             <mi>x</mi>
             <mi>i</mi>
            </msub>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
          <mo>-</mo>
          <mrow>
           <msub>
            <mi class="ltx_font_mathcaligraphic">ℐ</mi>
            <mi class="ltx_font_mathcaligraphic">ℳ</mi>
           </msub>
           <mrow>
            <mo stretchy="false">(</mo>
            <mrow>
             <msub>
              <mi>T</mi>
              <mi>μ</mi>
             </msub>
             <mrow>
              <mo stretchy="false">(</mo>
              <msub>
               <mi>x</mi>
               <mi>i</mi>
              </msub>
              <mo stretchy="false">)</mo>
             </mrow>
            </mrow>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
         </mrow>
         <mo>)</mo>
        </mrow>
        <mstyle displaystyle="true">
         <mfrac>
          <mrow>
           <mo>∂</mo>
           <msub>
            <mi class="ltx_font_mathcaligraphic">ℐ</mi>
            <mi class="ltx_font_mathcaligraphic">ℳ</mi>
           </msub>
           <mrow>
            <mo stretchy="false">(</mo>
            <msub>
             <mi>T</mi>
             <mi>μ</mi>
            </msub>
            <mrow>
             <mo stretchy="false">(</mo>
             <msub>
              <mi>x</mi>
              <mi>i</mi>
             </msub>
             <mo stretchy="false">)</mo>
            </mrow>
           </mrow>
          </mrow>
          <mrow>
           <mo>∂</mo>
           <mi>μ</mi>
          </mrow>
         </mfrac>
        </mstyle>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd></mtd>
    <mtd columnalign="center">
     <mo>=</mo>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mstyle displaystyle="true">
       <mfrac>
        <mn>2</mn>
        <mrow>
         <mo>|</mo>
         <msub>
          <mi mathvariant="normal">Ω</mi>
          <mi>F</mi>
         </msub>
         <mo>|</mo>
        </mrow>
       </mfrac>
      </mstyle>
      <mrow>
       <msub>
        <mo largeop="true" symmetric="true">∑</mo>
        <mrow>
         <msub>
          <mi>x</mi>
          <mi>i</mi>
         </msub>
         <mo>∈</mo>
         <msub>
          <mi mathvariant="normal">Ω</mi>
          <mi>F</mi>
         </msub>
        </mrow>
       </msub>
       <mrow>
        <mrow>
         <mo>(</mo>
         <mrow>
          <mrow>
           <msub>
            <mi class="ltx_font_mathcaligraphic">ℐ</mi>
            <mi class="ltx_font_mathcaligraphic">ℱ</mi>
           </msub>
           <mrow>
            <mo stretchy="false">(</mo>
            <msub>
             <mi>x</mi>
             <mi>i</mi>
            </msub>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
          <mo>-</mo>
          <mrow>
           <msub>
            <mi class="ltx_font_mathcaligraphic">ℐ</mi>
            <mi class="ltx_font_mathcaligraphic">ℳ</mi>
           </msub>
           <mrow>
            <mo stretchy="false">(</mo>
            <mrow>
             <msub>
              <mi>T</mi>
              <mi>μ</mi>
             </msub>
             <mrow>
              <mo stretchy="false">(</mo>
              <msub>
               <mi>x</mi>
               <mi>i</mi>
              </msub>
              <mo stretchy="false">)</mo>
             </mrow>
            </mrow>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
         </mrow>
         <mo>)</mo>
        </mrow>
        <msup>
         <mrow>
          <mo>(</mo>
          <mstyle displaystyle="true">
           <mfrac>
            <mrow>
             <mrow>
              <mo>∂</mo>
              <msub>
               <mi>T</mi>
               <mi>μ</mi>
              </msub>
             </mrow>
             <mrow>
              <mo stretchy="false">(</mo>
              <msub>
               <mi>x</mi>
               <mi>i</mi>
              </msub>
              <mo stretchy="false">)</mo>
             </mrow>
            </mrow>
            <mrow>
             <mo>∂</mo>
             <mi>μ</mi>
            </mrow>
           </mfrac>
          </mstyle>
          <mo>)</mo>
         </mrow>
         <mi>t</mi>
        </msup>
        <mstyle displaystyle="true">
         <mfrac>
          <mrow>
           <mrow>
            <mo>∂</mo>
            <msub>
             <mi class="ltx_font_mathcaligraphic">ℐ</mi>
             <mi class="ltx_font_mathcaligraphic">ℳ</mi>
            </msub>
           </mrow>
           <mrow>
            <mo stretchy="false">(</mo>
            <mrow>
             <msub>
              <mi>T</mi>
              <mi>μ</mi>
             </msub>
             <mrow>
              <mo stretchy="false">(</mo>
              <msub>
               <mi>x</mi>
               <mi>i</mi>
              </msub>
              <mo stretchy="false">)</mo>
             </mrow>
            </mrow>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
          <mrow>
           <mo>∂</mo>
           <mi>x</mi>
          </mrow>
         </mfrac>
        </mstyle>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
  </mtable>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <apply>
      <divide></divide>
      <apply>
       <times></times>
       <apply>
        <partialdiff></partialdiff>
        <apply>
         <times></times>
         <ci>S</ci>
         <ci>S</ci>
         <ci>D</ci>
        </apply>
       </apply>
       <vector>
        <ci>μ</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>ℐ</ci>
         <ci>ℱ</ci>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>ℐ</ci>
         <ci>ℳ</ci>
        </apply>
       </vector>
      </apply>
      <apply>
       <partialdiff></partialdiff>
       <ci>μ</ci>
      </apply>
     </apply>
     <eq></eq>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <cn type="integer">2</cn>
       <apply>
        <abs></abs>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>normal-Ω</ci>
         <ci>F</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <in></in>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>x</ci>
          <ci>i</ci>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>normal-Ω</ci>
          <ci>F</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <minus></minus>
         <apply>
          <times></times>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>ℐ</ci>
           <ci>ℱ</ci>
          </apply>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>x</ci>
           <ci>i</ci>
          </apply>
         </apply>
         <apply>
          <times></times>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>ℐ</ci>
           <ci>ℳ</ci>
          </apply>
          <apply>
           <times></times>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>T</ci>
            <ci>μ</ci>
           </apply>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>x</ci>
            <ci>i</ci>
           </apply>
          </apply>
         </apply>
        </apply>
        <apply>
         <divide></divide>
         <cerror>
          <csymbol cd="ambiguous">fragments</csymbol>
          <partialdiff></partialdiff>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>ℐ</ci>
           <ci>ℳ</ci>
          </apply>
          <cerror>
           <csymbol cd="ambiguous">fragments</csymbol>
           <ci>normal-(</ci>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>T</ci>
            <ci>μ</ci>
           </apply>
           <cerror>
            <csymbol cd="ambiguous">fragments</csymbol>
            <ci>normal-(</ci>
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>x</ci>
             <ci>i</ci>
            </apply>
            <ci>normal-)</ci>
           </cerror>
          </cerror>
         </cerror>
         <apply>
          <partialdiff></partialdiff>
          <ci>μ</ci>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
    <matrixrow>
     <cerror>
      <csymbol cd="ambiguous">missing-subexpression</csymbol>
     </cerror>
     <eq></eq>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <cn type="integer">2</cn>
       <apply>
        <abs></abs>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>normal-Ω</ci>
         <ci>F</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <in></in>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>x</ci>
          <ci>i</ci>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>normal-Ω</ci>
          <ci>F</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <minus></minus>
         <apply>
          <times></times>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>ℐ</ci>
           <ci>ℱ</ci>
          </apply>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>x</ci>
           <ci>i</ci>
          </apply>
         </apply>
         <apply>
          <times></times>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>ℐ</ci>
           <ci>ℳ</ci>
          </apply>
          <apply>
           <times></times>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>T</ci>
            <ci>μ</ci>
           </apply>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>x</ci>
            <ci>i</ci>
           </apply>
          </apply>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <divide></divide>
          <apply>
           <times></times>
           <apply>
            <partialdiff></partialdiff>
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>T</ci>
             <ci>μ</ci>
            </apply>
           </apply>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>x</ci>
            <ci>i</ci>
           </apply>
          </apply>
          <apply>
           <partialdiff></partialdiff>
           <ci>μ</ci>
          </apply>
         </apply>
         <ci>t</ci>
        </apply>
        <apply>
         <divide></divide>
         <apply>
          <times></times>
          <apply>
           <partialdiff></partialdiff>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>ℐ</ci>
            <ci>ℳ</ci>
           </apply>
          </apply>
          <apply>
           <times></times>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>T</ci>
            <ci>μ</ci>
           </apply>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>x</ci>
            <ci>i</ci>
           </apply>
          </apply>
         </apply>
         <apply>
          <partialdiff></partialdiff>
          <ci>x</ci>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{array}[]{lcl}\dfrac{\partial SSD(\mu,\mathcal{I_{F}},\mathcal{I_{M}})}{%
\partial\mu}&=&\dfrac{2}{\left|\Omega_{F}\right|}\sum_{x_{i}\in\Omega_{F}}%
\left(\mathcal{I_{F}}(x_{i})-\mathcal{I_{M}}({T}_{\mu}(x_{i}))\right)\dfrac{%
\partial\mathcal{I_{M}}({T}_{\mu}(x_{i})}{\partial\mu}\\
&=&\dfrac{2}{\left|\Omega_{F}\right|}\sum_{x_{i}\in\Omega_{F}}\left(\mathcal{I%
_{F}}(x_{i})-\mathcal{I_{M}}({T}_{\mu}(x_{i}))\right)\left(\dfrac{\partial{T}_%
{\mu}(x_{i})}{\partial\mu}\right)^{t}\dfrac{\partial\mathcal{I_{M}}({T}_{\mu}(%
x_{i}))}{\partial x}\\
\end{array}
  </annotation>
 </semantics>
</math>

</p>
<h4 id="gradient-method">Gradient method</h4>

<p>Once the metric gradient has been computed, one has to find an optimization strategy</p>

<p>The gradient method principle is explained below :</p>

<p>

<math display="inline" id="YaDICs:11">
 <semantics>
  <mrow>
   <msub>
    <mi>μ</mi>
    <mrow>
     <mi>k</mi>
     <mo>+</mo>
     <mn>1</mn>
    </mrow>
   </msub>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>μ</mi>
     <mi>k</mi>
    </msub>
    <mo>+</mo>
    <mrow>
     <msub>
      <mi>α</mi>
      <mi>k</mi>
     </msub>
     <msub>
      <mi>d</mi>
      <mi>k</mi>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>μ</ci>
     <apply>
      <plus></plus>
      <ci>k</ci>
      <cn type="integer">1</cn>
     </apply>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>μ</ci>
      <ci>k</ci>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>α</ci>
       <ci>k</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>d</ci>
       <ci>k</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mu_{k+1}=\mu_{k}+\alpha_{k}d_{k}
  </annotation>
 </semantics>
</math>

</p>

<p>The gradient step can be constant or updated at every iteration. 

<math display="inline" id="YaDICs:12">
 <semantics>
  <mrow>
   <msub>
    <mi>d</mi>
    <mi>k</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo>-</mo>
    <mrow>
     <msub>
      <mi>γ</mi>
      <mi>k</mi>
     </msub>
     <mstyle displaystyle="true">
      <mfrac>
       <mrow>
        <mrow>
         <mo>∂</mo>
         <mi class="ltx_font_mathcaligraphic">𝒞</mi>
        </mrow>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>μ</mi>
         <mo>,</mo>
         <msub>
          <mi class="ltx_font_mathcaligraphic">ℐ</mi>
          <mi class="ltx_font_mathcaligraphic">ℱ</mi>
         </msub>
         <mo>,</mo>
         <msub>
          <mi class="ltx_font_mathcaligraphic">ℐ</mi>
          <mi class="ltx_font_mathcaligraphic">ℳ</mi>
         </msub>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
       <mrow>
        <mo>∂</mo>
        <mi>μ</mi>
       </mrow>
      </mfrac>
     </mstyle>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>d</ci>
     <ci>k</ci>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>γ</ci>
       <ci>k</ci>
      </apply>
      <apply>
       <divide></divide>
       <apply>
        <times></times>
        <apply>
         <partialdiff></partialdiff>
         <ci>𝒞</ci>
        </apply>
        <vector>
         <ci>μ</ci>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>ℐ</ci>
          <ci>ℱ</ci>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>ℐ</ci>
          <ci>ℳ</ci>
         </apply>
        </vector>
       </apply>
       <apply>
        <partialdiff></partialdiff>
        <ci>μ</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   d_{k}=-\gamma_{k}\dfrac{\partial\mathcal{C}(\mu,\mathcal{I_{F}},\mathcal{I_{M}%
})}{\partial\mu}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="YaDICs:13">
 <semantics>
  <msub>
   <mi>γ</mi>
   <mi>k</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>γ</ci>
    <ci>k</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \gamma_{k}
  </annotation>
 </semantics>
</math>

 allows one to choose between the following methods :</p>
<ul>
<li>

<math display="inline" id="YaDICs:14">
 <semantics>
  <msub>
   <mi>γ</mi>
   <mi>k</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>γ</ci>
    <ci>k</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \gamma_{k}
  </annotation>
 </semantics>
</math>

 

<math display="inline" id="YaDICs:15">
 <semantics>
  <mo>⟹</mo>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-⟹</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Longrightarrow
  </annotation>
 </semantics>
</math>

 steepest descent,</li>
<li>

<math display="inline" id="YaDICs:16">
 <semantics>
  <mrow>
   <msub>
    <mi>γ</mi>
    <mi>k</mi>
   </msub>
   <mo>=</mo>
   <msup>
    <mrow>
     <mo>[</mo>
     <mrow>
      <mstyle displaystyle="true">
       <mfrac>
        <mrow>
         <mrow>
          <mo>∂</mo>
          <mi class="ltx_font_mathcaligraphic">𝒞</mi>
         </mrow>
         <mrow>
          <mo stretchy="false">(</mo>
          <mi>μ</mi>
          <mo>,</mo>
          <msub>
           <mi class="ltx_font_mathcaligraphic">ℐ</mi>
           <mi class="ltx_font_mathcaligraphic">ℱ</mi>
          </msub>
          <mo>,</mo>
          <msub>
           <mi class="ltx_font_mathcaligraphic">ℐ</mi>
           <mi class="ltx_font_mathcaligraphic">ℳ</mi>
          </msub>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
        <mrow>
         <mo>∂</mo>
         <mi>μ</mi>
        </mrow>
       </mfrac>
      </mstyle>
      <msup>
       <mstyle displaystyle="true">
        <mfrac>
         <mrow>
          <mrow>
           <mo>∂</mo>
           <mi class="ltx_font_mathcaligraphic">𝒞</mi>
          </mrow>
          <mrow>
           <mo stretchy="false">(</mo>
           <mi>μ</mi>
           <mo>,</mo>
           <msub>
            <mi class="ltx_font_mathcaligraphic">ℐ</mi>
            <mi class="ltx_font_mathcaligraphic">ℱ</mi>
           </msub>
           <mo>,</mo>
           <msub>
            <mi class="ltx_font_mathcaligraphic">ℐ</mi>
            <mi class="ltx_font_mathcaligraphic">ℳ</mi>
           </msub>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
         <mrow>
          <mo>∂</mo>
          <mi>μ</mi>
         </mrow>
        </mfrac>
       </mstyle>
       <mi>t</mi>
      </msup>
     </mrow>
     <mo>]</mo>
    </mrow>
    <mrow>
     <mo>-</mo>
     <mn>1</mn>
    </mrow>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>γ</ci>
     <ci>k</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <times></times>
       <apply>
        <divide></divide>
        <apply>
         <times></times>
         <apply>
          <partialdiff></partialdiff>
          <ci>𝒞</ci>
         </apply>
         <vector>
          <ci>μ</ci>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>ℐ</ci>
           <ci>ℱ</ci>
          </apply>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>ℐ</ci>
           <ci>ℳ</ci>
          </apply>
         </vector>
        </apply>
        <apply>
         <partialdiff></partialdiff>
         <ci>μ</ci>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <divide></divide>
         <apply>
          <times></times>
          <apply>
           <partialdiff></partialdiff>
           <ci>𝒞</ci>
          </apply>
          <vector>
           <ci>μ</ci>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>ℐ</ci>
            <ci>ℱ</ci>
           </apply>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>ℐ</ci>
            <ci>ℳ</ci>
           </apply>
          </vector>
         </apply>
         <apply>
          <partialdiff></partialdiff>
          <ci>μ</ci>
         </apply>
        </apply>
        <ci>t</ci>
       </apply>
      </apply>
     </apply>
     <apply>
      <minus></minus>
      <cn type="integer">1</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \gamma_{k}=\left[\dfrac{\partial\mathcal{C}(\mu,\mathcal{I_{F}},\mathcal{I_{M}%
})}{\partial\mu}\dfrac{\partial\mathcal{C}(\mu,\mathcal{I_{F}},\mathcal{I_{M}}%
)}{\partial\mu}^{t}\right]^{-1}
  </annotation>
 </semantics>
</math>

 

<math display="inline" id="YaDICs:17">
 <semantics>
  <mo>⟹</mo>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-⟹</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Longrightarrow
  </annotation>
 </semantics>
</math>

 Gauss-Newton.</li>
</ul>

<p>A lot of different methods exist (BFGS, conjugate gradient, stochastic gradient, ...) but as steepest gradient and Gauss-Newton are the only ones implemented in Yadics these methods are not discussed here.</p>

<p>The Gauss-Newton method is a very efficient method that needs to solve a [M]{U}={F}. On 1000³ voxels µ-tomographic image the number of Degrees of Freedom can reach 1e6 (<em>i.e:</em> on a 12x12x12 mesh ), dealing with such a problem is more a matter of numerical scientists and required specific development (using libraries like Petsc or MUMPS) so we don't use Gauss-Newton methods to solve such problems. We have developed a specific steepest gradient algorithm with a specific tuning of the αk scalar parameter at each iteration. The Gauss-Newton method can be used in small problems in 2D. Pyramidal Filter</p>

<p>None of these optimization methods can succeed directly if applied at the last scale as the gradient methods are sensitive to the initial guests. In order to find a global optimum one has to evaluate the transformation on a filtered image. The figure below illustrates how to use the pyramidal filter to find the transformation.<a class="footnoteRef" href="#fn11" id="fnref11"><sup>11</sup></a></p>

<p>Pyramidal process used in Yadics (and ITK)</p>
<h3 id="regularization">Regularization</h3>

<p>The metrics is often called Image energy, people usually add energy that comes from mechanics assumptions as the laplacian of displacement (a special case of tikhonov regularization <a class="footnoteRef" href="#fn12" id="fnref12"><sup>12</sup></a>) or even Finite Element problems. As we decided not to solve the Gauss-Newton problem for most of cases this solution is far from being CPU efficient. Cachier et al.<a class="footnoteRef" href="#fn13" id="fnref13"><sup>13</sup></a> demonstrated that the problem of minimizing image and mechanical energy can be reformulated in solving the energy image then applying a Gaussian filter at each iteration. We use this strategy in Yadics and we add the median filter as it is massively used in PIV. One notes that the median filter avoids local minima while preserving discontinuities. The filtering process is illustrated in the figure below :</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Image_registration" title="wikilink">Image registration</a></li>
<li><a href="Optical_flow" title="wikilink">Optical flow</a></li>
<li><a href="Displacement_(vector)" title="wikilink">Displacement vector</a></li>
<li><a href="Particle_Image_Velocimetry" title="wikilink">Particle Image Velocimetry</a></li>
</ul>
<h2 id="references">References</h2>
<h2 id="external-links">External links</h2>
<ul>
<li><a class="uri" href="http://yadics.univ-lille1.fr/wordpress/">http://yadics.univ-lille1.fr/wordpress/</a></li>
</ul>

<p>"</p>

<p><a href="Category:Graphics_libraries" title="wikilink">Category:Graphics libraries</a> <a href="Category:Free_software_programmed_in_C++" title="wikilink">Category:Free software programmed in C++</a> <a href="Category:Command-line_software" title="wikilink">Category:Command-line software</a> <a href="Category:Graphics_software" title="wikilink">Category:Graphics software</a> <a href="Category:Free_graphics_software" title="wikilink">Category:Free graphics software</a> <a href="Category:Free_raster_graphics_editors" title="wikilink">Category:Free raster graphics editors</a> <a href="Category:Image_processing" title="wikilink">Category:Image processing</a> <a href="Category:Multidimensional_signal_processing" title="wikilink">Category:Multidimensional signal processing</a> <a href="Category:Computer_vision_software" title="wikilink">Category:Computer vision software</a> <a href="Category:Image_segmentation" title="wikilink">Category:Image segmentation</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">S. Klein, M. Staring, K. Murphy, M. A. Viergever, and J. P. W. Pluim, "Elastix: a toolbox for intensity-based medical image registration," Medical imaging, ieee transactions on, vol. 29, iss. 1, pp. 196–205, 2010<a href="#fnref1">↩</a></li>
<li id="fn2"></li>
<li id="fn3"></li>
<li id="fn4">J. Réthoré, T. Elguedj, P. Simon, and M. Correct, "On the use of nurbs functions for displacement derivatives measurement by digital image correlation," Experimental mechanics, vol. 50, iss. 7, pp. 1099–1116, 2010.<a href="#fnref4">↩</a></li>
<li id="fn5">G. Besnard, F. Hild, and S. Roux, "Finite-element displacement fields analysis from digital images: application to portevin-le châtelier bands," Experimental mechanics, vol. 46, iss. 6, pp. 789–803, 2006.<a href="#fnref5">↩</a></li>
<li id="fn6">J. Réthoré, S. Roux, and F. Hild, "From pictures to extended finite elements: extended digital image correlation (x-dic)," Comptes rendus mécanique, vol. 335, iss. 3, pp. 131–137, 2007.<a href="#fnref6">↩</a></li>
<li id="fn7">R. Hamam, F. Hild, and S. Roux, "Stress intensity factor gauging by digital image correlation: application in cyclic fatigue," Strain, vol. 43, iss. 3, pp. 181–192, 2007.<a href="#fnref7">↩</a></li>
<li id="fn8">F. Hild and S. Roux, "Measuring stress intensity factors with a camera: integrated digital image correlation (i-dic)," Comptes rendus mécanique, vol. 334, iss. 1, pp. 8–12, 2006.<a href="#fnref8">↩</a></li>
<li id="fn9">F. Hild, S. Roux, N. Guerrero, M. Marante, and J. Flórez-Llópez, "Calibration of constitutive models of steel beams subject to local buckling by using digital image correlation," European journal of mechanics - a/solids, vol. 30, iss. 1, pp. 1–10, 2011.<a href="#fnref9">↩</a></li>
<li id="fn10">F. Hild and S. Roux, "Digital image correlation: from displacement measurement to identification of elastic properties ? a review," Strain, vol. 42, iss. 2, pp. 69–80, 2006.<a href="#fnref10">↩</a></li>
<li id="fn11">T. S. Yoo, M. J. Ackerman, W. E. Lorensen, W. Schroeder, V. Chalana, S. Aylward, Dimitris Metaxas, and R. Whitaker, "Engineering and algorithm design for an image processing api: a technical report on itk - the insight toolkit," , pp. 586–592, 2002.<a href="#fnref11">↩</a></li>
<li id="fn12">A. N. Tikhonov and V. B. Glasko, "Use of the regularization method in non-linear problems," \USSR\ computational mathematics and mathematical physics, vol. 5, iss. 3, pp. 93–107, 1965.<a href="#fnref12">↩</a></li>
<li id="fn13">P. Cachier, E. Bardinet, D. Dormont, X. Pennec, and N. Ayache, "Iconic feature based nonrigid registration: the \PASHA\ algorithm," Computer vision and image understanding, vol. 89, iss. 2?3, pp. 272–298, 2003.<a href="#fnref13">↩</a></li>
</ol>
</section>
</body>
</html>
