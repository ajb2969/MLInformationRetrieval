<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1566">Vanna–Volga pricing</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Vanna–Volga pricing</h1>
<hr/>

<p>The <strong>Vanna–Volga method</strong> is a mathematical tool used in <a class="uri" href="finance" title="wikilink">finance</a>. It is a technique for pricing first-generation <a href="exotic_option" title="wikilink">exotic options</a> in <a href="foreign_exchange_market" title="wikilink">foreign exchange market</a> (FX) <a href="Derivative_(finance)" title="wikilink">derivatives</a>.</p>

<p>It consists of adjusting the <a class="uri" href="Black–Scholes" title="wikilink">Black–Scholes</a> theoretical value (BSTV) by the cost of a portfolio which hedges three main risks associated to the volatility of the option: the <a href="Greeks_(finance)" title="wikilink">Vega</a> 

<math display="inline" id="Vanna–Volga_pricing:0">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">𝒱</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>𝒱</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{V}
  </annotation>
 </semantics>
</math>

, the Vanna and the Volga. The Vanna is the sensitivity of the Vega with respect to a change in the spot FX rate:</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:1">
 <semantics>
  <mrow>
   <mtext>Vanna</mtext>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <mo>∂</mo>
     <mi class="ltx_font_mathcaligraphic">𝒱</mi>
    </mrow>
    <mrow>
     <mo>∂</mo>
     <mi>S</mi>
    </mrow>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <mtext>Vanna</mtext>
    <apply>
     <divide></divide>
     <apply>
      <partialdiff></partialdiff>
      <ci>𝒱</ci>
     </apply>
     <apply>
      <partialdiff></partialdiff>
      <ci>S</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \textrm{Vanna}=\frac{\partial\mathcal{V}}{\partial S}
  </annotation>
 </semantics>
</math>

.</p>

<p>Similarly, the Volga is the sensitivity of the Vega with respect to a change of the <a href="implied_volatility" title="wikilink">implied volatility</a> 

<math display="inline" id="Vanna–Volga_pricing:2">
 <semantics>
  <mi>σ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>σ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sigma
  </annotation>
 </semantics>
</math>

:</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:3">
 <semantics>
  <mrow>
   <mtext>Volga</mtext>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <mo>∂</mo>
     <mi class="ltx_font_mathcaligraphic">𝒱</mi>
    </mrow>
    <mrow>
     <mo>∂</mo>
     <mi>σ</mi>
    </mrow>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <mtext>Volga</mtext>
    <apply>
     <divide></divide>
     <apply>
      <partialdiff></partialdiff>
      <ci>𝒱</ci>
     </apply>
     <apply>
      <partialdiff></partialdiff>
      <ci>σ</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \textrm{Volga}=\frac{\partial\mathcal{V}}{\partial\sigma}
  </annotation>
 </semantics>
</math>

.</p>

<p>If we consider a <a href="Volatility_smile" title="wikilink">smile volatility term structure</a> 

<math display="inline" id="Vanna–Volga_pricing:4">
 <semantics>
  <mrow>
   <mi>σ</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>K</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>σ</ci>
    <ci>K</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sigma(K)
  </annotation>
 </semantics>
</math>

 with ATM strike 

<math display="inline" id="Vanna–Volga_pricing:5">
 <semantics>
  <msub>
   <mi>K</mi>
   <mn>0</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>K</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   K_{0}
  </annotation>
 </semantics>
</math>

, ATM volatility 

<math display="inline" id="Vanna–Volga_pricing:6">
 <semantics>
  <msub>
   <mi>σ</mi>
   <mn>0</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>σ</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sigma_{0}
  </annotation>
 </semantics>
</math>

, and where 

<math display="inline" id="Vanna–Volga_pricing:7">
 <semantics>
  <msub>
   <mi>K</mi>
   <mrow>
    <mi>c</mi>
    <mo>/</mo>
    <mi>p</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>K</ci>
    <apply>
     <divide></divide>
     <ci>c</ci>
     <ci>p</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   K_{c/p}
  </annotation>
 </semantics>
</math>

 are the 25-Delta call/put strikes (obtained by solving the equations 

<math display="inline" id="Vanna–Volga_pricing:8">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi mathvariant="normal">Δ</mi>
     <mrow>
      <mi>c</mi>
      <mi>a</mi>
      <mi>l</mi>
      <mi>l</mi>
     </mrow>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>K</mi>
      <mi>c</mi>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>σ</mi>
      <mn>0</mn>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mn>1</mn>
    <mo>/</mo>
    <mn>4</mn>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-Δ</ci>
      <apply>
       <times></times>
       <ci>c</ci>
       <ci>a</ci>
       <ci>l</ci>
       <ci>l</ci>
      </apply>
     </apply>
     <interval closure="open">
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>K</ci>
       <ci>c</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>σ</ci>
       <cn type="integer">0</cn>
      </apply>
     </interval>
    </apply>
    <apply>
     <divide></divide>
     <cn type="integer">1</cn>
     <cn type="integer">4</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Delta_{call}(K_{c},\sigma_{0})=1/4
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Vanna–Volga_pricing:9">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi mathvariant="normal">Δ</mi>
     <mrow>
      <mi>p</mi>
      <mi>u</mi>
      <mi>t</mi>
     </mrow>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>K</mi>
      <mi>p</mi>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>σ</mi>
      <mn>0</mn>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo>-</mo>
    <mrow>
     <mn>1</mn>
     <mo>/</mo>
     <mn>4</mn>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-Δ</ci>
      <apply>
       <times></times>
       <ci>p</ci>
       <ci>u</ci>
       <ci>t</ci>
      </apply>
     </apply>
     <interval closure="open">
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>K</ci>
       <ci>p</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>σ</ci>
       <cn type="integer">0</cn>
      </apply>
     </interval>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <divide></divide>
      <cn type="integer">1</cn>
      <cn type="integer">4</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Delta_{put}(K_{p},\sigma_{0})=-1/4
  </annotation>
 </semantics>
</math>

 where 

<math display="inline" id="Vanna–Volga_pricing:10">
 <semantics>
  <mrow>
   <msub>
    <mi mathvariant="normal">Δ</mi>
    <mrow>
     <mrow>
      <mrow>
       <mi>c</mi>
       <mi>a</mi>
       <mi>l</mi>
       <mi>l</mi>
      </mrow>
      <mo>/</mo>
      <mi>p</mi>
     </mrow>
     <mi>u</mi>
     <mi>t</mi>
    </mrow>
   </msub>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>K</mi>
    <mo>,</mo>
    <mi>σ</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>normal-Δ</ci>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <apply>
        <times></times>
        <ci>c</ci>
        <ci>a</ci>
        <ci>l</ci>
        <ci>l</ci>
       </apply>
       <ci>p</ci>
      </apply>
      <ci>u</ci>
      <ci>t</ci>
     </apply>
    </apply>
    <interval closure="open">
     <ci>K</ci>
     <ci>σ</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Delta_{call/put}(K,\sigma)
  </annotation>
 </semantics>
</math>

 denotes the <a href="Greeks_(finance)" title="wikilink">Black–Scholes Delta sensitivity</a>) then the hedging portfolio will be composed of the <em>at-the-money</em> (ATM), <em>risk-reversal</em> (RR) and <em>butterfly</em> (BF) strategies:</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:11">
 <semantics>
  <mtable>
   <mtr>
    <mtd columnalign="right">
     <mrow>
      <mtext>ATM</mtext>
      <mrow>
       <mo stretchy="false">(</mo>
       <msub>
        <mi>K</mi>
        <mn>0</mn>
       </msub>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mi></mi>
      <mo>=</mo>
      <mrow>
       <mstyle displaystyle="true">
        <mfrac>
         <mn>1</mn>
         <mn>2</mn>
        </mfrac>
       </mstyle>
       <mrow>
        <mo>(</mo>
        <mrow>
         <mrow>
          <mtext>Call</mtext>
          <mrow>
           <mo stretchy="false">(</mo>
           <msub>
            <mi>K</mi>
            <mn>0</mn>
           </msub>
           <mo>,</mo>
           <msub>
            <mi>σ</mi>
            <mn>0</mn>
           </msub>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
         <mo>+</mo>
         <mrow>
          <mtext>Put</mtext>
          <mrow>
           <mo stretchy="false">(</mo>
           <msub>
            <mi>K</mi>
            <mn>0</mn>
           </msub>
           <mo>,</mo>
           <msub>
            <mi>σ</mi>
            <mn>0</mn>
           </msub>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
        </mrow>
        <mo>)</mo>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="right">
     <mrow>
      <mtext>RR</mtext>
      <mrow>
       <mo stretchy="false">(</mo>
       <msub>
        <mi>K</mi>
        <mi>c</mi>
       </msub>
       <mo>,</mo>
       <msub>
        <mi>K</mi>
        <mi>p</mi>
       </msub>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mi></mi>
      <mo>=</mo>
      <mrow>
       <mrow>
        <mstyle displaystyle="true">
         <mfrac>
          <mi></mi>
          <mi></mi>
         </mfrac>
        </mstyle>
        <mtext>Call</mtext>
        <mrow>
         <mo stretchy="false">(</mo>
         <msub>
          <mi>K</mi>
          <mi>c</mi>
         </msub>
         <mo>,</mo>
         <mrow>
          <mi>σ</mi>
          <mrow>
           <mo stretchy="false">(</mo>
           <msub>
            <mi>K</mi>
            <mi>c</mi>
           </msub>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
       <mo>-</mo>
       <mrow>
        <mtext>Put</mtext>
        <mrow>
         <mo stretchy="false">(</mo>
         <msub>
          <mi>K</mi>
          <mi>p</mi>
         </msub>
         <mo>,</mo>
         <mrow>
          <mi>σ</mi>
          <mrow>
           <mo stretchy="false">(</mo>
           <msub>
            <mi>K</mi>
            <mi>p</mi>
           </msub>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="right">
     <mrow>
      <mtext>BF</mtext>
      <mrow>
       <mo stretchy="false">(</mo>
       <msub>
        <mi>K</mi>
        <mi>c</mi>
       </msub>
       <mo>,</mo>
       <msub>
        <mi>K</mi>
        <mi>p</mi>
       </msub>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mi></mi>
      <mo>=</mo>
      <mrow>
       <mrow>
        <mstyle displaystyle="true">
         <mfrac>
          <mn>1</mn>
          <mn>2</mn>
         </mfrac>
        </mstyle>
        <mrow>
         <mo>(</mo>
         <mrow>
          <mrow>
           <mtext>Call</mtext>
           <mrow>
            <mo stretchy="false">(</mo>
            <msub>
             <mi>K</mi>
             <mi>c</mi>
            </msub>
            <mo>,</mo>
            <mrow>
             <mi>σ</mi>
             <mrow>
              <mo stretchy="false">(</mo>
              <msub>
               <mi>K</mi>
               <mi>c</mi>
              </msub>
              <mo stretchy="false">)</mo>
             </mrow>
            </mrow>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
           <mtext>Put</mtext>
           <mrow>
            <mo stretchy="false">(</mo>
            <msub>
             <mi>K</mi>
             <mi>p</mi>
            </msub>
            <mo>,</mo>
            <mrow>
             <mi>σ</mi>
             <mrow>
              <mo stretchy="false">(</mo>
              <msub>
               <mi>K</mi>
               <mi>p</mi>
              </msub>
              <mo stretchy="false">)</mo>
             </mrow>
            </mrow>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
         </mrow>
         <mo>)</mo>
        </mrow>
       </mrow>
       <mo>-</mo>
       <mrow>
        <mtext>ATM</mtext>
        <mrow>
         <mo stretchy="false">(</mo>
         <msub>
          <mi>K</mi>
          <mn>0</mn>
         </msub>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
  </mtable>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <apply>
      <times></times>
      <mtext>ATM</mtext>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>K</ci>
       <cn type="integer">0</cn>
      </apply>
     </apply>
     <apply>
      <eq></eq>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <times></times>
       <apply>
        <divide></divide>
        <cn type="integer">1</cn>
        <cn type="integer">2</cn>
       </apply>
       <apply>
        <plus></plus>
        <apply>
         <times></times>
         <mtext>Call</mtext>
         <interval closure="open">
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>K</ci>
           <cn type="integer">0</cn>
          </apply>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>σ</ci>
           <cn type="integer">0</cn>
          </apply>
         </interval>
        </apply>
        <apply>
         <times></times>
         <mtext>Put</mtext>
         <interval closure="open">
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>K</ci>
           <cn type="integer">0</cn>
          </apply>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>σ</ci>
           <cn type="integer">0</cn>
          </apply>
         </interval>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
    <matrixrow>
     <apply>
      <times></times>
      <mtext>RR</mtext>
      <interval closure="open">
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>K</ci>
        <ci>c</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>K</ci>
        <ci>p</ci>
       </apply>
      </interval>
     </apply>
     <apply>
      <eq></eq>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <minus></minus>
       <apply>
        <times></times>
        <apply>
         <divide></divide>
         <csymbol cd="latexml">absent</csymbol>
         <csymbol cd="latexml">absent</csymbol>
        </apply>
        <mtext>Call</mtext>
        <interval closure="open">
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>K</ci>
          <ci>c</ci>
         </apply>
         <apply>
          <times></times>
          <ci>σ</ci>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>K</ci>
           <ci>c</ci>
          </apply>
         </apply>
        </interval>
       </apply>
       <apply>
        <times></times>
        <mtext>Put</mtext>
        <interval closure="open">
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>K</ci>
          <ci>p</ci>
         </apply>
         <apply>
          <times></times>
          <ci>σ</ci>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>K</ci>
           <ci>p</ci>
          </apply>
         </apply>
        </interval>
       </apply>
      </apply>
     </apply>
    </matrixrow>
    <matrixrow>
     <apply>
      <times></times>
      <mtext>BF</mtext>
      <interval closure="open">
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>K</ci>
        <ci>c</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>K</ci>
        <ci>p</ci>
       </apply>
      </interval>
     </apply>
     <apply>
      <eq></eq>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <minus></minus>
       <apply>
        <times></times>
        <apply>
         <divide></divide>
         <cn type="integer">1</cn>
         <cn type="integer">2</cn>
        </apply>
        <apply>
         <plus></plus>
         <apply>
          <times></times>
          <mtext>Call</mtext>
          <interval closure="open">
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>K</ci>
            <ci>c</ci>
           </apply>
           <apply>
            <times></times>
            <ci>σ</ci>
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>K</ci>
             <ci>c</ci>
            </apply>
           </apply>
          </interval>
         </apply>
         <apply>
          <times></times>
          <mtext>Put</mtext>
          <interval closure="open">
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>K</ci>
            <ci>p</ci>
           </apply>
           <apply>
            <times></times>
            <ci>σ</ci>
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>K</ci>
             <ci>p</ci>
            </apply>
           </apply>
          </interval>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <mtext>ATM</mtext>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>K</ci>
         <cn type="integer">0</cn>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{aligned}\displaystyle\textrm{ATM}(K_{0})&\displaystyle=\frac{1}{2}\left%
(\textrm{Call}(K_{0},\sigma_{0})+\textrm{Put}(K_{0},\sigma_{0})\right)\\
\displaystyle\textrm{RR}(K_{c},K_{p})&\displaystyle=\frac{}{}\textrm{Call}(K_{%
c},\sigma(K_{c}))-\textrm{Put}(K_{p},\sigma(K_{p}))\\
\displaystyle\textrm{BF}(K_{c},K_{p})&\displaystyle=\frac{1}{2}\left(\textrm{%
Call}(K_{c},\sigma(K_{c}))+\textrm{Put}(K_{p},\sigma(K_{p}))\right)-\textrm{%
ATM}(K_{0})\end{aligned}
  </annotation>
 </semantics>
</math>

</p>

<p>with 

<math display="inline" id="Vanna–Volga_pricing:12">
 <semantics>
  <mrow>
   <mtext>Call</mtext>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>K</mi>
    <mo>,</mo>
    <mi>σ</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <mtext>Call</mtext>
    <interval closure="open">
     <ci>K</ci>
     <ci>σ</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \textrm{Call}(K,\sigma)
  </annotation>
 </semantics>
</math>

 the <a href="Black–Scholes#Black.E2.80.93Scholes_formula" title="wikilink">Black–Scholes price</a> of a call option (similarly for the put).</p>

<p>The simplest formulation of the Vanna–Volga method suggests that the Vanna–Volga price 

<math display="inline" id="Vanna–Volga_pricing:13">
 <semantics>
  <msup>
   <mi>X</mi>
   <mrow>
    <mi>V</mi>
    <mi>V</mi>
   </mrow>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>X</ci>
    <apply>
     <times></times>
     <ci>V</ci>
     <ci>V</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X^{VV}
  </annotation>
 </semantics>
</math>

 of an exotic instrument 

<math display="inline" id="Vanna–Volga_pricing:14">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 is given by</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:15">
 <semantics>
  <mrow>
   <msup>
    <mi>X</mi>
    <mi>VV</mi>
   </msup>
   <mo>=</mo>
   <mrow>
    <msup>
     <mi>X</mi>
     <mrow>
      <mi>B</mi>
      <mi>S</mi>
     </mrow>
    </msup>
    <mo>+</mo>
    <mrow>
     <munder>
      <munder accentunder="true">
       <mfrac>
        <msub>
         <mtext>X</mtext>
         <mrow>
          <mi>v</mi>
          <mi>a</mi>
          <mi>n</mi>
          <mi>n</mi>
          <mi>a</mi>
         </mrow>
        </msub>
        <msub>
         <mtext>RR</mtext>
         <mrow>
          <mi>v</mi>
          <mi>a</mi>
          <mi>n</mi>
          <mi>n</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mfrac>
       <mo movablelimits="false">⏟</mo>
      </munder>
      <msub>
       <mi>w</mi>
       <mrow>
        <mi>R</mi>
        <mi>R</mi>
       </mrow>
      </msub>
     </munder>
     <mi>R</mi>
     <msub>
      <mi>R</mi>
      <mrow>
       <mi>c</mi>
       <mi>o</mi>
       <mi>s</mi>
       <mi>t</mi>
      </mrow>
     </msub>
    </mrow>
    <mo>+</mo>
    <mrow>
     <munder>
      <munder accentunder="true">
       <mfrac>
        <msub>
         <mtext>X</mtext>
         <mrow>
          <mi>v</mi>
          <mi>o</mi>
          <mi>l</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
        <msub>
         <mtext>BF</mtext>
         <mrow>
          <mi>v</mi>
          <mi>o</mi>
          <mi>l</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mfrac>
       <mo movablelimits="false">⏟</mo>
      </munder>
      <msub>
       <mi>w</mi>
       <mrow>
        <mi>B</mi>
        <mi>F</mi>
       </mrow>
      </msub>
     </munder>
     <mi>B</mi>
     <msub>
      <mi>F</mi>
      <mrow>
       <mi>c</mi>
       <mi>o</mi>
       <mi>s</mi>
       <mi>t</mi>
      </mrow>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>X</ci>
     <ci>VV</ci>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>X</ci>
      <apply>
       <times></times>
       <ci>B</ci>
       <ci>S</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <apply>
        <ci>normal-⏟</ci>
        <apply>
         <divide></divide>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <mtext>X</mtext>
          <apply>
           <times></times>
           <ci>v</ci>
           <ci>a</ci>
           <ci>n</ci>
           <ci>n</ci>
           <ci>a</ci>
          </apply>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <mtext>RR</mtext>
          <apply>
           <times></times>
           <ci>v</ci>
           <ci>a</ci>
           <ci>n</ci>
           <ci>n</ci>
           <ci>a</ci>
          </apply>
         </apply>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>w</ci>
        <apply>
         <times></times>
         <ci>R</ci>
         <ci>R</ci>
        </apply>
       </apply>
      </apply>
      <ci>R</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>R</ci>
       <apply>
        <times></times>
        <ci>c</ci>
        <ci>o</ci>
        <ci>s</ci>
        <ci>t</ci>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <apply>
        <ci>normal-⏟</ci>
        <apply>
         <divide></divide>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <mtext>X</mtext>
          <apply>
           <times></times>
           <ci>v</ci>
           <ci>o</ci>
           <ci>l</ci>
           <ci>g</ci>
           <ci>a</ci>
          </apply>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <mtext>BF</mtext>
          <apply>
           <times></times>
           <ci>v</ci>
           <ci>o</ci>
           <ci>l</ci>
           <ci>g</ci>
           <ci>a</ci>
          </apply>
         </apply>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>w</ci>
        <apply>
         <times></times>
         <ci>B</ci>
         <ci>F</ci>
        </apply>
       </apply>
      </apply>
      <ci>B</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>F</ci>
       <apply>
        <times></times>
        <ci>c</ci>
        <ci>o</ci>
        <ci>s</ci>
        <ci>t</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X^{\rm VV}=X^{BS}+\underbrace{\frac{\textrm{X}_{vanna}}{\textrm{RR}_{vanna}}}_%
{w_{RR}}{RR}_{cost}+\underbrace{\frac{\textrm{X}_{volga}}{\textrm{BF}_{volga}}%
}_{w_{BF}}{BF}_{cost}
  </annotation>
 </semantics>
</math>

</p>

<p>where by 

<math display="inline" id="Vanna–Volga_pricing:16">
 <semantics>
  <msup>
   <mi>X</mi>
   <mrow>
    <mi>B</mi>
    <mi>S</mi>
   </mrow>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>X</ci>
    <apply>
     <times></times>
     <ci>B</ci>
     <ci>S</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X^{BS}
  </annotation>
 </semantics>
</math>

 denotes the Black–Scholes price of the exotic and the Greeks are calculated with ATM volatility and</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:17">
 <semantics>
  <mtable>
   <mtr>
    <mtd columnalign="right">
     <mrow>
      <mi>R</mi>
      <msub>
       <mi>R</mi>
       <mrow>
        <mi>c</mi>
        <mi>o</mi>
        <mi>s</mi>
        <mi>t</mi>
       </mrow>
      </msub>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mi></mi>
      <mo>=</mo>
      <mrow>
       <mrow>
        <mo>[</mo>
        <mrow>
         <mrow>
          <mtext>Call</mtext>
          <mrow>
           <mo stretchy="false">(</mo>
           <msub>
            <mi>K</mi>
            <mi>c</mi>
           </msub>
           <mo>,</mo>
           <mrow>
            <mi>σ</mi>
            <mrow>
             <mo stretchy="false">(</mo>
             <msub>
              <mi>K</mi>
              <mi>c</mi>
             </msub>
             <mo stretchy="false">)</mo>
            </mrow>
           </mrow>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
         <mo>-</mo>
         <mrow>
          <mtext>Put</mtext>
          <mrow>
           <mo stretchy="false">(</mo>
           <msub>
            <mi>K</mi>
            <mi>p</mi>
           </msub>
           <mo>,</mo>
           <mrow>
            <mi>σ</mi>
            <mrow>
             <mo stretchy="false">(</mo>
             <msub>
              <mi>K</mi>
              <mi>p</mi>
             </msub>
             <mo stretchy="false">)</mo>
            </mrow>
           </mrow>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
        </mrow>
        <mo>]</mo>
       </mrow>
       <mo>-</mo>
       <mrow>
        <mo>[</mo>
        <mrow>
         <mrow>
          <mtext>Call</mtext>
          <mrow>
           <mo stretchy="false">(</mo>
           <msub>
            <mi>K</mi>
            <mi>c</mi>
           </msub>
           <mo>,</mo>
           <msub>
            <mi>σ</mi>
            <mn>0</mn>
           </msub>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
         <mo>-</mo>
         <mrow>
          <mtext>Put</mtext>
          <mrow>
           <mo stretchy="false">(</mo>
           <msub>
            <mi>K</mi>
            <mi>p</mi>
           </msub>
           <mo>,</mo>
           <msub>
            <mi>σ</mi>
            <mn>0</mn>
           </msub>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
        </mrow>
        <mo>]</mo>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="right">
     <mrow>
      <mi>B</mi>
      <msub>
       <mi>F</mi>
       <mrow>
        <mi>c</mi>
        <mi>o</mi>
        <mi>s</mi>
        <mi>t</mi>
       </mrow>
      </msub>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mi></mi>
      <mo>=</mo>
      <mrow>
       <mrow>
        <mstyle displaystyle="true">
         <mfrac>
          <mn>1</mn>
          <mn>2</mn>
         </mfrac>
        </mstyle>
        <mrow>
         <mo>[</mo>
         <mrow>
          <mrow>
           <mtext>Call</mtext>
           <mrow>
            <mo stretchy="false">(</mo>
            <msub>
             <mi>K</mi>
             <mi>c</mi>
            </msub>
            <mo>,</mo>
            <mrow>
             <mi>σ</mi>
             <mrow>
              <mo stretchy="false">(</mo>
              <msub>
               <mi>K</mi>
               <mi>c</mi>
              </msub>
              <mo stretchy="false">)</mo>
             </mrow>
            </mrow>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
           <mtext>Put</mtext>
           <mrow>
            <mo stretchy="false">(</mo>
            <msub>
             <mi>K</mi>
             <mi>p</mi>
            </msub>
            <mo>,</mo>
            <mrow>
             <mi>σ</mi>
             <mrow>
              <mo stretchy="false">(</mo>
              <msub>
               <mi>K</mi>
               <mi>p</mi>
              </msub>
              <mo stretchy="false">)</mo>
             </mrow>
            </mrow>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
         </mrow>
         <mo>]</mo>
        </mrow>
       </mrow>
       <mo>-</mo>
       <mrow>
        <mstyle displaystyle="true">
         <mfrac>
          <mn>1</mn>
          <mn>2</mn>
         </mfrac>
        </mstyle>
        <mrow>
         <mo>[</mo>
         <mrow>
          <mrow>
           <mtext>Call</mtext>
           <mrow>
            <mo stretchy="false">(</mo>
            <msub>
             <mi>K</mi>
             <mi>c</mi>
            </msub>
            <mo>,</mo>
            <msub>
             <mi>σ</mi>
             <mn>0</mn>
            </msub>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
           <mtext>Put</mtext>
           <mrow>
            <mo stretchy="false">(</mo>
            <msub>
             <mi>K</mi>
             <mi>p</mi>
            </msub>
            <mo>,</mo>
            <msub>
             <mi>σ</mi>
             <mn>0</mn>
            </msub>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
         </mrow>
         <mo>]</mo>
        </mrow>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
  </mtable>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <apply>
      <times></times>
      <ci>R</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>R</ci>
       <apply>
        <times></times>
        <ci>c</ci>
        <ci>o</ci>
        <ci>s</ci>
        <ci>t</ci>
       </apply>
      </apply>
     </apply>
     <apply>
      <eq></eq>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <minus></minus>
       <apply>
        <csymbol cd="latexml">delimited-[]</csymbol>
        <apply>
         <minus></minus>
         <apply>
          <times></times>
          <mtext>Call</mtext>
          <interval closure="open">
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>K</ci>
            <ci>c</ci>
           </apply>
           <apply>
            <times></times>
            <ci>σ</ci>
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>K</ci>
             <ci>c</ci>
            </apply>
           </apply>
          </interval>
         </apply>
         <apply>
          <times></times>
          <mtext>Put</mtext>
          <interval closure="open">
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>K</ci>
            <ci>p</ci>
           </apply>
           <apply>
            <times></times>
            <ci>σ</ci>
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>K</ci>
             <ci>p</ci>
            </apply>
           </apply>
          </interval>
         </apply>
        </apply>
       </apply>
       <apply>
        <csymbol cd="latexml">delimited-[]</csymbol>
        <apply>
         <minus></minus>
         <apply>
          <times></times>
          <mtext>Call</mtext>
          <interval closure="open">
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>K</ci>
            <ci>c</ci>
           </apply>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>σ</ci>
            <cn type="integer">0</cn>
           </apply>
          </interval>
         </apply>
         <apply>
          <times></times>
          <mtext>Put</mtext>
          <interval closure="open">
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>K</ci>
            <ci>p</ci>
           </apply>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>σ</ci>
            <cn type="integer">0</cn>
           </apply>
          </interval>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
    <matrixrow>
     <apply>
      <times></times>
      <ci>B</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>F</ci>
       <apply>
        <times></times>
        <ci>c</ci>
        <ci>o</ci>
        <ci>s</ci>
        <ci>t</ci>
       </apply>
      </apply>
     </apply>
     <apply>
      <eq></eq>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <minus></minus>
       <apply>
        <times></times>
        <apply>
         <divide></divide>
         <cn type="integer">1</cn>
         <cn type="integer">2</cn>
        </apply>
        <apply>
         <csymbol cd="latexml">delimited-[]</csymbol>
         <apply>
          <plus></plus>
          <apply>
           <times></times>
           <mtext>Call</mtext>
           <interval closure="open">
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>K</ci>
             <ci>c</ci>
            </apply>
            <apply>
             <times></times>
             <ci>σ</ci>
             <apply>
              <csymbol cd="ambiguous">subscript</csymbol>
              <ci>K</ci>
              <ci>c</ci>
             </apply>
            </apply>
           </interval>
          </apply>
          <apply>
           <times></times>
           <mtext>Put</mtext>
           <interval closure="open">
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>K</ci>
             <ci>p</ci>
            </apply>
            <apply>
             <times></times>
             <ci>σ</ci>
             <apply>
              <csymbol cd="ambiguous">subscript</csymbol>
              <ci>K</ci>
              <ci>p</ci>
             </apply>
            </apply>
           </interval>
          </apply>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <divide></divide>
         <cn type="integer">1</cn>
         <cn type="integer">2</cn>
        </apply>
        <apply>
         <csymbol cd="latexml">delimited-[]</csymbol>
         <apply>
          <plus></plus>
          <apply>
           <times></times>
           <mtext>Call</mtext>
           <interval closure="open">
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>K</ci>
             <ci>c</ci>
            </apply>
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>σ</ci>
             <cn type="integer">0</cn>
            </apply>
           </interval>
          </apply>
          <apply>
           <times></times>
           <mtext>Put</mtext>
           <interval closure="open">
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>K</ci>
             <ci>p</ci>
            </apply>
            <apply>
             <csymbol cd="ambiguous">subscript</csymbol>
             <ci>σ</ci>
             <cn type="integer">0</cn>
            </apply>
           </interval>
          </apply>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{aligned}\displaystyle RR_{cost}&\displaystyle=\left[\textrm{Call}(K_{c}%
,\sigma(K_{c}))-\textrm{Put}(K_{p},\sigma(K_{p}))\right]-\left[\textrm{Call}(K%
_{c},\sigma_{0})-\textrm{Put}(K_{p},\sigma_{0})\right]\\
\displaystyle BF_{cost}&\displaystyle=\frac{1}{2}\left[\textrm{Call}(K_{c},%
\sigma(K_{c}))+\textrm{Put}(K_{p},\sigma(K_{p}))\right]-\frac{1}{2}\left[%
\textrm{Call}(K_{c},\sigma_{0})+\textrm{Put}(K_{p},\sigma_{0})\right]\end{aligned}
  </annotation>
 </semantics>
</math>

</p>

<p>These quantities represent a <em>smile cost</em>, namely the difference between the price computed with/without including the smile effect.</p>

<p>The rationale behind the above formulation of the Vanna-Volga price is that one can extract the <em>smile cost</em> of an exotic option by measuring the <em>smile cost</em> of a portfolio designed to hedge its Vanna and Volga risks. The reason why one chooses the strategies BF and RR to do this is because they are liquid FX instruments and they carry mainly Volga, and respectively Vanna risks. The weighting factors 

<math display="inline" id="Vanna–Volga_pricing:18">
 <semantics>
  <msub>
   <mi>w</mi>
   <mrow>
    <mi>R</mi>
    <mi>R</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>w</ci>
    <apply>
     <times></times>
     <ci>R</ci>
     <ci>R</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   w_{RR}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Vanna–Volga_pricing:19">
 <semantics>
  <msub>
   <mi>w</mi>
   <mrow>
    <mi>B</mi>
    <mi>F</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>w</ci>
    <apply>
     <times></times>
     <ci>B</ci>
     <ci>F</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   w_{BF}
  </annotation>
 </semantics>
</math>

 represent respectively the amount of RR needed to replicate the option's Vanna, and the amount of BF needed to replicate the option's Volga. The above approach ignores the small (but non-zero) fraction of Volga carried by the RR and the small fraction of Vanna carried by the BF. It further neglects the cost of hedging the Vega risk. This has led to a more general formulation of the Vanna-Volga method in which one considers that within the Black–Scholes assumptions the exotic option's Vega, Vanna and Volga can be replicated by the weighted sum of three instruments:</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:20">
 <semantics>
  <mrow>
   <msub>
    <mi>X</mi>
    <mi>i</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mpadded width="+1.7pt">
      <msub>
       <mi>w</mi>
       <mrow>
        <mi>A</mi>
        <mi>T</mi>
        <mi>M</mi>
       </mrow>
      </msub>
     </mpadded>
     <mi>A</mi>
     <mi>T</mi>
     <msub>
      <mi>M</mi>
      <mi>i</mi>
     </msub>
    </mrow>
    <mo>+</mo>
    <mrow>
     <mpadded width="+1.7pt">
      <msub>
       <mi>w</mi>
       <mrow>
        <mi>R</mi>
        <mi>R</mi>
       </mrow>
      </msub>
     </mpadded>
     <mi>R</mi>
     <msub>
      <mi>R</mi>
      <mi>i</mi>
     </msub>
    </mrow>
    <mo>+</mo>
    <mrow>
     <mpadded width="+1.7pt">
      <msub>
       <mi>w</mi>
       <mrow>
        <mi>B</mi>
        <mi>F</mi>
       </mrow>
      </msub>
     </mpadded>
     <mi>B</mi>
     <mpadded width="+8.5pt">
      <msub>
       <mi>F</mi>
       <mi>i</mi>
      </msub>
     </mpadded>
     <mi>i</mi>
     <mtext>=vega, vanna, volga</mtext>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>X</ci>
     <ci>i</ci>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>w</ci>
       <apply>
        <times></times>
        <ci>A</ci>
        <ci>T</ci>
        <ci>M</ci>
       </apply>
      </apply>
      <ci>A</ci>
      <ci>T</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>M</ci>
       <ci>i</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>w</ci>
       <apply>
        <times></times>
        <ci>R</ci>
        <ci>R</ci>
       </apply>
      </apply>
      <ci>R</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>R</ci>
       <ci>i</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>w</ci>
       <apply>
        <times></times>
        <ci>B</ci>
        <ci>F</ci>
       </apply>
      </apply>
      <ci>B</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>F</ci>
       <ci>i</ci>
      </apply>
      <ci>i</ci>
      <mtext>=vega, vanna, volga</mtext>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X_{i}=w_{ATM}\,{ATM_{i}}+w_{RR}\,{RR_{i}}+w_{BF}\,{BF_{i}}\,\,\,\,\,i\text{=%
vega, vanna, volga}
  </annotation>
 </semantics>
</math>


</p>

<p>where the weightings are obtained by solving the system: 

<math display="inline" id="Vanna–Volga_pricing:21">
 <semantics>
  <mrow>
   <mover accent="true">
    <mi>x</mi>
    <mo stretchy="false">→</mo>
   </mover>
   <mo>=</mo>
   <mrow>
    <mi>𝔸</mi>
    <mover accent="true">
     <mi>w</mi>
     <mo stretchy="false">→</mo>
    </mover>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-→</ci>
     <ci>x</ci>
    </apply>
    <apply>
     <times></times>
     <ci>𝔸</ci>
     <apply>
      <ci>normal-→</ci>
      <ci>w</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \vec{x}=\mathbb{A}\vec{w}
  </annotation>
 </semantics>
</math>

</p>

<p>with</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:22">
 <semantics>
  <mrow>
   <mi>𝔸</mi>
   <mo>=</mo>
   <mrow>
    <mo>(</mo>
    <mtable>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>A</mi>
        <mi>T</mi>
        <msub>
         <mi>M</mi>
         <mrow>
          <mi>v</mi>
          <mi>e</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>R</mi>
        <msub>
         <mi>R</mi>
         <mrow>
          <mi>v</mi>
          <mi>e</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>B</mi>
        <msub>
         <mi>F</mi>
         <mrow>
          <mi>v</mi>
          <mi>e</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>A</mi>
        <mi>T</mi>
        <msub>
         <mi>M</mi>
         <mrow>
          <mi>v</mi>
          <mi>a</mi>
          <mi>n</mi>
          <mi>n</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>R</mi>
        <msub>
         <mi>R</mi>
         <mrow>
          <mi>v</mi>
          <mi>a</mi>
          <mi>n</mi>
          <mi>n</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>B</mi>
        <msub>
         <mi>F</mi>
         <mrow>
          <mi>v</mi>
          <mi>a</mi>
          <mi>n</mi>
          <mi>n</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>A</mi>
        <mi>T</mi>
        <msub>
         <mi>M</mi>
         <mrow>
          <mi>v</mi>
          <mi>o</mi>
          <mi>l</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>R</mi>
        <msub>
         <mi>R</mi>
         <mrow>
          <mi>v</mi>
          <mi>o</mi>
          <mi>l</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>B</mi>
        <msub>
         <mi>F</mi>
         <mrow>
          <mi>v</mi>
          <mi>o</mi>
          <mi>l</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
    <mo>)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>𝔸</ci>
    <matrix>
     <matrixrow>
      <apply>
       <times></times>
       <ci>A</ci>
       <ci>T</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>M</ci>
        <apply>
         <times></times>
         <ci>v</ci>
         <ci>e</ci>
         <ci>g</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>R</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>R</ci>
        <apply>
         <times></times>
         <ci>v</ci>
         <ci>e</ci>
         <ci>g</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>B</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>F</ci>
        <apply>
         <times></times>
         <ci>v</ci>
         <ci>e</ci>
         <ci>g</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <times></times>
       <ci>A</ci>
       <ci>T</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>M</ci>
        <apply>
         <times></times>
         <ci>v</ci>
         <ci>a</ci>
         <ci>n</ci>
         <ci>n</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>R</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>R</ci>
        <apply>
         <times></times>
         <ci>v</ci>
         <ci>a</ci>
         <ci>n</ci>
         <ci>n</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>B</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>F</ci>
        <apply>
         <times></times>
         <ci>v</ci>
         <ci>a</ci>
         <ci>n</ci>
         <ci>n</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <times></times>
       <ci>A</ci>
       <ci>T</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>M</ci>
        <apply>
         <times></times>
         <ci>v</ci>
         <ci>o</ci>
         <ci>l</ci>
         <ci>g</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>R</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>R</ci>
        <apply>
         <times></times>
         <ci>v</ci>
         <ci>o</ci>
         <ci>l</ci>
         <ci>g</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>B</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>F</ci>
        <apply>
         <times></times>
         <ci>v</ci>
         <ci>o</ci>
         <ci>l</ci>
         <ci>g</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
     </matrixrow>
    </matrix>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{A}=\begin{pmatrix}ATM_{vega}&RR_{vega}&BF_{vega}\\
ATM_{vanna}&RR_{vanna}&BF_{vanna}\\
ATM_{volga}&RR_{volga}&BF_{volga}\end{pmatrix}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Vanna–Volga_pricing:23">
 <semantics>
  <mrow>
   <mover accent="true">
    <mi>w</mi>
    <mo stretchy="false">→</mo>
   </mover>
   <mo>=</mo>
   <mrow>
    <mo>(</mo>
    <mtable>
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi>w</mi>
        <mrow>
         <mi>A</mi>
         <mi>T</mi>
         <mi>M</mi>
        </mrow>
       </msub>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi>w</mi>
        <mrow>
         <mi>R</mi>
         <mi>R</mi>
        </mrow>
       </msub>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi>w</mi>
        <mrow>
         <mi>B</mi>
         <mi>F</mi>
        </mrow>
       </msub>
      </mtd>
     </mtr>
    </mtable>
    <mo>)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-→</ci>
     <ci>w</ci>
    </apply>
    <matrix>
     <matrixrow>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>w</ci>
       <apply>
        <times></times>
        <ci>A</ci>
        <ci>T</ci>
        <ci>M</ci>
       </apply>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>w</ci>
       <apply>
        <times></times>
        <ci>R</ci>
        <ci>R</ci>
       </apply>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>w</ci>
       <apply>
        <times></times>
        <ci>B</ci>
        <ci>F</ci>
       </apply>
      </apply>
     </matrixrow>
    </matrix>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \vec{w}=\begin{pmatrix}w_{ATM}\\
w_{RR}\\
w_{BF}\end{pmatrix}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Vanna–Volga_pricing:24">
 <semantics>
  <mrow>
   <mover accent="true">
    <mi>x</mi>
    <mo stretchy="false">→</mo>
   </mover>
   <mo>=</mo>
   <mrow>
    <mo>(</mo>
    <mtable>
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi>X</mi>
        <mrow>
         <mi>v</mi>
         <mi>e</mi>
         <mi>g</mi>
         <mi>a</mi>
        </mrow>
       </msub>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi>X</mi>
        <mrow>
         <mi>v</mi>
         <mi>a</mi>
         <mi>n</mi>
         <mi>n</mi>
         <mi>a</mi>
        </mrow>
       </msub>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi>X</mi>
        <mrow>
         <mi>v</mi>
         <mi>o</mi>
         <mi>l</mi>
         <mi>g</mi>
         <mi>a</mi>
        </mrow>
       </msub>
      </mtd>
     </mtr>
    </mtable>
    <mo>)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-→</ci>
     <ci>x</ci>
    </apply>
    <matrix>
     <matrixrow>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <apply>
        <times></times>
        <ci>v</ci>
        <ci>e</ci>
        <ci>g</ci>
        <ci>a</ci>
       </apply>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <apply>
        <times></times>
        <ci>v</ci>
        <ci>a</ci>
        <ci>n</ci>
        <ci>n</ci>
        <ci>a</ci>
       </apply>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <apply>
        <times></times>
        <ci>v</ci>
        <ci>o</ci>
        <ci>l</ci>
        <ci>g</ci>
        <ci>a</ci>
       </apply>
      </apply>
     </matrixrow>
    </matrix>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \vec{x}=\begin{pmatrix}X_{vega}\\
X_{vanna}\\
X_{volga}\end{pmatrix}
  </annotation>
 </semantics>
</math>

</p>

<p>Given this replication, the Vanna–Volga method adjusts the BS price of an exotic option by the <em>smile cost</em> of the above weighted sum (note that the ATM smile cost is zero by construction):</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:25">
 <semantics>
  <mtable>
   <mtr>
    <mtd columnalign="right">
     <msup>
      <mi>X</mi>
      <mi>VV</mi>
     </msup>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mi></mi>
      <mo>=</mo>
      <mrow>
       <msup>
        <mi>X</mi>
        <mrow>
         <mi>B</mi>
         <mi>S</mi>
        </mrow>
       </msup>
       <mo>+</mo>
       <mrow>
        <msub>
         <mi>w</mi>
         <mrow>
          <mi>R</mi>
          <mi>R</mi>
         </mrow>
        </msub>
        <mrow>
         <mo stretchy="false">(</mo>
         <mrow>
          <mrow>
           <mi>R</mi>
           <msup>
            <mi>R</mi>
            <mrow>
             <mi>m</mi>
             <mi>k</mi>
             <mi>t</mi>
            </mrow>
           </msup>
          </mrow>
          <mo>-</mo>
          <mrow>
           <mi>R</mi>
           <msup>
            <mi>R</mi>
            <mrow>
             <mi>B</mi>
             <mi>S</mi>
            </mrow>
           </msup>
          </mrow>
         </mrow>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
       <mo>+</mo>
       <mrow>
        <msub>
         <mi>w</mi>
         <mrow>
          <mi>B</mi>
          <mi>F</mi>
         </mrow>
        </msub>
        <mrow>
         <mo stretchy="false">(</mo>
         <mrow>
          <mrow>
           <mi>B</mi>
           <msup>
            <mi>F</mi>
            <mrow>
             <mi>m</mi>
             <mi>k</mi>
             <mi>t</mi>
            </mrow>
           </msup>
          </mrow>
          <mo>-</mo>
          <mrow>
           <mi>B</mi>
           <msup>
            <mi>F</mi>
            <mrow>
             <mi>B</mi>
             <mi>S</mi>
            </mrow>
           </msup>
          </mrow>
         </mrow>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd></mtd>
    <mtd columnalign="left">
     <mrow>
      <mi></mi>
      <mo>=</mo>
      <mrow>
       <msup>
        <mi>X</mi>
        <mrow>
         <mi>B</mi>
         <mi>S</mi>
        </mrow>
       </msup>
       <mo>+</mo>
       <mrow>
        <msup>
         <mover accent="true">
          <mi>x</mi>
          <mo stretchy="false">→</mo>
         </mover>
         <mi>T</mi>
        </msup>
        <msup>
         <mrow>
          <mo stretchy="false">(</mo>
          <msup>
           <mi>𝔸</mi>
           <mi>T</mi>
          </msup>
          <mo stretchy="false">)</mo>
         </mrow>
         <mrow>
          <mo>-</mo>
          <mn>1</mn>
         </mrow>
        </msup>
        <mover accent="true">
         <mi>I</mi>
         <mo stretchy="false">→</mo>
        </mover>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd></mtd>
    <mtd columnalign="left">
     <mrow>
      <mi></mi>
      <mo>=</mo>
      <mrow>
       <msup>
        <mi>X</mi>
        <mrow>
         <mi>B</mi>
         <mi>S</mi>
        </mrow>
       </msup>
       <mo>+</mo>
       <mrow>
        <mpadded width="+1.7pt">
         <msub>
          <mi>X</mi>
          <mrow>
           <mi>v</mi>
           <mi>e</mi>
           <mi>g</mi>
           <mi>a</mi>
          </mrow>
         </msub>
        </mpadded>
        <msub>
         <mi mathvariant="normal">Ω</mi>
         <mrow>
          <mi>v</mi>
          <mi>e</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
       <mo>+</mo>
       <mrow>
        <mpadded width="+1.7pt">
         <msub>
          <mi>X</mi>
          <mrow>
           <mi>v</mi>
           <mi>a</mi>
           <mi>n</mi>
           <mi>n</mi>
           <mi>a</mi>
          </mrow>
         </msub>
        </mpadded>
        <msub>
         <mi mathvariant="normal">Ω</mi>
         <mrow>
          <mi>v</mi>
          <mi>a</mi>
          <mi>n</mi>
          <mi>n</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
       <mo>+</mo>
       <mrow>
        <mpadded width="+1.7pt">
         <msub>
          <mi>X</mi>
          <mrow>
           <mi>v</mi>
           <mi>o</mi>
           <mi>l</mi>
           <mi>g</mi>
           <mi>a</mi>
          </mrow>
         </msub>
        </mpadded>
        <msub>
         <mi mathvariant="normal">Ω</mi>
         <mrow>
          <mi>v</mi>
          <mi>o</mi>
          <mi>l</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
  </mtable>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>X</ci>
      <ci>VV</ci>
     </apply>
     <apply>
      <eq></eq>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <plus></plus>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>X</ci>
        <apply>
         <times></times>
         <ci>B</ci>
         <ci>S</ci>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>w</ci>
         <apply>
          <times></times>
          <ci>R</ci>
          <ci>R</ci>
         </apply>
        </apply>
        <apply>
         <minus></minus>
         <apply>
          <times></times>
          <ci>R</ci>
          <apply>
           <csymbol cd="ambiguous">superscript</csymbol>
           <ci>R</ci>
           <apply>
            <times></times>
            <ci>m</ci>
            <ci>k</ci>
            <ci>t</ci>
           </apply>
          </apply>
         </apply>
         <apply>
          <times></times>
          <ci>R</ci>
          <apply>
           <csymbol cd="ambiguous">superscript</csymbol>
           <ci>R</ci>
           <apply>
            <times></times>
            <ci>B</ci>
            <ci>S</ci>
           </apply>
          </apply>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>w</ci>
         <apply>
          <times></times>
          <ci>B</ci>
          <ci>F</ci>
         </apply>
        </apply>
        <apply>
         <minus></minus>
         <apply>
          <times></times>
          <ci>B</ci>
          <apply>
           <csymbol cd="ambiguous">superscript</csymbol>
           <ci>F</ci>
           <apply>
            <times></times>
            <ci>m</ci>
            <ci>k</ci>
            <ci>t</ci>
           </apply>
          </apply>
         </apply>
         <apply>
          <times></times>
          <ci>B</ci>
          <apply>
           <csymbol cd="ambiguous">superscript</csymbol>
           <ci>F</ci>
           <apply>
            <times></times>
            <ci>B</ci>
            <ci>S</ci>
           </apply>
          </apply>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
    <matrixrow>
     <cerror>
      <csymbol cd="ambiguous">missing-subexpression</csymbol>
     </cerror>
     <apply>
      <eq></eq>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <plus></plus>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>X</ci>
        <apply>
         <times></times>
         <ci>B</ci>
         <ci>S</ci>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <ci>normal-→</ci>
          <ci>x</ci>
         </apply>
         <ci>T</ci>
        </apply>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>𝔸</ci>
          <ci>T</ci>
         </apply>
         <apply>
          <minus></minus>
          <cn type="integer">1</cn>
         </apply>
        </apply>
        <apply>
         <ci>normal-→</ci>
         <ci>I</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
    <matrixrow>
     <cerror>
      <csymbol cd="ambiguous">missing-subexpression</csymbol>
     </cerror>
     <apply>
      <eq></eq>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <plus></plus>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>X</ci>
        <apply>
         <times></times>
         <ci>B</ci>
         <ci>S</ci>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>X</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>e</ci>
          <ci>g</ci>
          <ci>a</ci>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>normal-Ω</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>e</ci>
          <ci>g</ci>
          <ci>a</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>X</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>a</ci>
          <ci>n</ci>
          <ci>n</ci>
          <ci>a</ci>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>normal-Ω</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>a</ci>
          <ci>n</ci>
          <ci>n</ci>
          <ci>a</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>X</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>o</ci>
          <ci>l</ci>
          <ci>g</ci>
          <ci>a</ci>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>normal-Ω</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>o</ci>
          <ci>l</ci>
          <ci>g</ci>
          <ci>a</ci>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{aligned}\displaystyle X^{\rm VV}&\displaystyle=X^{BS}+w_{RR}({RR}^{mkt}%
-{RR}^{BS})+w_{BF}({BF}^{mkt}-{BF}^{BS})\\
&\displaystyle=X^{BS}+\vec{x}^{T}(\mathbb{A}^{T})^{-1}\vec{I}\\
&\displaystyle=X^{BS}+X_{vega}\,\Omega_{vega}+X_{vanna}\,\Omega_{vanna}+X_{%
volga}\,\Omega_{volga}\\
\end{aligned}
  </annotation>
 </semantics>
</math>

</p>

<p>where</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:26">
 <semantics>
  <mrow>
   <mover accent="true">
    <mi>I</mi>
    <mo stretchy="false">→</mo>
   </mover>
   <mo>=</mo>
   <mrow>
    <mo>(</mo>
    <mtable>
     <mtr>
      <mtd columnalign="center">
       <mn>0</mn>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mrow>
         <mi>R</mi>
         <msup>
          <mi>R</mi>
          <mrow>
           <mi>m</mi>
           <mi>k</mi>
           <mi>t</mi>
          </mrow>
         </msup>
        </mrow>
        <mo>-</mo>
        <mrow>
         <mi>R</mi>
         <msup>
          <mi>R</mi>
          <mrow>
           <mi>B</mi>
           <mi>S</mi>
          </mrow>
         </msup>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mrow>
         <mi>B</mi>
         <msup>
          <mi>F</mi>
          <mrow>
           <mi>m</mi>
           <mi>k</mi>
           <mi>t</mi>
          </mrow>
         </msup>
        </mrow>
        <mo>-</mo>
        <mrow>
         <mi>B</mi>
         <msup>
          <mi>F</mi>
          <mrow>
           <mi>B</mi>
           <mi>S</mi>
          </mrow>
         </msup>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
    <mo>)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-→</ci>
     <ci>I</ci>
    </apply>
    <matrix>
     <matrixrow>
      <cn type="integer">0</cn>
     </matrixrow>
     <matrixrow>
      <apply>
       <minus></minus>
       <apply>
        <times></times>
        <ci>R</ci>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>R</ci>
         <apply>
          <times></times>
          <ci>m</ci>
          <ci>k</ci>
          <ci>t</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <ci>R</ci>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>R</ci>
         <apply>
          <times></times>
          <ci>B</ci>
          <ci>S</ci>
         </apply>
        </apply>
       </apply>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <minus></minus>
       <apply>
        <times></times>
        <ci>B</ci>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>F</ci>
         <apply>
          <times></times>
          <ci>m</ci>
          <ci>k</ci>
          <ci>t</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <ci>B</ci>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>F</ci>
         <apply>
          <times></times>
          <ci>B</ci>
          <ci>S</ci>
         </apply>
        </apply>
       </apply>
      </apply>
     </matrixrow>
    </matrix>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \vec{I}=\begin{pmatrix}0\\
{RR}^{mkt}-{RR}^{BS}\\
{BF}^{mkt}-{BF}^{BS}\end{pmatrix}
  </annotation>
 </semantics>
</math>

</p>

<p>and</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:27">
 <semantics>
  <mrow>
   <mrow>
    <mo>(</mo>
    <mtable>
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi mathvariant="normal">Ω</mi>
        <mrow>
         <mi>v</mi>
         <mi>e</mi>
         <mi>g</mi>
         <mi>a</mi>
        </mrow>
       </msub>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi mathvariant="normal">Ω</mi>
        <mrow>
         <mi>v</mi>
         <mi>a</mi>
         <mi>n</mi>
         <mi>n</mi>
         <mi>a</mi>
        </mrow>
       </msub>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi mathvariant="normal">Ω</mi>
        <mrow>
         <mi>v</mi>
         <mi>o</mi>
         <mi>l</mi>
         <mi>g</mi>
         <mi>a</mi>
        </mrow>
       </msub>
      </mtd>
     </mtr>
    </mtable>
    <mo>)</mo>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msup>
     <mrow>
      <mo stretchy="false">(</mo>
      <msup>
       <mi>𝔸</mi>
       <mi>T</mi>
      </msup>
      <mo stretchy="false">)</mo>
     </mrow>
     <mrow>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
    </msup>
    <mover accent="true">
     <mi>I</mi>
     <mo stretchy="false">→</mo>
    </mover>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <matrix>
     <matrixrow>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>normal-Ω</ci>
       <apply>
        <times></times>
        <ci>v</ci>
        <ci>e</ci>
        <ci>g</ci>
        <ci>a</ci>
       </apply>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>normal-Ω</ci>
       <apply>
        <times></times>
        <ci>v</ci>
        <ci>a</ci>
        <ci>n</ci>
        <ci>n</ci>
        <ci>a</ci>
       </apply>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>normal-Ω</ci>
       <apply>
        <times></times>
        <ci>v</ci>
        <ci>o</ci>
        <ci>l</ci>
        <ci>g</ci>
        <ci>a</ci>
       </apply>
      </apply>
     </matrixrow>
    </matrix>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>𝔸</ci>
       <ci>T</ci>
      </apply>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <apply>
      <ci>normal-→</ci>
      <ci>I</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{pmatrix}\Omega_{vega}\\
\Omega_{vanna}\\
\Omega_{volga}\end{pmatrix}=(\mathbb{A}^{T})^{-1}\vec{I}
  </annotation>
 </semantics>
</math>

</p>

<p>The quantities 

<math display="inline" id="Vanna–Volga_pricing:28">
 <semantics>
  <msub>
   <mi mathvariant="normal">Ω</mi>
   <mi>i</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>normal-Ω</ci>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Omega_{i}
  </annotation>
 </semantics>
</math>

 can be interpreted as the market prices attached to a unit amount of Vega, Vanna and Volga, respectively. The resulting correction, however, typically turns out to be too large. Market practitioners thus modify 

<math display="inline" id="Vanna–Volga_pricing:29">
 <semantics>
  <msup>
   <mi>X</mi>
   <mrow>
    <mi>V</mi>
    <mi>V</mi>
   </mrow>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>X</ci>
    <apply>
     <times></times>
     <ci>V</ci>
     <ci>V</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X^{VV}
  </annotation>
 </semantics>
</math>

 to</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:30">
 <semantics>
  <mtable>
   <mtr>
    <mtd columnalign="right">
     <msup>
      <mi>X</mi>
      <mi>VV</mi>
     </msup>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mi></mi>
      <mo>=</mo>
      <mrow>
       <msup>
        <mi>X</mi>
        <mrow>
         <mi>B</mi>
         <mi>S</mi>
        </mrow>
       </msup>
       <mo>+</mo>
       <mrow>
        <msub>
         <mi>p</mi>
         <mrow>
          <mi>v</mi>
          <mi>a</mi>
          <mi>n</mi>
          <mi>n</mi>
          <mi>a</mi>
         </mrow>
        </msub>
        <msub>
         <mi>X</mi>
         <mrow>
          <mi>v</mi>
          <mi>a</mi>
          <mi>n</mi>
          <mi>n</mi>
          <mi>a</mi>
         </mrow>
        </msub>
        <msub>
         <mi mathvariant="normal">Ω</mi>
         <mrow>
          <mi>v</mi>
          <mi>a</mi>
          <mi>n</mi>
          <mi>n</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
       <mo>+</mo>
       <mrow>
        <msub>
         <mi>p</mi>
         <mrow>
          <mi>v</mi>
          <mi>o</mi>
          <mi>l</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
        <msub>
         <mi>X</mi>
         <mrow>
          <mi>v</mi>
          <mi>o</mi>
          <mi>l</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
        <msub>
         <mi mathvariant="normal">Ω</mi>
         <mrow>
          <mi>v</mi>
          <mi>o</mi>
          <mi>l</mi>
          <mi>g</mi>
          <mi>a</mi>
         </mrow>
        </msub>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
  </mtable>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>X</ci>
      <ci>VV</ci>
     </apply>
     <apply>
      <eq></eq>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <plus></plus>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>X</ci>
        <apply>
         <times></times>
         <ci>B</ci>
         <ci>S</ci>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>p</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>a</ci>
          <ci>n</ci>
          <ci>n</ci>
          <ci>a</ci>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>X</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>a</ci>
          <ci>n</ci>
          <ci>n</ci>
          <ci>a</ci>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>normal-Ω</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>a</ci>
          <ci>n</ci>
          <ci>n</ci>
          <ci>a</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>p</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>o</ci>
          <ci>l</ci>
          <ci>g</ci>
          <ci>a</ci>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>X</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>o</ci>
          <ci>l</ci>
          <ci>g</ci>
          <ci>a</ci>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>normal-Ω</ci>
         <apply>
          <times></times>
          <ci>v</ci>
          <ci>o</ci>
          <ci>l</ci>
          <ci>g</ci>
          <ci>a</ci>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{aligned}\displaystyle X^{\rm VV}&\displaystyle=X^{BS}+p_{vanna}X_{vanna%
}\Omega_{vanna}+p_{volga}X_{volga}\Omega_{volga}\end{aligned}
  </annotation>
 </semantics>
</math>

</p>

<p>The Vega contribution turns out to be several orders of magnitude smaller than the Vanna and Volga terms in all practical situations, hence one neglects it.</p>

<p>The terms 

<math display="inline" id="Vanna–Volga_pricing:31">
 <semantics>
  <msub>
   <mi>p</mi>
   <mrow>
    <mi>v</mi>
    <mi>a</mi>
    <mi>n</mi>
    <mi>n</mi>
    <mi>a</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>p</ci>
    <apply>
     <times></times>
     <ci>v</ci>
     <ci>a</ci>
     <ci>n</ci>
     <ci>n</ci>
     <ci>a</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p_{vanna}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Vanna–Volga_pricing:32">
 <semantics>
  <msub>
   <mi>p</mi>
   <mrow>
    <mi>v</mi>
    <mi>o</mi>
    <mi>l</mi>
    <mi>g</mi>
    <mi>a</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>p</ci>
    <apply>
     <times></times>
     <ci>v</ci>
     <ci>o</ci>
     <ci>l</ci>
     <ci>g</ci>
     <ci>a</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p_{volga}
  </annotation>
 </semantics>
</math>

 are put in by-hand and represent factors that ensure the correct behaviour of the price of an exotic option near a barrier: as the knock-out barrier level 

<math display="inline" id="Vanna–Volga_pricing:33">
 <semantics>
  <mi>B</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>B</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   B
  </annotation>
 </semantics>
</math>

 of an option is gradually moved toward the spot level 

<math display="inline" id="Vanna–Volga_pricing:34">
 <semantics>
  <msub>
   <mi>S</mi>
   <mn>0</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>S</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{0}
  </annotation>
 </semantics>
</math>

, the BSTV price of a knock-out option must be a monotonically decreasing function, converging to zero exactly at 

<math display="inline" id="Vanna–Volga_pricing:35">
 <semantics>
  <mrow>
   <mi>B</mi>
   <mo>=</mo>
   <msub>
    <mi>S</mi>
    <mn>0</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>B</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>S</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   B=S_{0}
  </annotation>
 </semantics>
</math>


. Since the Vanna-Volga method is a simple rule-of-thumb and not a rigorous model, there is no guarantee that this will be a priori the case. The attenuation factors are of a different from for the Vanna or the Volga of an instrument. This is because for barrier values close to the spot they behave differently: the Vanna becomes large while, on the contrary, the Volga becomes small. Hence the attenuation factors take the form:</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:36">
 <semantics>
  <mtable>
   <mtr>
    <mtd columnalign="right">
     <msub>
      <mi>p</mi>
      <mi>vanna</mi>
     </msub>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mi></mi>
      <mo>=</mo>
      <mrow>
       <mpadded width="+1.7pt">
        <mi>a</mi>
       </mpadded>
       <mi>γ</mi>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="right">
     <msub>
      <mi>p</mi>
      <mi>volga</mi>
     </msub>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mi></mi>
      <mo>=</mo>
      <mrow>
       <mi>b</mi>
       <mo>+</mo>
       <mrow>
        <mi>c</mi>
        <mi>γ</mi>
       </mrow>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
  </mtable>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <ci>vanna</ci>
     </apply>
     <apply>
      <eq></eq>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <times></times>
       <ci>a</ci>
       <ci>γ</ci>
      </apply>
     </apply>
    </matrixrow>
    <matrixrow>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <ci>volga</ci>
     </apply>
     <apply>
      <eq></eq>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <plus></plus>
       <ci>b</ci>
       <apply>
        <times></times>
        <ci>c</ci>
        <ci>γ</ci>
       </apply>
      </apply>
     </apply>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{aligned}\displaystyle p_{\rm vanna}&\displaystyle=a\,\gamma\\
\displaystyle p_{\rm volga}&\displaystyle=b+c\gamma\end{aligned}
  </annotation>
 </semantics>
</math>

</p>

<p>where 

<math display="inline" id="Vanna–Volga_pricing:37">
 <semantics>
  <mrow>
   <mi>γ</mi>
   <mo>∈</mo>
   <mrow>
    <mo stretchy="false">[</mo>
    <mn>0</mn>
    <mo>,</mo>
    <mn>1</mn>
    <mo stretchy="false">]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>γ</ci>
    <interval closure="closed">
     <cn type="integer">0</cn>
     <cn type="integer">1</cn>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \gamma\in[0,1]
  </annotation>
 </semantics>
</math>

 represents some measure of the barrier(s) vicinity to the spot with the features</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:38">
 <semantics>
  <mtable>
   <mtr>
    <mtd columnalign="right">
     <mrow>
      <mi>γ</mi>
      <mo>=</mo>
      <mn>0</mn>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mrow>
       <mrow>
        <mi>f</mi>
        <mi>o</mi>
        <mi>r</mi>
       </mrow>
       <msub>
        <mi>S</mi>
        <mn>0</mn>
       </msub>
      </mrow>
      <mo>→</mo>
      <mi>B</mi>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="right">
     <mrow>
      <mi>γ</mi>
      <mo>=</mo>
      <mn>1</mn>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mrow>
       <mrow>
        <mi>f</mi>
        <mi>o</mi>
        <mi>r</mi>
       </mrow>
       <mrow>
        <mo stretchy="false">|</mo>
        <mrow>
         <msub>
          <mi>S</mi>
          <mn>0</mn>
         </msub>
         <mo>-</mo>
         <mi>B</mi>
        </mrow>
        <mo stretchy="false">|</mo>
       </mrow>
      </mrow>
      <mo>≫</mo>
      <mn>0</mn>
     </mrow>
    </mtd>
   </mtr>
  </mtable>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <apply>
      <eq></eq>
      <ci>γ</ci>
      <cn type="integer">0</cn>
     </apply>
     <apply>
      <ci>normal-→</ci>
      <list>
       <apply>
        <times></times>
        <ci>f</ci>
        <ci>o</ci>
        <ci>r</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>S</ci>
        <cn type="integer">0</cn>
       </apply>
      </list>
      <ci>B</ci>
     </apply>
    </matrixrow>
    <matrixrow>
     <apply>
      <eq></eq>
      <ci>γ</ci>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="latexml">much-greater-than</csymbol>
      <list>
       <apply>
        <times></times>
        <ci>f</ci>
        <ci>o</ci>
        <ci>r</ci>
       </apply>
       <apply>
        <abs></abs>
        <apply>
         <minus></minus>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>S</ci>
          <cn type="integer">0</cn>
         </apply>
         <ci>B</ci>
        </apply>
       </apply>
      </list>
      <cn type="integer">0</cn>
     </apply>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{aligned}\displaystyle\gamma=0&\displaystyle{for}\ \ S_{0}\to B\\
\displaystyle\gamma=1&\displaystyle{for}\ \ |S_{0}-B|\gg 0\end{aligned}
  </annotation>
 </semantics>
</math>

</p>

<p>The coefficients 

<math display="inline" id="Vanna–Volga_pricing:39">
 <semantics>
  <mrow>
   <mi>a</mi>
   <mo>,</mo>
   <mi>b</mi>
   <mo>,</mo>
   <mi>c</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <ci>a</ci>
    <ci>b</ci>
    <ci>c</ci>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a,b,c
  </annotation>
 </semantics>
</math>

 are found through calibration of the model to ensure that it reproduces the vanilla smile. Good candidates for 

<math display="inline" id="Vanna–Volga_pricing:40">
 <semantics>
  <mi>γ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>γ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \gamma
  </annotation>
 </semantics>
</math>

 that ensure the appropriate behaviour close to the barriers are the <em>survival probability</em> and the <em>expected first exit time</em>. Both of these quantities offer the desirable property that they vanish close to a barrier.</p>
<h2 id="survival-probability">Survival probability</h2>

<p>The survival probability 

<math display="inline" id="Vanna–Volga_pricing:41">
 <semantics>
  <mrow>
   <msub>
    <mi>p</mi>
    <mrow>
     <mi>s</mi>
     <mi>u</mi>
     <mi>r</mi>
     <mi>v</mi>
    </mrow>
   </msub>
   <mo>∈</mo>
   <mrow>
    <mo stretchy="false">[</mo>
    <mn>0</mn>
    <mo>,</mo>
    <mn>1</mn>
    <mo stretchy="false">]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>p</ci>
     <apply>
      <times></times>
      <ci>s</ci>
      <ci>u</ci>
      <ci>r</ci>
      <ci>v</ci>
     </apply>
    </apply>
    <interval closure="closed">
     <cn type="integer">0</cn>
     <cn type="integer">1</cn>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p_{surv}\in[0,1]
  </annotation>
 </semantics>
</math>

 refers to the probability that the spot does not touch one or more barrier levels 

<math display="inline" id="Vanna–Volga_pricing:42">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <msub>
    <mi>B</mi>
    <mi>i</mi>
   </msub>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <set>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>B</ci>
     <ci>i</ci>
    </apply>
   </set>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{B_{i}\}
  </annotation>
 </semantics>
</math>

. For example, for a single barrier option we have</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:43">
 <semantics>
  <mrow>
   <mi>DF</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>t</mi>
     <mtext>tod</mtext>
    </msub>
    <mo>,</mo>
    <msub>
     <mi>t</mi>
     <mtext>mat</mtext>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>DF</ci>
    <interval closure="open">
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>t</ci>
      <mtext>tod</mtext>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>t</ci>
      <mtext>mat</mtext>
     </apply>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathrm{DF}(t_{\textrm{tod}},t_{\textrm{mat}})
  </annotation>
 </semantics>
</math>

 is the value of a <em>no-touch</em> option and 

<math display="inline" id="Vanna–Volga_pricing:44">
 <semantics>
  <mrow>
   <mi>u</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>S</mi>
     <mi>t</mi>
    </msub>
    <mo>,</mo>
    <mi>t</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>u</ci>
    <interval closure="open">
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>S</ci>
      <ci>t</ci>
     </apply>
     <ci>t</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   u(S_{t},t)
  </annotation>
 </semantics>
</math>

 the discount factor between today and maturity. Similarly, for options with two barriers the survival probability is given through the undiscounted value of a double-no-touch option.</p>
<h2 id="first-exit-time">First-exit time</h2>

<p>The first exit time (FET) is the minimum between: (i) the time in the future when the spot is expected to exit a barrier zone before maturity, and (ii) maturity, if the spot has not hit any of the barrier levels up to maturity. That is, if we denote the FET by 

<math display="inline" id="Vanna–Volga_pricing:45">
 <semantics>
  <mrow>
   <mrow>
    <mi>u</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>S</mi>
      <mi>t</mi>
     </msub>
     <mo>,</mo>
     <mi>t</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mi></mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>u</ci>
     <interval closure="open">
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>S</ci>
       <ci>t</ci>
      </apply>
      <ci>t</ci>
     </interval>
    </apply>
    <csymbol cd="latexml">absent</csymbol>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   u(S_{t},t)=
  </annotation>
 </semantics>
</math>

 then 

<math display="inline" id="Vanna–Volga_pricing:46">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <mi>ϕ</mi>
   <mo>,</mo>
   <mi>T</mi>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <set>
    <ci>ϕ</ci>
    <ci>T</ci>
   </set>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{\phi,T\}
  </annotation>
 </semantics>
</math>

min

<math display="inline" id="Vanna–Volga_pricing:47">
 <semantics>
  <mrow>
   <mi>ϕ</mi>
   <mo>=</mo>
   <mtext>inf</mtext>
   <mrow>
    <mo stretchy="false">{</mo>
    <mi mathvariant="normal">ℓ</mi>
    <mo>∈</mo>
    <mrow>
     <mo stretchy="false">[</mo>
     <mn>0</mn>
     <mo>,</mo>
     <mi>T</mi>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo stretchy="false">}</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">ϕ</csymbol>
    <eq></eq>
    <mtext>inf</mtext>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-{</ci>
     <csymbol cd="unknown">ℓ</csymbol>
     <in></in>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-[</ci>
      <cn type="integer">0</cn>
      <ci>normal-,</ci>
      <csymbol cd="unknown">T</csymbol>
      <ci>normal-)</ci>
     </cerror>
     <ci>normal-}</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \phi=\textrm{inf}\{\ell\in[0,T)\}
  </annotation>
 </semantics>
</math>

 where 

<math display="inline" id="Vanna–Volga_pricing:48">
 <semantics>
  <mrow>
   <msub>
    <mi>S</mi>
    <mrow>
     <mi>t</mi>
     <mo>+</mo>
     <mi mathvariant="normal">ℓ</mi>
    </mrow>
   </msub>
   <mo>></mo>
   <mi>H</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <gt></gt>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>S</ci>
     <apply>
      <plus></plus>
      <ci>t</ci>
      <ci>normal-ℓ</ci>
     </apply>
    </apply>
    <ci>H</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{t+\ell}>H
  </annotation>
 </semantics>
</math>

 such that 

<math display="inline" id="Vanna–Volga_pricing:49">
 <semantics>
  <msub>
   <mi>S</mi>
   <mi>t</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>S</ci>
    <ci>t</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{t}
  </annotation>
 </semantics>
</math>

 or 

<math display="inline" id="Vanna–Volga_pricing:50">
 <semantics>
  <mrow>
   <mrow>
    <mfrac>
     <mrow>
      <mrow>
       <mo>∂</mo>
       <mi>u</mi>
      </mrow>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>S</mi>
       <mo>,</mo>
       <mi>t</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mrow>
      <mo>∂</mo>
      <mi>t</mi>
     </mrow>
    </mfrac>
    <mo>+</mo>
    <mrow>
     <mfrac>
      <mn>1</mn>
      <mn>2</mn>
     </mfrac>
     <msup>
      <mi>σ</mi>
      <mn>2</mn>
     </msup>
     <msup>
      <mi>S</mi>
      <mn>2</mn>
     </msup>
     <mfrac>
      <mrow>
       <mrow>
        <msup>
         <mo>∂</mo>
         <mn>2</mn>
        </msup>
        <mi>u</mi>
       </mrow>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>S</mi>
        <mo>,</mo>
        <mi>t</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mrow>
       <mo>∂</mo>
       <msup>
        <mi>S</mi>
        <mn>2</mn>
       </msup>
      </mrow>
     </mfrac>
    </mrow>
    <mo>+</mo>
    <mrow>
     <mi>μ</mi>
     <mi>S</mi>
     <mfrac>
      <mrow>
       <mrow>
        <mo>∂</mo>
        <mi>u</mi>
       </mrow>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>S</mi>
        <mo>,</mo>
        <mi>t</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mrow>
       <mo>∂</mo>
       <mi>S</mi>
      </mrow>
     </mfrac>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <plus></plus>
     <apply>
      <divide></divide>
      <apply>
       <times></times>
       <apply>
        <partialdiff></partialdiff>
        <ci>u</ci>
       </apply>
       <interval closure="open">
        <ci>S</ci>
        <ci>t</ci>
       </interval>
      </apply>
      <apply>
       <partialdiff></partialdiff>
       <ci>t</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>σ</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>S</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <divide></divide>
       <apply>
        <times></times>
        <apply>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <partialdiff></partialdiff>
          <cn type="integer">2</cn>
         </apply>
         <ci>u</ci>
        </apply>
        <interval closure="open">
         <ci>S</ci>
         <ci>t</ci>
        </interval>
       </apply>
       <apply>
        <partialdiff></partialdiff>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>S</ci>
         <cn type="integer">2</cn>
        </apply>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>μ</ci>
      <ci>S</ci>
      <apply>
       <divide></divide>
       <apply>
        <times></times>
        <apply>
         <partialdiff></partialdiff>
         <ci>u</ci>
        </apply>
        <interval closure="open">
         <ci>S</ci>
         <ci>t</ci>
        </interval>
       </apply>
       <apply>
        <partialdiff></partialdiff>
        <ci>S</ci>
       </apply>
      </apply>
     </apply>
    </apply>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \frac{\partial u(S,t)}{\partial t}+\frac{1}{2}\sigma^{2}S^{2}\frac{\partial^{2%
}u(S,t)}{\partial S^{2}}+\mu S\frac{\partial u(S,t)}{\partial S}=0
  </annotation>
 </semantics>
</math>

 are the 'low' vs 'high' barrier levels and 

<math display="inline" id="Vanna–Volga_pricing:51">
 <semantics>
  <mrow>
   <mrow>
    <mi>u</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>S</mi>
     <mo>,</mo>
     <mi>T</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mi>T</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>u</ci>
     <interval closure="open">
      <ci>S</ci>
      <ci>T</ci>
     </interval>
    </apply>
    <ci>T</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   u(S,T)=T
  </annotation>
 </semantics>
</math>

 the spot of today.</p>

<p>The first-exit time is the solution of the following PDE</p>

<p>

<math display="inline" id="Vanna–Volga_pricing:52">
 <semantics>
  <mi>T</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>T</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   T
  </annotation>
 </semantics>
</math>

</p>

<p>This equation is solved backwards in time starting from the terminal condition 

<math display="inline" id="Vanna–Volga_pricing:53">
 <semantics>
  <mrow>
   <mrow>
    <mi>u</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>L</mi>
     <mo>,</mo>
     <msup>
      <mi>t</mi>
      <mo>′</mo>
     </msup>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>u</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>H</mi>
     <mo>,</mo>
     <msup>
      <mi>t</mi>
      <mo>′</mo>
     </msup>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <msup>
    <mi>t</mi>
    <mo>′</mo>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <times></times>
      <ci>u</ci>
      <interval closure="open">
       <ci>L</ci>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>t</ci>
        <ci>normal-′</ci>
       </apply>
      </interval>
     </apply>
     <apply>
      <times></times>
      <ci>u</ci>
      <interval closure="open">
       <ci>H</ci>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>t</ci>
        <ci>normal-′</ci>
       </apply>
      </interval>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>t</ci>
      <ci>normal-′</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   u(L,t^{\prime})=u(H,t^{\prime})=t^{\prime}
  </annotation>
 </semantics>
</math>

 where 

<math display="inline" id="Vanna–Volga_pricing:54">
 <semantics>
  <mrow>
   <mi>H</mi>
   <mo>≫</mo>
   <msub>
    <mi>S</mi>
    <mn>0</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">much-greater-than</csymbol>
    <ci>H</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>S</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   H\gg S_{0}
  </annotation>
 </semantics>
</math>

 is the time to maturity and boundary conditions 

<math display="inline" id="Vanna–Volga_pricing:55">
 <semantics>
  <mrow>
   <mi>L</mi>
   <mo>≪</mo>
   <msub>
    <mi>S</mi>
    <mn>0</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">much-less-than</csymbol>
    <ci>L</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>S</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   L\ll S_{0}
  </annotation>
 </semantics>
</math>

. In case of a single barrier option we use the same PDE with either 

<math display="inline" id="Vanna–Volga_pricing:56">
 <semantics>
  <mi>μ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>μ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mu
  </annotation>
 </semantics>
</math>

 or <span class="LaTeX">$L\ll
S_0$</span>. The parameter <span class="LaTeX">$\mu$</span> represents the risk-neutral drift of the underlying stochastic process.</p>
<h2 id="references">References</h2>
<ul>
<li></li>
<li></li>
</ul>
<ul>
<li></li>
</ul>
<ul>
<li></li>
<li>[<a class="uri" href="http://www.google.com/patents/about?id=4sChAAAAEBAJ&amp;dq">http://www.google.com/patents/about?id=4sChAAAAEBAJ&amp;dq;</a>;=7315838 US patent 7315838]</li>
</ul>

<p>"</p>

<p><a href="Category:Mathematical_finance" title="wikilink">Category:Mathematical finance</a> <a href="Category:Derivatives_(finance)" title="wikilink">Category:Derivatives (finance)</a> <a href="Category:Portfolio_theories" title="wikilink">Category:Portfolio theories</a></p>
</body>
</html>
