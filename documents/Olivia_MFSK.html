<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="151">Olivia MFSK</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Olivia MFSK</h1>
<hr/>

<p><a href="File:Olivia_16-500_waterfall.jpg" title="wikilink">thumb|right |alt=Olivia 16-500 waterfall | </a><a href="Spectrogram" title="wikilink">Spectrogram (waterfall display)</a> of an Olivia 16/500 signal centered on 7073.25kHz  <strong>Olivia MFSK</strong> is an <a href="amateur_radio" title="wikilink">amateur</a> <a class="uri" href="radioteletype" title="wikilink">radioteletype</a> protocol designed to work in difficult (low <a href="signal-to-noise_ratio" title="wikilink">signal-to-noise ratio</a> plus <a href="Multipath_propagation" title="wikilink">multipath</a> <a href="Radio_propagation" title="wikilink">propagation</a>) conditions on <a href="shortwave_bands" title="wikilink">shortwave bands</a>. The signal can still be properly copied when it is buried 10 <a href="Decibel" title="wikilink">dB</a> below the noise floor (i.e. when the amplitude of the noise is just over 3 times that of the signal). It is commonly used by <a href="amateur_radio_operators" title="wikilink">amateur radio operators</a> to reliably transmit <a class="uri" href="ASCII" title="wikilink">ASCII</a> characters over noisy channels using the <a href="high_frequency" title="wikilink">high frequency</a> (3-30<a class="uri" href="MHz" title="wikilink">MHz</a>) spectrum.</p>

<p>Olivia modes are commonly referred to as ''' Olivia <em>X</em> / <em>Y</em> ''' (or, alternatively, ''' Olivia <em>Y</em> / <em>X</em> '''), where <strong><em>X</em></strong> refers to the number of different audio tones transmitted and <strong><em>Y</em></strong> refers to the <a href="Bandwidth_(signal_processing)" title="wikilink">bandwidth</a> in <a class="uri" href="hertz" title="wikilink">hertz</a> over which these signals are spread. Examples of common Olivia modes are 16/500, 32/1000 and 8/250.</p>
<h2 id="history">History</h2>

<p>The protocol was developed at the end of 2003 by <a href="Pawel_Jalocha" title="wikilink">Pawel Jalocha</a>. The first on-the-air tests were performed by two radio amateurs, Fred OH/DK4ZC and Les VK2DSG on the Europe-Australia path in the 20-meter amateur band. The tests proved that the protocol works well and can allow regular intercontinental radio contacts with as little as one watt RF power. Since 2005 Olivia has become a standard for digital data transfer under white noise, fading and <a href="Multipath_propagation" title="wikilink">multipath</a>, flutter (polar path) and auroral conditions.</p>
<h2 id="voluntary-channelization">Voluntary channelization</h2>

<p>Since Olivia signals can be decoded even when received signals are extremely weak, (<a href="signal_to_noise_ratio" title="wikilink">signal to noise ratio</a> of -14<a href="Decibel" title="wikilink">db</a>),<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> signals strong enough to be decoded are sometimes below the <a href="noise_floor" title="wikilink">noise floor</a> and therefore impossible to search for manually. As a result, <a href="amateur_radio_operators" title="wikilink">amateur radio operators</a> have voluntarily decided upon channelization for this mode. This channelization allows even imperceptibly weak signals to be properly tuned for reception and decoding. By common convention amateur stations initiate contacts utilizing either the 16/500 or 32/1000 modes and then switch to other modes to continue the conversation. The following table lists the common center frequencies used in the <a href="amateur_radio" title="wikilink">amateur radio</a> <a href="Amateur_radio_frequency_allocations" title="wikilink">bands</a>.</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p>Olivia Center Frequencies <a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p><a href="Band_(radio)" title="wikilink">Band</a></p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p><a href="160_meter_band" title="wikilink">160 Meters</a></p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p><a href="80_meter_band" title="wikilink">80 Meters</a></p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p><a href="40_meter_band" title="wikilink">40 Meters</a></p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p><a href="30_meter_band" title="wikilink">30 Meters</a></p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p><a href="20_meter_band" title="wikilink">20 Meters</a></p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p><a href="17_meter_band" title="wikilink">17 Meters</a></p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p><a href="15_meter_band" title="wikilink">15 Meters</a></p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p><a href="12_meter_band" title="wikilink">12 Meters</a></p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p><a href="10_meter_band" title="wikilink">10 Meters</a></p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p><a href="6_meter_band" title="wikilink">6 Meters</a></p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p><a href="2_meter_band" title="wikilink">2 Meters</a></p></td>
</tr>
</tbody>
</table>
<h2 id="tones-and-bandwidth-combinations">Tones and Bandwidth Combinations</h2>

<p>Conversations using Olivia are by convention initiated using either Olivia 16/500 (16 tones over a 500 Hz bandwidth) or Olivia 32/1000 (32 tones over a 1000 Hz bandwidth).<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> Once communications have been established, the communicating parties mutually decide if another mode would better suit the current <a href="Skywave" title="wikilink">propagation</a> conditions. The possible number of tones that can be chosen are 2, 4, 8, 16, 32, 64, 128, and 256 with higher numbers of tones giving more data redundancy but slower throughput and lower numbers of tones giving faster throughput at the cost of less redundancy. Available bandwidths for Olivia are 125 Hz, 256 Hz, 512 Hz, 500 Hz, 1000 Hz, and 2000 Hz with wider bandwidths giving faster throughput and narrower bandwidths giving slower throughput. The most commonly used combinations are 4/125, 8/250, 8/500, 16/500, 16/1000, and 32/1000.</p>
<h2 id="the-technical-details">The technical details</h2>

<p>Being a digital protocol, Olivia transmits a stream of <a class="uri" href="ASCII" title="wikilink">ASCII</a> (7-bit) characters. The characters are sent in blocks of 5. Each block takes 2 seconds to transmit, thus the effective data rate is 2.5 character/second or 150 characters/minute. The most common transmission <a href="Bandwidth_(signal_processing)" title="wikilink">bandwidth</a> is 1000 <a href="Hertz" title="wikilink">Hz</a> and the <a class="uri" href="baud" title="wikilink">baud</a> rate is 31.25 <a class="uri" href="MFSK" title="wikilink">MFSK</a> tones/second. To accommodate for different conditions and for the purpose of experimentation the bandwidth and the baud rate can be changed.</p>

<p>The Olivia transmission system is constructed of two layers: the lower, modulation and <a href="Forward_error_correction" title="wikilink">forward error correcting</a> (FEC) code layer is a classical <a href="multiple_frequency-shift_keying" title="wikilink">multiple frequency-shift keying</a> (MFSK) while the higher layer is a forward error correcting code based on <a href="Walsh_function" title="wikilink">Walsh functions</a>.</p>

<p>Both layers are of similar nature: they constitute a "1-out-of-N" FEC code. For the first layer the <a href="orthogonal_functions" title="wikilink">orthogonal functions</a> are (co)sine functions, with 32 different frequencies (tones). At a given time only one of those 32 tones is being sent. The demodulator measures the amplitudes of all the 32 possible tones (using a <a href="Fourier_transform" title="wikilink">Fourier transform</a> ) and (knowing that only <strong>one</strong> of those 32 could have been sent) picks up the tone with the highest amplitude.<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></p>

<p>For the second FEC layer: every ASCII character is encoded as one of 64 possible Walsh functions (or vectors of a <a href="Hadamard_matrix" title="wikilink">Hadamard matrix</a>). The receiver again measures the amplitudes for all 64 vectors (here comes the Hadamard Transform) and chooses the greatest.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a></p>

<p>For optimal performance the actual demodulators work with soft decisions and the final (hard) decision to decode a character is taken only at the second layer. Thus the first layer demodulator actually produces soft decisions for each of the 5 bits associated to an MFSK tone instead of simply picking up the highest tone to produce hard decisions for those 5 bits.</p>

<p>In order to avoid simple transmitted patterns (like a constant tone) and to minimize the chance for a false lock at the synchronizer the characters encoded into the Walsh function pass through a scrambler and interleaver. This stage simply shifts and <a href="XOR" title="wikilink">XORs</a> bits with predefined scrambling vectors and so it does not improve the performance where the white (uncorrelated) noise is concerned, but the resulting pattern gains certain distinct characteristics which are of great help to the synchronizer.</p>

<p>The receiver synchronizes automatically by searching through possible time and frequency offsets for a matching pattern. The frequency search range is normally +/- 100 Hz but can be as high as +/- 500 Hz if the user wishes so.</p>
<h3 id="the-mfsk-layer">The MFSK layer</h3>

<p>The default mode sends 32 tones within the 1000 Hz audio bandwidth and the tones are spaced by 1000 Hz/32 = 31.25 Hz. The tones are <a href="Window_Function" title="wikilink">shaped</a> to minimize the amount of energy sent outside the nominal bandwidth. The shape applied is plotted as the red trace on this <a href="http://www.ea4zb.com/imagenes/olivia/mfsk_shape.jpg">graph</a>. The blue trace represents the more classical <a href="Window_function#Hann_(Hanning)_window" title="wikilink">Hann window</a>, which was used in the first version of the system.</p>

<p>The exact shape formula is:</p>

<p>

<math display="block" id="Olivia_MFSK:0">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo>+</mo>
     <mn>1.0000000000</mn>
    </mrow>
    <mo>+</mo>
    <mrow>
     <mn>1.1913785723</mn>
     <mrow>
      <mi>cos</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>x</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>-</mo>
   <mrow>
    <mn>0.0793018558</mn>
    <mrow>
     <mi>cos</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mn>2</mn>
       <mi>x</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>-</mo>
   <mrow>
    <mn>0.2171442026</mn>
    <mrow>
     <mi>cos</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mn>3</mn>
       <mi>x</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>-</mo>
   <mrow>
    <mn>0.0014526076</mn>
    <mrow>
     <mi>cos</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mn>4</mn>
       <mi>x</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <minus></minus>
    <apply>
     <plus></plus>
     <apply>
      <plus></plus>
      <cn type="float">1.0000000000</cn>
     </apply>
     <apply>
      <times></times>
      <cn type="float">1.1913785723</cn>
      <apply>
       <cos></cos>
       <ci>x</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <cn type="float">0.0793018558</cn>
     <apply>
      <cos></cos>
      <apply>
       <times></times>
       <cn type="integer">2</cn>
       <ci>x</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <cn type="float">0.2171442026</cn>
     <apply>
      <cos></cos>
      <apply>
       <times></times>
       <cn type="integer">3</cn>
       <ci>x</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <cn type="float">0.0014526076</cn>
     <apply>
      <cos></cos>
      <apply>
       <times></times>
       <cn type="integer">4</cn>
       <ci>x</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   +1.0000000000+1.1913785723\cos(x)-0.0793018558\cos(2x)-0.2171442026\cos(3x)-0.%
0014526076\cos(4x)
  </annotation>
 </semantics>
</math>

</p>

<p>where <em>x</em> ranges from – π to π.</p>
<figure><b>(Figure)</b>
<figcaption>A plot of the window ("shape formula")</figcaption>
</figure>

<p>The coefficients represent the symbol shape in the frequency domain and were calculated by a minimization procedure which sought to make the smallest crosstalk and the smallest frequency spillover.</p>

<p>This <a href="http://www.ea4zb.com/imagenes/olivia/mfsk_tone.jpg">graph</a> presents the 500 Hz MFSK tone (red trace) shaped according to the above formula. The blue trace is the envelope.</p>

<p>The tones are sent at 31.25 baud or every 32 milliseconds. The phase is not preserved from one tone to the next: instead a random shift of ±90 degrees is introduced in order not to transmit a pure tone when the same symbol is repeatedly sent. Because the symbols are smoothly shaped there is no need to keep the phase constant, which normally is the case when no (e.g. square) shaping is used.</p>

<p>The modulator uses the <a href="Gray_code" title="wikilink">Gray code</a> to encode 5-bit symbols into the tone numbers.</p>

<p>The waveform generator is based on the 8000 Hz sampling rate. The tones are spaced by 256 samples in time and the window that shapes them is 512 samples long. The demodulator is based on the FFT with the size of 512 points. The tone spacing in frequency is 8000 Hz/256 = 31.25 Hz and the demodulator FFT has the resolution of 8000 Hz/512 = 15.625 Hz thus half of the tone separation.</p>

<p>To adapt the system to different propagation conditions, the number of tones and the bandwidth can be changed and the time and frequency parameters are proportionally scaled. The number of tones can be 2, 4, 8, 16, 32, 64, 128 or 256. The bandwidth can be 125, 250, 500, 1000 or 2000 Hz.</p>
<h3 id="the-walsh-functions-fec-layer">The Walsh functions FEC layer</h3>

<p>The modulation layer of the Olivia transmission system in the default mode sends one of 32 tones at a time. Each tone thus constitutes a symbol that carries 5 bits of information. For the FEC code, 64 symbols are taken to form a block. Within each block one bit out of every symbol is taken and it forms a 64-bit vector coded as a Walsh function. Every 64-bit vector represents a 7-bit ASCII character, thus each block represents 5 ASCII characters.</p>

<p>This way, if one symbol (tone) becomes corrupted by the noise, only one bit of every 64-bit vector becomes corrupt, thus the transmission errors are spread uniformly across the characters within a block.</p>

<p>The two layers (MFSK+Walsh function) of the FEC code can be treated as a two dimensional code: the first dimension is formed along the frequency axis by the MFSK itself while the second dimension is formed along the time axis by the Walsh functions. The two dimensional arrangement was made with the idea in mind to solve such arranged FEC code with an iterative algorithm, however, no such algorithm has yet been established.</p>

<p>The scrambling and simple bit interleaving is applied to make the generated symbol patterns appear more random and with minimal self-correlation. This avoids false locks at the receiver.</p>

<p>Bit interleaving: The Walsh function for the first character in a block is constructed from the 1st bit of the 1st symbol, the 2nd bit of the 2nd symbol, and so on. The 2nd Walsh function is constructed from the 2nd bit of the 1st symbol, the 3rd bit of the 2nd symbol, and so on.</p>

<p>Scrambling: The Walsh functions are scrambled with a pseudo-random sequence 0xE257E6D0291574EC. The Walsh function for the 1st character in a block is scrambled with the scrambling sequence, the 2nd Walsh function is scrambled with the sequence rotated right by 13 bits, the 3rd with the sequence rotated by 26 bits, and so on.</p>
<h2 id="samples">Samples</h2>

<p>The listed audio files both are encoded with the message:'' "Welcome to Wikipedia, the free encyclopedia that anyone can edit." ''</p>
<h2 id="contestia">Contestia</h2>

<p>Contestia is a digital mode that is directly derived from Olivia, which is not as robust. It is more of a compromise between performance and speed.</p>

<p>It sounds and looks almost identical to Olivia, and can be configured in as many ways, but has twice the speed. The mode was developed by Nick Fedoseev, UT2UZ, in 2005.</p>

<p>The Contestia mode has 40 formats just like Olivia - some of which are considered standard and they all have different characteristics. The formats have a variation in bandwidth (125,250,500,1000, and 2000 Hz) and number of tones used (2,4,8,16,32,64,128, or 256).</p>

<p>The standard Contestia formats (bandwidth/tones) are 125/4, 250/8, 500/16, 1000/32, and 2000/64. The most commonly used formats are 250/8, 500/16, and 1000/32.<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a></p>

<p>The increased speed of Contestia is achieved by using a smaller symbol block size of (32) rather than Olivia (64) and by a using 6 bit decimal character set rather than 7 bit <a class="uri" href="ASCII" title="wikilink">ASCII</a> set which Olivia uses.</p>

<p>This reduced character set does not print out in both upper and lower case (such as <a class="uri" href="RTTY" title="wikilink">RTTY</a>). Some <a href="Amateur_radio_net#Types_of_nets" title="wikilink">traffic nets</a> may not like to use this mode as it does not support upper and lower case characters and extended characters found in many documents and messages. This does not pose a problem for normal digital chats within <a href="Ham_radio" title="wikilink">ham</a> communications.<a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a></p>
<h2 id="references">References</h2>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://hflink.com/olivia/">Reference listing of common MFSK Olivia frequencies and formats</a></li>
<li><a href="http://web.archive.org/web/20070930155500/http://homepage.sunrise.ch/mysunrise/jalocha/mfsk_olivia-Apr2006.tgz">GPL C++ source for Linux and Cygwin (web archive)</a></li>
<li><a href="http://hflink.com/olivia/">Website containing technical information about the Olivia protocol</a></li>
</ul>

<p>"</p>

<p><a href="Category:Quantized_radio_modulation_modes" title="wikilink">Category:Quantized radio modulation modes</a> <a href="Category:Amateur_radio" title="wikilink">Category:Amateur radio</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a class="uri" href="http://hflink.com/olivia/">http://hflink.com/olivia/</a><a href="#fnref1">↩</a></li>
<li id="fn2"></li>
<li id="fn3"></li>
<li id="fn4"><a href="#fnref4">↩</a></li>
<li id="fn5"><a href="#fnref5">↩</a></li>
<li id="fn6"><a class="uri" href="http://www.oliviamode.com/Contestia.htm">http://www.oliviamode.com/Contestia.htm</a><a href="#fnref6">↩</a></li>
<li id="fn7"><a href="#fnref7">↩</a></li>
</ol>
</section>
</body>
</html>
