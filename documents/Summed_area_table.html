<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="936">Summed area table</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Summed area table</h1>
<hr/>

<p>A <strong>summed area table</strong> is a <a href="data_structure" title="wikilink">data structure</a> and <a class="uri" href="algorithm" title="wikilink">algorithm</a> for quickly and efficiently generating the sum of values in a rectangular subset of a grid. In the <a href="image_processing" title="wikilink">image processing</a> domain, it is also known as an <strong>integral image</strong>. It was first introduced to <a href="computer_graphics" title="wikilink">computer graphics</a> in 1984 by <a href="Franklin_C._Crow" title="wikilink">Frank Crow</a> for use with <a href="mipmap" title="wikilink">mipmaps</a>. In <a href="computer_vision" title="wikilink">computer vision</a> it was first prominently used within the <a href="Viola–Jones_object_detection_framework" title="wikilink">Viola–Jones object detection framework</a> in 2001. However, historically, this principle is very well known in the study of multi-dimensional probability distribution functions, namely in computing 2D (or ND) probabilities (area under the probability distribution) from the respective <a href="cumulative_distribution_function" title="wikilink">cumulative distribution functions</a>.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>
<h2 id="the-algorithm">The algorithm</h2>

<p>As the name suggests, the value at any point (<em>x</em>, <em>y</em>) in the summed area table is just the sum of all the pixels above and to the left of (<em>x</em>, <em>y</em>), inclusive:<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a><a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a></p>

<p>

<math display="block" id="Summed_area_table:0">
 <semantics>
  <mrow>
   <mrow>
    <mi>I</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <mi>y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <munder>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mtable>
      <mtr>
       <mtd columnalign="center">
        <mrow>
         <msup>
          <mi mathsize="70%" stretchy="false">x</mi>
          <mo mathsize="70%" stretchy="false">′</mo>
         </msup>
         <mo mathsize="70%" stretchy="false">≤</mo>
         <mi mathsize="70%" stretchy="false">x</mi>
        </mrow>
       </mtd>
      </mtr>
      <mtr>
       <mtd columnalign="center">
        <mrow>
         <msup>
          <mi mathsize="70%" stretchy="false">y</mi>
          <mo mathsize="70%" stretchy="false">′</mo>
         </msup>
         <mo mathsize="70%" stretchy="false">≤</mo>
         <mi mathsize="70%" stretchy="false">y</mi>
        </mrow>
       </mtd>
      </mtr>
     </mtable>
    </munder>
    <mrow>
     <mi>i</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <msup>
       <mi>x</mi>
       <mo>′</mo>
      </msup>
      <mo>,</mo>
      <msup>
       <mi>y</mi>
       <mo>′</mo>
      </msup>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>I</ci>
     <interval closure="open">
      <ci>x</ci>
      <ci>y</ci>
     </interval>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <matrix>
       <matrixrow>
        <apply>
         <leq></leq>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>x</ci>
          <ci>normal-′</ci>
         </apply>
         <ci>x</ci>
        </apply>
       </matrixrow>
       <matrixrow>
        <apply>
         <leq></leq>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>y</ci>
          <ci>normal-′</ci>
         </apply>
         <ci>y</ci>
        </apply>
       </matrixrow>
      </matrix>
     </apply>
     <apply>
      <times></times>
      <ci>i</ci>
      <interval closure="open">
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>x</ci>
        <ci>normal-′</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>y</ci>
        <ci>normal-′</ci>
       </apply>
      </interval>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   I(x,y)=\sum_{\begin{smallmatrix}x^{\prime}\leq x\\
y^{\prime}\leq y\end{smallmatrix}}i(x^{\prime},y^{\prime})
  </annotation>
 </semantics>
</math>

</p>

<p>Moreover, the summed area table can be computed efficiently in a single pass over the image, using the fact that the value in the summed area table at (<em>x</em>, <em>y</em>) is just:</p>

<p>

<math display="block" id="Summed_area_table:1">
 <semantics>
  <mrow>
   <mrow>
    <mi>I</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <mi>y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mrow>
      <mi>i</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>x</mi>
       <mo>,</mo>
       <mi>y</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>+</mo>
     <mrow>
      <mi>I</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mi>x</mi>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
       <mo>,</mo>
       <mi>y</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>+</mo>
     <mrow>
      <mi>I</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>x</mi>
       <mo>,</mo>
       <mrow>
        <mi>y</mi>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
    <mo>-</mo>
    <mrow>
     <mi>I</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>x</mi>
       <mo>-</mo>
       <mn>1</mn>
      </mrow>
      <mo>,</mo>
      <mrow>
       <mi>y</mi>
       <mo>-</mo>
       <mn>1</mn>
      </mrow>
      <mo rspace="4.2pt" stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>I</ci>
     <interval closure="open">
      <ci>x</ci>
      <ci>y</ci>
     </interval>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <plus></plus>
      <apply>
       <times></times>
       <ci>i</ci>
       <interval closure="open">
        <ci>x</ci>
        <ci>y</ci>
       </interval>
      </apply>
      <apply>
       <times></times>
       <ci>I</ci>
       <interval closure="open">
        <apply>
         <minus></minus>
         <ci>x</ci>
         <cn type="integer">1</cn>
        </apply>
        <ci>y</ci>
       </interval>
      </apply>
      <apply>
       <times></times>
       <ci>I</ci>
       <interval closure="open">
        <ci>x</ci>
        <apply>
         <minus></minus>
         <ci>y</ci>
         <cn type="integer">1</cn>
        </apply>
       </interval>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>I</ci>
      <interval closure="open">
       <apply>
        <minus></minus>
        <ci>x</ci>
        <cn type="integer">1</cn>
       </apply>
       <apply>
        <minus></minus>
        <ci>y</ci>
        <cn type="integer">1</cn>
       </apply>
      </interval>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   I(x,y)=i(x,y)+I(x-1,y)+I(x,y-1)-I(x-1,y-1)\,
  </annotation>
 </semantics>
</math>

 </p>

<p>Once the summed area table has been computed, the task of evaluating any rectangle can be accomplished in constant time with just four array references. Specifically, using the notation in the figure at right, having A=(x0, y0), B=(x1, y0), C=(x0, y1) and D=(x1, y1), the sum of 

<math display="inline" id="Summed_area_table:2">
 <semantics>
  <mrow>
   <mi>i</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo>,</mo>
    <mi>y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>i</ci>
    <interval closure="open">
     <ci>x</ci>
     <ci>y</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   i(x,y)
  </annotation>
 </semantics>
</math>

 over the rectangle spanned by A, B,C and D is just</p>

<p>

<math display="block" id="Summed_area_table:3">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <munder>
      <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
      <mtable>
       <mtr>
        <mtd columnalign="center">
         <mrow>
          <mrow>
           <mi mathsize="70%" stretchy="false">x</mi>
           <mn mathsize="70%" stretchy="false">0</mn>
          </mrow>
          <mo mathsize="70%" stretchy="false"><</mo>
          <mi mathsize="70%" stretchy="false">x</mi>
          <mo mathsize="70%" stretchy="false">≤</mo>
          <mrow>
           <mi mathsize="70%" stretchy="false">x</mi>
           <mn mathsize="70%" stretchy="false">1</mn>
          </mrow>
         </mrow>
        </mtd>
       </mtr>
       <mtr>
        <mtd columnalign="center">
         <mrow>
          <mrow>
           <mi mathsize="70%" stretchy="false">y</mi>
           <mn mathsize="70%" stretchy="false">0</mn>
          </mrow>
          <mo mathsize="70%" stretchy="false"><</mo>
          <mi mathsize="70%" stretchy="false">y</mi>
          <mo mathsize="70%" stretchy="false">≤</mo>
          <mrow>
           <mi mathsize="70%" stretchy="false">y</mi>
           <mn mathsize="70%" stretchy="false">1</mn>
          </mrow>
         </mrow>
        </mtd>
       </mtr>
      </mtable>
     </munder>
     <mrow>
      <mi>i</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>x</mi>
       <mo>,</mo>
       <mi>y</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mrow>
      <mrow>
       <mi>I</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>D</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo>+</mo>
      <mrow>
       <mi>I</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>A</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
     <mo>-</mo>
     <mrow>
      <mi>I</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>B</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>-</mo>
     <mrow>
      <mi>I</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>C</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <matrix>
       <matrixrow>
        <apply>
         <and></and>
         <apply>
          <lt></lt>
          <apply>
           <times></times>
           <ci>x</ci>
           <cn type="integer">0</cn>
          </apply>
          <ci>x</ci>
         </apply>
         <apply>
          <leq></leq>
          <share href="#.cmml">
          </share>
          <apply>
           <times></times>
           <ci>x</ci>
           <cn type="integer">1</cn>
          </apply>
         </apply>
        </apply>
       </matrixrow>
       <matrixrow>
        <apply>
         <and></and>
         <apply>
          <lt></lt>
          <apply>
           <times></times>
           <ci>y</ci>
           <cn type="integer">0</cn>
          </apply>
          <ci>y</ci>
         </apply>
         <apply>
          <leq></leq>
          <share href="#.cmml">
          </share>
          <apply>
           <times></times>
           <ci>y</ci>
           <cn type="integer">1</cn>
          </apply>
         </apply>
        </apply>
       </matrixrow>
      </matrix>
     </apply>
     <apply>
      <times></times>
      <ci>i</ci>
      <interval closure="open">
       <ci>x</ci>
       <ci>y</ci>
      </interval>
     </apply>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <plus></plus>
      <apply>
       <times></times>
       <ci>I</ci>
       <ci>D</ci>
      </apply>
      <apply>
       <times></times>
       <ci>I</ci>
       <ci>A</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>I</ci>
      <ci>B</ci>
     </apply>
     <apply>
      <times></times>
      <ci>I</ci>
      <ci>C</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sum_{\begin{smallmatrix}x0<x\leq x1\\
y0<y\leq y1\end{smallmatrix}}i(x,y)=I(D)+I(A)-I(B)-I(C).
  </annotation>
 </semantics>
</math>

</p>
<h2 id="extensions">Extensions</h2>
<ul>
<li>This method is naturally extended to continuous domains.<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></li>
</ul>
<ul>
<li>The method can be also extended to high-dimensional images.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> If the corners of the rectangle are 

<math display="inline" id="Summed_area_table:4">
 <semantics>
  <msup>
   <mi>x</mi>
   <mi>p</mi>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>x</ci>
    <ci>p</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x^{p}
  </annotation>
 </semantics>
</math>

 with 

<math display="inline" id="Summed_area_table:5">
 <semantics>
  <mi>p</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>p</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p
  </annotation>
 </semantics>
</math>

 in 

<math display="inline" id="Summed_area_table:6">
 <semantics>
  <msup>
   <mrow>
    <mo stretchy="false">{</mo>
    <mn>0</mn>
    <mo>,</mo>
    <mn>1</mn>
    <mo stretchy="false">}</mo>
   </mrow>
   <mi>d</mi>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <set>
     <cn type="integer">0</cn>
     <cn type="integer">1</cn>
    </set>
    <ci>d</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{0,1\}^{d}
  </annotation>
 </semantics>
</math>

, then the sum of image values contained in the rectangle are computed with the formula</li>
</ul>

<p>

<math display="block" id="Summed_area_table:7">
 <semantics>
  <mrow>
   <munder>
    <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
    <mrow>
     <mi>p</mi>
     <mo>∈</mo>
     <msup>
      <mrow>
       <mo stretchy="false">{</mo>
       <mn>0</mn>
       <mo>,</mo>
       <mn>1</mn>
       <mo stretchy="false">}</mo>
      </mrow>
      <mi>d</mi>
     </msup>
    </mrow>
   </munder>
   <mrow>
    <msup>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mo>-</mo>
       <mn>1</mn>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mrow>
      <mi>d</mi>
      <mo>-</mo>
      <msub>
       <mrow>
        <mo>∥</mo>
        <mi>p</mi>
        <mo>∥</mo>
       </mrow>
       <mn>1</mn>
      </msub>
     </mrow>
    </msup>
    <mi>I</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <msup>
      <mi>x</mi>
      <mi>p</mi>
     </msup>
     <mo rspace="4.2pt" stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <sum></sum>
     <apply>
      <in></in>
      <ci>p</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <set>
        <cn type="integer">0</cn>
        <cn type="integer">1</cn>
       </set>
       <ci>d</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <minus></minus>
       <ci>d</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <apply>
         <csymbol cd="latexml">norm</csymbol>
         <ci>p</ci>
        </apply>
        <cn type="integer">1</cn>
       </apply>
      </apply>
     </apply>
     <ci>I</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>x</ci>
      <ci>p</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sum_{p\in\{0,1\}^{d}}(-1)^{d-\|p\|_{1}}I(x^{p})\,
  </annotation>
 </semantics>
</math>

</p>

<p>where 

<math display="inline" id="Summed_area_table:8">
 <semantics>
  <mrow>
   <mi>I</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>I</ci>
    <ci>x</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   I(x)
  </annotation>
 </semantics>
</math>

 is the integral image at 

<math display="inline" id="Summed_area_table:9">
 <semantics>
  <mi>x</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>x</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Summed_area_table:10">
 <semantics>
  <mi>d</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>d</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   d
  </annotation>
 </semantics>
</math>

 the image dimension. The notation 

<math display="inline" id="Summed_area_table:11">
 <semantics>
  <msup>
   <mi>x</mi>
   <mi>p</mi>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>x</ci>
    <ci>p</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x^{p}
  </annotation>
 </semantics>
</math>

 correspond in the example to 

<math display="inline" id="Summed_area_table:12">
 <semantics>
  <mrow>
   <mi>d</mi>
   <mo>=</mo>
   <mn>2</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>d</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   d=2
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Summed_area_table:13">
 <semantics>
  <mrow>
   <mi>A</mi>
   <mo>=</mo>
   <msup>
    <mi>x</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>0</mn>
     <mo>,</mo>
     <mn>0</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>A</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>x</ci>
     <interval closure="open">
      <cn type="integer">0</cn>
      <cn type="integer">0</cn>
     </interval>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A=x^{(0,0)}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Summed_area_table:14">
 <semantics>
  <mrow>
   <mi>B</mi>
   <mo>=</mo>
   <msup>
    <mi>x</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>1</mn>
     <mo>,</mo>
     <mn>0</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>B</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>x</ci>
     <interval closure="open">
      <cn type="integer">1</cn>
      <cn type="integer">0</cn>
     </interval>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   B=x^{(1,0)}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Summed_area_table:15">
 <semantics>
  <mrow>
   <mi>C</mi>
   <mo>=</mo>
   <msup>
    <mi>x</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>1</mn>
     <mo>,</mo>
     <mn>1</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>C</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>x</ci>
     <interval closure="open">
      <cn type="integer">1</cn>
      <cn type="integer">1</cn>
     </interval>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   C=x^{(1,1)}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Summed_area_table:16">
 <semantics>
  <mrow>
   <mi>D</mi>
   <mo>=</mo>
   <msup>
    <mi>x</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>0</mn>
     <mo>,</mo>
     <mn>1</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>D</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>x</ci>
     <interval closure="open">
      <cn type="integer">0</cn>
      <cn type="integer">1</cn>
     </interval>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D=x^{(0,1)}
  </annotation>
 </semantics>
</math>

. In <a class="uri" href="neuroimaging" title="wikilink">neuroimaging</a>, for example, the images have dimension 

<math display="inline" id="Summed_area_table:17">
 <semantics>
  <mrow>
   <mi>d</mi>
   <mo>=</mo>
   <mn>3</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>d</ci>
    <cn type="integer">3</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   d=3
  </annotation>
 </semantics>
</math>

 or 

<math display="inline" id="Summed_area_table:18">
 <semantics>
  <mrow>
   <mi>d</mi>
   <mo>=</mo>
   <mn>4</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>d</ci>
    <cn type="integer">4</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   d=4
  </annotation>
 </semantics>
</math>

, when using <a href="voxel" title="wikilink">voxels</a> or voxels with a time-stamp.</p>
<ul>
<li>This method has been extended to high-order integral image as in the work of Phan et al. <a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a> who provided two, three, or four integral images for quickly and efficiently calculating the standard deviation (variance), skewness, and kurtosis of local block in the image. This is detailed below:</li>
</ul>

<p>To compute <a class="uri" href="variance" title="wikilink">variance</a> or <a href="standard_deviation" title="wikilink">standard deviation</a> of a block, we need two integral images:</p>

<p>

<math display="block" id="Summed_area_table:19">
 <semantics>
  <mrow>
   <mrow>
    <mi>I</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <mi>y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <munder>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mtable>
      <mtr>
       <mtd columnalign="center">
        <mrow>
         <msup>
          <mi mathsize="70%" stretchy="false">x</mi>
          <mo mathsize="70%" stretchy="false">′</mo>
         </msup>
         <mo mathsize="70%" stretchy="false">≤</mo>
         <mi mathsize="70%" stretchy="false">x</mi>
        </mrow>
       </mtd>
      </mtr>
      <mtr>
       <mtd columnalign="center">
        <mrow>
         <msup>
          <mi mathsize="70%" stretchy="false">y</mi>
          <mo mathsize="70%" stretchy="false">′</mo>
         </msup>
         <mo mathsize="70%" stretchy="false">≤</mo>
         <mi mathsize="70%" stretchy="false">y</mi>
        </mrow>
       </mtd>
      </mtr>
     </mtable>
    </munder>
    <mrow>
     <mi>i</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <msup>
       <mi>x</mi>
       <mo>′</mo>
      </msup>
      <mo>,</mo>
      <msup>
       <mi>y</mi>
       <mo>′</mo>
      </msup>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>I</ci>
     <interval closure="open">
      <ci>x</ci>
      <ci>y</ci>
     </interval>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <matrix>
       <matrixrow>
        <apply>
         <leq></leq>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>x</ci>
          <ci>normal-′</ci>
         </apply>
         <ci>x</ci>
        </apply>
       </matrixrow>
       <matrixrow>
        <apply>
         <leq></leq>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>y</ci>
          <ci>normal-′</ci>
         </apply>
         <ci>y</ci>
        </apply>
       </matrixrow>
      </matrix>
     </apply>
     <apply>
      <times></times>
      <ci>i</ci>
      <interval closure="open">
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>x</ci>
        <ci>normal-′</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>y</ci>
        <ci>normal-′</ci>
       </apply>
      </interval>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   I(x,y)=\sum_{\begin{smallmatrix}x^{\prime}\leq x\\
y^{\prime}\leq y\end{smallmatrix}}i(x^{\prime},y^{\prime})
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Summed_area_table:20">
 <semantics>
  <mrow>
   <mrow>
    <msup>
     <mi>I</mi>
     <mn>2</mn>
    </msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <mi>y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <munder>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mtable>
      <mtr>
       <mtd columnalign="center">
        <mrow>
         <msup>
          <mi mathsize="70%" stretchy="false">x</mi>
          <mo mathsize="70%" stretchy="false">′</mo>
         </msup>
         <mo mathsize="70%" stretchy="false">≤</mo>
         <mi mathsize="70%" stretchy="false">x</mi>
        </mrow>
       </mtd>
      </mtr>
      <mtr>
       <mtd columnalign="center">
        <mrow>
         <msup>
          <mi mathsize="70%" stretchy="false">y</mi>
          <mo mathsize="70%" stretchy="false">′</mo>
         </msup>
         <mo mathsize="70%" stretchy="false">≤</mo>
         <mi mathsize="70%" stretchy="false">y</mi>
        </mrow>
       </mtd>
      </mtr>
     </mtable>
    </munder>
    <mrow>
     <msup>
      <mi>i</mi>
      <mn>2</mn>
     </msup>
     <mrow>
      <mo stretchy="false">(</mo>
      <msup>
       <mi>x</mi>
       <mo>′</mo>
      </msup>
      <mo>,</mo>
      <msup>
       <mi>y</mi>
       <mo>′</mo>
      </msup>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>I</ci>
      <cn type="integer">2</cn>
     </apply>
     <interval closure="open">
      <ci>x</ci>
      <ci>y</ci>
     </interval>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <matrix>
       <matrixrow>
        <apply>
         <leq></leq>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>x</ci>
          <ci>normal-′</ci>
         </apply>
         <ci>x</ci>
        </apply>
       </matrixrow>
       <matrixrow>
        <apply>
         <leq></leq>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>y</ci>
          <ci>normal-′</ci>
         </apply>
         <ci>y</ci>
        </apply>
       </matrixrow>
      </matrix>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>i</ci>
       <cn type="integer">2</cn>
      </apply>
      <interval closure="open">
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>x</ci>
        <ci>normal-′</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>y</ci>
        <ci>normal-′</ci>
       </apply>
      </interval>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   I^{2}(x,y)=\sum_{\begin{smallmatrix}x^{\prime}\leq x\\
y^{\prime}\leq y\end{smallmatrix}}i^{2}(x^{\prime},y^{\prime})
  </annotation>
 </semantics>
</math>

 The variance is given by:</p>

<p>

<math display="block" id="Summed_area_table:21">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo>Var</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>X</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mfrac>
      <mn>1</mn>
      <mi>n</mi>
     </mfrac>
     <mrow>
      <munderover>
       <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
       <mrow>
        <mi>i</mi>
        <mo>=</mo>
        <mn>1</mn>
       </mrow>
       <mi>n</mi>
      </munderover>
      <msup>
       <mrow>
        <mo stretchy="false">(</mo>
        <mrow>
         <msub>
          <mi>x</mi>
          <mi>i</mi>
         </msub>
         <mo>-</mo>
         <mi>μ</mi>
        </mrow>
        <mo stretchy="false">)</mo>
       </mrow>
       <mn>2</mn>
      </msup>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>Var</ci>
     <ci>X</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <divide></divide>
      <cn type="integer">1</cn>
      <ci>n</ci>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>i</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>n</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <minus></minus>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <ci>i</ci>
        </apply>
        <ci>μ</ci>
       </apply>
       <cn type="integer">2</cn>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{Var}(X)=\frac{1}{n}\sum_{i=1}^{n}(x_{i}-\mu)^{2}.
  </annotation>
 </semantics>
</math>

 Let 

<math display="inline" id="Summed_area_table:22">
 <semantics>
  <msub>
   <mi>S</mi>
   <mn>1</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>S</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{1}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Summed_area_table:23">
 <semantics>
  <msub>
   <mi>S</mi>
   <mn>2</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>S</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{2}
  </annotation>
 </semantics>
</math>

 denote the summations of block 

<math display="inline" id="Summed_area_table:24">
 <semantics>
  <mrow>
   <mi>A</mi>
   <mi>B</mi>
   <mi>C</mi>
   <mi>D</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>A</ci>
    <ci>B</ci>
    <ci>C</ci>
    <ci>D</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   ABCD
  </annotation>
 </semantics>
</math>

 of 

<math display="inline" id="Summed_area_table:25">
 <semantics>
  <mi>I</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>I</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   I
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Summed_area_table:26">
 <semantics>
  <msup>
   <mi>I</mi>
   <mn>2</mn>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>I</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   I^{2}
  </annotation>
 </semantics>
</math>

, respectively. 

<math display="inline" id="Summed_area_table:27">
 <semantics>
  <msub>
   <mi>S</mi>
   <mn>1</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>S</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{1}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Summed_area_table:28">
 <semantics>
  <msub>
   <mi>S</mi>
   <mn>2</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>S</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{2}
  </annotation>
 </semantics>
</math>

 are computed quickly by integral image. Now, we manipulate the variance equation as:</p>

<p>

<math display="block" id="Summed_area_table:29">
 <semantics>
  <mrow>
   <mrow>
    <mo>Var</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>X</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mfrac>
     <mn>1</mn>
     <mi>n</mi>
    </mfrac>
    <mrow>
     <munderover>
      <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
      <mrow>
       <mi>i</mi>
       <mo>=</mo>
       <mn>1</mn>
      </mrow>
      <mi>n</mi>
     </munderover>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mrow>
        <msubsup>
         <mi>x</mi>
         <mi>i</mi>
         <mn>2</mn>
        </msubsup>
        <mo>-</mo>
        <mrow>
         <mn>2</mn>
         <mo>⋅</mo>
         <mi>μ</mi>
         <mo>⋅</mo>
         <msub>
          <mi>x</mi>
          <mi>i</mi>
         </msub>
        </mrow>
       </mrow>
       <mo>+</mo>
       <msup>
        <mi>μ</mi>
        <mn>2</mn>
       </msup>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mfrac>
     <mn>1</mn>
     <mi>n</mi>
    </mfrac>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mrow>
       <mrow>
        <munderover>
         <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
         <mrow>
          <mi>i</mi>
          <mo>=</mo>
          <mn>1</mn>
         </mrow>
         <mi>n</mi>
        </munderover>
        <msup>
         <mrow>
          <mo stretchy="false">(</mo>
          <msub>
           <mi>x</mi>
           <mi>i</mi>
          </msub>
          <mo stretchy="false">)</mo>
         </mrow>
         <mn>2</mn>
        </msup>
       </mrow>
       <mo>-</mo>
       <mrow>
        <mn>2</mn>
        <mo>⋅</mo>
        <mrow>
         <munderover>
          <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
          <mrow>
           <mi>i</mi>
           <mo>=</mo>
           <mn>1</mn>
          </mrow>
          <mi>n</mi>
         </munderover>
         <mrow>
          <mo stretchy="false">(</mo>
          <mrow>
           <mi>μ</mi>
           <mo>⋅</mo>
           <msub>
            <mi>x</mi>
            <mi>i</mi>
           </msub>
          </mrow>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
       </mrow>
      </mrow>
      <mo>+</mo>
      <mrow>
       <munderover>
        <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
        <mrow>
         <mi>i</mi>
         <mo>=</mo>
         <mn>1</mn>
        </mrow>
        <mi>n</mi>
       </munderover>
       <mrow>
        <mo stretchy="false">(</mo>
        <msup>
         <mi>μ</mi>
         <mn>2</mn>
        </msup>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mfrac>
     <mn>1</mn>
     <mi>n</mi>
    </mfrac>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mrow>
       <mrow>
        <munderover>
         <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
         <mrow>
          <mi>i</mi>
          <mo>=</mo>
          <mn>1</mn>
         </mrow>
         <mi>n</mi>
        </munderover>
        <msup>
         <mrow>
          <mo stretchy="false">(</mo>
          <msub>
           <mi>x</mi>
           <mi>i</mi>
          </msub>
          <mo stretchy="false">)</mo>
         </mrow>
         <mn>2</mn>
        </msup>
       </mrow>
       <mo>-</mo>
       <mrow>
        <mn>2</mn>
        <mo>⋅</mo>
        <mrow>
         <munderover>
          <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
          <mrow>
           <mi>i</mi>
           <mo>=</mo>
           <mn>1</mn>
          </mrow>
          <mi>n</mi>
         </munderover>
         <mrow>
          <mo stretchy="false">(</mo>
          <mrow>
           <mi>μ</mi>
           <mo>⋅</mo>
           <msub>
            <mi>x</mi>
            <mi>i</mi>
           </msub>
          </mrow>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
       </mrow>
      </mrow>
      <mo>+</mo>
      <mrow>
       <mi>n</mi>
       <mo>⋅</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <msup>
         <mi>μ</mi>
         <mn>2</mn>
        </msup>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <ci>Var</ci>
      <ci>X</ci>
     </apply>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <ci>n</ci>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <sum></sum>
         <apply>
          <eq></eq>
          <ci>i</ci>
          <cn type="integer">1</cn>
         </apply>
        </apply>
        <ci>n</ci>
       </apply>
       <apply>
        <plus></plus>
        <apply>
         <minus></minus>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>x</ci>
           <ci>i</ci>
          </apply>
          <cn type="integer">2</cn>
         </apply>
         <apply>
          <ci>normal-⋅</ci>
          <cn type="integer">2</cn>
          <ci>μ</ci>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>x</ci>
           <ci>i</ci>
          </apply>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>μ</ci>
         <cn type="integer">2</cn>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <ci>n</ci>
      </apply>
      <apply>
       <plus></plus>
       <apply>
        <minus></minus>
        <apply>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <sum></sum>
           <apply>
            <eq></eq>
            <ci>i</ci>
            <cn type="integer">1</cn>
           </apply>
          </apply>
          <ci>n</ci>
         </apply>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>x</ci>
           <ci>i</ci>
          </apply>
          <cn type="integer">2</cn>
         </apply>
        </apply>
        <apply>
         <ci>normal-⋅</ci>
         <cn type="integer">2</cn>
         <apply>
          <apply>
           <csymbol cd="ambiguous">superscript</csymbol>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <sum></sum>
            <apply>
             <eq></eq>
             <ci>i</ci>
             <cn type="integer">1</cn>
            </apply>
           </apply>
           <ci>n</ci>
          </apply>
          <apply>
           <ci>normal-⋅</ci>
           <ci>μ</ci>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>x</ci>
            <ci>i</ci>
           </apply>
          </apply>
         </apply>
        </apply>
       </apply>
       <apply>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <sum></sum>
          <apply>
           <eq></eq>
           <ci>i</ci>
           <cn type="integer">1</cn>
          </apply>
         </apply>
         <ci>n</ci>
        </apply>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>μ</ci>
         <cn type="integer">2</cn>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <ci>n</ci>
      </apply>
      <apply>
       <plus></plus>
       <apply>
        <minus></minus>
        <apply>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <sum></sum>
           <apply>
            <eq></eq>
            <ci>i</ci>
            <cn type="integer">1</cn>
           </apply>
          </apply>
          <ci>n</ci>
         </apply>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>x</ci>
           <ci>i</ci>
          </apply>
          <cn type="integer">2</cn>
         </apply>
        </apply>
        <apply>
         <ci>normal-⋅</ci>
         <cn type="integer">2</cn>
         <apply>
          <apply>
           <csymbol cd="ambiguous">superscript</csymbol>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <sum></sum>
            <apply>
             <eq></eq>
             <ci>i</ci>
             <cn type="integer">1</cn>
            </apply>
           </apply>
           <ci>n</ci>
          </apply>
          <apply>
           <ci>normal-⋅</ci>
           <ci>μ</ci>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>x</ci>
            <ci>i</ci>
           </apply>
          </apply>
         </apply>
        </apply>
       </apply>
       <apply>
        <ci>normal-⋅</ci>
        <ci>n</ci>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>μ</ci>
         <cn type="integer">2</cn>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{Var}(X)=\frac{1}{n}\sum_{i=1}^{n}(x_{i}^{2}-2\cdot\mu\cdot x_{i}%
+\mu^{2})=\frac{1}{n}(\sum_{i=1}^{n}(x_{i})^{2}-2\cdot\sum_{i=1}^{n}(\mu\cdot x%
_{i})+\sum_{i=1}^{n}(\mu^{2}))=\frac{1}{n}(\sum_{i=1}^{n}(x_{i})^{2}-2\cdot%
\sum_{i=1}^{n}(\mu\cdot x_{i})+n\cdot(\mu^{2}))
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Summed_area_table:30">
 <semantics>
  <mrow>
   <mi></mi>
   <mo>=</mo>
   <mrow>
    <mfrac>
     <mn>1</mn>
     <mi>n</mi>
    </mfrac>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mrow>
       <mrow>
        <munderover>
         <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
         <mrow>
          <mi>i</mi>
          <mo>=</mo>
          <mn>1</mn>
         </mrow>
         <mi>n</mi>
        </munderover>
        <msup>
         <mrow>
          <mo stretchy="false">(</mo>
          <msub>
           <mi>x</mi>
           <mi>i</mi>
          </msub>
          <mo stretchy="false">)</mo>
         </mrow>
         <mn>2</mn>
        </msup>
       </mrow>
       <mo>-</mo>
       <mrow>
        <mn>2</mn>
        <mo>⋅</mo>
        <mi>μ</mi>
        <mo>⋅</mo>
        <mrow>
         <munderover>
          <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
          <mrow>
           <mi>i</mi>
           <mo>=</mo>
           <mn>1</mn>
          </mrow>
          <mi>n</mi>
         </munderover>
         <mrow>
          <mo stretchy="false">(</mo>
          <msub>
           <mi>x</mi>
           <mi>i</mi>
          </msub>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
       </mrow>
      </mrow>
      <mo>+</mo>
      <mrow>
       <mi>n</mi>
       <mo>⋅</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <msup>
         <mi>μ</mi>
         <mn>2</mn>
        </msup>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mfrac>
     <mn>1</mn>
     <mi>n</mi>
    </mfrac>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mrow>
       <msub>
        <mi>S</mi>
        <mn>2</mn>
       </msub>
       <mo>-</mo>
       <mrow>
        <mrow>
         <mrow>
          <mn>2</mn>
          <mo>⋅</mo>
          <msub>
           <mi>S</mi>
           <mn>1</mn>
          </msub>
         </mrow>
         <mo>/</mo>
         <mi>n</mi>
        </mrow>
        <mo>⋅</mo>
        <msub>
         <mi>S</mi>
         <mn>1</mn>
        </msub>
       </mrow>
      </mrow>
      <mo>+</mo>
      <mrow>
       <mi>n</mi>
       <mo>⋅</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <msup>
         <mrow>
          <mo stretchy="false">(</mo>
          <mrow>
           <msub>
            <mi>S</mi>
            <mn>1</mn>
           </msub>
           <mo>/</mo>
           <mi>n</mi>
          </mrow>
          <mo stretchy="false">)</mo>
         </mrow>
         <mn>2</mn>
        </msup>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mfrac>
     <mn>1</mn>
     <mi>n</mi>
    </mfrac>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <msub>
       <mi>S</mi>
       <mn>2</mn>
      </msub>
      <mo>-</mo>
      <mrow>
       <msup>
        <mrow>
         <mo stretchy="false">(</mo>
         <msub>
          <mi>S</mi>
          <mn>1</mn>
         </msub>
         <mo stretchy="false">)</mo>
        </mrow>
        <mn>2</mn>
       </msup>
       <mo>/</mo>
       <mi>n</mi>
      </mrow>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <ci>n</ci>
      </apply>
      <apply>
       <plus></plus>
       <apply>
        <minus></minus>
        <apply>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <sum></sum>
           <apply>
            <eq></eq>
            <ci>i</ci>
            <cn type="integer">1</cn>
           </apply>
          </apply>
          <ci>n</ci>
         </apply>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>x</ci>
           <ci>i</ci>
          </apply>
          <cn type="integer">2</cn>
         </apply>
        </apply>
        <apply>
         <ci>normal-⋅</ci>
         <cn type="integer">2</cn>
         <ci>μ</ci>
         <apply>
          <apply>
           <csymbol cd="ambiguous">superscript</csymbol>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <sum></sum>
            <apply>
             <eq></eq>
             <ci>i</ci>
             <cn type="integer">1</cn>
            </apply>
           </apply>
           <ci>n</ci>
          </apply>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>x</ci>
           <ci>i</ci>
          </apply>
         </apply>
        </apply>
       </apply>
       <apply>
        <ci>normal-⋅</ci>
        <ci>n</ci>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>μ</ci>
         <cn type="integer">2</cn>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <ci>n</ci>
      </apply>
      <apply>
       <plus></plus>
       <apply>
        <minus></minus>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>S</ci>
         <cn type="integer">2</cn>
        </apply>
        <apply>
         <ci>normal-⋅</ci>
         <apply>
          <divide></divide>
          <apply>
           <ci>normal-⋅</ci>
           <cn type="integer">2</cn>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>S</ci>
            <cn type="integer">1</cn>
           </apply>
          </apply>
          <ci>n</ci>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>S</ci>
          <cn type="integer">1</cn>
         </apply>
        </apply>
       </apply>
       <apply>
        <ci>normal-⋅</ci>
        <ci>n</ci>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <divide></divide>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>S</ci>
           <cn type="integer">1</cn>
          </apply>
          <ci>n</ci>
         </apply>
         <cn type="integer">2</cn>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <ci>n</ci>
      </apply>
      <apply>
       <minus></minus>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>S</ci>
        <cn type="integer">2</cn>
       </apply>
       <apply>
        <divide></divide>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>S</ci>
          <cn type="integer">1</cn>
         </apply>
         <cn type="integer">2</cn>
        </apply>
        <ci>n</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   =\frac{1}{n}(\sum_{i=1}^{n}(x_{i})^{2}-2\cdot\mu\cdot\sum_{i=1}^{n}(x_{i})+n%
\cdot(\mu^{2}))=\frac{1}{n}(S_{2}-2\cdot S_{1}/n\cdot S_{1}+n\cdot((S_{1}/n)^{%
2}))=\frac{1}{n}(S_{2}-(S_{1})^{2}/n)
  </annotation>
 </semantics>
</math>

 Where 

<math display="inline" id="Summed_area_table:31">
 <semantics>
  <mrow>
   <mi>μ</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>S</mi>
     <mn>1</mn>
    </msub>
    <mo>/</mo>
    <mi>n</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>μ</ci>
    <apply>
     <divide></divide>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>S</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mu=S_{1}/n
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Summed_area_table:32">
 <semantics>
  <mrow>
   <msub>
    <mi>S</mi>
    <mn>2</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <msubsup>
     <mo largeop="true" symmetric="true">∑</mo>
     <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mn>1</mn>
     </mrow>
     <mi>n</mi>
    </msubsup>
    <mrow>
     <mo stretchy="false">(</mo>
     <msubsup>
      <mi>x</mi>
      <mi>i</mi>
      <mn>2</mn>
     </msubsup>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>S</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <eq></eq>
        <ci>i</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <ci>n</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <ci>i</ci>
      </apply>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{2}=\sum_{i=1}^{n}(x_{i}^{2})
  </annotation>
 </semantics>
</math>

.</p>

<p>Similar to the estimation of the mean (

<math display="inline" id="Summed_area_table:33">
 <semantics>
  <mi>μ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>μ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mu
  </annotation>
 </semantics>
</math>

) and variance (

<math display="inline" id="Summed_area_table:34">
 <semantics>
  <mrow>
   <mi>V</mi>
   <mi>a</mi>
   <mi>r</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>V</ci>
    <ci>a</ci>
    <ci>r</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Var
  </annotation>
 </semantics>
</math>

), which requires the integral images of the first and second power of the image respectively (i.e. 

<math display="inline" id="Summed_area_table:35">
 <semantics>
  <mrow>
   <mi>I</mi>
   <mo>,</mo>
   <msup>
    <mi>I</mi>
    <mn>2</mn>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <ci>I</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>I</ci>
     <cn type="integer">2</cn>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   I,I^{2}
  </annotation>
 </semantics>
</math>

); manipulations similar to the ones mentioned above can be made to the third and fourth powers of the images (i.e 

<math display="inline" id="Summed_area_table:36">
 <semantics>
  <mrow>
   <mrow>
    <msup>
     <mi>I</mi>
     <mn>3</mn>
    </msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <mi>y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <msup>
     <mi>I</mi>
     <mn>4</mn>
    </msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <mi>y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>I</ci>
      <cn type="integer">3</cn>
     </apply>
     <interval closure="open">
      <ci>x</ci>
      <ci>y</ci>
     </interval>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>I</ci>
      <cn type="integer">4</cn>
     </apply>
     <interval closure="open">
      <ci>x</ci>
      <ci>y</ci>
     </interval>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   I^{3}(x,y),I^{4}(x,y)
  </annotation>
 </semantics>
</math>

.) for obtaining the skewness and kurtosis.<a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a> But one important implementation detail that must be kept in mind for the above methods, as mentioned by F Shafait et al. <a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a> is that of integer overflow occurring for the higher order integral images in case 32-bit integers are used.</p>
<h2 id="references">References</h2>
<references>
</references>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://www.codeproject.com/Articles/441226/Haar-feature-Object-Detection-in-Csharp">Summed table implementation in object detection</a></li>
</ul>
<dl>
<dt>Lecture videos:</dt>
</dl>
<ul>
<li><a href="http://www.youtube.com/watch?v=mM5JY-Q6hiM">An introduction to the theory behind the integral image algorithm</a></li>
<li><a href="http://www.youtube.com/watch?v=-SI117NdjJ8">A demonstration to a continuous version of the integral image algorithm, from the Wolfram Demonstrations Project</a></li>
</ul>

<p>"</p>

<p><a href="Category:Digital_geometry" title="wikilink">Category:Digital geometry</a> <a href="Category:Computer_graphics_data_structures" title="wikilink">Category:Computer graphics data structures</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2"><a href="#fnref2">↩</a></li>
<li id="fn3"><a href="#fnref3">↩</a></li>
<li id="fn4"></li>
<li id="fn5"><a href="#fnref5">↩</a></li>
<li id="fn6"><a href="#fnref6">↩</a></li>
<li id="fn7"></li>
<li id="fn8"><a href="#fnref8">↩</a></li>
</ol>
</section>
</body>
</html>
