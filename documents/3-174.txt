   Pentagonal number theorem      Pentagonal number theorem   In mathematics , the pentagonal number theorem , originally due to Euler , relates the product and series representations of the Euler function . It states that         ∏   n  =  1   ∞    (   1  -   x  n    )    =    ∑   k  =   -  ∞    ∞      (   -  1   )   k    x    k  2    (    3  k   -  1   )       =   1  +    ∑   k  =  1   ∞      (   -  1   )   k    (    x    k   (    3  k   +  1   )    /  2    +   x    k   (    3  k   -  1   )    /  2     )       .          superscript   subscript  product    n  1        1   superscript  x  n       superscript   subscript     k             superscript    1   k    superscript  x      k  2       3  k   1              1    superscript   subscript     k  1         superscript    1   k      superscript  x      k      3  k   1    2     superscript  x      k      3  k   1    2           \prod_{n=1}^{\infty}\left(1-x^{n}\right)=\sum_{k=-\infty}^{\infty}\left(-1%
 \right)^{k}x^{\frac{k}{2}\left(3k-1\right)}=1+\sum_{k=1}^{\infty}(-1)^{k}\left%
 (x^{k(3k+1)/2}+x^{k(3k-1)/2}\right).     In other words,         (   1  -  x   )    (   1  -   x  2    )    (   1  -   x  3    )   ⋯   =       1  -  x  -   x  2    +   x  5   +   x  7    -   x  12   -   x  15    +   x  22   +   x  26    -  ⋯    .          1  x     1   superscript  x  2      1   superscript  x  3    normal-⋯             1  x   superscript  x  2     superscript  x  5    superscript  x  7     superscript  x  12    superscript  x  15     superscript  x  22    superscript  x  26    normal-⋯     (1-x)(1-x^{2})(1-x^{3})\cdots=1-x-x^{2}+x^{5}+x^{7}-x^{12}-x^{15}+x^{22}+x^{26%
 }-\cdots.     The exponents 1, 2, 5, 7, 12, ... on the right hand side are given by the formula  k (3 k -1)/2}} for k = 1, −1, 2, −2, 3, ... and are called (generalized) pentagonal numbers . This holds as an identity of convergent power series for     |  x  |   <  1        x   1    |x|<1   , and also as an identity of formal power series .  A striking feature of this formula is the amount of cancellation in the expansion of the product.  Relation with partitions  The identity implies a marvelous recurrence for calculating    p   (  n  )       p  n    p(n)   , the number of partitions of n :       p   (  n  )    =      p   (   n  -  1   )    +   p   (   n  -  2   )     -   p   (   n  -  5   )    -   p   (   n  -  7   )     +  ⋯         p  n           p    n  1      p    n  2       p    n  5      p    n  7     normal-⋯     p(n)=p(n-1)+p(n-2)-p(n-5)-p(n-7)+\cdots     or more formally,       p   (  n  )    =    ∑  k      (   -  1   )    k  -  1    p   (   n  -   g  k    )           p  n     subscript   k      superscript    1     k  1    p    n   subscript  g  k        p(n)=\sum_{k}(-1)^{k-1}p(n-g_{k})     where the summation is over all nonzero integers k (positive and negative) and    g  k     subscript  g  k    g_{k}   is the k th pentagonal number.  Bijective proof  The theorem can be given a combinatorial interpretation in terms of partitions . In particular, the left hand side is a generating function for the number of partitions of n into an even number of distinct parts minus the number of partitions of n into an odd number of distinct parts. Each partition of n into an even number of distinct parts contributes +1 to the coefficient of x n ; each partition into an odd number of distinct parts contributes −1. (The article on unrestricted partition functions discusses this type of generating function.)  For example, the coefficient of x 5 is +1 because there are two ways to split 5 into an even number of distinct parts (4+1 and 3+2), but only one way to do so for an odd number of distinct parts (5 itself). However, the coefficient of x 12 is −1 because there are seven ways to partition 12 into an even number of distinct parts, but there are eight ways to partition 12 into an odd number of distinct parts.  This interpretation leads to a proof of the identity via involution (i.e. a bijection which is its own inverse). Consider the Ferrers diagram of any partition of n into distinct parts. For example, the diagram below shows n = 20 and the partition 20 = 7 + 6 + 4 + 3.        Let m be the number of elements in the smallest row of the diagram ( m = 3 in the above example). Let s be the number of elements in the rightmost 45 degree line of the diagram ( s = 2 dots in red above, since 7−1 = 6, but 6−1 > 4). If m > s , take the rightmost 45-degree line and move it to form a new row, as in the diagram below.         If m ≤ s (as in our newly formed diagram where m = 2, s = 5) we may reverse the process by moving the bottom row to form a new 45 degree line (adding 1 element to each of the first m rows), taking us back to the first diagram.  A bit of thought shows that this process always changes the parity of the number of rows, and applying the process twice brings us back to the original diagram. This enables us to pair off Ferrers diagrams contributing 1 and −1 to the x n term of the series, resulting in a net coefficient of 0. This holds for every term except when the process cannot be performed on every Ferrers diagram with n dots. There are two such cases:  1) m = s and the rightmost diagonal and bottom row meet. For example,       Attempting to perform the operation would lead us to:       which fails to change the parity of the number of rows, and is not reversible in the sense that performing the operation again does not take us back to the original diagram. If there are m elements in the last row of the original diagram, then      n  =   m  +   (   m  +  1   )   +   (   m  +  2   )   +  ⋯  +   (    2  m   -  1   )    =    m   (    3  m   -  1   )    2   =    k   (    3  k   -  1   )    2         n    m    m  1     m  2   normal-⋯      2  m   1             m      3  m   1    2            k      3  k   1    2      n=m+(m+1)+(m+2)+\cdots+(2m-1)=\frac{m(3m-1)}{2}=\frac{k(3k-1)}{2}     where the new index k is taken to equal m . Note that the sign associated with this partition is (−1) s , which by construction equals (−1) m and (−1) k .  2) m = s +1 and the rightmost diagonal and bottom row meet. For example,       Our operation requires us to move the right diagonal to the bottom row, but that would lead to two rows of three elements, forbidden since we're counting partitions into distinct parts. This is the previous case but with one fewer row, so       n  =   m  +   (   m  +  1   )   +   (   m  +  2   )   +  ⋯  +   (    2  m   -  2   )    =     (   m  -  1   )    (    3  m   -  2   )    2   =    k   (    3  k   -  1   )    2    ,        n    m    m  1     m  2   normal-⋯      2  m   2               m  1       3  m   2    2            k      3  k   1    2      n=m+(m+1)+(m+2)+\cdots+(2m-2)=\frac{(m-1)(3m-2)}{2}=\frac{k(3k-1)}{2},     where we take k = 1− m (a negative integer). Here the associated sign is (−1) s with s = m −1 = − k , therefore the sign is again (−1) k .  In summary, it has been shown that partitions into an even number of distinct parts and an odd number of distinct parts exactly cancel each other, except if n is a generalized pentagonal number     g  k   =    k   (    3  k   -  1   )    /  2        subscript  g  k       k      3  k   1    2     g_{k}=k(3k-1)/2   , in which case there is exactly one Ferrers diagram left over. But this is precisely what the right side of the identity says should happen, so we are finished.  Partition recurrence  We can rephrase the above proof, using partitions , which we denote as:    n  =    λ  1   +   λ  2   +  ⋯  +   λ  ℓ        n     subscript  λ  1    subscript  λ  2   normal-⋯   subscript  λ  normal-ℓ      n=\lambda_{1}+\lambda_{2}+\cdots+\lambda_{\ell}   , where     λ  1   ≥   λ  2   ≥  …  ≥   λ  ℓ   >  0         subscript  λ  1    subscript  λ  2        normal-…        subscript  λ  normal-ℓ        0     \lambda_{1}\geq\lambda_{2}\geq\ldots\geq\lambda_{\ell}>0   . The number of partitions of n is the partition function p ( n ) having generating function:        ∑   n  ∈   ℕ  0      p   (  n  )    x  n     =    ∏   k  ∈  ℕ      (   1  -   x  k    )    -  1           subscript     n   subscript  ℕ  0       p  n   superscript  x  n       subscript  product    k  ℕ     superscript    1   superscript  x  k      1       \sum\limits_{n\in\mathbb{N}_{0}}p(n)x^{n}=\prod\limits_{k\in\mathbb{N}}(1-x^{k%
 })^{-1}     Note that is the reciprocal of the product on the left hand side of our identity:        (    ∑   n  =  0   ∞    p   (  n  )    x  n     )   ⋅   (    ∏   n  =  1   ∞    (   1  -   x  n    )    )    =  1       normal-⋅    superscript   subscript     n  0        p  n   superscript  x  n       superscript   subscript  product    n  1        1   superscript  x  n      1    \left(\sum_{n=0}^{\infty}p(n)x^{n}\right)\cdot\left(\prod_{n=1}^{\infty}(1-x^{%
 n})\right)=1     Let us denote the expansion of our product by      ∏   n  =  1   ∞    (   1  -   x  n    )    =    ∑   n  =  0   ∞     a  n    x  n           superscript   subscript  product    n  1        1   superscript  x  n       superscript   subscript     n  0         subscript  a  n    superscript  x  n       \prod_{n=1}^{\infty}(1-x^{n})=\sum_{n=0}^{\infty}a_{n}x^{n}   , so that        (    ∑   n  =  0   ∞    p   (  n  )    x  n     )   ⋅   (    ∑   n  =  0   ∞     a  n    x  n     )    =  1       normal-⋅    superscript   subscript     n  0        p  n   superscript  x  n       superscript   subscript     n  0         subscript  a  n    superscript  x  n      1    \left(\sum_{n=0}^{\infty}p(n)x^{n}\right)\cdot\left(\sum_{n=0}^{\infty}a_{n}x^%
 {n}\right)=1   .  Multiplying out the left hand side and equating coefficients on the two sides, we obtain a 0  p (0) = 1 and      ∑   i  =  0   n    p   (   n  -  i   )    a  i     =  0        superscript   subscript     i  0    n     p    n  i    subscript  a  i     0    \sum_{i=0}^{n}p(n{-}i)a_{i}=0   for all    n  ≥  1      n  1    n\geq 1   . This gives a recurrence relation defining p ( n ) in terms of a n , and vice versa a recurrence for a n in terms of p ( n ). Thus, our desired result:       a  i   :=   {     1      if  i   =     1  2     (    3   k  2    ±  k   )   and  k  is even         -  1       if  i   =     1  2     (    3   k  2    ±  k   )   and  k  is odd        0    otherwise         assign   subscript  a  i    cases  1      if  i       1  2    plus-or-minus    3   superscript  k  2    k   and  k  is even      1       if  i       1  2    plus-or-minus    3   superscript  k  2    k   and  k  is odd    0  otherwise     a_{i}:=\begin{cases}1&\mbox{ if }i=\frac{1}{2}(3k^{2}\pm k)\mbox{ and }k\mbox{%
  is even}\\
 -1&\mbox{ if }i=\frac{1}{2}(3k^{2}\pm k)\mbox{ and }k\mbox{ is odd }\\
 0&\mbox{ otherwise }\end{cases}     for    i  ≥  1      i  1    i\geq 1   is equivalent to the identity       ∑  i      (   -  1   )   i   p   (   n  -   g  i    )     =  0   ,        subscript   i      superscript    1   i   p    n   subscript  g  i      0    \sum_{i}(-1)^{i}p(n{-}g_{i})=0,   where     g  i   :=    1  2    (    3   i  2    -  i   )       assign   subscript  g  i       1  2       3   superscript  i  2    i      g_{i}:=\textstyle\frac{1}{2}(3i^{2}-i)   and i ranges over all integers such that     g  i   ≤  n       subscript  g  i   n    g_{i}\leq n   (this range includes both positive and negative i, so as to use both kinds of generalized pentagonal numbers). This in turn means:         ∑    i   even     p   (   n  -   g  i    )     =    ∑    i   odd     p   (   n  -   g  i    )      ,        subscript     i  even      p    n   subscript  g  i        subscript     i  odd      p    n   subscript  g  i        \sum_{i\mathrm{\ even}}p(n{-}g_{i})=\sum_{i\mathrm{\ odd}}p(n{-}g_{i}),   .  In terms of sets of partitions, this is equivalent to saying that the following sets are of equal cardinality:      𝒳  :=    ⋃    i   even     𝒫   (   n  -   g  i    )        assign  𝒳    subscript     i  even      𝒫    n   subscript  g  i        \mathcal{X}:=\bigcup_{i\mathrm{\ even}}\mathcal{P}(n-g_{i})   and    𝒴  :=    ⋃    i   odd     𝒫   (   n  -   g  i    )        assign  𝒴    subscript     i  odd      𝒫    n   subscript  g  i        \mathcal{Y}:=\bigcup_{i\mathrm{\ odd}}\mathcal{P}(n-g_{i})   ,  where    𝒫   (  n  )       𝒫  n    \mathcal{P}(n)   denotes the set of all partitions of   n   n   n   . All that remains is to give a bijection from one set to the other, which is accomplished by the function φ from X to Y which maps the partition      𝒫   (   n  -   g  i    )    ∋  λ   :    n  -   g  i    =    λ  1   +   λ  2   +  ⋯  +   λ  ℓ        normal-:    λ    𝒫    n   subscript  g  i          n   subscript  g  i       subscript  λ  1    subscript  λ  2   normal-⋯   subscript  λ  normal-ℓ       \mathcal{P}(n-g_{i})\ni\lambda:n-g_{i}=\lambda_{1}+\lambda_{2}+\cdots+\lambda_%
 {\ell}   to the partiton     λ  ′   =   φ   (  λ  )         superscript  λ  normal-′     φ  λ     \lambda^{\prime}=\varphi(\lambda)   defined by:       φ   (  λ  )    :=   {       λ  ′   :    n  -   g   i  -  1     =    (    ℓ  +   3  i    -  2   )   +   (    λ  1   -  1   )   +  ⋯  +   (    λ  ℓ   -  1   )           if  ℓ   +   3  i    >   λ  1                λ  ′   :    n  -   g   i  +  1     =    (    λ  2   +  1   )   +  ⋯  +   (    λ  ℓ   +  1   )   +     1  +  ⋯  +  1   ⏟     λ  1   -  ℓ  -   3  i             if  ℓ   +   3  i    ≤   λ  1           assign    φ  λ    cases   normal-:   superscript  λ  normal-′       n   subscript  g    i  1           normal-ℓ    3  i    2      subscript  λ  1   1   normal-⋯     subscript  λ  normal-ℓ   1            if  normal-ℓ     3  i     subscript  λ  1    absent  otherwise   normal-:   superscript  λ  normal-′       n   subscript  g    i  1          subscript  λ  2   1   normal-⋯     subscript  λ  normal-ℓ   1    subscript   normal-⏟    1  normal-⋯  1       subscript  λ  1   normal-ℓ    3  i              if  normal-ℓ     3  i     subscript  λ  1       \varphi(\lambda):=\begin{cases}\lambda^{\prime}:n-g_{i-1}=(\ell+3i-2)+(\lambda%
 _{1}-1)+\cdots+(\lambda_{\ell}-1)&\mbox{ if }\ell+3i>\lambda_{1}\\
 \\
 \lambda^{\prime}:n-g_{i+1}=(\lambda_{2}+1)+\cdots+(\lambda_{\ell}+1)+%
 \underbrace{1+\cdots+1}_{\lambda_{1}-\ell-3i}&\mbox{ if }\ell+3i\leq\lambda_{1%
 }\end{cases}   .  This is an involution (a self-inverse mapping), and thus in particular a bijection, which proves our claim and the identity.  See also  The pentagonal number theorem occurs as a special case of the Jacobi triple product .  Q-series generalize Euler's function, which is closely related to the Dedekind eta function , and occurs in the study of modular forms . The modulus of the Euler function (see Q-series for picture) shows the fractal  modular group symmetry and occurs in the study of the interior of the Mandelbrot set .  References      External links    On Euler's Pentagonal Theorem at MathPages   , the partition numbers.   "  Category:Theorems in number theory  Category:Articles containing proofs   