<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="46">Alpha compositing</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Alpha compositing</h1>
<hr/>
<figure><b>(Figure)</b>
<figcaption>This image's alpha channel falls off to zero at its base.</figcaption>
</figure>

<p>In <a href="computer_graphics" title="wikilink">computer graphics</a>, <strong>alpha compositing</strong> is the process of combining an image with a background to create the appearance of partial or full transparency. It is often useful to render image elements in separate passes, and then combine the resulting multiple <a href="2D_computer_graphics" title="wikilink">2D</a> images into a single, final image called the <a href="compositing" title="wikilink">composite</a>. For example, compositing is used extensively when combining computer-rendered image elements with live footage.</p>

<p>In order to combine these image elements correctly, it is necessary to keep an associated <em><a href="matte_(filmmaking)" title="wikilink">matte</a></em> for each element. This matte contains the coverage information—the shape of the geometry being drawn—making it possible to distinguish between parts of the image where the geometry was actually drawn and other parts of the image that are empty.</p>
<h2 id="description">Description</h2>

<p>To store matte information, the concept of an <strong>alpha channel</strong> was introduced by <a href="Alvy_Ray_Smith" title="wikilink">Alvy Ray Smith</a> in the late 1970s, and fully developed in a 1984 paper by <a href="Thomas_Porter_(Pixar)" title="wikilink">Thomas Porter</a> and <a href="Tom_Duff" title="wikilink">Tom Duff</a>.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> In a 2D image element, which stores a color for each pixel, additional data is stored in the alpha channel with a value between 0 and 1. A value of 0 means that the pixel does not have any coverage information and is transparent; i.e. there was no color contribution from any geometry because the geometry did not overlap this pixel. A value of 1 means that the pixel is opaque because the geometry completely overlapped the pixel.</p>

<p>If an alpha channel is used in an image, it is common to also multiply the color by the alpha value, to save on additional multiplications during compositing. This is usually referred to as <em>premultiplied alpha</em>.</p>

<p>Assuming that the pixel color is expressed using <em>straight</em> (non-premultiplied) RGBA <a href="tuple" title="wikilink">tuples</a>, a pixel value of (0.0, 0.5, 0.0, 0.5) implies a pixel that has 50% of the maximum green intensity and 50% opacity. If the color were fully green, its RGBA would be (0, 1, 0, 0.5).</p>

<p>However, if this pixel uses premultiplied alpha, all of the RGB values (0, 1, 0) are multiplied by 0.5 and then the alpha is appended to the end to yield (0, 0.5, 0, 0.5). In this case, the 0.5 value for the G channel actually indicates 100% green intensity (with 50% opacity). For this reason, knowing whether a file uses premultiplied or straight alpha is essential to correctly process or composite it.</p>

<p>Premultiplied alpha has some practical advantages over normal alpha blending because premultiplied alpha blending is <a href="Associativity" title="wikilink">associative</a>, and <a class="uri" href="interpolation" title="wikilink">interpolation</a> and <a href="Filter_(signal_processing)" title="wikilink">filtering</a> give correct results. Ordinary interpolation without premultiplied alpha leads to RGB information leaking out of fully transparent (A=0) regions, even though this RGB information is ideally invisible. When interpolating images with abrupt borders between transparent and opaque regions, this can result in borders of colors that were not visible in the original image. In addition, premultiplied alpha lets regions of regular alpha blending and regions additive blending mode to be encoded within the same image.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> Premultiplication causes a loss of precision in the RGB values, so that a noticeable loss of quality can result if the color information is later brightened or if the alpha channel is removed. This loss of precision also makes premultiplied images easier to <a href="Data_compression" title="wikilink">compress</a>, as they do not record the color variations hidden inside transparent regions.</p>

<p>With the existence of an alpha channel, it is possible to express compositing image operations using a <em>compositing algebra</em>. For example, given two image elements A and B, the most common compositing operation is to combine the images such that A appears in the foreground and B appears in the background. This can be expressed as A <strong>over</strong> B. In addition to <strong>over</strong>, Porter and Duff defined the compositing operators <strong>in</strong>, <strong>held out by</strong> (usually abbreviated <strong>out</strong>), <strong>atop</strong>, and <strong>xor</strong> (and the reverse operators <strong>rover</strong>, <strong>rin</strong>, <strong>rout</strong>, and <strong>ratop</strong>) from a consideration of choices in blending the colors of two pixels when their coverage is, conceptually, overlaid orthogonally:</p>
<figure><b>(Figure)</b>
<figcaption>Alpha compositing.svg</figcaption>
</figure>

<p>The <strong>over</strong> operator is, in effect, the normal painting operation (see <a href="Painter's_algorithm" title="wikilink">Painter's algorithm</a>). The <strong>in</strong> operator is the alpha compositing equivalent of <a href="Clipping_(computer_graphics)" title="wikilink">clipping</a>.</p>

<p>As an example, the <strong>over</strong> operator can be accomplished by applying the following formula to each pixel value:</p>

<p>

<math display="block" id="Alpha_compositing:0">
 <semantics>
  <mrow>
   <msub>
    <mi>C</mi>
    <mi>o</mi>
   </msub>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <mrow>
      <msub>
       <mi>C</mi>
       <mi>a</mi>
      </msub>
      <msub>
       <mi>α</mi>
       <mi>a</mi>
      </msub>
     </mrow>
     <mo>+</mo>
     <mrow>
      <msub>
       <mi>C</mi>
       <mi>b</mi>
      </msub>
      <msub>
       <mi>α</mi>
       <mi>b</mi>
      </msub>
      <mrow>
       <mo>(</mo>
       <mrow>
        <mn>1</mn>
        <mo>-</mo>
        <msub>
         <mi>α</mi>
         <mi>a</mi>
        </msub>
       </mrow>
       <mo>)</mo>
      </mrow>
     </mrow>
    </mrow>
    <mrow>
     <msub>
      <mi>α</mi>
      <mi>a</mi>
     </msub>
     <mo>+</mo>
     <mrow>
      <msub>
       <mi>α</mi>
       <mi>b</mi>
      </msub>
      <mrow>
       <mo>(</mo>
       <mrow>
        <mn>1</mn>
        <mo>-</mo>
        <msub>
         <mi>α</mi>
         <mi>a</mi>
        </msub>
       </mrow>
       <mo>)</mo>
      </mrow>
     </mrow>
    </mrow>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>C</ci>
     <ci>o</ci>
    </apply>
    <apply>
     <divide></divide>
     <apply>
      <plus></plus>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>C</ci>
        <ci>a</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>α</ci>
        <ci>a</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>C</ci>
        <ci>b</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>α</ci>
        <ci>b</ci>
       </apply>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>α</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
     </apply>
     <apply>
      <plus></plus>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>α</ci>
       <ci>a</ci>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>α</ci>
        <ci>b</ci>
       </apply>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>α</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   C_{o}=\frac{C_{a}\alpha_{a}+C_{b}\alpha_{b}\left(1-\alpha_{a}\right)}{\alpha_{%
a}+\alpha_{b}\left(1-\alpha_{a}\right)}
  </annotation>
 </semantics>
</math>

</p>

<p>where 

<math display="inline" id="Alpha_compositing:1">
 <semantics>
  <msub>
   <mi>C</mi>
   <mi>o</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>C</ci>
    <ci>o</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   C_{o}
  </annotation>
 </semantics>
</math>

 is the result of the operation, 

<math display="inline" id="Alpha_compositing:2">
 <semantics>
  <msub>
   <mi>C</mi>
   <mi>a</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>C</ci>
    <ci>a</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   C_{a}
  </annotation>
 </semantics>
</math>

 is the color of the pixel in element A, 

<math display="inline" id="Alpha_compositing:3">
 <semantics>
  <msub>
   <mi>C</mi>
   <mi>b</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>C</ci>
    <ci>b</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   C_{b}
  </annotation>
 </semantics>
</math>


 is the color of the pixel in element B, and 

<math display="inline" id="Alpha_compositing:4">
 <semantics>
  <msub>
   <mi>α</mi>
   <mi>a</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>α</ci>
    <ci>a</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \alpha_{a}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Alpha_compositing:5">
 <semantics>
  <msub>
   <mi>α</mi>
   <mi>b</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>α</ci>
    <ci>b</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \alpha_{b}
  </annotation>
 </semantics>
</math>

 are the alpha of the pixels in elements A and B respectively. If it is assumed that all color values are premultiplied by their alpha values (

<math display="inline" id="Alpha_compositing:6">
 <semantics>
  <mrow>
   <msub>
    <mi>c</mi>
    <mi>i</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>α</mi>
     <mi>i</mi>
    </msub>
    <msub>
     <mi>C</mi>
     <mi>i</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>c</ci>
     <ci>i</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>α</ci>
      <ci>i</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>C</ci>
      <ci>i</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   c_{i}=\alpha_{i}C_{i}
  </annotation>
 </semantics>
</math>

), we can rewrite the equation for output color as:</p>

<p>

<math display="block" id="Alpha_compositing:7">
 <semantics>
  <mrow>
   <msub>
    <mi>c</mi>
    <mi>o</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>c</mi>
     <mi>a</mi>
    </msub>
    <mo>+</mo>
    <mrow>
     <msub>
      <mi>c</mi>
      <mi>b</mi>
     </msub>
     <mrow>
      <mo>(</mo>
      <mrow>
       <mn>1</mn>
       <mo>-</mo>
       <msub>
        <mi>α</mi>
        <mi>a</mi>
       </msub>
      </mrow>
      <mo>)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>c</ci>
     <ci>o</ci>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>c</ci>
      <ci>a</ci>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>c</ci>
       <ci>b</ci>
      </apply>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>α</ci>
        <ci>a</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   c_{o}=c_{a}+c_{b}\left(1-\alpha_{a}\right)
  </annotation>
 </semantics>
</math>

 and resulting alpha channel value is</p>

<p>

<math display="block" id="Alpha_compositing:8">
 <semantics>
  <mrow>
   <msub>
    <mi>α</mi>
    <mi>o</mi>
   </msub>
   <mo>=</mo>
   <mfrac>
    <msub>
     <mi>c</mi>
     <mi>o</mi>
    </msub>
    <msub>
     <mi>C</mi>
     <mi>o</mi>
    </msub>
   </mfrac>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>α</mi>
     <mi>a</mi>
    </msub>
    <mo>+</mo>
    <mrow>
     <msub>
      <mi>α</mi>
      <mi>b</mi>
     </msub>
     <mrow>
      <mo>(</mo>
      <mrow>
       <mn>1</mn>
       <mo>-</mo>
       <msub>
        <mi>α</mi>
        <mi>a</mi>
       </msub>
      </mrow>
      <mo>)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>α</ci>
      <ci>o</ci>
     </apply>
     <apply>
      <divide></divide>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>c</ci>
       <ci>o</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>C</ci>
       <ci>o</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <plus></plus>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>α</ci>
       <ci>a</ci>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>α</ci>
        <ci>b</ci>
       </apply>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>α</ci>
         <ci>a</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \alpha_{o}=\frac{c_{o}}{C_{o}}=\alpha_{a}+\alpha_{b}\left(1-\alpha_{a}\right)
  </annotation>
 </semantics>
</math>

</p>
<h2 id="analytical-derivation-of-the-over-operator">Analytical derivation of the over operator</h2>

<p>Porter and Duff gave a geometric interpretation of the alpha compositing formula by studying orthogonal coverages. Another derivation of the formula, based on a physical <a class="uri" href="reflectance" title="wikilink">reflectance</a>/<a class="uri" href="transmittance" title="wikilink">transmittance</a> model, can be found in a 1981 paper by <a href="Bruce_A._Wallace" title="wikilink">Bruce A. Wallace</a>.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a></p>

<p>A third approach is found by starting out with two very simple assumptions. For simplicity, we shall here use the shorthand notation 

<math display="inline" id="Alpha_compositing:9">
 <semantics>
  <mrow>
   <mi>a</mi>
   <mo>⊙</mo>
   <mi>b</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">direct-product</csymbol>
    <ci>a</ci>
    <ci>b</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a\odot b
  </annotation>
 </semantics>
</math>

 for representing the <strong>over</strong> operator.</p>

<p>The first assumption is that in the case where the background is opaque (i.e. 

<math display="inline" id="Alpha_compositing:10">
 <semantics>
  <mrow>
   <msub>
    <mi>α</mi>
    <mi>b</mi>
   </msub>
   <mo>=</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>α</ci>
     <ci>b</ci>
    </apply>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \alpha_{b}=1
  </annotation>
 </semantics>
</math>

), the over operator represents the <a href="convex_combination" title="wikilink">convex combination</a> of 

<math display="inline" id="Alpha_compositing:11">
 <semantics>
  <mi>a</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>a</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Alpha_compositing:12">
 <semantics>
  <mi>b</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>b</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   b
  </annotation>
 </semantics>
</math>

:</p>

<p>

<math display="block" id="Alpha_compositing:13">
 <semantics>
  <mrow>
   <msub>
    <mi>C</mi>
    <mi>o</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mrow>
     <msub>
      <mi>α</mi>
      <mi>a</mi>
     </msub>
     <msub>
      <mi>C</mi>
      <mi>a</mi>
     </msub>
    </mrow>
    <mo>+</mo>
    <mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mn>1</mn>
       <mo>-</mo>
       <msub>
        <mi>α</mi>
        <mi>a</mi>
       </msub>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <msub>
      <mi>C</mi>
      <mi>b</mi>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>C</ci>
     <ci>o</ci>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>α</ci>
       <ci>a</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>C</ci>
       <ci>a</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>α</ci>
        <ci>a</ci>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>C</ci>
       <ci>b</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   C_{o}=\alpha_{a}C_{a}+(1-\alpha_{a})C_{b}
  </annotation>
 </semantics>
</math>

</p>

<p>The second assumption is that the operator must respect the associative rule:</p>

<p>

<math display="block" id="Alpha_compositing:14">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>a</mi>
      <mo>⊙</mo>
      <mi>b</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>⊙</mo>
    <mi>c</mi>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>a</mi>
    <mo>⊙</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>b</mi>
      <mo>⊙</mo>
      <mi>c</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="latexml">direct-product</csymbol>
     <apply>
      <csymbol cd="latexml">direct-product</csymbol>
      <ci>a</ci>
      <ci>b</ci>
     </apply>
     <ci>c</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">direct-product</csymbol>
     <ci>a</ci>
     <apply>
      <csymbol cd="latexml">direct-product</csymbol>
      <ci>b</ci>
      <ci>c</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (a\odot b)\odot c=a\odot(b\odot c)
  </annotation>
 </semantics>
</math>

</p>

<p>Now, let us assume that 

<math display="inline" id="Alpha_compositing:15">
 <semantics>
  <mi>a</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>a</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Alpha_compositing:16">
 <semantics>
  <mi>b</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>b</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   b
  </annotation>
 </semantics>
</math>

 have variable transparencies, whereas 

<math display="inline" id="Alpha_compositing:17">
 <semantics>
  <mi>c</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>c</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   c
  </annotation>
 </semantics>
</math>

 is opaque. We're interested in finding</p>

<p>

<math display="block" id="Alpha_compositing:18">
 <semantics>
  <mrow>
   <mi>o</mi>
   <mo>=</mo>
   <mrow>
    <mi>a</mi>
    <mo>⊙</mo>
    <mi>b</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>o</ci>
    <apply>
     <csymbol cd="latexml">direct-product</csymbol>
     <ci>a</ci>
     <ci>b</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   o=a\odot b
  </annotation>
 </semantics>
</math>

.</p>

<p>We know from the associative rule that the following must be true:</p>

<p>

<math display="block" id="Alpha_compositing:19">
 <semantics>
  <mrow>
   <mrow>
    <mi>o</mi>
    <mo>⊙</mo>
    <mi>c</mi>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>a</mi>
    <mo>⊙</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>b</mi>
      <mo>⊙</mo>
      <mi>c</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="latexml">direct-product</csymbol>
     <ci>o</ci>
     <ci>c</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">direct-product</csymbol>
     <ci>a</ci>
     <apply>
      <csymbol cd="latexml">direct-product</csymbol>
      <ci>b</ci>
      <ci>c</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   o\odot c=a\odot(b\odot c)
  </annotation>
 </semantics>
</math>

</p>

<p>We know that 

<math display="inline" id="Alpha_compositing:20">
 <semantics>
  <mi>c</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>c</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   c
  </annotation>
 </semantics>
</math>

 is opaque and thus follows that 

<math display="inline" id="Alpha_compositing:21">
 <semantics>
  <mrow>
   <mi>b</mi>
   <mo>⊙</mo>
   <mi>c</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">direct-product</csymbol>
    <ci>b</ci>
    <ci>c</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   b\odot c
  </annotation>
 </semantics>
</math>

 is opaque, so in the above equation, each 

<math display="inline" id="Alpha_compositing:22">
 <semantics>
  <mo>⊙</mo>
  <annotation-xml encoding="MathML-Content">
   <csymbol cd="latexml">direct-product</csymbol>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \odot
  </annotation>
 </semantics>
</math>

 operator can be written as a convex combination:</p>

<p>

<math display="inline" id="Alpha_compositing:23">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>α</mi>
     <mi>o</mi>
    </msub>
    <msub>
     <mi>C</mi>
     <mi>o</mi>
    </msub>
   </mrow>
   <mo>+</mo>
   <mrow>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mn>1</mn>
      <mo>-</mo>
      <msub>
       <mi>α</mi>
       <mi>o</mi>
      </msub>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <msub>
     <mi>C</mi>
     <mi>c</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <plus></plus>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>α</ci>
      <ci>o</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>C</ci>
      <ci>o</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <apply>
      <minus></minus>
      <cn type="integer">1</cn>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>α</ci>
       <ci>o</ci>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>C</ci>
      <ci>c</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \displaystyle\alpha_{o}C_{o}+(1-\alpha_{o})C_{c}
  </annotation>
 </semantics>
</math>


</p>

<p>Hence we see that this represents an equation of the form 

<math display="inline" id="Alpha_compositing:24">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>X</mi>
     <mn>0</mn>
    </msub>
    <mo>+</mo>
    <mrow>
     <msub>
      <mi>Y</mi>
      <mn>0</mn>
     </msub>
     <msub>
      <mi>C</mi>
      <mi>c</mi>
     </msub>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>X</mi>
     <mn>1</mn>
    </msub>
    <mo>+</mo>
    <mrow>
     <msub>
      <mi>Y</mi>
      <mn>1</mn>
     </msub>
     <msub>
      <mi>C</mi>
      <mi>c</mi>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <plus></plus>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <cn type="integer">0</cn>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Y</ci>
       <cn type="integer">0</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>C</ci>
       <ci>c</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Y</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>C</ci>
       <ci>c</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X_{0}+Y_{0}C_{c}=X_{1}+Y_{1}C_{c}
  </annotation>
 </semantics>
</math>

. By setting 

<math display="inline" id="Alpha_compositing:25">
 <semantics>
  <mrow>
   <msub>
    <mi>X</mi>
    <mn>0</mn>
   </msub>
   <mo>=</mo>
   <msub>
    <mi>X</mi>
    <mn>1</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>X</ci>
     <cn type="integer">0</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>X</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X_{0}=X_{1}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Alpha_compositing:26">
 <semantics>
  <mrow>
   <msub>
    <mi>Y</mi>
    <mn>0</mn>
   </msub>
   <mo>=</mo>
   <msub>
    <mi>Y</mi>
    <mn>1</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>Y</ci>
     <cn type="integer">0</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>Y</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y_{0}=Y_{1}
  </annotation>
 </semantics>
</math>

 we get</p>

<p>

<math display="inline" id="Alpha_compositing:27">
 <semantics>
  <msub>
   <mi>α</mi>
   <mi>o</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>α</ci>
    <ci>o</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \displaystyle\alpha_{o}
  </annotation>
 </semantics>
</math>


 which means that we have analytically derived a formula for the output alpha and the output color of 

<math display="inline" id="Alpha_compositing:28">
 <semantics>
  <mrow>
   <mi>a</mi>
   <mo>⊙</mo>
   <mi>b</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">direct-product</csymbol>
    <ci>a</ci>
    <ci>b</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a\odot b
  </annotation>
 </semantics>
</math>

.</p>

<p>An even more compact representation is given by noticing that 

<math display="inline" id="Alpha_compositing:29">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mn>1</mn>
      <mo>-</mo>
      <msub>
       <mi>α</mi>
       <mi>a</mi>
      </msub>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <msub>
     <mi>α</mi>
     <mi>b</mi>
    </msub>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>α</mi>
     <mi>o</mi>
    </msub>
    <mo>-</mo>
    <msub>
     <mi>α</mi>
     <mi>a</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <minus></minus>
      <cn type="integer">1</cn>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>α</ci>
       <ci>a</ci>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>α</ci>
      <ci>b</ci>
     </apply>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>α</ci>
      <ci>o</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>α</ci>
      <ci>a</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (1-\alpha_{a})\alpha_{b}=\alpha_{o}-\alpha_{a}
  </annotation>
 </semantics>
</math>

:</p>

<p>

<math display="block" id="Alpha_compositing:30">
 <semantics>
  <mrow>
   <msub>
    <mi>C</mi>
    <mi>o</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mfrac>
      <msub>
       <mi>α</mi>
       <mi>a</mi>
      </msub>
      <msub>
       <mi>α</mi>
       <mi>o</mi>
      </msub>
     </mfrac>
     <msub>
      <mi>C</mi>
      <mi>a</mi>
     </msub>
    </mrow>
    <mo>+</mo>
    <mrow>
     <mrow>
      <mo>(</mo>
      <mrow>
       <mn>1</mn>
       <mo>-</mo>
       <mfrac>
        <msub>
         <mi>α</mi>
         <mi>a</mi>
        </msub>
        <msub>
         <mi>α</mi>
         <mi>o</mi>
        </msub>
       </mfrac>
      </mrow>
      <mo>)</mo>
     </mrow>
     <msub>
      <mi>C</mi>
      <mi>b</mi>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>C</ci>
     <ci>o</ci>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>α</ci>
        <ci>a</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>α</ci>
        <ci>o</ci>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>C</ci>
       <ci>a</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
       <apply>
        <divide></divide>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>α</ci>
         <ci>a</ci>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>α</ci>
         <ci>o</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>C</ci>
       <ci>b</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   C_{o}=\frac{\alpha_{a}}{\alpha_{o}}C_{a}+\left(1-\frac{\alpha_{a}}{\alpha_{o}}%
\right)C_{b}
  </annotation>
 </semantics>
</math>

</p>

<p>It is also interesting to note that the 

<math display="inline" id="Alpha_compositing:31">
 <semantics>
  <mo>⊙</mo>
  <annotation-xml encoding="MathML-Content">
   <csymbol cd="latexml">direct-product</csymbol>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \odot
  </annotation>
 </semantics>
</math>

 operator fulfills all the requirements of a <a class="uri" href="non-commutative" title="wikilink">non-commutative</a> <a class="uri" href="monoid" title="wikilink">monoid</a>, where the <a href="identity_element" title="wikilink">identity element</a> 

<math display="inline" id="Alpha_compositing:32">
 <semantics>
  <mi>e</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>e</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   e
  </annotation>
 </semantics>
</math>

 is chosen such that 

<math display="inline" id="Alpha_compositing:33">
 <semantics>
  <mrow>
   <mrow>
    <mi>e</mi>
    <mo>⊙</mo>
    <mi>a</mi>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>a</mi>
    <mo>⊙</mo>
    <mi>e</mi>
   </mrow>
   <mo>=</mo>
   <mi>a</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="latexml">direct-product</csymbol>
      <ci>e</ci>
      <ci>a</ci>
     </apply>
     <apply>
      <csymbol cd="latexml">direct-product</csymbol>
      <ci>a</ci>
      <ci>e</ci>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <ci>a</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   e\odot a=a\odot e=a
  </annotation>
 </semantics>
</math>

 (i.e. the identity element can be any tuple 

<math display="inline" id="Alpha_compositing:34">
 <semantics>
  <mrow>
   <mo stretchy="false">⟨</mo>
   <mi>C</mi>
   <mo>,</mo>
   <mi>α</mi>
   <mo stretchy="false">⟩</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <ci>C</ci>
    <ci>α</ci>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \langle C,\alpha\rangle
  </annotation>
 </semantics>
</math>

 with 

<math display="inline" id="Alpha_compositing:35">
 <semantics>
  <mrow>
   <mi>α</mi>
   <mo>=</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>α</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \alpha=0
  </annotation>
 </semantics>
</math>

.)</p>
<h2 id="alpha-blending">Alpha blending</h2>

<p>Alpha blending is the process of combining a translucent foreground color with a background color, thereby producing a new blended color. The degree of the foreground color's translucency may range from completely transparent to completely opaque. If the foreground color is completely transparent, the blended color will be the background color. Conversely, if it is completely opaque, the blended color will be the foreground color. Of course, the translucency can range between these extremes, in which case the blended color is computed as a weighted average of the foreground and background colors.</p>

<p>Alpha blending is a <a href="convex_combination" title="wikilink">convex combination</a> of two <a href="color" title="wikilink">colors</a> allowing for <a href="Transparency_(graphic)" title="wikilink">transparency</a> effects in <a href="computer_graphics" title="wikilink">computer graphics</a>. The value of <code>alpha</code> in the color code ranges from 0.0 to 1.0, where 0.0 represents a fully transparent color, and 1.0 represents a fully opaque color. This alpha value also corresponds to the ratio of "SRC over DST" in Porter and Duff equations.</p>

<p>The value of the resulting color is given by:</p>

<p>

<math display="block" id="Alpha_compositing:36">
 <semantics>
  <mrow>
   <mo>{</mo>
   <mtable displaystyle="true">
    <mtr>
     <mtd columnalign="left">
      <mrow>
       <msub>
        <mi>out</mi>
        <mi>A</mi>
       </msub>
       <mo>=</mo>
       <mrow>
        <msub>
         <mi>src</mi>
         <mi>A</mi>
        </msub>
        <mo>+</mo>
        <mrow>
         <msub>
          <mi>dst</mi>
          <mi>A</mi>
         </msub>
         <mrow>
          <mo stretchy="false">(</mo>
          <mrow>
           <mn>1</mn>
           <mo>-</mo>
           <msub>
            <mi>src</mi>
            <mi>A</mi>
           </msub>
          </mrow>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
       </mrow>
      </mrow>
     </mtd>
     <mtd></mtd>
    </mtr>
    <mtr>
     <mtd columnalign="left">
      <mrow>
       <msub>
        <mi>out</mi>
        <mrow>
         <mi>R</mi>
         <mi>G</mi>
         <mi>B</mi>
        </mrow>
       </msub>
       <mo>=</mo>
       <mrow>
        <mrow>
         <mo maxsize="120%" minsize="120%">(</mo>
         <mrow>
          <mrow>
           <msub>
            <mi>src</mi>
            <mrow>
             <mi>R</mi>
             <mi>G</mi>
             <mi>B</mi>
            </mrow>
           </msub>
           <msub>
            <mi>src</mi>
            <mi>A</mi>
           </msub>
          </mrow>
          <mo>+</mo>
          <mrow>
           <msub>
            <mi>dst</mi>
            <mrow>
             <mi>R</mi>
             <mi>G</mi>
             <mi>B</mi>
            </mrow>
           </msub>
           <msub>
            <mi>dst</mi>
            <mi>A</mi>
           </msub>
           <mrow>
            <mo>(</mo>
            <mrow>
             <mn>1</mn>
             <mo>-</mo>
             <msub>
              <mi>src</mi>
              <mi>A</mi>
             </msub>
            </mrow>
            <mo>)</mo>
           </mrow>
          </mrow>
         </mrow>
         <mo maxsize="120%" minsize="120%">)</mo>
        </mrow>
        <mo>÷</mo>
        <msub>
         <mi>out</mi>
         <mi>A</mi>
        </msub>
       </mrow>
      </mrow>
     </mtd>
     <mtd></mtd>
    </mtr>
    <mtr>
     <mtd columnalign="left">
      <mrow>
       <msub>
        <mi>out</mi>
        <mi>A</mi>
       </msub>
       <mo>=</mo>
       <mn>0</mn>
       <mo>⇒</mo>
       <msub>
        <mi>out</mi>
        <mrow>
         <mi>R</mi>
         <mi>G</mi>
         <mi>B</mi>
        </mrow>
       </msub>
       <mo>=</mo>
       <mn>0</mn>
      </mrow>
     </mtd>
     <mtd></mtd>
    </mtr>
   </mtable>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">cases</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>out</ci>
      <ci>A</ci>
     </apply>
     <apply>
      <plus></plus>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>src</ci>
       <ci>A</ci>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>dst</ci>
        <ci>A</ci>
       </apply>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>src</ci>
         <ci>A</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <mtext>otherwise</mtext>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>out</ci>
      <apply>
       <times></times>
       <ci>R</ci>
       <ci>G</ci>
       <ci>B</ci>
      </apply>
     </apply>
     <apply>
      <divide></divide>
      <apply>
       <plus></plus>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>src</ci>
         <apply>
          <times></times>
          <ci>R</ci>
          <ci>G</ci>
          <ci>B</ci>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>src</ci>
         <ci>A</ci>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>dst</ci>
         <apply>
          <times></times>
          <ci>R</ci>
          <ci>G</ci>
          <ci>B</ci>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>dst</ci>
         <ci>A</ci>
        </apply>
        <apply>
         <minus></minus>
         <cn type="integer">1</cn>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>src</ci>
          <ci>A</ci>
         </apply>
        </apply>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>out</ci>
       <ci>A</ci>
      </apply>
     </apply>
    </apply>
    <mtext>otherwise</mtext>
    <apply>
     <and></and>
     <apply>
      <eq></eq>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>out</ci>
       <ci>A</ci>
      </apply>
      <cn type="integer">0</cn>
     </apply>
     <apply>
      <ci>normal-⇒</ci>
      <share href="#.cmml">
      </share>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>out</ci>
       <apply>
        <times></times>
        <ci>R</ci>
        <ci>G</ci>
        <ci>B</ci>
       </apply>
      </apply>
     </apply>
     <apply>
      <eq></eq>
      <share href="#.cmml">
      </share>
      <cn type="integer">0</cn>
     </apply>
    </apply>
    <mtext>otherwise</mtext>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{cases}\mathrm{out}_{A}=\mathrm{src}_{A}+\mathrm{dst}_{A}(1-\mathrm{src}%
_{A})\\
\mathrm{out}_{RGB}=\bigl(\mathrm{src}_{RGB}\mathrm{src}_{A}+\mathrm{dst}_{RGB}%
\mathrm{dst}_{A}\left(1-\mathrm{src}_{A}\right)\bigr)\div\mathrm{out}_{A}\\
\mathrm{out}_{A}=0\Rightarrow\mathrm{out}_{RGB}=0\end{cases}
  </annotation>
 </semantics>
</math>

</p>

<p>If the destination background is opaque, then 

<math display="inline" id="Alpha_compositing:37">
 <semantics>
  <mrow>
   <mrow>
    <mi>d</mi>
    <mi>s</mi>
    <msub>
     <mi>t</mi>
     <mi>A</mi>
    </msub>
   </mrow>
   <mo>=</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>d</ci>
     <ci>s</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>t</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   dst_{A}=1
  </annotation>
 </semantics>
</math>

, and if you enter it to the upper equation:</p>

<p>

<math display="block" id="Alpha_compositing:38">
 <semantics>
  <mrow>
   <mo>{</mo>
   <mtable displaystyle="true">
    <mtr>
     <mtd columnalign="left">
      <mrow>
       <msub>
        <mi>out</mi>
        <mi>A</mi>
       </msub>
       <mo>=</mo>
       <mn>1</mn>
      </mrow>
     </mtd>
     <mtd></mtd>
    </mtr>
    <mtr>
     <mtd columnalign="left">
      <mrow>
       <msub>
        <mi>out</mi>
        <mrow>
         <mi>R</mi>
         <mi>G</mi>
         <mi>B</mi>
        </mrow>
       </msub>
       <mo>=</mo>
       <mrow>
        <mrow>
         <msub>
          <mi>src</mi>
          <mrow>
           <mi>R</mi>
           <mi>G</mi>
           <mi>B</mi>
          </mrow>
         </msub>
         <msub>
          <mi>src</mi>
          <mi>A</mi>
         </msub>
        </mrow>
        <mo>+</mo>
        <mrow>
         <msub>
          <mi>dst</mi>
          <mrow>
           <mi>R</mi>
           <mi>G</mi>
           <mi>B</mi>
          </mrow>
         </msub>
         <mrow>
          <mo stretchy="false">(</mo>
          <mrow>
           <mn>1</mn>
           <mo>-</mo>
           <msub>
            <mi>src</mi>
            <mi>A</mi>
           </msub>
          </mrow>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
       </mrow>
      </mrow>
     </mtd>
     <mtd></mtd>
    </mtr>
   </mtable>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">cases</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>out</ci>
      <ci>A</ci>
     </apply>
     <cn type="integer">1</cn>
    </apply>
    <mtext>otherwise</mtext>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>out</ci>
      <apply>
       <times></times>
       <ci>R</ci>
       <ci>G</ci>
       <ci>B</ci>
      </apply>
     </apply>
     <apply>
      <plus></plus>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>src</ci>
        <apply>
         <times></times>
         <ci>R</ci>
         <ci>G</ci>
         <ci>B</ci>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>src</ci>
        <ci>A</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>dst</ci>
        <apply>
         <times></times>
         <ci>R</ci>
         <ci>G</ci>
         <ci>B</ci>
        </apply>
       </apply>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>src</ci>
         <ci>A</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <mtext>otherwise</mtext>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{cases}\mathrm{out}_{A}=1\\
\mathrm{out}_{RGB}=\mathrm{src}_{RGB}\mathrm{src}_{A}+\mathrm{dst}_{RGB}(1-%
\mathrm{src}_{A})\end{cases}
  </annotation>
 </semantics>
</math>

</p>

<p>The alpha component may be used to blend to <a class="uri" href="red" title="wikilink">red</a>, <a class="uri" href="green" title="wikilink">green</a> and <a class="uri" href="blue" title="wikilink">blue</a> components equally, as in <a class="uri" href="32-bit" title="wikilink">32-bit</a> <a href="RGBA_color_space" title="wikilink">RGBA</a>, or, alternatively, there may be three alpha values specified corresponding to each of the <a href="primary_color" title="wikilink">primary colors</a> for <a href="spectral_color" title="wikilink">spectral color</a> <a href="filter_(optics)" title="wikilink">filtering</a>.</p>

<p>If pre-multiplied alpha is used, the above equations are simplified to:</p>

<p>

<math display="block" id="Alpha_compositing:39">
 <semantics>
  <mrow>
   <mo>{</mo>
   <mtable displaystyle="true">
    <mtr>
     <mtd columnalign="left">
      <mrow>
       <msub>
        <mi>out</mi>
        <mi>A</mi>
       </msub>
       <mo>=</mo>
       <mrow>
        <msub>
         <mi>src</mi>
         <mi>A</mi>
        </msub>
        <mo>+</mo>
        <mrow>
         <msub>
          <mi>dst</mi>
          <mi>A</mi>
         </msub>
         <mrow>
          <mo stretchy="false">(</mo>
          <mrow>
           <mn>1</mn>
           <mo>-</mo>
           <msub>
            <mi>src</mi>
            <mi>A</mi>
           </msub>
          </mrow>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
       </mrow>
      </mrow>
     </mtd>
     <mtd></mtd>
    </mtr>
    <mtr>
     <mtd columnalign="left">
      <mrow>
       <msub>
        <mi>out</mi>
        <mrow>
         <mi>R</mi>
         <mi>G</mi>
         <mi>B</mi>
        </mrow>
       </msub>
       <mo>=</mo>
       <mrow>
        <msub>
         <mi>src</mi>
         <mrow>
          <mi>R</mi>
          <mi>G</mi>
          <mi>B</mi>
         </mrow>
        </msub>
        <mo>+</mo>
        <mrow>
         <msub>
          <mi>dst</mi>
          <mrow>
           <mi>R</mi>
           <mi>G</mi>
           <mi>B</mi>
          </mrow>
         </msub>
         <mrow>
          <mo>(</mo>
          <mrow>
           <mn>1</mn>
           <mo>-</mo>
           <msub>
            <mi>src</mi>
            <mi>A</mi>
           </msub>
          </mrow>
          <mo>)</mo>
         </mrow>
        </mrow>
       </mrow>
      </mrow>
     </mtd>
     <mtd></mtd>
    </mtr>
   </mtable>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">cases</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>out</ci>
      <ci>A</ci>
     </apply>
     <apply>
      <plus></plus>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>src</ci>
       <ci>A</ci>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>dst</ci>
        <ci>A</ci>
       </apply>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>src</ci>
         <ci>A</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <mtext>otherwise</mtext>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>out</ci>
      <apply>
       <times></times>
       <ci>R</ci>
       <ci>G</ci>
       <ci>B</ci>
      </apply>
     </apply>
     <apply>
      <plus></plus>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>src</ci>
       <apply>
        <times></times>
        <ci>R</ci>
        <ci>G</ci>
        <ci>B</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>dst</ci>
        <apply>
         <times></times>
         <ci>R</ci>
         <ci>G</ci>
         <ci>B</ci>
        </apply>
       </apply>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>src</ci>
         <ci>A</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <mtext>otherwise</mtext>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{cases}\mathrm{out}_{A}=\mathrm{src}_{A}+\mathrm{dst}_{A}(1-\mathrm{src}%
_{A})\\
\mathrm{out}_{RGB}=\mathrm{src}_{RGB}+\mathrm{dst}_{RGB}\left(1-\mathrm{src}_{%
A}\right)\end{cases}
  </annotation>
 </semantics>
</math>

</p>
<h2 id="other-transparency-methods">Other transparency methods</h2>

<p>Although used for similar purposes, <a href="Palette_(computing)#Transparent_color_in_palettes" title="wikilink">transparent colors</a> and <a href="Mask_(computing)#Image_masks" title="wikilink">image masks</a> do not permit the smooth blending of the superimposed image pixels with those of the background (only whole image pixels or whole background pixels allowed).</p>

<p>A similar effect can be achieved with a 1-bit alpha channel, as found in the 16-bit RGBA <a class="uri" href="Highcolor" title="wikilink">Highcolor</a> mode of the <a href="Truevision_TGA" title="wikilink">Truevision TGA</a> <a href="image_file_format" title="wikilink">image file format</a> and related <a class="uri" href="TARGA" title="wikilink">TARGA</a> and <a class="uri" href="AT-Vista" title="wikilink">AT-Vista</a>/<a class="uri" href="NU-Vista" title="wikilink">NU-Vista</a> display adapters' Highcolor graphic mode. This mode devotes 5 bits for every primary RGB color (<a href="List_of_monochrome_and_RGB_palettes#15-bit_RGB" title="wikilink">15-bit RGB</a>) plus a remaining bit as the "alpha channel".</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="RGBA_color_space" title="wikilink">RGBA color space</a></li>
<li><a href="Digital_compositing" title="wikilink">Digital compositing</a></li>
<li><a href="Transparency_(graphic)" title="wikilink">Transparency (graphic)</a></li>
<li><a href="Palette_(computing)#Transparent_color_in_palettes" title="wikilink">Transparent color in palettes</a></li>
<li><a href="Mask_(computing)#Image_masks" title="wikilink">Image masks</a></li>
<li><a href="Portable_Network_Graphics" title="wikilink">Portable Network Graphics</a></li>
<li><a href="Truevision_TGA" title="wikilink">Truevision TGA</a></li>
<li><a href="Magic_Pink" title="wikilink">Magic Pink</a></li>
<li><a href="Texture_splatting" title="wikilink">Texture splatting</a></li>
<li><a href="Alpha_to_coverage" title="wikilink">Alpha to coverage</a></li>
</ul>
<h2 id="references">References</h2>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://keithp.com/~keithp/porterduff/p253-porter.pdf">Compositing Digital Images - Thomas Porter and Tom Duff (Original Paper)</a></li>
<li><a href="http://www.cs.princeton.edu/courses/archive/fall00/cs426/papers/smith95a.pdf">Image Compositing Fundamentals</a></li>
<li><a href="http://www.svgopen.org/2005/papers/abstractsvgopen/">Understand Compositing and Color extensions in SVG 1.2 in 30 minutes!</a></li>
<li><a href="http://dvd-hq.info/alpha_matting.php">Alpha Matting and Premultiplication</a></li>
</ul>

<p>"</p>

<p><a href="Category:Computer_graphics_algorithms" title="wikilink">Category:Computer graphics algorithms</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2"><a class="uri" href="http://home.comcast.net/~tom_forsyth/blog.wiki.html#">http://home.comcast.net/~tom_forsyth/blog.wiki.html#</a><a href="Premultiplied_alpha" title="wikilink">Premultiplied alpha</a><a href="#fnref2">↩</a></li>
<li id="fn3"><a href="#fnref3">↩</a></li>
</ol>
</section>
</body>
</html>
