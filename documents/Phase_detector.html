<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="323">Phase detector</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Phase detector</h1>
<hr/>
<figure><b>(Figure)</b>
<figcaption> Four phase detectors. Signal flow is from left to right. In the upper left is a <a href="Gilbert_cell" title="wikilink">Gilbert cell</a>, which works well for <a href="sine_wave" title="wikilink">sine waves</a> and <a href="square_wave" title="wikilink">square waves</a>, but less well for pulses. In the case of square waves it acts as an XOR gate, which can also be made from NAND gates. On the middle left are two phase detectors: adding feedback and removing one NAND gate produces a time frequency detector. The delay line avoids a dead band. On the right is a charge pump with a filter at its output.</figcaption>
</figure>

<p>A <strong>phase detector</strong> or <strong>phase comparator</strong> is a <a href="frequency_mixer" title="wikilink">frequency mixer</a>, <a href="analog_multiplier" title="wikilink">analog multiplier</a> or <a href="Digital_logic" title="wikilink">logic</a> circuit that generates a voltage signal which represents the difference in phase between two signal inputs. It is an essential element of the <a href="phase-locked_loop" title="wikilink">phase-locked loop</a> (PLL).</p>

<p>Detecting phase difference is very important in many applications, such as <a href="electric_motor" title="wikilink">motor</a> control, <a class="uri" href="radar" title="wikilink">radar</a> and <a class="uri" href="telecommunication" title="wikilink">telecommunication</a> systems, <a href="Servomechanism" title="wikilink">servo</a> mechanisms, and <a href="demodulator" title="wikilink">demodulators</a>.</p>
<h2 id="types">Types</h2>

<p>Phase detectors for <a href="phase-locked_loop" title="wikilink">phase-locked loop</a> circuits may be classified in two types.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> A Type I detector is designed to be driven by analog signals or square-wave digital signals and produces an output pulse at the difference frequency. The Type I detector always produces an output waveform, which must be filtered to control the phase-locked loop <a href="voltage-controlled_oscillator" title="wikilink">voltage-controlled oscillator</a> (VCO). A type II detector is sensitive only to the relative timing of the edges of the input and reference pulses, and produces a constant output proportional to phase difference when both signals are at the same frequency. This output will tend not to produce ripple in the control voltage of the VCO.</p>
<h3 id="analog-phase-detector">Analog phase detector</h3>

<p>The phase detector needs to compute the phase difference of its two input signals. Let α be the phase of the first input and β be the phase of the second. The actual input signals to the phase detector, however, are not α and β, but rather sinusoids such as sin(α) and cos(β). In general, computing the phase difference would involve computing the arcsine and arccosine of each normalized input (to get an ever increasing phase) and doing a subtraction. Such an analog calculation is difficult. Fortunately, the calculation can be simplified by using some approximations.</p>

<p>Assume that the phase differences will be small (much less than 1 radian, for example). The <a href="small-angle_approximation" title="wikilink">small-angle approximation</a> for the sine function and the <a href="List_of_trigonometric_identities#Product-to-sum_and_sum-to-product_identities" title="wikilink">sine angle addition formula</a> yield:</p>

<p>

<math display="block" id="Phase_detector:0">
 <semantics>
  <mrow>
   <mrow>
    <mi>α</mi>
    <mo>-</mo>
    <mi>β</mi>
   </mrow>
   <mo>≈</mo>
   <mrow>
    <mi>sin</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>α</mi>
      <mo>-</mo>
      <mi>β</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mrow>
      <mi>sin</mi>
      <mi>α</mi>
     </mrow>
     <mrow>
      <mi>cos</mi>
      <mi>β</mi>
     </mrow>
    </mrow>
    <mo>-</mo>
    <mrow>
     <mrow>
      <mi>sin</mi>
      <mi>β</mi>
     </mrow>
     <mrow>
      <mi>cos</mi>
      <mi>α</mi>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <approx></approx>
     <apply>
      <minus></minus>
      <ci>α</ci>
      <ci>β</ci>
     </apply>
     <apply>
      <sin></sin>
      <apply>
       <minus></minus>
       <ci>α</ci>
       <ci>β</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <minus></minus>
      <apply>
       <times></times>
       <apply>
        <sin></sin>
        <ci>α</ci>
       </apply>
       <apply>
        <cos></cos>
        <ci>β</ci>
       </apply>
      </apply>
      <apply>
       <times></times>
       <apply>
        <sin></sin>
        <ci>β</ci>
       </apply>
       <apply>
        <cos></cos>
        <ci>α</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \alpha-\beta\approx\sin(\alpha-\beta)=\sin\alpha\cos\beta-\sin\beta\cos\alpha
  </annotation>
 </semantics>
</math>

</p>

<p>The expression suggests a quadrature phase detector can be made by summing the outputs of two multipliers. The quadrature signals may be formed with phase shift networks. Two common implementations for multipliers are the <strong>double balanced diode mixer</strong> (diode ring) and the <strong>four-quadrant multiplier</strong> (Gilbert cell).</p>

<p>Instead of using two multipliers, a more common phase detector uses a single multiplier and a different trigonometric identity:</p>

<p>

<math display="block" id="Phase_detector:1">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>sin</mi>
     <mi>α</mi>
    </mrow>
    <mrow>
     <mi>cos</mi>
     <mi>β</mi>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mfrac>
     <mrow>
      <mi>sin</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mi>α</mi>
        <mo>-</mo>
        <mi>β</mi>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mn>2</mn>
    </mfrac>
    <mo>+</mo>
    <mfrac>
     <mrow>
      <mi>sin</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mi>α</mi>
        <mo>+</mo>
        <mi>β</mi>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mn>2</mn>
    </mfrac>
   </mrow>
   <mo>≈</mo>
   <mrow>
    <mfrac>
     <mrow>
      <mi>α</mi>
      <mo>-</mo>
      <mi>β</mi>
     </mrow>
     <mn>2</mn>
    </mfrac>
    <mo>+</mo>
    <mfrac>
     <mrow>
      <mi>sin</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mi>α</mi>
        <mo>+</mo>
        <mi>β</mi>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mn>2</mn>
    </mfrac>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <times></times>
      <apply>
       <sin></sin>
       <ci>α</ci>
      </apply>
      <apply>
       <cos></cos>
       <ci>β</ci>
      </apply>
     </apply>
     <apply>
      <plus></plus>
      <apply>
       <divide></divide>
       <apply>
        <sin></sin>
        <apply>
         <minus></minus>
         <ci>α</ci>
         <ci>β</ci>
        </apply>
       </apply>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <divide></divide>
       <apply>
        <sin></sin>
        <apply>
         <plus></plus>
         <ci>α</ci>
         <ci>β</ci>
        </apply>
       </apply>
       <cn type="integer">2</cn>
      </apply>
     </apply>
    </apply>
    <apply>
     <approx></approx>
     <share href="#.cmml">
     </share>
     <apply>
      <plus></plus>
      <apply>
       <divide></divide>
       <apply>
        <minus></minus>
        <ci>α</ci>
        <ci>β</ci>
       </apply>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <divide></divide>
       <apply>
        <sin></sin>
        <apply>
         <plus></plus>
         <ci>α</ci>
         <ci>β</ci>
        </apply>
       </apply>
       <cn type="integer">2</cn>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sin\alpha\cos\beta={\sin(\alpha-\beta)\over 2}+{\sin(\alpha+\beta)\over 2}%
\approx{\alpha-\beta\over 2}+{\sin(\alpha+\beta)\over 2}
  </annotation>
 </semantics>
</math>

 The first term provides the desired phase difference. The second term is a sinusoid at twice the reference frequency, so it can be filtered out. In the case of general waveforms the phase detector output is described with <a href="phase_detector_characteristic" title="wikilink">phase detector characteristic</a></p>

<p>A mixer-based detector (e.g., a <a href="Schottky_diode" title="wikilink">Schottky diode</a>-based double-balanced mixer) provides "the ultimate in phase noise floor performance" and "in system sensitivity." since it does not create finite pulse widths at the phase detector output.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> Another advantage of a mixer-based PD is its relative simplicity.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> Both the quadrature and simple multiplier phase detectors have an output that depends on the input amplitudes as well as the phase difference. In practice, the input amplitudes are normalized.</p>
<h3 id="digital-phase-detector">Digital phase detector</h3>
<figure><b>(Figure)</b>
<figcaption>An Example CMOS Digital Phase Frequency Detector (Transistor Variety). Inputs are R and V while the outputs UP and DN feed to a charge pump.</figcaption>
</figure>

<p>A phase detector suitable for <a href="square_wave" title="wikilink">square wave</a> signals can be made from an <a href="XOR" title="wikilink">exclusive-OR</a> (XOR) <a href="logic_gate" title="wikilink">logic gate</a>. When the two signals being compared are completely in-phase, the XOR gate's output will have a constant level of zero. When the two signals differ in phase by 1°, the XOR gate's output will be high for 1/180th of each cycle — the fraction of a cycle during which the two signals differ in value. When the signals differ by 180° — that is, one signal is high when the other is low, and vice versa — the XOR gate's output remains high throughout each cycle.</p>

<p>The XOR detector compares well to the analog mixer in that it locks near a 90° phase difference and has a square-wave output at twice the reference frequency. The square-wave changes duty-cycle in proportion to the phase difference resulting. Applying the XOR gate's output to a low-pass filter results in an analog voltage that is proportional to the phase difference between the two signals. It requires inputs that are symmetrical square waves, or nearly so. The remainder of its characteristics are very similar to the analog mixer for capture range, lock time, reference spurious and low-pass filter requirements.</p>

<p>Digital phase detectors can also be based on a <a href="sample_and_hold" title="wikilink">sample and hold</a> circuit, a <a href="charge_pump" title="wikilink">charge pump</a>, or a logic circuit consisting of <a href="Flip-flop_(electronics)" title="wikilink">flip-flops</a> (see figure (Where?)). When a phase detector that's based on logic gates is used in a PLL, it can quickly force the VCO to synchronize with an input signal, even when the frequency of the input signal differs substantially from the initial frequency of the VCO. Such phase detectors also have other desirable properties, such as better accuracy when there are only small phase differences between the two signals being compared. This is because a digital phase detector has a nearly infinite pull-in range in comparison to an XOR detector.</p>
<h3 id="phase-frequency-detector">Phase-frequency detector</h3>

<p>A <a href="Phase_Frequency_Detector" title="wikilink">phase-frequency detector</a> is an <a class="uri" href="asynchronous" title="wikilink">asynchronous</a> <a href="sequential_logic" title="wikilink">sequential logic</a> circuit originally made of four flip-flops (i.e., the phase-frequency detectors found in both the RCA CD4046 and the motorola MC4344 <a href="integrated_circuit" title="wikilink">ICs</a> introduced in the 1970s). The logic determines which of the two signals has a zero-crossing earlier or more often. When used in a PLL application, lock can be achieved even when it is off frequency and is known as a <em><a href="Phase_Frequency_Detector" title="wikilink">Phase Frequency Detector</a></em>. Such a detector has the advantage of producing an output even when the two signals being compared differ not only in phase but in frequency. A phase frequency detector prevents a "false lock" condition in PLL applications, in which the PLL synchronizes with the wrong phase of the input signal or with the wrong frequency (e.g., a harmonic of the input signal).<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></p>

<p>A <strong>bang-bang</strong> charge pump phase detector supplies current pulses with fixed total charge, either positive or negative, to the capacitor acting as an <a class="uri" href="integrator" title="wikilink">integrator</a>. A phase detector for a bang-bang charge pump must always have a <strong>dead band</strong> where the phases of inputs are close enough that the detector fires either both or neither of the charge pumps, for no total effect. Bang-bang phase detectors are simple, but are associated with significant minimum peak-to-peak <a class="uri" href="jitter" title="wikilink">jitter</a>, because of drift within the dead band.</p>

<p>In 1976 it was shown that by using a three-state phase detector configuration (using only two <a href="Flip-flop_(electronics)" title="wikilink">flip-flops</a>) instead of the original RCA/Motorola twelve-state configurations, this problem could be elegantly overcome. For other types of phase-frequency detectors other, though possibly less-elegant, solutions exist to the dead zone phenomenon.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> Other solutions are necessary since the three-state phase-frequency detector does not work for certain applications involving randomized signal degradation, which can be found on the inputs to some signal regeneration systems (e.g., <a href="clock_recovery" title="wikilink">clock recovery</a> designs).<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a></p>

<p>A <strong>proportional</strong> phase detector employs a charge pump that supplies charge amounts in proportion to the phase error detected. Some have dead bands and some do not. Specifically, some designs produce both "up" and "down" control pulses even when the phase difference is zero. These pulses are small, nominally the same duration, and cause the charge pump to produce equal-charge positive and negative current pulses when the phase is perfectly matched. Phase detectors with this kind of control system don't exhibit a dead band and typically have lower minimum peak-to-peak jitter when used in PLLs.</p>

<p>In PLL applications it is frequently required to know when the loop is out of lock. The more complex digital phase-frequency detectors usually have an output that allows a reliable indication of an out of lock condition.</p>
<h2 id="electronic-phase-detector">Electronic phase detector</h2>

<p>Some signal processing techniques such as those used in <a class="uri" href="radar" title="wikilink">radar</a> may require both the amplitude and the phase of a signal, to recover all the information encoded in that signal. One technique is to feed an amplitude-limited signal into one port of a <a href="product_detector" title="wikilink">product detector</a> and a reference signal into the other port; the output of the detector will represent the phase difference between the signals.</p>
<h2 id="optical-phase-detectors">Optical phase detectors</h2>

<p>Phase detectors are also known in <a class="uri" href="optics" title="wikilink">optics</a> as <a href="List_of_types_of_interferometers" title="wikilink">interferometers</a>. For pulsed (<a href="amplitude_modulated" title="wikilink">amplitude modulated</a>) light, it is said to measure the phase between the carriers. It is also possible to measure the delay between the envelopes of two short optical pulses by means of <a href="cross_correlation" title="wikilink">cross correlation</a> in a <a href="nonlinear_optics" title="wikilink">nonlinear crystal</a>. And it is possible to measure the <a href="Frequency_comb" title="wikilink">phase between the envelope and the carrier of an optical pulse</a>, by sending a pulse into an <a href="Nonlinear_optics" title="wikilink">nonlinear crystal</a>. There the spectrum gets wider and at the edges the shape depends significantly on the phase.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Carrier_recovery" title="wikilink">Carrier recovery</a></li>
<li><a href="Differential_amplifier" title="wikilink">Differential amplifier</a></li>
</ul>
<h2 id="references">References</h2>
<ul>
<li></li>
<li></li>
</ul>
<h2 id="further-reading">Further reading</h2>
<ul>
<li></li>
</ul>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://www.eie.polyu.edu.hk/~ensurya/lect_notes/commun_cir/Ch8/Chapter8.htm#2-lawMixer">Chapter 8 Modulators and Demodulators</a></li>
<li><a href="http://www.maxim-ic.com/appnotes.cfm/an_pk/1130">Phase-Lock Loop Applications Using the MAX9382</a></li>
<li><a href="http://www.radio-electronics.com/info/rf-technology-design/pll-synthesizers/phase-locked-loop-detector.php">Phase-Lock Loop Phase Detectors</a></li>
</ul>

<p>"</p>

<p><a href="Category:Electronic_circuits" title="wikilink">Category:Electronic circuits</a> <a href="Category:Communication_circuits" title="wikilink">Category:Communication circuits</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">Paul Horowitz and Winfield Hill, ''The Art of Electronics 2nd Ed. '' Cambridge University Press, Cambridge, 1989 ISBN 0-521-37095-7 pg. 644<a href="#fnref1">↩</a></li>
<li id="fn2"></li>
<li id="fn3"><a href="#fnref3">↩</a></li>
<li id="fn4"></li>
<li id="fn5"><a href="#fnref5">↩</a></li>
<li id="fn6"><a href="#fnref6">↩</a></li>
</ol>
</section>
</body>
</html>
