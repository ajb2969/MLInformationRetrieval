<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1820">Sequential probability ratio test</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Sequential probability ratio test</h1>
<hr/>

<p>The <strong>sequential probability ratio test</strong> (SPRT) is a specific <a href="Sequential_analysis" title="wikilink">sequential hypothesis test</a>, developed by <a href="Abraham_Wald" title="wikilink">Abraham Wald</a>.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> <a href="Neyman-Pearson_lemma" title="wikilink">Neyman and Pearson's 1933 result</a> inspired Wald to reformulate it as a sequential analysis problem. The Neyman-Pearson lemma, by contrast, offers a <a href="rule_of_thumb" title="wikilink">rule of thumb</a> for when all the data is collected (and its likelihood ratio known).</p>

<p>While originally developed for use in <a href="quality_control" title="wikilink">quality control</a> studies in the realm of manufacturing, SPRT has been formulated for use in the computerized testing of human examinees as a termination criterion.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a><a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a><a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></p>
<h2 id="theory">Theory</h2>

<p>As in classical <a href="hypothesis_testing" title="wikilink">hypothesis testing</a>, SPRT starts with a pair of hypotheses, say 

<math display="inline" id="Sequential_probability_ratio_test:0">
 <semantics>
  <msub>
   <mi>H</mi>
   <mn>0</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>H</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   H_{0}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Sequential_probability_ratio_test:1">
 <semantics>
  <msub>
   <mi>H</mi>
   <mn>1</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>H</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   H_{1}
  </annotation>
 </semantics>
</math>

 for the <a href="null_hypothesis" title="wikilink">null hypothesis</a> and <a href="alternative_hypothesis" title="wikilink">alternative hypothesis</a> respectively. They must be specified as follows:</p>

<p>

<math display="block" id="Sequential_probability_ratio_test:2">
 <semantics>
  <mrow>
   <msub>
    <mi>H</mi>
    <mn>0</mn>
   </msub>
   <mo>:</mo>
   <mrow>
    <mi>p</mi>
    <mo>=</mo>
    <msub>
     <mi>p</mi>
     <mn>0</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>H</ci>
     <cn type="integer">0</cn>
    </apply>
    <apply>
     <eq></eq>
     <ci>p</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   H_{0}:p=p_{0}
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Sequential_probability_ratio_test:3">
 <semantics>
  <mrow>
   <msub>
    <mi>H</mi>
    <mn>1</mn>
   </msub>
   <mo>:</mo>
   <mrow>
    <mi>p</mi>
    <mo>=</mo>
    <msub>
     <mi>p</mi>
     <mn>1</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>H</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <eq></eq>
     <ci>p</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <cn type="integer">1</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   H_{1}:p=p_{1}
  </annotation>
 </semantics>
</math>

</p>

<p>The next step is calculate the cumulative sum of the log-<a href="likelihood-ratio_test" title="wikilink">likelihood ratio</a>, 

<math display="inline" id="Sequential_probability_ratio_test:4">
 <semantics>
  <mrow>
   <mi>log</mi>
   <msub>
    <mi mathvariant="normal">Λ</mi>
    <mi>i</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <log></log>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>normal-Λ</ci>
     <ci>i</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \log\Lambda_{i}
  </annotation>
 </semantics>
</math>

, as new data arrive: with 

<math display="inline" id="Sequential_probability_ratio_test:5">
 <semantics>
  <mrow>
   <msub>
    <mi>S</mi>
    <mn>0</mn>
   </msub>
   <mo>=</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>S</ci>
     <cn type="integer">0</cn>
    </apply>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{0}=0
  </annotation>
 </semantics>
</math>

, then, for i=1,2,...,</p>

<p>

<math display="block" id="Sequential_probability_ratio_test:6">
 <semantics>
  <mrow>
   <msub>
    <mi>S</mi>
    <mi>i</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>S</mi>
     <mrow>
      <mi>i</mi>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
    </msub>
    <mo>+</mo>
    <mrow>
     <mi>log</mi>
     <msub>
      <mi mathvariant="normal">Λ</mi>
      <mi>i</mi>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>S</ci>
     <ci>i</ci>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>S</ci>
      <apply>
       <minus></minus>
       <ci>i</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <apply>
      <log></log>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>normal-Λ</ci>
       <ci>i</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{i}=S_{i-1}+\log\Lambda_{i}
  </annotation>
 </semantics>
</math>

</p>

<p>The <a href="stopping_rule" title="wikilink">stopping rule</a> is a simple thresholding scheme:</p>
<ul>
<li>

<math display="inline" id="Sequential_probability_ratio_test:7">
 <semantics>
  <mrow>
   <mi>a</mi>
   <mo><</mo>
   <msub>
    <mi>S</mi>
    <mi>i</mi>
   </msub>
   <mo><</mo>
   <mi>b</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <lt></lt>
     <ci>a</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>S</ci>
      <ci>i</ci>
     </apply>
    </apply>
    <apply>
     <lt></lt>
     <share href="#.cmml">
     </share>
     <ci>b</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a<S_{i}<b
  </annotation>
 </semantics>
</math>

: continue monitoring (<em>critical inequality</em>)</li>
<li>

<math display="inline" id="Sequential_probability_ratio_test:8">
 <semantics>
  <mrow>
   <msub>
    <mi>S</mi>
    <mi>i</mi>
   </msub>
   <mo>≥</mo>
   <mi>b</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <geq></geq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>S</ci>
     <ci>i</ci>
    </apply>
    <ci>b</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{i}\geq b
  </annotation>
 </semantics>
</math>

: Accept 

<math display="inline" id="Sequential_probability_ratio_test:9">
 <semantics>
  <msub>
   <mi>H</mi>
   <mn>1</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>H</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   H_{1}
  </annotation>
 </semantics>
</math>

</li>
<li>

<math display="inline" id="Sequential_probability_ratio_test:10">
 <semantics>
  <mrow>
   <msub>
    <mi>S</mi>
    <mi>i</mi>
   </msub>
   <mo>≤</mo>
   <mi>a</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <leq></leq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>S</ci>
     <ci>i</ci>
    </apply>
    <ci>a</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{i}\leq a
  </annotation>
 </semantics>
</math>

: Accept 

<math display="inline" id="Sequential_probability_ratio_test:11">
 <semantics>
  <msub>
   <mi>H</mi>
   <mn>0</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>H</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   H_{0}
  </annotation>
 </semantics>
</math>

</li>
</ul>

<p>where a and b (

<math display="inline" id="Sequential_probability_ratio_test:12">
 <semantics>
  <mi>β</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>β</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \beta
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Sequential_probability_ratio_test:13">
 <semantics>
  <mrow>
   <mi>a</mi>
   <mo>≈</mo>
   <mrow>
    <mi>log</mi>
    <mfrac>
     <mi>β</mi>
     <mrow>
      <mn>1</mn>
      <mo>-</mo>
      <mi>α</mi>
     </mrow>
    </mfrac>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <approx></approx>
    <ci>a</ci>
    <apply>
     <log></log>
     <apply>
      <divide></divide>
      <ci>β</ci>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
       <ci>α</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a\approx\log\frac{\beta}{1-\alpha}
  </annotation>
 </semantics>
</math>

. They may be chosen as follows:</p>

<p>

<math display="inline" id="Sequential_probability_ratio_test:14">
 <semantics>
  <mrow>
   <mi>b</mi>
   <mo>≈</mo>
   <mrow>
    <mi>log</mi>
    <mfrac>
     <mrow>
      <mn>1</mn>
      <mo>-</mo>
      <mi>β</mi>
     </mrow>
     <mi>α</mi>
    </mfrac>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <approx></approx>
    <ci>b</ci>
    <apply>
     <log></log>
     <apply>
      <divide></divide>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
       <ci>β</ci>
      </apply>
      <ci>α</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   b\approx\log\frac{1-\beta}{\alpha}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Sequential_probability_ratio_test:15">
 <semantics>
  <mi>α</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>α</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \alpha
  </annotation>
 </semantics>
</math>

</p>

<p>In other words, 

<math display="inline" id="Sequential_probability_ratio_test:16">
 <semantics>
  <mi>β</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>β</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \beta
  </annotation>
 </semantics>
</math>

 and 

<math display="block" id="Sequential_probability_ratio_test:17">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mi>f</mi>
      <mi>θ</mi>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>x</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mrow>
      <msup>
       <mi>θ</mi>
       <mrow>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </msup>
      <mrow>
       <mi>exp</mi>
       <mrow>
        <mo>(</mo>
        <mrow>
         <mo>-</mo>
         <mrow>
          <mi>x</mi>
          <mo>/</mo>
          <mi>θ</mi>
         </mrow>
        </mrow>
        <mo>)</mo>
       </mrow>
      </mrow>
     </mrow>
     <mo>,</mo>
     <mi>x</mi>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>θ</mi>
    <mo>></mo>
    <mn>0</mn>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>f</ci>
       <ci>θ</ci>
      </apply>
      <ci>x</ci>
     </apply>
     <list>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>θ</ci>
        <apply>
         <minus></minus>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <apply>
        <exp></exp>
        <apply>
         <minus></minus>
         <apply>
          <divide></divide>
          <ci>x</ci>
          <ci>θ</ci>
         </apply>
        </apply>
       </apply>
      </apply>
      <ci>x</ci>
     </list>
    </apply>
    <apply>
     <gt></gt>
     <ci>θ</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{\theta}(x)=\theta^{-1}\exp\left(-x/\theta\right),x,\theta>0
  </annotation>
 </semantics>
</math>

 must be decided beforehand in order to set the thresholds appropriately. The numerical value will depend on the application. The reason for using approximation signs is that, in the discrete case, the signal may cross the threshold between samples. Thus, depending on the penalty of making an error and the <a href="sampling_frequency" title="wikilink">sampling frequency</a>, one might set the thresholds more aggressively. Of course, the exact bounds may be used in the continuous case.</p>
<h2 id="example">Example</h2>

<p>A textbook example is <a href="parameter_estimation" title="wikilink">parameter estimation</a> of a <a href="probability_distribution_function" title="wikilink">probability distribution function</a>. Let us consider the <a href="exponential_distribution" title="wikilink">exponential distribution</a>:</p>

<p>

<math display="inline" id="Sequential_probability_ratio_test:18">
 <semantics>
  <mrow>
   <msub>
    <mi>H</mi>
    <mn>0</mn>
   </msub>
   <mo>:</mo>
   <mrow>
    <mi>θ</mi>
    <mo>=</mo>
    <msub>
     <mi>θ</mi>
     <mn>0</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>H</ci>
     <cn type="integer">0</cn>
    </apply>
    <apply>
     <eq></eq>
     <ci>θ</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>θ</ci>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   H_{0}:\theta=\theta_{0}
  </annotation>
 </semantics>
</math>

</p>

<p>The hypotheses are simply 

<math display="inline" id="Sequential_probability_ratio_test:19">
 <semantics>
  <mrow>
   <msub>
    <mi>H</mi>
    <mn>1</mn>
   </msub>
   <mo>:</mo>
   <mrow>
    <mi>θ</mi>
    <mo>=</mo>
    <msub>
     <mi>θ</mi>
     <mn>1</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>H</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <eq></eq>
     <ci>θ</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>θ</ci>
      <cn type="integer">1</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   H_{1}:\theta=\theta_{1}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Sequential_probability_ratio_test:20">
 <semantics>
  <mrow>
   <msub>
    <mi>θ</mi>
    <mn>1</mn>
   </msub>
   <mo>></mo>
   <msub>
    <mi>θ</mi>
    <mn>0</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <gt></gt>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>θ</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>θ</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \theta_{1}>\theta_{0}
  </annotation>
 </semantics>
</math>

, with 

<math display="block" id="Sequential_probability_ratio_test:21">
 <semantics>
  <mtable displaystyle="true">
   <mtr>
    <mtd columnalign="center">
     <mrow>
      <mrow>
       <mi>log</mi>
       <mi mathvariant="normal">Λ</mi>
      </mrow>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>x</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mtd>
    <mtd columnalign="center">
     <mo>=</mo>
    </mtd>
    <mtd columnalign="center">
     <mrow>
      <mi>log</mi>
      <mrow>
       <mo>[</mo>
       <mstyle displaystyle="false">
        <mfrac>
         <mrow>
          <msubsup>
           <mi>θ</mi>
           <mn>1</mn>
           <mrow>
            <mo>-</mo>
            <mn>1</mn>
           </mrow>
          </msubsup>
          <mrow>
           <mi>exp</mi>
           <mrow>
            <mo>(</mo>
            <mrow>
             <mo>-</mo>
             <mrow>
              <mi>x</mi>
              <mo>/</mo>
              <msub>
               <mi>θ</mi>
               <mn>1</mn>
              </msub>
             </mrow>
            </mrow>
            <mo>)</mo>
           </mrow>
          </mrow>
         </mrow>
         <mrow>
          <msubsup>
           <mi>θ</mi>
           <mn>0</mn>
           <mrow>
            <mo>-</mo>
            <mn>1</mn>
           </mrow>
          </msubsup>
          <mrow>
           <mi>exp</mi>
           <mrow>
            <mo>(</mo>
            <mrow>
             <mo>-</mo>
             <mrow>
              <mi>x</mi>
              <mo>/</mo>
              <msub>
               <mi>θ</mi>
               <mn>0</mn>
              </msub>
             </mrow>
            </mrow>
            <mo>)</mo>
           </mrow>
          </mrow>
         </mrow>
        </mfrac>
       </mstyle>
       <mo>]</mo>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="center">
     <mi></mi>
    </mtd>
    <mtd columnalign="center">
     <mo>=</mo>
    </mtd>
    <mtd columnalign="center">
     <mrow>
      <mi>log</mi>
      <mrow>
       <mo>[</mo>
       <mrow>
        <mstyle displaystyle="false">
         <mfrac>
          <msub>
           <mi>θ</mi>
           <mn>0</mn>
          </msub>
          <msub>
           <mi>θ</mi>
           <mn>1</mn>
          </msub>
         </mfrac>
        </mstyle>
        <mrow>
         <mi>exp</mi>
         <mrow>
          <mo>(</mo>
          <mrow>
           <mrow>
            <mi>x</mi>
            <mo>/</mo>
            <msub>
             <mi>θ</mi>
             <mn>0</mn>
            </msub>
           </mrow>
           <mo>-</mo>
           <mrow>
            <mi>x</mi>
            <mo>/</mo>
            <msub>
             <mi>θ</mi>
             <mn>1</mn>
            </msub>
           </mrow>
          </mrow>
          <mo>)</mo>
         </mrow>
        </mrow>
       </mrow>
       <mo>]</mo>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="center">
     <mi></mi>
    </mtd>
    <mtd columnalign="center">
     <mo>=</mo>
    </mtd>
    <mtd columnalign="center">
     <mrow>
      <mrow>
       <mstyle displaystyle="false">
        <mfrac>
         <mrow>
          <msub>
           <mi>θ</mi>
           <mn>1</mn>
          </msub>
          <mo>-</mo>
          <msub>
           <mi>θ</mi>
           <mn>0</mn>
          </msub>
         </mrow>
         <mrow>
          <msub>
           <mi>θ</mi>
           <mn>0</mn>
          </msub>
          <msub>
           <mi>θ</mi>
           <mn>1</mn>
          </msub>
         </mrow>
        </mfrac>
       </mstyle>
       <mi>x</mi>
      </mrow>
      <mo>-</mo>
      <mrow>
       <mi>log</mi>
       <mstyle displaystyle="false">
        <mfrac>
         <msub>
          <mi>θ</mi>
          <mn>1</mn>
         </msub>
         <msub>
          <mi>θ</mi>
          <mn>0</mn>
         </msub>
        </mfrac>
       </mstyle>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
  </mtable>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <apply>
      <times></times>
      <apply>
       <log></log>
       <ci>normal-Λ</ci>
      </apply>
      <ci>x</ci>
     </apply>
     <eq></eq>
     <apply>
      <log></log>
      <apply>
       <divide></divide>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">1</cn>
         </apply>
         <apply>
          <minus></minus>
          <cn type="integer">1</cn>
         </apply>
        </apply>
        <apply>
         <exp></exp>
         <apply>
          <minus></minus>
          <apply>
           <divide></divide>
           <ci>x</ci>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>θ</ci>
            <cn type="integer">1</cn>
           </apply>
          </apply>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">0</cn>
         </apply>
         <apply>
          <minus></minus>
          <cn type="integer">1</cn>
         </apply>
        </apply>
        <apply>
         <exp></exp>
         <apply>
          <minus></minus>
          <apply>
           <divide></divide>
           <ci>x</ci>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>θ</ci>
            <cn type="integer">0</cn>
           </apply>
          </apply>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
    <matrixrow>
     <csymbol cd="latexml">absent</csymbol>
     <eq></eq>
     <apply>
      <log></log>
      <apply>
       <times></times>
       <apply>
        <divide></divide>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>θ</ci>
         <cn type="integer">0</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>θ</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <apply>
        <exp></exp>
        <apply>
         <minus></minus>
         <apply>
          <divide></divide>
          <ci>x</ci>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>θ</ci>
           <cn type="integer">0</cn>
          </apply>
         </apply>
         <apply>
          <divide></divide>
          <ci>x</ci>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>θ</ci>
           <cn type="integer">1</cn>
          </apply>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
    <matrixrow>
     <csymbol cd="latexml">absent</csymbol>
     <eq></eq>
     <apply>
      <minus></minus>
      <apply>
       <times></times>
       <apply>
        <divide></divide>
        <apply>
         <minus></minus>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">1</cn>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">0</cn>
         </apply>
        </apply>
        <apply>
         <times></times>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">0</cn>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">1</cn>
         </apply>
        </apply>
       </apply>
       <ci>x</ci>
      </apply>
      <apply>
       <log></log>
       <apply>
        <divide></divide>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>θ</ci>
         <cn type="integer">1</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>θ</ci>
         <cn type="integer">0</cn>
        </apply>
       </apply>
      </apply>
     </apply>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{matrix}\log\Lambda(x)&=&\log\left[\frac{\theta_{1}^{-1}\exp\left(-x/%
\theta_{1}\right)}{\theta_{0}^{-1}\exp\left(-x/\theta_{0}\right)}\right]\\
&=&\log\left[\frac{\theta_{0}}{\theta_{1}}\exp\left(x/\theta_{0}-x/\theta_{1}%
\right)\right]\\
&=&\frac{\theta_{1}-\theta_{0}}{\theta_{0}\theta_{1}}x-\log\frac{\theta_{1}}{%
\theta_{0}}\end{matrix}
  </annotation>
 </semantics>
</math>

. Then the log-likelihood function (LLF) for one sample is</p>

<p>

<math display="block" id="Sequential_probability_ratio_test:22">
 <semantics>
  <mrow>
   <msub>
    <mi>S</mi>
    <mi>n</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <munderover>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mn>1</mn>
     </mrow>
     <mi>n</mi>
    </munderover>
    <mrow>
     <mrow>
      <mi>log</mi>
      <mi mathvariant="normal">Λ</mi>
     </mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <msub>
       <mi>x</mi>
       <mi>i</mi>
      </msub>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mfrac>
      <mrow>
       <msub>
        <mi>θ</mi>
        <mn>1</mn>
       </msub>
       <mo>-</mo>
       <msub>
        <mi>θ</mi>
        <mn>0</mn>
       </msub>
      </mrow>
      <mrow>
       <msub>
        <mi>θ</mi>
        <mn>0</mn>
       </msub>
       <msub>
        <mi>θ</mi>
        <mn>1</mn>
       </msub>
      </mrow>
     </mfrac>
     <mrow>
      <munderover>
       <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
       <mrow>
        <mi>i</mi>
        <mo>=</mo>
        <mn>1</mn>
       </mrow>
       <mi>n</mi>
      </munderover>
      <msub>
       <mi>x</mi>
       <mi>i</mi>
      </msub>
     </mrow>
    </mrow>
    <mo>-</mo>
    <mrow>
     <mi>n</mi>
     <mrow>
      <mi>log</mi>
      <mfrac>
       <msub>
        <mi>θ</mi>
        <mn>1</mn>
       </msub>
       <msub>
        <mi>θ</mi>
        <mn>0</mn>
       </msub>
      </mfrac>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>S</ci>
      <ci>n</ci>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>i</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>n</ci>
      </apply>
      <apply>
       <times></times>
       <apply>
        <log></log>
        <ci>normal-Λ</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>x</ci>
        <ci>i</ci>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <minus></minus>
      <apply>
       <times></times>
       <apply>
        <divide></divide>
        <apply>
         <minus></minus>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">1</cn>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">0</cn>
         </apply>
        </apply>
        <apply>
         <times></times>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">0</cn>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">1</cn>
         </apply>
        </apply>
       </apply>
       <apply>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <sum></sum>
          <apply>
           <eq></eq>
           <ci>i</ci>
           <cn type="integer">1</cn>
          </apply>
         </apply>
         <ci>n</ci>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <ci>i</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>n</ci>
       <apply>
        <log></log>
        <apply>
         <divide></divide>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">1</cn>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>θ</ci>
          <cn type="integer">0</cn>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{n}=\sum_{i=1}^{n}\log\Lambda(x_{i})=\frac{\theta_{1}-\theta_{0}}{\theta_{0}%
\theta_{1}}\sum_{i=1}^{n}x_{i}-n\log\frac{\theta_{1}}{\theta_{0}}
  </annotation>
 </semantics>
</math>

</p>

<p>The cumulative sum of the LLFs for all x is</p>

<p>

<math display="inline" id="Sequential_probability_ratio_test:23">
 <semantics>
  <mrow>
   <mi>log</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <msub>
      <mi>θ</mi>
      <mn>1</mn>
     </msub>
     <mo>/</mo>
     <msub>
      <mi>θ</mi>
      <mn>0</mn>
     </msub>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <log></log>
    <apply>
     <divide></divide>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>θ</ci>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>θ</ci>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \log(\theta_{1}/\theta_{0})
  </annotation>
 </semantics>
</math>

</p>

<p>Accordingly, the stopping rule is</p>

<p><span class="LaTeX">$$a&lt;\frac{\theta_1-\theta_0}{\theta_0 \theta_1} \sum_{i=1}^n x_i - n \log \frac{\theta_1}{\theta_0}<b< math="">

After re-arranging we finally find
:<math>a+n \log \frac{\theta_1}{\theta_0} &lt; \frac{\theta_1-\theta_0}{\theta_0 \theta_1} \sum_{i=1}^n x_i &lt; b+n \log \frac{\theta_1}{\theta_0}$$</math></b<></span></p>

<p>The thresholds are simply two <a href="parallel_lines" title="wikilink">parallel lines</a> with <a class="uri" href="slope" title="wikilink">slope</a> <span class="LaTeX">$\log ( \theta_1/\theta_0 )$</span>. Sampling should stop when the sum of the samples makes an excursion outside the <em>continue-sampling region</em>.</p>
<h2 id="applications">Applications</h2>
<h3 id="manufacturing">Manufacturing</h3>

<p>The test is done on the proportion metric, and tests that a variable <em>p</em> is equal to one of two desired points, <em>p<sub>1</sub></em> or <em>p<sub>2</sub></em>. The region between these two points is known as the <em>indifference region</em> (IR). For example, suppose you are performing a quality control study on a factory lot of widgets. Management would like the lot to have 3% or less defective widgets, but 1% or less is the ideal lot that would pass with flying colors. In this example, <em>p<sub>1</sub> = 0.01</em> and <em>p<sub>2</sub> = 0.03</em> and the region between them is the IR because management considers these lots to be marginal and is OK with them being classified either way. Widgets would be sampled one at a time from the lot (sequential analysis) until the test determines, within an acceptable error level, that the lot is ideal or should be rejected.</p>
<h3 id="testing-of-human-examinees">Testing of human examinees</h3>

<p>The SPRT is currently the predominant method of classifying examinees in a variable-length <a href="computerized_classification_test" title="wikilink">computerized classification test</a> (CCT). The two parameters are <em>p<sub>1</sub></em> and <em>p<sub>2</sub></em> are specified by determining a cutscore (threshold) for examinees on the proportion correct metric, and selecting a point above and below that cutscore. For instance, suppose the cutscore is set at 70% for a test. We could select <em>p<sub>1</sub> = 0.65</em> and <em>p<sub>2</sub> = 0.75</em> . The test then evaluates the likelihood that an examinee's true score on that metric is equal to one of those two points. If the examinee is determined to be at 75%, they pass, and they fail if they are determined to be at 65%.</p>

<p>These points are not specified completely arbitrarily. A cutscore should always be set with a legally defensible method, such as a <a href="Standard-setting_study#Item-centered_studies" title="wikilink">modified Angoff procedure</a>. Again, the indifference region represents the region of scores that the test designer is OK with going either way (pass or fail). The upper parameter <em>p<sub>2</sub></em> is conceptually the highest level that the test designer is willing to accept for a Fail (because everyone below it has a good chance of failing), and the lower parameter <em>p<sub>1</sub></em> is the lowest level that the test designer is willing to accept for a pass (because everyone above it has a decent chance of passing). While this definition may seem to be a relatively small burden, consider the <a href="high-stakes_testing" title="wikilink">high-stakes case of a licensing test</a> for medical doctors: at just what point should we consider somebody to be at one of these two levels?</p>

<p>While the SPRT was first applied to testing in the days of <a href="classical_test_theory" title="wikilink">classical test theory</a>, as is applied in the previous paragraph, Reckase (1983) suggested that <a href="item_response_theory" title="wikilink">item response theory</a> be used to determine the <em>p<sub>1</sub></em> and <em>p<sub>2</sub></em> parameters. The cutscore and indifference region are defined on the latent ability (theta) metric, and translated onto the proportion metric for computation. Research on CCT since then has applied this methodology for several reasons:</p>
<ol>
<li>Large item banks tend to be calibrated with IRT</li>
<li>This allows more accurate specification of the parameters</li>
<li>By using the item response function for each item, the parameters are easily allowed to vary between items.</li>
</ol>
<h3 id="detection-of-anomalous-medical-outcomes">Detection of anomalous medical outcomes</h3>

<p><a href="David_Spiegelhalter" title="wikilink">Spiegelhalter</a> et al. <a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> have shown that SPRT can be used to monitor the performance of doctors, surgeons and other medical practitioners in such a way as to give early warning of potentially anomalous results. In their 2003 paper, they showed how it could have helped identify <a href="Harold_Shipman" title="wikilink">Harold Shipman</a> as a murderer well before he was actually identified.</p>
<h2 id="extensions">Extensions</h2>
<h3 id="maxsprt">MaxSPRT</h3>

<p>More recently, in 2011, an extension of the SPRT method called Maximized Sequential Probability Ratio Test (MaxSPRT) <a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a> was introduced. The salient feature of MaxSPRT is the allowance of a composite, one-sided alternative hypothesis, and the introduction of an upper stopping boundary. The method has been used in several medical research studies <a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a></p>
<h2 id="see-also">See also</h2>
<ul>
<li><a class="uri" href="CUSUM" title="wikilink">CUSUM</a></li>
<li><a href="Computerized_classification_test" title="wikilink">Computerized classification test</a></li>
<li><a href="Wald_test" title="wikilink">Wald test</a></li>
<li><a href="Likelihood-ratio_test" title="wikilink">Likelihood-ratio test</a></li>
</ul>
<h2 id="references">References</h2>
<references>
</references>
<ul>
<li></li>
<li>Holger Wilker: <em>Sequential-Statistik in der Praxis</em>, BoD, Norderstedt 2012, ISBN 978-3848232529.</li>
</ul>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://cran.r-project.org/web/packages/SPRT/SPRT.pdf">R Package: Wald's Sequential Probability Ratio Test</a> by [<a class="uri" href="http://onlinemarketr.com">http://onlinemarketr.com</a>: OnlineMarketr.com]</li>
</ul>

<p>"</p>

<p><a href="Category:Statistical_tests" title="wikilink">Category:Statistical tests</a> <a class="uri" href="Category:Psychometrics" title="wikilink">Category:Psychometrics</a> <a href="Category:Sequential_methods" title="wikilink">Category:Sequential methods</a> <a href="Category:Mathematical_psychology" title="wikilink">Category:Mathematical psychology</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2">Ferguson, Richard L. (1969). [<a class="uri" href="http://eric.ed.gov/ERICWebPortal/custom/portlets/recordDetails/detailmini.jsp?_nfpb=true&amp;_&amp;ERICExtSearch;_SearchValue_0=ED034406&amp;ERICExtSearch;_SearchType_0=no&amp;accno">http://eric.ed.gov/ERICWebPortal/custom/portlets/recordDetails/detailmini.jsp?_nfpb=true&amp;_&amp;ERICExtSearch;_SearchValue_0=ED034406&amp;ERICExtSearch;_SearchType_0=no&amp;accno;</a>;=ED034406 The development, implementation, and evaluation of a computer-assisted branched test for a program of individually prescribed instruction]. Unpublished doctoral dissertation, University of Pittsburgh.<a href="#fnref2">↩</a></li>
<li id="fn3">Reckase, M. D. (1983). A procedure for decision making using tailored testing. In D. J. Weiss (Ed.), New horizons in testing: Latent trait theory and computerized adaptive testing (pp. 237-254). New York: Academic Press.<a href="#fnref3">↩</a></li>
<li id="fn4"><a href="#fnref4">↩</a></li>
<li id="fn5"><a href="http://intqhc.oxfordjournals.org/content/15/1/7.full.pdf">Risk-adjusted sequential probability ratio tests: application to Bristol, Shipman and adult cardiac surgery Spiegelhalter, D. et al <em>Int J Qual Health Care</em> vol 15 7-13 (2003)</a><a href="#fnref5">↩</a></li>
<li id="fn6"><a class="uri" href="http://www.tandfonline.com/doi/full/10.1080/07474946.2011.539924">http://www.tandfonline.com/doi/full/10.1080/07474946.2011.539924</a> A Maximized Sequential Probability Ratio Test for Drug and Vaccine Safety Surveillance Kulldorff, M. et al <em>Sequential Analysis: Design Methods and Applications</em> vol 30, issue 1<a href="#fnref6">↩</a></li>
<li id="fn7">2nd to last paragraph of section 1: <a class="uri" href="http://www.tandfonline.com/doi/full/10.1080/07474946.2011.539924">http://www.tandfonline.com/doi/full/10.1080/07474946.2011.539924</a> A Maximized Sequential Probability Ratio Test for Drug and Vaccine Safety Surveillance Kulldorff, M. et al <em>Sequential Analysis: Design Methods and Applications</em> vol 30, issue 1<a href="#fnref7">↩</a></li>
</ol>
</section>
</body>
</html>
