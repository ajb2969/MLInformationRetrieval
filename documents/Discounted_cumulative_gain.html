<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1268">Discounted cumulative gain</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Discounted cumulative gain</h1>
<hr/>

<p><strong>Discounted cumulative gain</strong> (<strong>DCG</strong>) is a measure of ranking quality. In <a href="information_retrieval" title="wikilink">information retrieval</a>, it is often used to measure effectiveness of <a href="World_Wide_Web" title="wikilink">web</a> <a href="search_engine" title="wikilink">search engine</a> <a href="algorithm" title="wikilink">algorithms</a> or related applications. Using a <a href="Relevance_(information_retrieval)" title="wikilink">graded relevance</a> scale of documents in a search engine result set, DCG measures the usefulness, or <em>gain</em>, of a document based on its position in the result list. The gain is accumulated from the top of the result list to the bottom with the gain of each result discounted at lower ranks.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>
<h2 id="overview">Overview</h2>

<p>Two assumptions are made in using DCG and its related measures.</p>
<ol>
<li>Highly relevant documents are more useful when appearing earlier in a search engine result list (have higher ranks)</li>
<li>Highly relevant documents are more useful than marginally relevant documents, which are in turn more useful than irrelevant documents.</li>
</ol>

<p>DCG originates from an earlier, more primitive, measure called Cumulative Gain.</p>
<h3 id="cumulative-gain">Cumulative Gain</h3>

<p>Cumulative Gain (CG) is the predecessor of DCG and does not include the position of a result in the consideration of the usefulness of a result set. In this way, it is the sum of the graded relevance values of all results in a search result list. The CG at a particular rank position 

<math display="inline" id="Discounted_cumulative_gain:0">
 <semantics>
  <mi>p</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>p</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p
  </annotation>
 </semantics>
</math>

 is defined as:</p>

<p>

<math display="block" id="Discounted_cumulative_gain:1">
 <semantics>
  <mrow>
   <msub>
    <mi>CG</mi>
    <mi mathvariant="normal">p</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <munderover>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mn>1</mn>
     </mrow>
     <mi>p</mi>
    </munderover>
    <mrow>
     <mi>r</mi>
     <mi>e</mi>
     <msub>
      <mi>l</mi>
      <mi>i</mi>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>CG</ci>
     <ci>normal-p</ci>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <eq></eq>
        <ci>i</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <ci>p</ci>
     </apply>
     <apply>
      <times></times>
      <ci>r</ci>
      <ci>e</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>l</ci>
       <ci>i</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathrm{CG_{p}}=\sum_{i=1}^{p}rel_{i}
  </annotation>
 </semantics>
</math>

</p>

<p>Where 

<math display="inline" id="Discounted_cumulative_gain:2">
 <semantics>
  <mrow>
   <mi>r</mi>
   <mi>e</mi>
   <msub>
    <mi>l</mi>
    <mi>i</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>r</ci>
    <ci>e</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>l</ci>
     <ci>i</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   rel_{i}
  </annotation>
 </semantics>
</math>

 is the graded relevance of the result at position 

<math display="inline" id="Discounted_cumulative_gain:3">
 <semantics>
  <mi>i</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>i</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   i
  </annotation>
 </semantics>
</math>

.</p>

<p>The value computed with the CG function is unaffected by changes in the ordering of search results. That is, moving a highly relevant document 

<math display="inline" id="Discounted_cumulative_gain:4">
 <semantics>
  <msub>
   <mi>d</mi>
   <mi>i</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>d</ci>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   d_{i}
  </annotation>
 </semantics>
</math>

 above a higher ranked, less relevant, document 

<math display="inline" id="Discounted_cumulative_gain:5">
 <semantics>
  <msub>
   <mi>d</mi>
   <mi>j</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>d</ci>
    <ci>j</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   d_{j}
  </annotation>
 </semantics>
</math>

 does not change the computed value for CG. Based on the two assumptions made above about the usefulness of search results, DCG is used in place of CG for a more accurate measure.</p>
<h3 id="discounted-cumulative-gain">Discounted Cumulative Gain</h3>

<p>The premise of DCG is that highly relevant documents appearing lower in a search result list should be penalized as the graded relevance value is reduced logarithmically proportional to the position of the result. The discounted CG accumulated at a particular rank position 

<math display="inline" id="Discounted_cumulative_gain:6">
 <semantics>
  <mi>p</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>p</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p
  </annotation>
 </semantics>
</math>

 is defined as:<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></p>

<p>

<math display="block" id="Discounted_cumulative_gain:7">
 <semantics>
  <mrow>
   <msub>
    <mi>DCG</mi>
    <mi mathvariant="normal">p</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mi>r</mi>
     <mi>e</mi>
     <msub>
      <mi>l</mi>
      <mn>1</mn>
     </msub>
    </mrow>
    <mo>+</mo>
    <mrow>
     <munderover>
      <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
      <mrow>
       <mi>i</mi>
       <mo>=</mo>
       <mn>2</mn>
      </mrow>
      <mi>p</mi>
     </munderover>
     <mfrac>
      <mrow>
       <mi>r</mi>
       <mi>e</mi>
       <msub>
        <mi>l</mi>
        <mi>i</mi>
       </msub>
      </mrow>
      <mrow>
       <msub>
        <mi>log</mi>
        <mn>2</mn>
       </msub>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>i</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mfrac>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>DCG</ci>
     <ci>normal-p</ci>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <times></times>
      <ci>r</ci>
      <ci>e</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>l</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>i</ci>
         <cn type="integer">2</cn>
        </apply>
       </apply>
       <ci>p</ci>
      </apply>
      <apply>
       <divide></divide>
       <apply>
        <times></times>
        <ci>r</ci>
        <ci>e</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>l</ci>
         <ci>i</ci>
        </apply>
       </apply>
       <apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <log></log>
         <cn type="integer">2</cn>
        </apply>
        <ci>i</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathrm{DCG_{p}}=rel_{1}+\sum_{i=2}^{p}\frac{rel_{i}}{\log_{2}(i)}
  </annotation>
 </semantics>
</math>

</p>

<p>Previously there has not been any theoretically sound justification for using a <a href="logarithm" title="wikilink">logarithmic</a> reduction factor<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> other than the fact that it produces a smooth reduction. But Wang et al. (2013)<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a> give theoretical guarantee for using the logarithmic reduction factor in NDCG. The authors show that for every pair of substantially different ranking functions, the NDCG can decide which one is better in a consistent manner.</p>

<p>An alternative formulation of DCG<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> places stronger emphasis on retrieving relevant documents:</p>

<p>

<math display="block" id="Discounted_cumulative_gain:8">
 <semantics>
  <mrow>
   <msub>
    <mi>DCG</mi>
    <mi mathvariant="normal">p</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <munderover>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mn>1</mn>
     </mrow>
     <mi>p</mi>
    </munderover>
    <mfrac>
     <mrow>
      <msup>
       <mn>2</mn>
       <mrow>
        <mi>r</mi>
        <mi>e</mi>
        <msub>
         <mi>l</mi>
         <mi>i</mi>
        </msub>
       </mrow>
      </msup>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
     <mrow>
      <msub>
       <mi>log</mi>
       <mn>2</mn>
      </msub>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mi>i</mi>
        <mo>+</mo>
        <mn>1</mn>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mfrac>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>DCG</ci>
     <ci>normal-p</ci>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <eq></eq>
        <ci>i</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <ci>p</ci>
     </apply>
     <apply>
      <divide></divide>
      <apply>
       <minus></minus>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <cn type="integer">2</cn>
        <apply>
         <times></times>
         <ci>r</ci>
         <ci>e</ci>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>l</ci>
          <ci>i</ci>
         </apply>
        </apply>
       </apply>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <log></log>
        <cn type="integer">2</cn>
       </apply>
       <apply>
        <plus></plus>
        <ci>i</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathrm{DCG_{p}}=\sum_{i=1}^{p}\frac{2^{rel_{i}}-1}{\log_{2}(i+1)}
  </annotation>
 </semantics>
</math>

</p>

<p>The latter formula is commonly used in industry including major web search companies<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a> and data science competition platform such as Kaggle.<a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a></p>

<p>In Croft, Metzler and Strohman (page 320, 2010), the authors mistakenly claim that these two formulations of DCG are the same when the relevance values of documents are <a href="binary_function" title="wikilink">binary</a>; 

<math display="inline" id="Discounted_cumulative_gain:9">
 <semantics>
  <mrow>
   <mrow>
    <mi>r</mi>
    <mi>e</mi>
    <msub>
     <mi>l</mi>
     <mi>i</mi>
    </msub>
   </mrow>
   <mo>∈</mo>
   <mrow>
    <mo stretchy="false">{</mo>
    <mn>0</mn>
    <mo>,</mo>
    <mn>1</mn>
    <mo stretchy="false">}</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <apply>
     <times></times>
     <ci>r</ci>
     <ci>e</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>l</ci>
      <ci>i</ci>
     </apply>
    </apply>
    <set>
     <cn type="integer">0</cn>
     <cn type="integer">1</cn>
    </set>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   rel_{i}\in\{0,1\}
  </annotation>
 </semantics>
</math>

. To see that they are not the same, let there be one relevant document and that relevant document is at rank 2. The first version of DCG equals 1 / log2(2) = 1. The second version of DCG equals 1 / log2(2+1) = 0.631. The way that the two formulations of DCG are the same for binary judgments is in the way gain in the numerator is calculated. For both formulations of DCG, binary relevance produces gain at rank i of 0 or 1. No matter the number of relevance grades, the two formulations differ in their discount of gain.</p>

<p>Note that Croft et al. (2010) and Burges et al. (2005) present the second DCG with a log of base e, while both versions of DCG above use a log of base 2. When computing NDCG with the second formulation of DCG, the base of the log does not matter, but the base of the log does affect the value of NDCG for the first formulation. Clearly, the base of the log affects the value of DCG in both formulations.</p>
<h3 id="normalized-dcg">Normalized DCG</h3>

<p>Search result lists vary in length depending on the <a href="Web_search_query" title="wikilink">query</a>. Comparing a search engine's performance from one query to the next cannot be consistently achieved using DCG alone, so the cumulative gain at each position for a chosen value of 

<math display="inline" id="Discounted_cumulative_gain:10">
 <semantics>
  <mi>p</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>p</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p
  </annotation>
 </semantics>
</math>

 should be normalized across queries. This is done by sorting documents of a result list by relevance, producing the maximum possible DCG till position 

<math display="inline" id="Discounted_cumulative_gain:11">
 <semantics>
  <mi>p</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>p</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p
  </annotation>
 </semantics>
</math>

, also called Ideal DCG (IDCG) till that position. For a query, the <em>normalized discounted cumulative gain</em>, or nDCG, is computed as:</p>

<p>

<math display="block" id="Discounted_cumulative_gain:12">
 <semantics>
  <mrow>
   <msub>
    <mi>nDCG</mi>
    <mi mathvariant="normal">p</mi>
   </msub>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <mi>D</mi>
     <mi>C</mi>
     <msub>
      <mi>G</mi>
      <mi>p</mi>
     </msub>
    </mrow>
    <mrow>
     <mi>I</mi>
     <mi>D</mi>
     <mi>C</mi>
     <msub>
      <mi>G</mi>
      <mi>p</mi>
     </msub>
    </mrow>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>nDCG</ci>
     <ci>normal-p</ci>
    </apply>
    <apply>
     <divide></divide>
     <apply>
      <times></times>
      <ci>D</ci>
      <ci>C</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>G</ci>
       <ci>p</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>I</ci>
      <ci>D</ci>
      <ci>C</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>G</ci>
       <ci>p</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathrm{nDCG_{p}}=\frac{DCG_{p}}{IDCG_{p}}
  </annotation>
 </semantics>
</math>

</p>

<p>The nDCG values for all queries can be averaged to obtain a measure of the average performance of a search engine's ranking algorithm. Note that in a perfect ranking algorithm, the 

<math display="inline" id="Discounted_cumulative_gain:13">
 <semantics>
  <mrow>
   <mi>D</mi>
   <mi>C</mi>
   <msub>
    <mi>G</mi>
    <mi>p</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>D</ci>
    <ci>C</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>G</ci>
     <ci>p</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   DCG_{p}
  </annotation>
 </semantics>
</math>

 will be the same as the 

<math display="inline" id="Discounted_cumulative_gain:14">
 <semantics>
  <mrow>
   <mi>I</mi>
   <mi>D</mi>
   <mi>C</mi>
   <msub>
    <mi>G</mi>
    <mi>p</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>I</ci>
    <ci>D</ci>
    <ci>C</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>G</ci>
     <ci>p</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   IDCG_{p}
  </annotation>
 </semantics>
</math>

 producing an nDCG of 1.0. All nDCG calculations are then relative values on the interval 0.0 to 1.0 and so are cross-query comparable.</p>

<p>The main difficulty encountered in using nDCG is the unavailability of an ideal ordering of results when only partial <a href="relevance_feedback" title="wikilink">relevance feedback</a> is available.</p>
<h2 id="example">Example</h2>

<p>Presented with a list of documents in response to a search query, an experiment participant is asked to judge the relevance of each document to the query. Each document is to be judged on a scale of 0-3 with 0 meaning irrelevant, 3 meaning completely relevant, and 1 and 2 meaning "somewhere in between". For the documents ordered by the ranking algorithm as</p>

<p>

<math display="block" id="Discounted_cumulative_gain:15">
 <semantics>
  <mrow>
   <msub>
    <mi>D</mi>
    <mn>1</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>D</mi>
    <mn>2</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>D</mi>
    <mn>3</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>D</mi>
    <mn>4</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>D</mi>
    <mn>5</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>D</mi>
    <mn>6</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>D</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>D</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>D</ci>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>D</ci>
     <cn type="integer">4</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>D</ci>
     <cn type="integer">5</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>D</ci>
     <cn type="integer">6</cn>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D_{1},D_{2},D_{3},D_{4},D_{5},D_{6}
  </annotation>
 </semantics>
</math>

</p>

<p>the user provides the following relevance scores:</p>

<p>

<math display="block" id="Discounted_cumulative_gain:16">
 <semantics>
  <mrow>
   <mn>3</mn>
   <mo>,</mo>
   <mn>2</mn>
   <mo>,</mo>
   <mn>3</mn>
   <mo>,</mo>
   <mn>0</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>2</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <cn type="integer">3</cn>
    <cn type="integer">2</cn>
    <cn type="integer">3</cn>
    <cn type="integer">0</cn>
    <cn type="integer">1</cn>
    <cn type="integer">2</cn>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   3,2,3,0,1,2
  </annotation>
 </semantics>
</math>

</p>

<p>That is: document 1 has a relevance of 3, document 2 has a relevance of 2, etc. The Cumulative Gain of this search result listing is:</p>

<p>

<math display="block" id="Discounted_cumulative_gain:17">
 <semantics>
  <mrow>
   <msub>
    <mi>CG</mi>
    <mn>6</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <munderover>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mn>1</mn>
     </mrow>
     <mn>6</mn>
    </munderover>
    <mrow>
     <mi>r</mi>
     <mi>e</mi>
     <msub>
      <mi>l</mi>
      <mi>i</mi>
     </msub>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mn>3</mn>
    <mo>+</mo>
    <mn>2</mn>
    <mo>+</mo>
    <mn>3</mn>
    <mo>+</mo>
    <mn>0</mn>
    <mo>+</mo>
    <mn>1</mn>
    <mo>+</mo>
    <mn>2</mn>
   </mrow>
   <mo>=</mo>
   <mn>11</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>CG</ci>
      <cn type="integer">6</cn>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>i</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <cn type="integer">6</cn>
      </apply>
      <apply>
       <times></times>
       <ci>r</ci>
       <ci>e</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>l</ci>
        <ci>i</ci>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <plus></plus>
      <cn type="integer">3</cn>
      <cn type="integer">2</cn>
      <cn type="integer">3</cn>
      <cn type="integer">0</cn>
      <cn type="integer">1</cn>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <cn type="integer">11</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathrm{CG_{6}}=\sum_{i=1}^{6}rel_{i}=3+2+3+0+1+2=11
  </annotation>
 </semantics>
</math>

</p>

<p>Changing the order of any two documents does not affect the CG measure. If 

<math display="inline" id="Discounted_cumulative_gain:18">
 <semantics>
  <msub>
   <mi>D</mi>
   <mn>3</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>D</ci>
    <cn type="integer">3</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D_{3}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Discounted_cumulative_gain:19">
 <semantics>
  <msub>
   <mi>D</mi>
   <mn>4</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>D</ci>
    <cn type="integer">4</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D_{4}
  </annotation>
 </semantics>
</math>

 are switched, the CG remains the same, 11. DCG is used to emphasize highly relevant documents appearing early in the result list. Using the logarithmic scale for reduction, the DCG for each result in order is:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">
<p>

<math display="inline" id="Discounted_cumulative_gain:20">
 <semantics>
  <mi>i</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>i</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   i
  </annotation>
 </semantics>
</math>

</p></th>
<th style="text-align: left;">
<p>

<math display="inline" id="Discounted_cumulative_gain:21">
 <semantics>
  <mrow>
   <mi>r</mi>
   <mi>e</mi>
   <msub>
    <mi>l</mi>
    <mi>i</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>r</ci>
    <ci>e</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>l</ci>
     <ci>i</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   rel_{i}
  </annotation>
 </semantics>
</math>

</p></th>
<th style="text-align: left;">
<p>

<math display="inline" id="Discounted_cumulative_gain:22">
 <semantics>
  <mrow>
   <msub>
    <mi>log</mi>
    <mn>2</mn>
   </msub>
   <mi>i</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <log></log>
     <cn type="integer">2</cn>
    </apply>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \log_{2}i
  </annotation>
 </semantics>
</math>

</p></th>
<th style="text-align: left;">
<p>

<math display="inline" id="Discounted_cumulative_gain:23">
 <semantics>
  <mfrac>
   <mrow>
    <mi>r</mi>
    <mi>e</mi>
    <msub>
     <mi>l</mi>
     <mi>i</mi>
    </msub>
   </mrow>
   <mrow>
    <msub>
     <mi>log</mi>
     <mn>2</mn>
    </msub>
    <mi>i</mi>
   </mrow>
  </mfrac>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <divide></divide>
    <apply>
     <times></times>
     <ci>r</ci>
     <ci>e</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>l</ci>
      <ci>i</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <log></log>
      <cn type="integer">2</cn>
     </apply>
     <ci>i</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \frac{rel_{i}}{\log_{2}i}
  </annotation>
 </semantics>
</math>

</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>0</p></td>
<td style="text-align: left;">
<p>N/A</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>2</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>1.585</p></td>
<td style="text-align: left;">
<p>1.892</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p>0</p></td>
<td style="text-align: left;">
<p>2.0</p></td>
<td style="text-align: left;">
<p>0</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>5</p></td>
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>2.322</p></td>
<td style="text-align: left;">
<p>0.431</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>6</p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>2.584</p></td>
<td style="text-align: left;">
<p>0.774</p></td>
</tr>
</tbody>
</table>

<p>So the 

<math display="inline" id="Discounted_cumulative_gain:24">
 <semantics>
  <mrow>
   <mi>D</mi>
   <mi>C</mi>
   <msub>
    <mi>G</mi>
    <mn>6</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>D</ci>
    <ci>C</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>G</ci>
     <cn type="integer">6</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   DCG_{6}
  </annotation>
 </semantics>
</math>

 of this ranking is:</p>

<p>

<math display="block" id="Discounted_cumulative_gain:25">
 <semantics>
  <mrow>
   <msub>
    <mi>DCG</mi>
    <mn>6</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mi>r</mi>
     <mi>e</mi>
     <msub>
      <mi>l</mi>
      <mn>1</mn>
     </msub>
    </mrow>
    <mo>+</mo>
    <mrow>
     <munderover>
      <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
      <mrow>
       <mi>i</mi>
       <mo>=</mo>
       <mn>2</mn>
      </mrow>
      <mn>6</mn>
     </munderover>
     <mfrac>
      <mrow>
       <mi>r</mi>
       <mi>e</mi>
       <msub>
        <mi>l</mi>
        <mi>i</mi>
       </msub>
      </mrow>
      <mrow>
       <msub>
        <mi>log</mi>
        <mn>2</mn>
       </msub>
       <mi>i</mi>
      </mrow>
     </mfrac>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mn>3</mn>
    <mo>+</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mn>2</mn>
      <mo>+</mo>
      <mn>1.892</mn>
      <mo>+</mo>
      <mn>0</mn>
      <mo>+</mo>
      <mn>0.431</mn>
      <mo>+</mo>
      <mn>0.774</mn>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mn>8.10</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>DCG</ci>
      <cn type="integer">6</cn>
     </apply>
     <apply>
      <plus></plus>
      <apply>
       <times></times>
       <ci>r</ci>
       <ci>e</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>l</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <sum></sum>
         <apply>
          <eq></eq>
          <ci>i</ci>
          <cn type="integer">2</cn>
         </apply>
        </apply>
        <cn type="integer">6</cn>
       </apply>
       <apply>
        <divide></divide>
        <apply>
         <times></times>
         <ci>r</ci>
         <ci>e</ci>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>l</ci>
          <ci>i</ci>
         </apply>
        </apply>
        <apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <log></log>
          <cn type="integer">2</cn>
         </apply>
         <ci>i</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <plus></plus>
      <cn type="integer">3</cn>
      <apply>
       <plus></plus>
       <cn type="integer">2</cn>
       <cn type="float">1.892</cn>
       <cn type="integer">0</cn>
       <cn type="float">0.431</cn>
       <cn type="float">0.774</cn>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <cn type="float">8.10</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathrm{DCG_{6}}=rel_{1}+\sum_{i=2}^{6}\frac{rel_{i}}{\log_{2}i}=3+(2+1.892+0+%
0.431+0.774)=8.10
  </annotation>
 </semantics>
</math>

</p>

<p>Now a switch of 

<math display="inline" id="Discounted_cumulative_gain:26">
 <semantics>
  <msub>
   <mi>D</mi>
   <mn>3</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>D</ci>
    <cn type="integer">3</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D_{3}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Discounted_cumulative_gain:27">
 <semantics>
  <msub>
   <mi>D</mi>
   <mn>4</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>D</ci>
    <cn type="integer">4</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D_{4}
  </annotation>
 </semantics>
</math>

 results in a reduced DCG because a less relevant document is placed higher in the ranking; that is, a more relevant document is discounted more by being placed in a lower rank.</p>

<p>The performance of this query to another is incomparable in this form since the other query may have more results, resulting in a larger overall DCG which may not necessarily be better. In order to compare, the DCG values must be normalized.</p>

<p>To normalize DCG values, an ideal ordering for the given query is needed. For this example, that ordering would be the <a href="Monotonic" title="wikilink">monotonically decreasing</a> sort of the relevance judgments provided by the experiment participant, which is:</p>

<p>

<math display="block" id="Discounted_cumulative_gain:28">
 <semantics>
  <mrow>
   <mn>3</mn>
   <mo>,</mo>
   <mn>3</mn>
   <mo>,</mo>
   <mn>2</mn>
   <mo>,</mo>
   <mn>2</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <cn type="integer">3</cn>
    <cn type="integer">3</cn>
    <cn type="integer">2</cn>
    <cn type="integer">2</cn>
    <cn type="integer">1</cn>
    <cn type="integer">0</cn>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   3,3,2,2,1,0
  </annotation>
 </semantics>
</math>

</p>

<p>The DCG of this ideal ordering, or <em>IDCG</em>, is then:</p>

<p>

<math display="block" id="Discounted_cumulative_gain:29">
 <semantics>
  <mrow>
   <msub>
    <mi>IDCG</mi>
    <mn>6</mn>
   </msub>
   <mo>=</mo>
   <mn>8.69</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>IDCG</ci>
     <cn type="integer">6</cn>
    </apply>
    <cn type="float">8.69</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathrm{IDCG_{6}}=8.69
  </annotation>
 </semantics>
</math>

</p>

<p>And so the nDCG for this query is given as:</p>

<p>

<math display="block" id="Discounted_cumulative_gain:30">
 <semantics>
  <mrow>
   <msub>
    <mi>nDCG</mi>
    <mn>6</mn>
   </msub>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <mi>D</mi>
     <mi>C</mi>
     <msub>
      <mi>G</mi>
      <mn>6</mn>
     </msub>
    </mrow>
    <mrow>
     <mi>I</mi>
     <mi>D</mi>
     <mi>C</mi>
     <msub>
      <mi>G</mi>
      <mn>6</mn>
     </msub>
    </mrow>
   </mfrac>
   <mo>=</mo>
   <mfrac>
    <mn>8.10</mn>
    <mn>8.69</mn>
   </mfrac>
   <mo>=</mo>
   <mn>0.932</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>nDCG</ci>
      <cn type="integer">6</cn>
     </apply>
     <apply>
      <divide></divide>
      <apply>
       <times></times>
       <ci>D</ci>
       <ci>C</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>G</ci>
        <cn type="integer">6</cn>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>I</ci>
       <ci>D</ci>
       <ci>C</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>G</ci>
        <cn type="integer">6</cn>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <divide></divide>
      <cn type="float">8.10</cn>
      <cn type="float">8.69</cn>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <cn type="float">0.932</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathrm{nDCG_{6}}=\frac{DCG_{6}}{IDCG_{6}}=\frac{8.10}{8.69}=0.932
  </annotation>
 </semantics>
</math>

</p>
<h2 id="limitations">Limitations</h2>
<ol>
<li>Normalized DCG metric does not penalize for bad documents in the result. For example, if a query returns two results with scores 

<math display="inline" id="Discounted_cumulative_gain:31">
 <semantics>
  <mrow>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   1,1,1
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Discounted_cumulative_gain:32">
 <semantics>
  <mrow>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">0</cn>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   1,1,1,0
  </annotation>
 </semantics>
</math>

 respectively, both would be considered equally good even if later contains a bad result. One way to take into account this limitation is use 

<math display="inline" id="Discounted_cumulative_gain:33">
 <semantics>
  <mrow>
   <mn>1</mn>
   <mo>-</mo>
   <msup>
    <mn>2</mn>
    <mrow>
     <mi>r</mi>
     <mi>e</mi>
     <msub>
      <mi>l</mi>
      <mi>i</mi>
     </msub>
    </mrow>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <minus></minus>
    <cn type="integer">1</cn>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <cn type="integer">2</cn>
     <apply>
      <times></times>
      <ci>r</ci>
      <ci>e</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>l</ci>
       <ci>i</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   1-2^{rel_{i}}
  </annotation>
 </semantics>
</math>

 in numerator for scores for which we want to penalize and 

<math display="inline" id="Discounted_cumulative_gain:34">
 <semantics>
  <mrow>
   <msup>
    <mn>2</mn>
    <mrow>
     <mi>r</mi>
     <mi>e</mi>
     <msub>
      <mi>l</mi>
      <mi>i</mi>
     </msub>
    </mrow>
   </msup>
   <mo>-</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <minus></minus>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <cn type="integer">2</cn>
     <apply>
      <times></times>
      <ci>r</ci>
      <ci>e</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>l</ci>
       <ci>i</ci>
      </apply>
     </apply>
    </apply>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{rel_{i}}-1
  </annotation>
 </semantics>
</math>

 for all others. For example, for the ranking judgments 

<math display="inline" id="Discounted_cumulative_gain:35">
 <semantics>
  <mrow>
   <mrow>
    <mi>E</mi>
    <mi>x</mi>
    <mi>c</mi>
    <mi>e</mi>
    <mi>l</mi>
    <mi>l</mi>
    <mi>e</mi>
    <mi>n</mi>
    <mi>t</mi>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>F</mi>
    <mi>a</mi>
    <mi>i</mi>
    <mi>r</mi>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>B</mi>
    <mi>a</mi>
    <mi>d</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <times></times>
     <ci>E</ci>
     <ci>x</ci>
     <ci>c</ci>
     <ci>e</ci>
     <ci>l</ci>
     <ci>l</ci>
     <ci>e</ci>
     <ci>n</ci>
     <ci>t</ci>
    </apply>
    <apply>
     <times></times>
     <ci>F</ci>
     <ci>a</ci>
     <ci>i</ci>
     <ci>r</ci>
    </apply>
    <apply>
     <times></times>
     <ci>B</ci>
     <ci>a</ci>
     <ci>d</ci>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Excellent,Fair,Bad
  </annotation>
 </semantics>
</math>

 one might use numerical scores 

<math display="inline" id="Discounted_cumulative_gain:36">
 <semantics>
  <mrow>
   <mn>1</mn>
   <mo>,</mo>
   <mn>0</mn>
   <mo>,</mo>
   <mrow>
    <mo>-</mo>
    <mn>1</mn>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <cn type="integer">1</cn>
    <cn type="integer">0</cn>
    <apply>
     <minus></minus>
     <cn type="integer">1</cn>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   1,0,-1
  </annotation>
 </semantics>
</math>

 instead of 

<math display="inline" id="Discounted_cumulative_gain:37">
 <semantics>
  <mrow>
   <mn>2</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <cn type="integer">2</cn>
    <cn type="integer">1</cn>
    <cn type="integer">0</cn>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2,1,0
  </annotation>
 </semantics>
</math>

.</li>
<li>Normalized DCG does not penalize for missing documents in the result. For example, if a query returns two results with scores 

<math display="inline" id="Discounted_cumulative_gain:38">
 <semantics>
  <mrow>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   1,1,1
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Discounted_cumulative_gain:39">
 <semantics>
  <mrow>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   1,1,1,1,1
  </annotation>
 </semantics>
</math>

 respectively, both would be considered equally good. One way to take into account this limitation is to enforce fixed set size for the result set and use minimum scores for the missing documents. In previous example, we would use the scores 

<math display="inline" id="Discounted_cumulative_gain:40">
 <semantics>
  <mrow>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>0</mn>
   <mo>,</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">0</cn>
    <cn type="integer">0</cn>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   1,1,1,0,0
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Discounted_cumulative_gain:41">
 <semantics>
  <mrow>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
    <cn type="integer">1</cn>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   1,1,1,1,1
  </annotation>
 </semantics>
</math>

 and quote nDCG as nDCG@5.</li>
<li>Normalized DCG may not be suitable to measure performance of queries that may typically often have several equally good results. This is especially true when this metric is limited to only first few results as it is done in practice. For example, for queries such as "restaurants" nDCG@1 would account for only first result and hence if one result set contains only 1 restaurant from the nearby area while the other contains 5, both would end up having same score even though latter is more comprehensive.</li>
</ol>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="Gain_(information_retrieval)" title="wikilink">Gain (information retrieval)</a></li>
</ul>
<h2 id="references">References</h2>

<p>"</p>

<p><a href="Category:Information_retrieval_evaluation" title="wikilink">Category:Information retrieval evaluation</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">Kalervo Jarvelin, Jaana Kekalainen: Cumulated gain-based evaluation of IR techniques. ACM Transactions on Information Systems 20(4), 422–446 (2002)<a href="#fnref1">↩</a></li>
<li id="fn2"><a href="#fnref2">↩</a></li>
<li id="fn3"><a href="#fnref3">↩</a></li>
<li id="fn4">Yining Wang, Liwei Wang, Yuanzhi Li, Di He, Wei Chen, Tie-Yan Liu. 2013. A Theoretical Analysis of NDCG Ranking Measures. In Proceedings of the 26th Annual Conference on Learning Theory (COLT 2013).<a href="#fnref4">↩</a></li>
<li id="fn5">Chris Burges, Tal Shaked, Erin Renshaw, Ari Lazier, Matt Deeds, Nicole Hamilton, and Greg Hullender. 2005. Learning to rank using gradient descent. In Proceedings of the 22nd international conference on Machine learning (ICML '05). ACM, New York, NY, USA, 89-96. DOI=10.1145/1102351.1102363 <a class="uri" href="http://doi.acm.org/10.1145/1102351.1102363">http://doi.acm.org/10.1145/1102351.1102363</a><a href="#fnref5">↩</a></li>
<li id="fn6"></li>
<li id="fn7"><a href="#fnref7">↩</a></li>
</ol>
</section>
</body>
</html>
