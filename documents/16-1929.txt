   Reflection lines      Reflection lines   Engineers use reflection lines to judge a surface's quality . Reflection lines reveal surface flaws, particularly discontinuities in normals indicating that the surface is not    C  2     superscript  C  2    C^{2}   . Reflection lines may be created and examined on physical surfaces or virtual surfaces with the help of computer graphics . For example, the shiny surface of an automobile body is illuminated with reflection lines by surrounding the car with parallel light sources. Virtually, a surface can be rendered with reflection lines by modulating the surfaces point-wise color according to a simple calculation involving the surface normal , viewing direction and a square wave  environment map .  (Figure)  Reflection lines visualized on surfaces completed using a biharmonic and triharmonic equation with    C  1     superscript  C  1    C^{1}   and    C  2     superscript  C  2    C^{2}   surface continuity respectively. Derivative discontinuities near the yellow-purple boundary on the left reveal normal discontinuities. Below are pseudocolor visualizations of curvature.   Mathematical Definition  Let us consider a point   p   p   p   on a surface   M   M   M   with (possibly non-unit length) normal   n   n   n   . If an observer views this point from infinity at a incoming direction   v   v   v   then the reflected view direction   r   r   r   is:       r  =    (   2  /    |  n  |   2    )    (     (   n  ⋅  v   )   n   -  v   )     .      r      2   superscript    n   2         normal-⋅  n  v   n   v      r=(2/|n|^{2})((n\cdot v)n-v).     For reflection lines we consider repeated infinite, non-dispersive light sources parallel to some line   a   a   a   and therefore perpendicular to a plane   P   P   P   . Define the vector   d   d   d   to be the reflection direction   r   r   r   projected onto the plane   P   P   P   :      d  =   r  -    (   r  ⋅  a   )   a        d    r     normal-⋅  r  a   a      d=r-(r\cdot a)a     and similarly let    v  a     subscript  v  a    v_{a}   be the unit viewing direction projected onto   P   P   P   :        v  a   =     v  a   ^   /   |    v  a   ^   |     ,     v  a   ^   =   v  -    (   v  ⋅  a   )   a        formulae-sequence     subscript  v  a      normal-^   subscript  v  a       normal-^   subscript  v  a          normal-^   subscript  v  a      v     normal-⋅  v  a   a       v_{a}=\hat{v_{a}}/|\hat{v_{a}}|,\hat{v_{a}}=v-(v\cdot a)a     Finally, define    a  ⟂     superscript  a  perpendicular-to    a^{\perp}   to be the direction lying in   P   P   P   perpendicular to   a   a   a   and    v  a     subscript  v  a    v_{a}   :       a  ⟂   =   a  ×   v  a         superscript  a  perpendicular-to     a   subscript  v  a      a^{\perp}=a\times v_{a}     Then the *reflection line function*     θ   (  p  )    :   M  →   (   -  π   ,  π  ]       normal-:    θ  p    normal-→  M     π   π      \theta(p):M\rightarrow(-\pi,\pi]   is a scalar function mapping points on the surface to angles between    v  a     subscript  v  a    v_{a}   and the projected reflected view direction   d   d   d   :      θ  =    arctan  L    (   r  ⋅   a  ⟂    ,   r  ⋅   v  a    )        θ      L     normal-⋅  r   superscript  a  perpendicular-to     normal-⋅  r   subscript  v  a        \theta=\arctan{L(r\cdot a^{\perp},r\cdot v_{a})}     where    a  r  c  t  a  n   (  y  ,  x  )       a  r  c  t  a  n   y  x     arctan(y,x)   is the atan2 function producing a number in the range    (   -  π   ,  π  ]       π   π    (-\pi,\pi]   .  Finally, to render the reflection lines positive values    θ  >  0      θ  0    \theta>0   are mapped to a light color and non-positive values to a dark color. 1  Highlight lines  Highlight lines are a view-independent alternative to reflection lines. 2 Here the projected normal is directly compared against some arbitrary vector   x   x   x   perpendicular to the light source:      θ  =   arctan   (    n  a   ⋅   a  ⟂    ,    n  a   ⋅  x   )        θ     normal-⋅   subscript  n  a    superscript  a  perpendicular-to     normal-⋅   subscript  n  a   x      \theta=\arctan{(n_{a}\cdot a^{\perp},n_{a}\cdot x)}     where    n  a     subscript  n  a    n_{a}   is the surface normal projected on the light source plane   P   P   P   :          n  a   ^   /   |    n  a   ^   |    ,    n  a   ^    =   n  -    (   n  ⋅  a   )   a            normal-^   subscript  n  a       normal-^   subscript  n  a       normal-^   subscript  n  a       n     normal-⋅  n  a   a      \hat{n_{a}}/|\hat{n_{a}}|,\hat{n_{a}}=n-(n\cdot a)a     The relationship between reflection lines and highlight lines is likened to that between specular and diffuse shading.  References  "  Category:Computer graphics  Category:Differential geometry     Gingold et al. "Shape Optimization Using Reflection Lines" ↩  Beier and Chen. "Highlight-line algorithm for realtime surface-quality assessment" ↩     