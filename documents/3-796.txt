   Non-analytic smooth function      Non-analytic smooth function   In mathematics , smooth functions (also called infinitely differentiable functions) and analytic functions are two very important types of functions . One can easily prove that any analytic function of a real argument is smooth. The converse is not true, as demonstrated with the counterexample below.  One of the most important applications of smooth functions with compact support is the construction of so-called mollifiers , which are important in theories of generalized functions , like e.g. Laurent Schwartz 's theory of distributions .  The existence of smooth but non-analytic functions represents one of the main differences between differential geometry and analytic geometry . In terms of sheaf theory , this difference can be stated as follows: the sheaf of differentiable functions on a differentiable manifold is fine , in contrast with the analytic case.  The functions below are generally used to build up partitions of unity on differentiable manifolds.  Definition of the function  Consider the function       f   (  x  )    =   {      exp   (   -   1  /  x    )         if  x   >  0   ,       0       if  x   ≤  0   ,             f  x    cases        1  x         if  x   0   0      if  x   0      f(x)=\begin{cases}\exp(-1/x)&\text{if }x>0,\\
 0&\text{if }x\leq 0,\end{cases}     defined for every real number  x .  The function is smooth  The function f has continuous derivatives of all orders in all points x of the real line , given by        f   (  n  )     (  x  )    =   {          p  n    (  x  )     x   2  n      f   (  x  )         if  x   >  0   ,       0       if  x   ≤  0   ,              superscript  f  n   x    cases         subscript  p  n   x    superscript  x    2  n     f  x       if  x   0   0      if  x   0      f^{(n)}(x)=\begin{cases}\displaystyle\frac{p_{n}(x)}{x^{2n}}\,f(x)&\text{if }x%
 >0,\\
 0&\text{if }x\leq 0,\end{cases}     where p n ( x ) is a polynomial of degree n − 1 given recursively by p 1 ( x ) = 1 and          p   n  +  1     (  x  )    =     x  2    p  n  ′    (  x  )    -    (    2  n  x   -  1   )    p  n    (  x  )      ,   n  ∈  ℕ    .     formulae-sequence       subscript  p    n  1    x        superscript  x  2    superscript   subscript  p  n   normal-′   x         2  n  x   1    subscript  p  n   x       n  ℕ     p_{n+1}(x)=x^{2}p_{n}^{\prime}(x)-(2nx-1)p_{n}(x),\qquad n\in\mathbb{N}.     Outline of proof  The proof, by induction, is based on the fact that for any natural number  m including zero,         lim   x  ↘  0      e   -   1  /  x      x  m     =  0   ,        subscript    normal-↘  x  0       superscript  e      1  x      superscript  x  m     0    \lim_{x\searrow 0}\frac{e^{-1/x}}{x^{m}}=0,     which implies that all f ( n ) are continuous and differentiable at x = 0, because        lim   x  ↘  0        f   (  n  )     (  x  )    -    f   (  n  )     (  0  )      x  -  0     =    lim   x  ↘  0         p  n    (  x  )     x    2  n   +  1       e   -   1  /  x       =  0.          subscript    normal-↘  x  0           superscript  f  n   x      superscript  f  n   0      x  0       subscript    normal-↘  x  0           subscript  p  n   x    superscript  x      2  n   1      superscript  e      1  x            0.     \lim_{x\searrow 0}\frac{f^{(n)}(x)-f^{(n)}(0)}{x-0}=\lim_{x\searrow 0}\frac{p_%
 {n}(x)}{x^{2n+1}}\,e^{-1/x}=0.     Detailed proof  By the power series representation of the exponential function , we have for every natural number m (including zero)         1   x  m    =   x    (   1  x   )    m  +  1     ≤     (   m  +  1   )   !   x    ∑   n  =  0   ∞     1   n  !      (   1  x   )   n      =     (   m  +  1   )   !   x   exp   (   1  x   )      ,   x  >  0    ,     formulae-sequence        1   superscript  x  m      x   superscript    1  x     m  1                m  1    x    superscript   subscript     n  0          1    n     superscript    1  x   n                 m  1    x      1  x         x  0     \frac{1}{x^{m}}=x\Bigl(\frac{1}{x}\Bigr)^{m+1}\leq(m+1)!\,x\sum_{n=0}^{\infty}%
 \frac{1}{n!}\Bigl(\frac{1}{x}\Bigr)^{n}=(m+1)!\,x\exp\Bigl(\frac{1}{x}\Bigr),%
 \qquad x>0,     because all the positive terms for n ≠ m + 1 are added. Therefore, using the functional equation of the exponential function ,        lim   x  ↘  0      e   -   1  /  x      x  m     ≤     (   m  +  1   )   !     lim   x  ↘  0    x    =  0.          subscript    normal-↘  x  0       superscript  e      1  x      superscript  x  m           m  1      subscript    normal-↘  x  0    x         0.     \lim_{x\searrow 0}\frac{e^{-1/x}}{x^{m}}\leq(m+1)!\lim_{x\searrow 0}x=0.     We now prove the formula for the n th derivative of f by mathematical induction . Using the chain rule , the reciprocal rule , and the fact that the derivative of the exponential function is again the exponential function, we see that the formula is correct for the first derivative of f for all x > 0 and that p 1 ( x ) is a polynomial of degree 0. Of course, the derivative of f is zero for x f'(0)=\lim_{x\searrow0}\frac{f(x)-f(0)}{x-0}=\lim_{x\searrow0}\frac{e^{-1/x}}{x}=0.  The induction step from n to n + 1 is similar. For x > 0 we get for the derivative       f   (   n  +  1   )     (  x  )        superscript  f    n  1    x    \displaystyle f^{(n+1)}(x)     where p n +1 ( x ) is a polynomial of degree n = ( n + 1) − 1. Of course, the ( n + 1)st derivative of f is zero for x ( n ) at x = 0 we obtain with the above limit        lim   x  ↘  0        f   (  n  )     (  x  )    -    f   (  n  )     (  0  )      x  -  0     =    lim   x  ↘  0         p  n    (  x  )     x    2  n   +  1       e   -   1  /  x       =  0.          subscript    normal-↘  x  0           superscript  f  n   x      superscript  f  n   0      x  0       subscript    normal-↘  x  0           subscript  p  n   x    superscript  x      2  n   1      superscript  e      1  x            0.     \lim_{x\searrow 0}\frac{f^{(n)}(x)-f^{(n)}(0)}{x-0}=\lim_{x\searrow 0}\frac{p_%
 {n}(x)}{x^{2n+1}}\,e^{-1/x}=0.     The function is not analytic  As seen earlier, the function f is smooth, and all its derivatives at the origin are 0. Therefore, the Taylor series of f at the origin converges everywhere to the zero function ,          ∑   n  =  0   ∞       f   (  n  )     (  0  )     n  !     x  n     =    ∑   n  =  0   ∞     0   n  !     x  n     =  0   ,   x  ∈  ℝ    ,     formulae-sequence        superscript   subscript     n  0             superscript  f  n   0     n     superscript  x  n       superscript   subscript     n  0          0    n     superscript  x  n          0      x  ℝ     \sum_{n=0}^{\infty}\frac{f^{(n)}(0)}{n!}x^{n}=\sum_{n=0}^{\infty}\frac{0}{n!}x%
 ^{n}=0,\qquad x\in\mathbb{R},     and so the Taylor series does not equal f ( x ) for x > 0. Consequently, f is not analytic at the origin. This pathology cannot occur with differentiable functions of a complex variable rather than of a real variable. Indeed, all holomorphic functions are analytic , so that the failure of f to be analytic in spite of its being infinitely differentiable is an indication of one of the most dramatic differences between real-variable and complex-variable analysis.  Note that although the function f has derivatives of all orders over the real line, the analytic continuation of f from the positive half-line x > 0 to the complex plane , that is, the function        ℂ  ∖   {  0  }    ∋  z  ↦   exp   (   -   1  /  z    )    ∈  ℂ   ,       contains    ℂ   0    z    maps-to          1  z          ℂ     \mathbb{C}\setminus\{0\}\ni z\mapsto\exp(-1/z)\in\mathbb{C},     has an essential singularity at the origin, and hence is not even continuous, much less analytic. By the great Picard theorem , it attains every complex value (with the exception of zero) infinitely often in every neighbourhood of the origin.  A smooth function which is nowhere real analytic  A more pathological example, of an infinitely differentiable function which is not analytic at any point can be constructed by means of a Fourier series as follows. Let A :={2 n : n ∈ N } be the set of all powers of 2, and define for all x ∈ R        F   (  x  )    :=    ∑   k  ∈  A      e   -   k      cos   (   k  x   )       .     assign    F  x     subscript     k  A       superscript  e      k         k  x        F(x):=\sum_{k\in A}e^{-\sqrt{k}}\cos(kx)\ .     Since the series     ∑   k  ∈  A      e   -   k      k  n        subscript     k  A       superscript  e      k      superscript  k  n      \sum_{k\in A}e^{-\sqrt{k}}k^{n}   converge for all n ∈ N , this function is easily seen to be of class C ∞ , by a standard inductive application of the Weierstrass M-test , and of the theorem of limit under the sign of derivative. Moreover, for any dyadic rational multiple of π, that is x:=π p/q with p ∈ N and q ∈ A, and for all order of derivation n ∈ A, n ≥ 4 and n > q we have       F   (  n  )     (  x  )   :=   ∑   k  ∈  A     e   -   k      k  n   cos   (  k  x  )   =   ∑       k  ∈  A        k  >  q         e   -   k      k  n   +   ∑       k  ∈  A        k  ≤  q         e   -   k      k  n   cos   (  k  x  )   ≥   e   -   n      n  n   +  O   (   q  n   )    (   as   n  →  ∞  )      fragments   superscript  F  n    fragments  normal-(  x  normal-)   assign   subscript     k  A     superscript  e      k      superscript  k  n     fragments  normal-(  k  x  normal-)     subscript    STACKED    k  A     k  q      superscript  e      k      superscript  k  n     subscript    STACKED    k  A     k  q      superscript  e      k      superscript  k  n     fragments  normal-(  k  x  normal-)     superscript  e      n      superscript  n  n    O   fragments  normal-(   superscript  q  n   normal-)     fragments  normal-(  as  n  normal-→   normal-)     F^{(n)}(x):=\sum_{k\in A}e^{-\sqrt{k}}k^{n}\cos(kx)=\sum_{k\in A\atop k>q}e^{-%
 \sqrt{k}}k^{n}+\sum_{k\in A\atop k\leq q}e^{-\sqrt{k}}k^{n}\cos(kx)\geq e^{-%
 \sqrt{n}}n^{n}+O(q^{n})\quad(\mathrm{as}\;n\to\infty)     where we used the fact that cos( kx )=1 for all k > q . As a consequence, at any such x ∈ R         lim sup   n  →  ∞      (    |    F   (  n  )     (  x  )    |    n  !    )    1  /  n     =   +   ∞     ,        subscript  limit-supremum   normal-→  n      superscript         superscript  F  n   x      n      1  n           \limsup_{n\to\infty}\left(\frac{|F^{(n)}(x)|}{n!}\right)^{1/n}=+\infty\,,   so that the radius of convergence of the Taylor series of F at x is 0 by the Cauchy-Hadamard formula . Since the set of analyticity of a function is an open set, and since dyadic rationals are dense, we conclude that F is nowhere analytic in R .  Smooth transition functions  The function         g   (  x  )    =    f   (  x  )      f   (  x  )    +   f   (   1  -  x   )       ,   x  ∈  ℝ    ,     formulae-sequence      g  x       f  x       f  x     f    1  x         x  ℝ     g(x)=\frac{f(x)}{f(x)+f(1-x)},\qquad x\in\mathbb{R},     has a strictly positive denominator everywhere on the real line, hence g is also smooth. Furthermore, g ( x ) = 0 for x ≤ 0 and g ( x ) = 1 for x ≥ 1, hence it provides a smooth transition from the level 0 to the level 1 in the unit interval [0,1]. To have the smooth transition in the real interval [ a , b ] with a \mathbb{R}\ni x\mapsto g\Bigl(\frac{x-a}{b-a}\Bigr).  For real numbers , the smooth function      ℝ  ∋  x  ↦   g   (    x  -  a    b  -  a    )   g   (    d  -  x    d  -  c    )         contains  ℝ  x    maps-to      g      x  a     b  a    g      d  x     d  c        \mathbb{R}\ni x\mapsto g\Bigl(\frac{x-a}{b-a}\Bigr)\,g\Bigl(\frac{d-x}{d-c}\Bigr)     equals 1 on the closed interval [ b , c ] and vanishes outside the open interval ( a , d ).  Application to Taylor series  For every sequence α 0 , α 1 , α 2 , . . . of real or complex numbers, the following construction shows the existence of a smooth function F on the real line which has these numbers as derivatives at the origin. 1 In particular, every sequence of numbers can appear as the coefficients of the Taylor series of a smooth function. This result is known as Borel's lemma , after Émile Borel .  With the smooth transition function g as above, define         h   (  x  )    =   g   (   2  +  x   )   g   (   2  -  x   )     ,   x  ∈  ℝ    .     formulae-sequence      h  x     g    2  x   g    2  x       x  ℝ     h(x)=g(2+x)\,g(2-x),\qquad x\in\mathbb{R}.     This function h is also smooth; it equals 1 on the closed interval [−1,1] and vanishes outside the open interval (−2,2). Using h , define for every natural number n (including zero) the smooth function          ψ  n    (  x  )    =     x  n    h   (  x  )     ,   x  ∈  ℝ    ,     formulae-sequence       subscript  ψ  n   x      superscript  x  n   h  x      x  ℝ     \psi_{n}(x)=x^{n}\,h(x),\qquad x\in\mathbb{R},     which agrees with the monomial  x n on [−1,1] and vanishes outside the interval (−2,2). Hence, the k -th derivative of ψ n at the origin satisfies          ψ  n   (  k  )     (  0  )    =    {      n  !        if  k   =  n   ,       0    otherwise,      k    ,   n  ∈   ℕ  0     ,     formulae-sequence       superscript   subscript  ψ  n   k   0     cases    n       if  k   n   0  otherwise,   k      n   subscript  ℕ  0      \psi_{n}^{(k)}(0)=\begin{cases}n!&\text{if }k=n,\\
 0&\text{otherwise,}\end{cases}\quad k,n\in\mathbb{N}_{0},     and the boundedness theorem implies that ψ n and every derivative of ψ n is bounded. Therefore, the constants         λ  n   =   max   {  1  ,   |   α  n   |   ,    ∥   ψ  n   ∥   ∞   ,    ∥   ψ  n   (  1  )    ∥   ∞   ,  …  ,    ∥   ψ  n   (  n  )    ∥   ∞   }     ,   n  ∈   ℕ  0     ,     formulae-sequence     subscript  λ  n     1     subscript  α  n     subscript   norm   subscript  ψ  n       subscript   norm   superscript   subscript  ψ  n   1      normal-…   subscript   norm   superscript   subscript  ψ  n   n          n   subscript  ℕ  0      \lambda_{n}=\max\bigl\{1,|\alpha_{n}|,\|\psi_{n}\|_{\infty},\|\psi_{n}^{(1)}\|%
 _{\infty},\ldots,\|\psi_{n}^{(n)}\|_{\infty}\bigr\},\qquad n\in\mathbb{N}_{0},     involving the supremum norm of ψ n and its first n derivatives, are well-defined real numbers. Define the scaled functions          f  n    (  x  )    =     α  n     n  !    λ  n  n      ψ  n    (    λ  n   x   )     ,    n  ∈   ℕ  0    ,   x  ∈  ℝ     .     formulae-sequence       subscript  f  n   x        subscript  α  n       n    superscript   subscript  λ  n   n      subscript  ψ  n      subscript  λ  n   x      formulae-sequence    n   subscript  ℕ  0      x  ℝ      f_{n}(x)=\frac{\alpha_{n}}{n!\,\lambda_{n}^{n}}\psi_{n}(\lambda_{n}x),\qquad n%
 \in\mathbb{N}_{0},\;x\in\mathbb{R}.     By repeated application of the chain rule ,          f  n   (  k  )     (  x  )    =      α  n     n  !    λ  n   n  -  k       ψ  n   (  k  )     (    λ  n   x   )    ,  k    ,    n  ∈   ℕ  0    ,   x  ∈  ℝ     ,     formulae-sequence       superscript   subscript  f  n   k   x         subscript  α  n       n    superscript   subscript  λ  n     n  k       superscript   subscript  ψ  n   k      subscript  λ  n   x    k     formulae-sequence    n   subscript  ℕ  0      x  ℝ      f_{n}^{(k)}(x)=\frac{\alpha_{n}}{n!\,\lambda_{n}^{n-k}}\psi_{n}^{(k)}(\lambda_%
 {n}x),\qquad k,n\in\mathbb{N}_{0},\;x\in\mathbb{R},     and, using the previous result for the k -th derivative of ψ n at zero,          f  n   (  k  )     (  0  )    =    {      α  n        if  k   =  n   ,       0    otherwise,      k    ,   n  ∈   ℕ  0     .     formulae-sequence       superscript   subscript  f  n   k   0     cases   subscript  α  n       if  k   n   0  otherwise,   k      n   subscript  ℕ  0      f_{n}^{(k)}(0)=\begin{cases}\alpha_{n}&\text{if }k=n,\\
 0&\text{otherwise,}\end{cases}\qquad k,n\in\mathbb{N}_{0}.     It remains to show that the function         F   (  x  )    =    ∑   n  =  0   ∞     f  n    (  x  )      ,   x  ∈  ℝ    ,     formulae-sequence      F  x     superscript   subscript     n  0         subscript  f  n   x       x  ℝ     F(x)=\sum_{n=0}^{\infty}f_{n}(x),\qquad x\in\mathbb{R},     is well defined and can be differentiated term-by-term infinitely often. 2 To this end, observe that for every k         ∑   n  =  0   ∞     ∥   f  n   (  k  )    ∥   ∞    ≤     ∑   n  =  0    k  +  1       |   α  n   |     n  !    λ  n   n  -  k        ∥   ψ  n   (  k  )    ∥   ∞     +    ∑   n  =   k  +  2    ∞     1   n  !       1   λ  n   n  -  k  -  2     ⏟     ≤  1        |   α  n   |    λ  n    ⏟     ≤  1         ∥   ψ  n   (  k  )    ∥   ∞    λ  n    ⏟     ≤  1       <  ∞   ,          superscript   subscript     n  0       subscript   norm   superscript   subscript  f  n   k           superscript   subscript     n  0      k  1           subscript  α  n        n    superscript   subscript  λ  n     n  k       subscript   norm   superscript   subscript  ψ  n   k          superscript   subscript     n    k  2           1    n     subscript   normal-⏟    1   superscript   subscript  λ  n     n  k  2        absent  1     subscript   normal-⏟       subscript  α  n     subscript  λ  n       absent  1     subscript   normal-⏟     subscript   norm   superscript   subscript  ψ  n   k       subscript  λ  n       absent  1                \sum_{n=0}^{\infty}\|f_{n}^{(k)}\|_{\infty}\leq\sum_{n=0}^{k+1}\frac{|\alpha_{%
 n}|}{n!\,\lambda_{n}^{n-k}}\|\psi_{n}^{(k)}\|_{\infty}+\sum_{n=k+2}^{\infty}%
 \frac{1}{n!}\underbrace{\frac{1}{\lambda_{n}^{n-k-2}}}_{\leq\,1}\underbrace{%
 \frac{|\alpha_{n}|}{\lambda_{n}}}_{\leq\,1}\underbrace{\frac{\|\psi_{n}^{(k)}%
 \|_{\infty}}{\lambda_{n}}}_{\leq\,1}<\infty,     where the remaining infinite series converges by the ratio test .  Application to higher dimensions  For every radius r > 0,       ℝ  n   ∋  x  ↦    Ψ  r    (  x  )    =   f   (    r  2   -    ∥  x  ∥   2    )         contains   superscript  ℝ  n   x    maps-to       subscript  normal-Ψ  r   x          f     superscript  r  2    superscript   norm  x   2        \mathbb{R}^{n}\ni x\mapsto\Psi_{r}(x)=f(r^{2}-\|x\|^{2})     with Euclidean norm || x || defines a smooth function on n -dimensional Euclidean space with support in the ball of radius r , but      Ψ  r    (  0  )    >  0         subscript  normal-Ψ  r   0   0    \Psi_{r}(0)>0   .  See also   Bump function  Fabius function  Mollifier   Notes  External links     "  Category:Smooth functions  Category:Articles containing proofs     Exercise 12 on page 418 in Walter Rudin, Real and Complex Analysis. McGraw-Hill, New Dehli 1980, ISBN 0-07-099557-5 ↩  See e.g. Chapter V, Section 2, Theorem 2.8 and Corollary 2.9 about the differentiability of the limits of sequences of functions in ↩     