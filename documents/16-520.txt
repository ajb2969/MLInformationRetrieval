   Draft:Moduli stack of principal bundles      Draft:Moduli stack of principal bundles   In algebraic geometry, given a smooth projective curve over a finite field $\mathbf{F}_q$ and a smooth affine  group scheme  G over it, the moduli stack of principal bundles over X , denoted by $\operatorname{Bun}_G$ , is an algebraic stack over the category of G-bundles on X that is given by: 1 for any $\mathbf{F}_q$ -algebra R ,  $$R \mapsto$$ the category of ( principal ) G -bundles over the relative curve $X \times_{\mathbf{F}_q} \operatorname{Spec}R$ . In particular, the category of $\mathbf{F}_q$ -points of $\operatorname{Bun}_G$ , that is, $\operatorname{Bun}_G(\mathbf{F}_q)$ , is the category of G -bundles over X . Similarly, the moduli stack of bundles is defined when the curve X is over the field of complex numbers.  It is known that $\operatorname{Bun}_G$ is a smooth stack.  Behrend's formula  This is a version of Lefschetz trace formula when X is over a finite field.  Notes  References  Besides the obvious, there are   http://www.math.ubc.ca/~behrend/thesis.pdf  http://staff.science.uva.nl/~heinloth/StacksCourse_v2.pdf    The Cohomology Ring of Moduli Stacks of Principal Bundles over Curves   Further reading   http://mathoverflow.net/questions/87171/tamagawa-number-for-functional-fields "      http://www.math.harvard.edu/~lurie/283notes/Lecture2-FunctionFields.pdf â†©     