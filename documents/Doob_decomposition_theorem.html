<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="673">Doob decomposition theorem</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Doob decomposition theorem</h1>
<hr/>

<p>In the theory of <a href="stochastic_process" title="wikilink">stochastic processes</a> in <a href="Discrete-time_stochastic_process" title="wikilink">discrete time</a>, a part of the mathematical theory of <a href="probability_theory" title="wikilink">probability</a>, the <strong>Doob decomposition theorem</strong> gives a unique decomposition of every <a href="adapted_process" title="wikilink">adapted</a> and <a href="Lebesgue_integration" title="wikilink">integrable</a> stochastic process as the sum of a <a href="Martingale_(probability_theory)" title="wikilink">martingale</a> and a <a href="predictable_process" title="wikilink">predictable process</a> (or "drift") starting at zero. The theorem was proved by and is named for <a href="Joseph_L._Doob" title="wikilink">Joseph L. Doob</a>.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>

<p>The analogous theorem in the continuous-time case is the <a href="Doob‚ÄìMeyer_decomposition_theorem" title="wikilink">Doob‚ÄìMeyer decomposition theorem</a>.</p>
<h2 id="statement-of-the-theorem">Statement of the theorem</h2>

<p>Let <mtpl></mtpl> be a <a href="probability_space" title="wikilink">probability space</a>,  {0, 1, 2, . . . , <em>N</em>}}} with <mtpl></mtpl> or <mtpl> ‚Ñï<sub>0</sub>}}</mtpl> a finite or an infinite index set, <mtpl></mtpl> a <a href="filtration_(mathematics)#Measure_theory" title="wikilink">filtration</a> of¬†<mtpl></mtpl>, and <mtpl> (<em>X<sub>n</sub></em>)<sub><em>n</em>‚àà<em>I</em></sub>}}</mtpl> an adapted stochastic process with <mtpl><em>X<sub>n</sub></em>{{!}}]  for all <mtpl></mtpl>. Then there exists a martingale <mtpl> (<em>M<sub>n</sub></em>)<sub><em>n</em>‚àà<em>I</em></sub>}}</mtpl> and an integrable predictable process <mtpl> (<em>A<sub>n</sub></em>)<sub><em>n</em>‚àà<em>I</em></sub>}}</mtpl> starting with <mtpl> 0}}</mtpl> such that <mtpl> <em>M<sub>n</sub></em> + <em>A<sub>n</sub></em>}}</mtpl> for every <mtpl></mtpl>. Here predictable means that <mtpl></mtpl> is <mtpl></mtpl>-<a href="measurable_function" title="wikilink">measurable</a> for every }. This decomposition is <a href="almost_surely" title="wikilink">almost surely</a> unique.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a><a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a><a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></mtpl></p>
<h3 id="corollary">Corollary</h3>

<p>A real-valued stochastic process <mtpl></mtpl> is a <a class="uri" href="submartingale" title="wikilink">submartingale</a> if and only if it has a Doob decomposition into a martingale <mtpl></mtpl> and an integrable predictable process <mtpl></mtpl> that is almost surely <a class="uri" href="increasing" title="wikilink">increasing</a>.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> It is a <a class="uri" href="supermartingale" title="wikilink">supermartingale</a>, if and only if <mtpl></mtpl> is almost surely <a class="uri" href="decreasing" title="wikilink">decreasing</a>.</p>
<h3 id="remark">Remark</h3>

<p>The theorem is valid word by word also for stochastic processes <mtpl></mtpl> taking values in the <mtpl></mtpl>-dimensional <a href="Euclidean_space" title="wikilink">Euclidean space</a> <mtpl></mtpl> or the <a href="complex_vector_space" title="wikilink">complex vector space</a> <mtpl></mtpl>. This follows from the one-dimensional version by considering the components individually.</p>
<h2 id="proofs">Proofs</h2>
<h3 id="proof-of-the-theorem">Proof of the theorem</h3>
<h4 id="existence">Existence</h4>

<p>Using <a href="conditional_expectation" title="wikilink">conditional expectations</a>, define the processes <mtpl></mtpl> and <mtpl></mtpl>, for every <mtpl></mtpl>, explicitly by</p>

<p>and</p>

<p>where the sums for <mtpl> 0}}</mtpl> are <a href="empty_sum" title="wikilink">empty</a> and defined as zero. Here <mtpl></mtpl> adds up the expected increments of <mtpl></mtpl>, and <mtpl></mtpl> adds up the surprises, i.e., the part of every <mtpl></mtpl> that is not known one time step before. Due to these definitions, <mtpl></mtpl> (if <mtpl></mtpl>) and <mtpl></mtpl> are <mtpl></mtpl>-measurable because the process <mtpl></mtpl> is adapted, <mtpl><em>A<sub>n</sub></em>{{!}}]  and <mtpl><em>M<sub>n</sub></em>{{!}}]  because the process <mtpl></mtpl> is integrable, and the decomposition <mtpl> <em>M<sub>n</sub></em> + <em>A<sub>n</sub></em>}}</mtpl> is valid for every <mtpl></mtpl>. The martingale property</mtpl></mtpl></p>

<p>

<math display="block" id="Doob_decomposition_theorem:0">
 <semantics>
  <mrow>
   <mi>ùîº</mi>
   <mrow>
    <mo stretchy="false">[</mo>
    <msub>
     <mi>M</mi>
     <mi>n</mi>
    </msub>
    <mo>-</mo>
    <mpadded width="+1.7pt">
     <msub>
      <mi>M</mi>
      <mrow>
       <mi>n</mi>
       <mo>-</mo>
       <mn>1</mn>
      </mrow>
     </msub>
    </mpadded>
    <mo rspace="4.2pt" stretchy="false">|</mo>
    <msub>
     <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
     <mrow>
      <mi>n</mi>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
    </msub>
    <mo stretchy="false">]</mo>
   </mrow>
   <mo>=</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-[</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>M</ci>
      <ci>n</ci>
     </apply>
     <minus></minus>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>M</ci>
      <apply>
       <minus></minus>
       <ci>n</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>normal-|</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñ±</ci>
      <apply>
       <minus></minus>
       <ci>n</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>normal-]</ci>
    </cerror>
    <eq></eq>
    <cn type="integer">0</cn>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[M_{n}-M_{n-1}\,|\,\mathcal{F}_{n-1}]=0
  </annotation>
 </semantics>
</math>

¬†¬†¬†¬†a.s.</p>

<p>also follows from the above definition (<mtpl></mtpl>), for every }.</p>
<h4 id="uniqueness">Uniqueness</h4>

<p>To prove uniqueness, let <mtpl> <em>M</em>{{'}} + <em>A</em>{{'}}}}</mtpl> be an additional decomposition. Then the process <mtpl> <em>M</em> ‚àí <em>M</em>{{'}} {{=}} <em>A</em>{{'}} ‚àí <em>A</em>}}</mtpl> is a martingale, implying that</p>

<p>

<math display="block" id="Doob_decomposition_theorem:1">
 <semantics>
  <mrow>
   <mi>ùîº</mi>
   <mrow>
    <mo stretchy="false">[</mo>
    <mpadded width="+1.7pt">
     <msub>
      <mi>Y</mi>
      <mi>n</mi>
     </msub>
    </mpadded>
    <mo rspace="4.2pt" stretchy="false">|</mo>
    <msub>
     <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
     <mrow>
      <mi>n</mi>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
    </msub>
    <mo stretchy="false">]</mo>
   </mrow>
   <mo>=</mo>
   <msub>
    <mi>Y</mi>
    <mrow>
     <mi>n</mi>
     <mo>-</mo>
     <mn>1</mn>
    </mrow>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-[</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Y</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-|</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñ±</ci>
      <apply>
       <minus></minus>
       <ci>n</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>normal-]</ci>
    </cerror>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>Y</ci>
     <apply>
      <minus></minus>
      <ci>n</ci>
      <cn type="integer">1</cn>
     </apply>
    </apply>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[Y_{n}\,|\,\mathcal{F}_{n-1}]=Y_{n-1}
  </annotation>
 </semantics>
</math>

¬†¬†¬†¬†a.s.,</p>

<p>and also predictable, implying that</p>

<p>

<math display="block" id="Doob_decomposition_theorem:2">
 <semantics>
  <mrow>
   <mi>ùîº</mi>
   <mrow>
    <mo stretchy="false">[</mo>
    <mpadded width="+1.7pt">
     <msub>
      <mi>Y</mi>
      <mi>n</mi>
     </msub>
    </mpadded>
    <mo rspace="4.2pt" stretchy="false">|</mo>
    <msub>
     <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
     <mrow>
      <mi>n</mi>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
    </msub>
    <mo stretchy="false">]</mo>
   </mrow>
   <mo>=</mo>
   <msub>
    <mi>Y</mi>
    <mi>n</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-[</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Y</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-|</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñ±</ci>
      <apply>
       <minus></minus>
       <ci>n</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>normal-]</ci>
    </cerror>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>Y</ci>
     <ci>n</ci>
    </apply>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[Y_{n}\,|\,\mathcal{F}_{n-1}]=Y_{n}
  </annotation>
 </semantics>
</math>

¬†¬†¬†¬†a.s.</p>

<p>for any }. Since <mtpl> <em>A</em>{{'}}<sub>0</sub> ‚àí <em>A</em><sub>0</sub> {{=}} 0}}</mtpl> by the convention about the starting point of the predictable processes, this implies iteratively that <mtpl> 0}}</mtpl> almost surely for all <mtpl></mtpl>, hence the decomposition is almost surely unique.</p>
<h3 id="proof-of-the-corollary">Proof of the corollary</h3>

<p>If <mtpl></mtpl> is a submartingale, then</p>

<p>

<math display="block" id="Doob_decomposition_theorem:3">
 <semantics>
  <mrow>
   <mi>ùîº</mi>
   <mrow>
    <mo stretchy="false">[</mo>
    <mpadded width="+1.7pt">
     <msub>
      <mi>X</mi>
      <mi>k</mi>
     </msub>
    </mpadded>
    <mo rspace="4.2pt" stretchy="false">|</mo>
    <msub>
     <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
     <mrow>
      <mi>k</mi>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
    </msub>
    <mo stretchy="false">]</mo>
   </mrow>
   <mo>‚â•</mo>
   <msub>
    <mi>X</mi>
    <mrow>
     <mi>k</mi>
     <mo>-</mo>
     <mn>1</mn>
    </mrow>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-[</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <ci>k</ci>
     </apply>
     <ci>normal-|</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñ±</ci>
      <apply>
       <minus></minus>
       <ci>k</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>normal-]</ci>
    </cerror>
    <geq></geq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>X</ci>
     <apply>
      <minus></minus>
      <ci>k</ci>
      <cn type="integer">1</cn>
     </apply>
    </apply>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[X_{k}\,|\,\mathcal{F}_{k-1}]\geq X_{k-1}
  </annotation>
 </semantics>
</math>

¬†¬†¬†¬†a.s.</p>

<p>for all }, which is equivalent to saying that every term in definition (<mtpl></mtpl>) of <mtpl></mtpl> is almost surely positive, hence <mtpl></mtpl> is almost surely increasing. The equivalence for supermartingales is proved similarly.</p>
<h2 id="example">Example</h2>

<p>Let <mtpl> (<em>X<sub>n</sub></em>)<sub><em>n</em>‚àà‚Ñï<sub>0</sub></sub>}}</mtpl> be a sequence in independent, integrable, real-valued random variables. They are adapted to the filtration generated by the sequence, i.e. <mtpl> <em>œÉ</em>(<em>X</em><sub>0</sub>, . . . , <em>X<sub>n</sub></em>)}}</mtpl> for all <mtpl></mtpl>. By (<mtpl></mtpl>) and (<mtpl></mtpl>), the Doob decomposition is given by</p>

<p>

<math display="block" id="Doob_decomposition_theorem:4">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mi>A</mi>
      <mi>n</mi>
     </msub>
     <mo>=</mo>
     <mrow>
      <munderover>
       <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
       <mrow>
        <mi>k</mi>
        <mo>=</mo>
        <mn>1</mn>
       </mrow>
       <mi>n</mi>
      </munderover>
      <mrow>
       <mo maxsize="120%" minsize="120%">(</mo>
       <mrow>
        <mrow>
         <mi>ùîº</mi>
         <mrow>
          <mo stretchy="false">[</mo>
          <msub>
           <mi>X</mi>
           <mi>k</mi>
          </msub>
          <mo stretchy="false">]</mo>
         </mrow>
        </mrow>
        <mo>-</mo>
        <msub>
         <mi>X</mi>
         <mrow>
          <mi>k</mi>
          <mo>-</mo>
          <mn>1</mn>
         </mrow>
        </msub>
       </mrow>
       <mo maxsize="120%" minsize="120%">)</mo>
      </mrow>
     </mrow>
    </mrow>
    <mo rspace="12.5pt">,</mo>
    <mrow>
     <mi>n</mi>
     <mo>‚àà</mo>
     <msub>
      <mi>‚Ñï</mi>
      <mn>0</mn>
     </msub>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>A</ci>
      <ci>n</ci>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>k</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>n</ci>
      </apply>
      <apply>
       <minus></minus>
       <apply>
        <times></times>
        <ci>ùîº</ci>
        <apply>
         <csymbol cd="latexml">delimited-[]</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>X</ci>
          <ci>k</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>X</ci>
        <apply>
         <minus></minus>
         <ci>k</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <in></in>
     <ci>n</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñï</ci>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A_{n}=\sum_{k=1}^{n}\bigl(\mathbb{E}[X_{k}]-X_{k-1}\bigr),\quad n\in\mathbb{N}%
_{0},
  </annotation>
 </semantics>
</math>

</p>

<p>and</p>

<p>

<math display="block" id="Doob_decomposition_theorem:5">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mi>M</mi>
      <mi>n</mi>
     </msub>
     <mo>=</mo>
     <mrow>
      <msub>
       <mi>X</mi>
       <mn>0</mn>
      </msub>
      <mo>+</mo>
      <mrow>
       <munderover>
        <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
        <mrow>
         <mi>k</mi>
         <mo>=</mo>
         <mn>1</mn>
        </mrow>
        <mi>n</mi>
       </munderover>
       <mrow>
        <mo maxsize="120%" minsize="120%">(</mo>
        <mrow>
         <msub>
          <mi>X</mi>
          <mi>k</mi>
         </msub>
         <mo>-</mo>
         <mrow>
          <mi>ùîº</mi>
          <mrow>
           <mo stretchy="false">[</mo>
           <msub>
            <mi>X</mi>
            <mi>k</mi>
           </msub>
           <mo stretchy="false">]</mo>
          </mrow>
         </mrow>
        </mrow>
        <mo maxsize="120%" minsize="120%">)</mo>
       </mrow>
      </mrow>
     </mrow>
    </mrow>
    <mo rspace="12.5pt">,</mo>
    <mrow>
     <mi>n</mi>
     <mo>‚àà</mo>
     <msub>
      <mi>‚Ñï</mi>
      <mn>0</mn>
     </msub>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>M</ci>
      <ci>n</ci>
     </apply>
     <apply>
      <plus></plus>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <cn type="integer">0</cn>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <sum></sum>
         <apply>
          <eq></eq>
          <ci>k</ci>
          <cn type="integer">1</cn>
         </apply>
        </apply>
        <ci>n</ci>
       </apply>
       <apply>
        <minus></minus>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>X</ci>
         <ci>k</ci>
        </apply>
        <apply>
         <times></times>
         <ci>ùîº</ci>
         <apply>
          <csymbol cd="latexml">delimited-[]</csymbol>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>X</ci>
           <ci>k</ci>
          </apply>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <in></in>
     <ci>n</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñï</ci>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   M_{n}=X_{0}+\sum_{k=1}^{n}\bigl(X_{k}-\mathbb{E}[X_{k}]\bigr),\quad n\in%
\mathbb{N}_{0}.
  </annotation>
 </semantics>
</math>

</p>

<p>If the random variables of the original sequence¬†<mtpl></mtpl> have mean zero, this simplifies to</p>

<p>

<math display="block" id="Doob_decomposition_theorem:6">
 <semantics>
  <mrow>
   <msub>
    <mi>A</mi>
    <mi>n</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo>-</mo>
    <mrow>
     <munderover>
      <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
      <mrow>
       <mi>k</mi>
       <mo>=</mo>
       <mn>0</mn>
      </mrow>
      <mrow>
       <mi>n</mi>
       <mo>-</mo>
       <mn>1</mn>
      </mrow>
     </munderover>
     <msub>
      <mi>X</mi>
      <mi>k</mi>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>A</ci>
     <ci>n</ci>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>k</ci>
         <cn type="integer">0</cn>
        </apply>
       </apply>
       <apply>
        <minus></minus>
        <ci>n</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <ci>k</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A_{n}=-\sum_{k=0}^{n-1}X_{k}
  </annotation>
 </semantics>
</math>

¬†¬†¬†¬†and¬†¬†¬†¬†

<math display="inline" id="Doob_decomposition_theorem:7">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mi>M</mi>
      <mi>n</mi>
     </msub>
     <mo>=</mo>
     <mrow>
      <msubsup>
       <mo largeop="true" symmetric="true">‚àë</mo>
       <mrow>
        <mi>k</mi>
        <mo>=</mo>
        <mn>0</mn>
       </mrow>
       <mi>n</mi>
      </msubsup>
      <msub>
       <mi>X</mi>
       <mi>k</mi>
      </msub>
     </mrow>
    </mrow>
    <mo rspace="12.5pt">,</mo>
    <mrow>
     <mi>n</mi>
     <mo>‚àà</mo>
     <msub>
      <mi>‚Ñï</mi>
      <mn>0</mn>
     </msub>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>M</ci>
      <ci>n</ci>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>k</ci>
         <cn type="integer">0</cn>
        </apply>
       </apply>
       <ci>n</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <ci>k</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <in></in>
     <ci>n</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñï</ci>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   M_{n}=\sum_{k=0}^{n}X_{k},\quad n\in\mathbb{N}_{0},
  </annotation>
 </semantics>
</math>

</p>

<p>hence both processes are (possibly time-inhomogenious) <a href="random_walk" title="wikilink">random walks</a>. If the sequence <mtpl> (<em>X<sub>n</sub></em>)<sub><em>n</em>‚àà‚Ñï<sub>0</sub></sub>}}</mtpl> consists of symmetric random variables taking the values <mtpl></mtpl> and¬†<mtpl></mtpl>, then <mtpl></mtpl>¬†is bounded, but the martingale¬†<mtpl></mtpl> and the predictable process¬†<mtpl></mtpl> are unbounded <a href="simple_random_walk" title="wikilink">simple random walks</a> (and not <a href="uniform_integrability" title="wikilink">uniformly integrable</a>), and <a href="Doob's_optional_stopping_theorem" title="wikilink">Doob's optional stopping theorem</a> might not be applicable to the martingale¬†<mtpl></mtpl> unless the stopping time has a finite expectation.</p>
<h2 id="application">Application</h2>

<p>In <a href="mathematical_finance" title="wikilink">mathematical finance</a>, the Doob decomposition theorem can be used to determine the largest optimal exercise time of an <a href="American_option" title="wikilink">American option</a>.<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a><a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a> Let <mtpl> (<em>X</em><sub>0</sub>, <em>X</em><sub>1</sub>, . . . , <em>X<sub>N</sub></em>)}}</mtpl> denote the non-negative, <a href="discounted_cash_flow" title="wikilink">discounted</a> payoffs of an American option in a <mtpl></mtpl>-period financial market model, adapted to a filtration , and let <mtpl></mtpl> denote an <a href="Equivalence_(measure_theory)" title="wikilink">equivalent</a> <a href="martingale_measure" title="wikilink">martingale measure</a>. Let <mtpl> (<em>U</em><sub>0</sub>, <em>U</em><sub>1</sub>, . . . , <em>U<sub>N</sub></em>)}}</mtpl> denote the <a href="Snell_envelope" title="wikilink">Snell envelope</a> of¬†<mtpl></mtpl> with respect to¬†<mtpl></mtpl>. The Snell envelope is the smallest <mtpl></mtpl>-supermartingale dominating <mtpl></mtpl><a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a> and in a complete financial market it represents the minimal amount of capital necessary to hedge the American option up to maturity.<a class="footnoteRef" href="#fn9" id="fnref9"><sup>9</sup></a> Let <mtpl> <em>M</em> + <em>A</em>}}</mtpl> denote the Doob decomposition with respect to¬†<mtpl></mtpl> of the Snell envelope¬†<mtpl></mtpl> into a martingale <mtpl> (<em>M</em><sub>0</sub>, <em>M</em><sub>1</sub>, . . . , <em>M<sub>N</sub></em>)}}</mtpl> and a decreasing predictable process <mtpl> (<em>A</em><sub>0</sub>, <em>A</em><sub>1</sub>, . . . , <em>A<sub>N</sub></em>)}}</mtpl> with <mtpl> 0}}</mtpl>. Then the largest <a href="stopping_time" title="wikilink">stopping time</a> to exercise the American option in an optimal way<a class="footnoteRef" href="#fn10" id="fnref10"><sup>10</sup></a><a class="footnoteRef" href="#fn11" id="fnref11"><sup>11</sup></a> is</p>

<p>

<math display="block" id="Doob_decomposition_theorem:8">
 <semantics>
  <mrow>
   <msub>
    <mi>œÑ</mi>
    <mtext>max</mtext>
   </msub>
   <mo>:=</mo>
   <mrow>
    <mo>{</mo>
    <mtable displaystyle="true">
     <mtr>
      <mtd columnalign="left">
       <mi>N</mi>
      </mtd>
      <mtd columnalign="left">
       <mrow>
        <mrow>
         <mrow>
          <mtext>if</mtext>
          <msub>
           <mi>A</mi>
           <mi>N</mi>
          </msub>
         </mrow>
         <mo>=</mo>
         <mn>0</mn>
        </mrow>
        <mo>,</mo>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="left">
       <mrow>
        <mi>min</mi>
        <mrow>
         <mo stretchy="false">{</mo>
         <mrow>
          <mi>n</mi>
          <mo>‚àà</mo>
          <mrow>
           <mo stretchy="false">{</mo>
           <mn>0</mn>
           <mo>,</mo>
           <mi mathvariant="normal">‚Ä¶</mi>
           <mo>,</mo>
           <mrow>
            <mi>N</mi>
            <mo>-</mo>
            <mn>1</mn>
           </mrow>
           <mo stretchy="false">}</mo>
          </mrow>
         </mrow>
         <mo>‚à£</mo>
         <mrow>
          <msub>
           <mi>A</mi>
           <mrow>
            <mi>n</mi>
            <mo>+</mo>
            <mn>1</mn>
           </mrow>
          </msub>
          <mo><</mo>
          <mn>0</mn>
         </mrow>
         <mo stretchy="false">}</mo>
        </mrow>
       </mrow>
      </mtd>
      <mtd columnalign="left">
       <mrow>
        <mrow>
         <mtext>if</mtext>
         <msub>
          <mi>A</mi>
          <mi>N</mi>
         </msub>
        </mrow>
        <mo><</mo>
        <mn>0.</mn>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">assign</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>œÑ</ci>
     <mtext>max</mtext>
    </apply>
    <apply>
     <csymbol cd="latexml">cases</csymbol>
     <ci>N</ci>
     <apply>
      <eq></eq>
      <apply>
       <times></times>
       <mtext>if</mtext>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>A</ci>
        <ci>N</ci>
       </apply>
      </apply>
      <cn type="integer">0</cn>
     </apply>
     <apply>
      <min></min>
      <apply>
       <in></in>
       <ci>n</ci>
       <set>
        <cn type="integer">0</cn>
        <ci>normal-‚Ä¶</ci>
        <apply>
         <minus></minus>
         <ci>N</ci>
         <cn type="integer">1</cn>
        </apply>
       </set>
      </apply>
      <apply>
       <lt></lt>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>A</ci>
        <apply>
         <plus></plus>
         <ci>n</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <cn type="integer">0</cn>
      </apply>
     </apply>
     <apply>
      <lt></lt>
      <apply>
       <times></times>
       <mtext>if</mtext>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>A</ci>
        <ci>N</ci>
       </apply>
      </apply>
      <cn type="float">0.</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau_{\text{max}}:=\begin{cases}N&\text{if }A_{N}=0,\\
\min\{n\in\{0,\dots,N-1\}\mid A_{n+1}<0\}&\text{if }A_{N}<0.\end{cases}
  </annotation>
 </semantics>
</math>

</p>

<p>Since <mtpl></mtpl> is predictable, the <a href="event_(probability_theory)" title="wikilink">event</a> <em>n</em>} <mtpl>{{=}}</mtpl> {<em>A<sub>n</sub></em> <mtpl>{{=}}</mtpl> 0, <em>A</em><sub><em>n</em>+1</sub>  for every }, hence <mtpl></mtpl> is indeed a stopping time. It gives the last moment before the discounted value of the American option will drop in expectation; up to time¬†<mtpl></mtpl> the discounted value process¬†<mtpl></mtpl> is a martingale with respect to¬†<mtpl></mtpl>.</p>
<h2 id="generalization">Generalization</h2>

<p>The Doob decomposition theorem can be generalized from probability spaces to <a href="œÉ-finite_measure" title="wikilink">œÉ-finite measure spaces</a>.<a class="footnoteRef" href="#fn12" id="fnref12"><sup>12</sup></a></p>
<h2 id="citations">Citations</h2>

<p><mtpl></mtpl></p>
<h2 id="references">References</h2>
<ul>
<li><mtpl></mtpl></li>
<li><mtpl></mtpl></li>
<li><mtpl></mtpl></li>
<li><mtpl></mtpl></li>
<li><mtpl></mtpl></li>
<li><mtpl></mtpl></li>
<li><mtpl></mtpl></li>
</ul>

<p><mtpl></mtpl></p>

<p>"</p>

<p><a href="Category:Stochastic_processes" title="wikilink">Category:Stochastic processes</a> <a href="Category:Probability_theorems" title="wikilink">Category:Probability theorems</a> <a href="Category:Martingale_theory" title="wikilink">Category:Martingale theory</a> <a href="Category:Articles_containing_proofs" title="wikilink">Category:Articles containing proofs</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><mtpl></mtpl>, see <mtpl></mtpl><a href="#fnref1">‚Ü©</a></li>
<li id="fn2"><mtpl></mtpl><a href="#fnref2">‚Ü©</a></li>
<li id="fn3"><mtpl></mtpl><a href="#fnref3">‚Ü©</a></li>
<li id="fn4"><mtpl></mtpl><a href="#fnref4">‚Ü©</a></li>
<li id="fn5"><mtpl></mtpl><a href="#fnref5">‚Ü©</a></li>
<li id="fn6"><mtpl></mtpl><a href="#fnref6">‚Ü©</a></li>
<li id="fn7"><mtpl></mtpl><a href="#fnref7">‚Ü©</a></li>
<li id="fn8"><mtpl></mtpl><a href="#fnref8">‚Ü©</a></li>
<li id="fn9"><mtpl></mtpl><a href="#fnref9">‚Ü©</a></li>
<li id="fn10"><mtpl></mtpl><a href="#fnref10">‚Ü©</a></li>
<li id="fn11"><mtpl></mtpl><a href="#fnref11">‚Ü©</a></li>
<li id="fn12"><mtpl></mtpl><a href="#fnref12">‚Ü©</a></li>
</ol>
</section>
</body>
</html>
