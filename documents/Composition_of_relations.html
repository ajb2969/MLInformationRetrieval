<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1522">Composition of relations</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Composition of relations</h1>
<hr/>

<p>In <a class="uri" href="mathematics" title="wikilink">mathematics</a>, the composition of <a href="binary_relation" title="wikilink">binary relations</a> is a concept of forming a new relation  from two given relations <em>R</em> and <em>S</em>, having as its most well-known special case the <a href="composition_of_functions" title="wikilink">composition of functions</a>.</p>
<h2 id="definition">Definition</h2>

<p>If 

<math display="inline" id="Composition_of_relations:0">
 <semantics>
  <mrow>
   <mi>R</mi>
   <mo>⊆</mo>
   <mrow>
    <mi>X</mi>
    <mo>×</mo>
    <mi>Y</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <subset></subset>
    <ci>R</ci>
    <apply>
     <times></times>
     <ci>X</ci>
     <ci>Y</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   R\subseteq X\times Y
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Composition_of_relations:1">
 <semantics>
  <mrow>
   <mi>S</mi>
   <mo>⊆</mo>
   <mrow>
    <mi>Y</mi>
    <mo>×</mo>
    <mi>Z</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <subset></subset>
    <ci>S</ci>
    <apply>
     <times></times>
     <ci>Y</ci>
     <ci>Z</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\subseteq Y\times Z
  </annotation>
 </semantics>
</math>

 are two binary relations, then their composition 

<math display="inline" id="Composition_of_relations:2">
 <semantics>
  <mrow>
   <mi>S</mi>
   <mo>∘</mo>
   <mi>R</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <compose></compose>
    <ci>S</ci>
    <ci>R</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\circ R
  </annotation>
 </semantics>
</math>

 is the relation</p>

<p>

<math display="block" id="Composition_of_relations:3">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>S</mi>
     <mo>∘</mo>
     <mi>R</mi>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mrow>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>x</mi>
       <mo>,</mo>
       <mi>z</mi>
       <mo stretchy="false">)</mo>
      </mrow>
      <mo>∈</mo>
      <mrow>
       <mi>X</mi>
       <mo>×</mo>
       <mi>Z</mi>
      </mrow>
     </mrow>
     <mo>∣</mo>
     <mrow>
      <mrow>
       <mrow>
        <mo>∃</mo>
        <mi>y</mi>
       </mrow>
       <mo>∈</mo>
       <mi>Y</mi>
      </mrow>
      <mo>:</mo>
      <mrow>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>x</mi>
        <mo>,</mo>
        <mi>y</mi>
        <mo stretchy="false">)</mo>
       </mrow>
       <mo>∈</mo>
       <mrow>
        <mi>R</mi>
        <mo>∧</mo>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>y</mi>
         <mo>,</mo>
         <mi>z</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
       <mo>∈</mo>
       <mi>S</mi>
      </mrow>
     </mrow>
     <mo stretchy="false">}</mo>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <compose></compose>
     <ci>S</ci>
     <ci>R</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">conditional-set</csymbol>
     <apply>
      <in></in>
      <interval closure="open">
       <ci>x</ci>
       <ci>z</ci>
      </interval>
      <apply>
       <times></times>
       <ci>X</ci>
       <ci>Z</ci>
      </apply>
     </apply>
     <apply>
      <ci>normal-:</ci>
      <apply>
       <in></in>
       <apply>
        <exists></exists>
        <ci>y</ci>
       </apply>
       <ci>Y</ci>
      </apply>
      <apply>
       <and></and>
       <apply>
        <in></in>
        <interval closure="open">
         <ci>x</ci>
         <ci>y</ci>
        </interval>
        <apply>
         <and></and>
         <ci>R</ci>
         <interval closure="open">
          <ci>y</ci>
          <ci>z</ci>
         </interval>
        </apply>
       </apply>
       <apply>
        <in></in>
        <share href="#.cmml">
        </share>
        <ci>S</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\circ R=\{(x,z)\in X\times Z\mid\exists y\in Y:(x,y)\in R\land(y,z)\in S\}.
  </annotation>
 </semantics>
</math>

</p>

<p>In other words, 

<math display="inline" id="Composition_of_relations:4">
 <semantics>
  <mrow>
   <mrow>
    <mi>S</mi>
    <mo>∘</mo>
    <mi>R</mi>
   </mrow>
   <mo>⊆</mo>
   <mrow>
    <mi>X</mi>
    <mo>×</mo>
    <mi>Z</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <subset></subset>
    <apply>
     <compose></compose>
     <ci>S</ci>
     <ci>R</ci>
    </apply>
    <apply>
     <times></times>
     <ci>X</ci>
     <ci>Z</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\circ R\subseteq X\times Z
  </annotation>
 </semantics>
</math>

 is defined by the rule that says 

<math display="inline" id="Composition_of_relations:5">
 <semantics>
  <mrow>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo>,</mo>
    <mi>z</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>∈</mo>
   <mrow>
    <mi>S</mi>
    <mo>∘</mo>
    <mi>R</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <interval closure="open">
     <ci>x</ci>
     <ci>z</ci>
    </interval>
    <apply>
     <compose></compose>
     <ci>S</ci>
     <ci>R</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (x,z)\in S\circ R
  </annotation>
 </semantics>
</math>

 if and only if there is an element 

<math display="inline" id="Composition_of_relations:6">
 <semantics>
  <mrow>
   <mi>y</mi>
   <mo>∈</mo>
   <mi>Y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>y</ci>
    <ci>Y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   y\in Y
  </annotation>
 </semantics>
</math>

 such that 

<math display="inline" id="Composition_of_relations:7">
 <semantics>
  <mrow>
   <mpadded width="+1.7pt">
    <mi>x</mi>
   </mpadded>
   <mpadded width="+1.7pt">
    <mi>R</mi>
   </mpadded>
   <mpadded width="+1.7pt">
    <mi>y</mi>
   </mpadded>
   <mpadded width="+1.7pt">
    <mi>S</mi>
   </mpadded>
   <mi>z</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>x</ci>
    <ci>R</ci>
    <ci>y</ci>
    <ci>S</ci>
    <ci>z</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x\,R\,y\,S\,z
  </annotation>
 </semantics>
</math>

 (i.e. 

<math display="inline" id="Composition_of_relations:8">
 <semantics>
  <mrow>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo>,</mo>
    <mi>y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>∈</mo>
   <mi>R</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <interval closure="open">
     <ci>x</ci>
     <ci>y</ci>
    </interval>
    <ci>R</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (x,y)\in R
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Composition_of_relations:9">
 <semantics>
  <mrow>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>y</mi>
    <mo>,</mo>
    <mi>z</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>∈</mo>
   <mi>S</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <interval closure="open">
     <ci>y</ci>
     <ci>z</ci>
    </interval>
    <ci>S</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (y,z)\in S
  </annotation>
 </semantics>
</math>

).</p>

<p>In particular fields, authors might denote by  what is defined here to be . The convention chosen here is such that <a href="function_composition" title="wikilink">function composition</a> (with the usual notation) is obtained as a special case, when <em>R</em> and <em>S</em> are <a href="functional_relation" title="wikilink">functional relations</a>. Some authors<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> prefer to write 

<math display="inline" id="Composition_of_relations:10">
 <semantics>
  <msub>
   <mo>∘</mo>
   <mi>l</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <compose></compose>
    <ci>l</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \circ_{l}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Composition_of_relations:11">
 <semantics>
  <msub>
   <mo>∘</mo>
   <mi>r</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <compose></compose>
    <ci>r</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \circ_{r}
  </annotation>
 </semantics>
</math>

 explicitly when necessary, depending whether the left or the right relation is the first one applied.</p>

<p>A further variation encountered in computer science is the <a href="Z_notation" title="wikilink">Z notation</a>

<math display="block" id="Composition_of_relations:12">
 <semantics>
  <mo>∘</mo>
  <annotation-xml encoding="MathML-Content">
   <compose></compose>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \circ
  </annotation>
 </semantics>
</math>

 is used to denote the traditional (right) composition, but ⨾ <span style="font-size:180%; font-weight: 600;">;</span> (a fat open semicolon with Unicode code point U+2A3E) denotes left composition.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a><a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> This use of semicolon <a href="Function_composition#Alternative_notations" title="wikilink">coincides</a> with the notation for function composition used (mostly by computer scientists) in <a href="Category_theory" title="wikilink">Category theory</a>,<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a> as well as the notation for dynamic conjunction within linguistic dynamic semantics.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> The semicolon notation (with this semantic) was introduced by <a href="Ernst_Schröder" title="wikilink">Ernst Schröder</a> in 1895.<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a></p>

<p>The binary relations 

<math display="inline" id="Composition_of_relations:13">
 <semantics>
  <mrow>
   <mi>R</mi>
   <mo>⊆</mo>
   <mrow>
    <mi>X</mi>
    <mo>×</mo>
    <mi>Y</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <subset></subset>
    <ci>R</ci>
    <apply>
     <times></times>
     <ci>X</ci>
     <ci>Y</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   R\subseteq X\times Y
  </annotation>
 </semantics>
</math>

 are sometimes regarded as the morphisms 

<math display="inline" id="Composition_of_relations:14">
 <semantics>
  <mrow>
   <mi>R</mi>
   <mo>:</mo>
   <mrow>
    <mi>X</mi>
    <mo>→</mo>
    <mi>Y</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>R</ci>
    <apply>
     <ci>normal-→</ci>
     <ci>X</ci>
     <ci>Y</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   R\colon X\to Y
  </annotation>
 </semantics>
</math>

 in a <a href="category_(mathematics)" title="wikilink">category</a> <strong><a href="Category_of_relations" title="wikilink">Rel</a></strong> which has the sets as objects. In <strong>Rel</strong>, composition of morphisms is exactly composition of relations as defined above. The category <strong><a href="category_of_sets" title="wikilink">Set</a></strong> of sets is a subcategory of <strong>Rel</strong> that has the same objects but fewer morphisms. A generalization of this is found in the theory of <a href="allegory_(category_theory)" title="wikilink">allegories</a>.</p>
<h2 id="properties">Properties</h2>

<p>Composition of relations is <a class="uri" href="associative" title="wikilink">associative</a>.</p>

<p>The <a href="inverse_relation" title="wikilink">inverse relation</a> of  is <mtpl></mtpl>. This property makes the set of all binary relations on a set a <a href="semigroup_with_involution" title="wikilink">semigroup with involution</a>.</p>

<p>The compose of <a href="partial_function" title="wikilink">(partial) functions</a> (i.e. functional relations) is again a (partial) function.</p>

<p>If <em>R</em> and <em>S</em> are <a class="uri" href="injective" title="wikilink">injective</a>, then  is injective, which conversely implies only the injectivity of <em>R</em>.</p>

<p>If <em>R</em> and <em>S</em> are <a class="uri" href="surjective" title="wikilink">surjective</a>, then  is surjective, which conversely implies only the surjectivity of <em>S</em>.</p>

<p>The set of binary relations on a set <em>X</em> (i.e. relations from <em>X</em> to <em>X</em>) together with (left or right) relation composition forms a <a class="uri" href="monoid" title="wikilink">monoid</a> with zero, where the identity map on <em>X</em> is the <a href="neutral_element" title="wikilink">neutral element</a>, and the empty set is the <a href="Absorbing_element" title="wikilink">zero element</a>.</p>
<h2 id="join-another-form-of-composition">Join: another form of composition</h2>

<p>Other forms of composition of relations, which apply to general <em>n</em>-place relations instead of binary relations, are found in the <em><a href="Join_(relational_algebra)" title="wikilink">join</a></em> operation of <a href="relational_algebra" title="wikilink">relational algebra</a>. The usual composition of two binary relations as defined here can be obtained by taking their join, leading to a ternary relation, followed by a projection that removes the middle component.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Binary_relation" title="wikilink">Binary relation</a></li>
<li><a href="Relation_algebra" title="wikilink">Relation algebra</a></li>
<li><a href="Demonic_composition" title="wikilink">Demonic composition</a></li>
<li><a href="Function_composition" title="wikilink">Function composition</a></li>
<li><a href="Join_(SQL)" title="wikilink">Join (SQL)</a></li>
<li><a href="Logical_matrix" title="wikilink">Logical matrix</a></li>
</ul>
<h2 id="notes">Notes</h2>
<h2 id="references">References</h2>
<ul>
<li>M. Kilp, U. Knauer, A.V. Mikhalev, <em>Monoids, Acts and Categories with Applications to Wreath Products and Graphs</em>, De Gruyter Expositions in Mathematics vol. 29, Walter de Gruyter, 2000, ISBN 3-11-015248-7.</li>
</ul>

<p>"</p>

<p><a href="Category:Mathematical_relations" title="wikilink">Category:Mathematical relations</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">Kilp, Knauer &amp; Mikhalev, p. 7<a href="#fnref1">↩</a></li>
<li id="fn2">ISO/IEC 13568:2002(E), p. 23<a href="#fnref2">↩</a></li>
<li id="fn3"><a class="uri" href="http://www.fileformat.info/info/unicode/char/2a3e/index.htm">http://www.fileformat.info/info/unicode/char/2a3e/index.htm</a><a href="#fnref3">↩</a></li>
<li id="fn4"><a class="uri" href="http://www.math.mcgill.ca/triples/Barr-Wells-ctcs.pdf">http://www.math.mcgill.ca/triples/Barr-Wells-ctcs.pdf</a>, p. 6<a href="#fnref4">↩</a></li>
<li id="fn5"><a class="uri" href="http://plato.stanford.edu/entries/dynamic-semantics/#EncDynTypLog">http://plato.stanford.edu/entries/dynamic-semantics/#EncDynTypLog</a><a href="#fnref5">↩</a></li>
<li id="fn6"> A free HTML version of the book is available at <a class="uri" href="http://www.cs.man.ac.uk/~pt/Practical_Foundations/">http://www.cs.man.ac.uk/~pt/Practical_Foundations/</a><a href="#fnref6">↩</a></li>
</ol>
</section>
</body>
</html>
