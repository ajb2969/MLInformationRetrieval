   Dirac bracket      Dirac bracket  The '''Dirac bracket''' is a generalization of the [[Poisson bracket]] developed by [[Paul Dirac]] {{cite doi|10.4153/CJM-1950-012-1|noedit}} to treat classical systems with [[second class c onstraints]] in Hamiltonian mechanics , and to thus allow them to undergo canonical quantization . It is an important part of Dirac's development of Hamiltonian mechanics to elegantly handle more general Lagrangians , when constraints and thus more apparent than dynamical variables are at hand. 1 More abstractly, the two-form implied from the Dirac bracket is the restriction of the symplectic form to the constraint surface in phase space . 2  This article assumes familiarity with the standard Lagrangian and Hamiltonian formalisms, and their connection to canonical quantization . Details of Dirac's modified Hamiltonian formalism are also summarized to put the Dirac bracket in context.  Inadequacy of the standard Hamiltonian procedure  The standard development of Hamiltonian mechanics is inadequate in several specific situations:   When the Lagrangian is at most linear in the velocity of at least one coordinate; in which case, the definition of the canonical momentum leads to a constraint . This is the most frequent reason to resort to Dirac brackets. For instance, the Lagrangian (density) for any fermion is of this form.  When there are gauge (or other unphysical) degrees of freedom which need to be fixed.  When there are any other constraints that one wishes to impose in phase space.   Example of a Lagrangian linear in velocity  An example in classical mechanics is a particle with charge   q   q   q   and mass   m   m   m   confined to the   x   x   x   -   y   y   y   plane with a strong constant, homogeneous perpendicular magnetic field, so then pointing in the   z   z   z   -direction with strength   B   B   B   . 3  The Lagrangian for this system with an appropriate choice of parameters is       L  =       1  2    m    v  →   2    +     q  c    A  →    ⋅   v  →     -   V   (   r  →   )      ,      L          1  2   m   superscript   normal-→  v   2     normal-⋅      q  c    normal-→  A     normal-→  v       V   normal-→  r       L=\tfrac{1}{2}m\vec{v}^{2}+\frac{q}{c}\vec{A}\cdot\vec{v}-V(\vec{r}),   where  is the vector potential for the magnetic field, ;   c   c   c   is the speed of light in vacuum; and   V   V   V   () is an arbitrary external scalar potential; one could easily take it to be quadratic in   x   x   x   and   y   y   y   , without loss of generality. We use       A  →   =    B  2    (    x   y  ^    -   y   x  ^     )         normal-→  A       B  2       x   normal-^  y      y   normal-^  x        \vec{A}=\frac{B}{2}(x\hat{y}-y\hat{x})   as our vector potential. Here, the hats indicate unit vectors. Later in the article, however, they are used to distinguish quantum mechanical operators from their classical analogs. The usage should be clear from the context.  Explicitly, the Lagrangian amounts to just       L  =      m  2    (     x  ˙   2   +    y  ˙   2    )    +     q  B    2  c     (    x   y  ˙    -   y   x  ˙     )     -   V   (  x  ,  y  )      ,      L          m  2      superscript   normal-˙  x   2    superscript   normal-˙  y   2           q  B     2  c        x   normal-˙  y      y   normal-˙  x         V   x  y       L=\frac{m}{2}(\dot{x}^{2}+\dot{y}^{2})+\frac{qB}{2c}(x\dot{y}-y\dot{x})-V(x,y)%
 ~{},   which leads to the equations of motion       m   x  ¨    =    -    ∂  V    ∂  x     +     q  B   c    y  ˙           m   normal-¨  x            V     x           q  B   c    normal-˙  y       m\ddot{x}=-\frac{\partial V}{\partial x}+\frac{qB}{c}\dot{y}           m   y  ¨    =    -    ∂  V    ∂  y     -     q  B   c    x  ˙      .        m   normal-¨  y            V     y           q  B   c    normal-˙  x       m\ddot{y}=-\frac{\partial V}{\partial y}-\frac{qB}{c}\dot{x}.   For a harmonic potential, the gradient of V amounts to just the coordinates, −( x , y ).  Now, in the limit of a very large magnetic field, qB / mc ≫ 1. One may then drop the kinetic term to produce a simple approximate Lagrangian,       L  =      q  B    2  c     (    x   y  ˙    -   y   x  ˙     )    -   V   (  x  ,  y  )      ,      L          q  B     2  c        x   normal-˙  y      y   normal-˙  x        V   x  y       L=\frac{qB}{2c}(x\dot{y}-y\dot{x})-V(x,y)~{},   with first-order equations of motion       y  ˙   =    c   q  B      ∂  V    ∂  x          normal-˙  y       c    q  B        V     x       \dot{y}=\frac{c}{qB}\frac{\partial V}{\partial x}           x  ˙   =   -    c   q  B       ∂  V    ∂  y        .       normal-˙  x         c    q  B        V     y        \dot{x}=-\frac{c}{qB}\frac{\partial V}{\partial y}~{}.   Note that this approximate Lagrangian is linear in the velocities , which is one of the conditions under which the standard Hamiltonian procedure breaks down. While this example has been motivated as an approximation, the Lagrangian under consideration is legitimate and leads to consistent equations of motion in the Lagrangian formalism.  Following the Hamiltonian procedure, however, the canonical momenta associated with the coordinates are now       p  x   =    ∂  L    ∂   x  ˙     =   -     q  B    2  c    y           subscript  p  x       L      normal-˙  x                  q  B     2  c    y       p_{x}=\frac{\partial L}{\partial\dot{x}}=-\frac{qB}{2c}y           p  y   =    ∂  L    ∂   y  ˙     =     q  B    2  c     x     ,         subscript  p  y       L      normal-˙  y                q  B     2  c    x      p_{y}=\frac{\partial L}{\partial\dot{y}}=\frac{qB}{2c}x~{},   which are unusual in that they are not invertible to the velocities; instead, they are constrained to be functions of the coordinates: the four phase-space variables are linearly dependent, so the variable basis is overcomplete .  A Legendre transformation then produces the Hamiltonian,        H   (  x  ,  y  ,   p  x   ,   p  y   )    =      x  ˙    p  x    +    y  ˙    p  y     -  L   =   V   (  x  ,  y  )     .          H   x  y   subscript  p  x    subscript  p  y            normal-˙  x    subscript  p  x       normal-˙  y    subscript  p  y     L          V   x  y       H(x,y,p_{x},p_{y})=\dot{x}p_{x}+\dot{y}p_{y}-L=V(x,y).   Note that this "naive" Hamiltonian has no dependence on the momenta , which means that equations of motion (Hamilton's equations) are inconsistent.  The Hamiltonian procedure has broken down. One might try to fix the problem by eliminating two of the components of the 4d phase space, say   y   y   y   and p y , down to a reduced phase space of 2d, that is sometimes expressing the coordinates as momenta and sometimes as coordinates. However, this is neither a general nor rigorous solution. This gets to the heart of the matter: that the definition of the canonical momenta implies a constraint on phase space (between momenta and coordinates) that was never taken into account.  Generalized Hamiltonian procedure  In Lagrangian mechanics, if the system has holonomic constraints , then one generally adds Lagrange multipliers to the Lagrangian to account for them. The extra terms vanish when the constraints are satisfied, thereby forcing the path of stationary action to be on the constraint surface. In this case, going to the Hamiltonian formalism introduces a constraint on phase space in Hamiltonian mechanics, but the solution is similar.  Before proceeding, it is useful to understand the notions of weak equality and strong equality . Two functions on phase space,   f   f   f   and   g   g   g   , are weakly equal if they are equal when the constraints are satisfied, but not throughout the phase space , denoted    f  ≈  g      f  normal-≈  g    f≈g   . If   f   f   f   and   g   g   g   are equal independently of the constraints being satisfied, they are called strongly equal, written    f  =  g      f  g    f=g   . It is important to note that, in order to get the right answer, no weak equations may be used before evaluating derivatives or Poisson brackets .  The new procedure works as follows, start with a Lagrangian and define the canonical momenta in the usual way. Some of those definitions may not be invertible and instead give a constraint in phase space (as above). Constraints derived in this way or imposed from the beginning of the problem are called primary constraints . The constraints, labeled   φ   φ   φ    j , must weakly vanish, .  Next, one finds the naive Hamiltonian ,   H   H   H   , in the usual way via a Legendre transformation, exactly as in the above example. Note that the Hamiltonian can always be written as a function of q s and p s only, even if the velocities cannot be inverted into functions of the momenta.  Generalizing the Hamiltonian  Dirac argues that we should generalize the Hamiltonian (somewhat analogously to the method of Lagrange multipliers) to        H  *   =   H  +    ∑  j     c  j    ϕ  j      ≈  H   ,         superscript  H      H    subscript   j      subscript  c  j    subscript  ϕ  j           H     H^{*}=H+\sum_{j}c_{j}\phi_{j}\approx H,   where the are not constants but functions of the coordinates and momenta. Since this new Hamiltonian is the most general function of coordinates and momenta weakly equal to the naive Hamiltonian, H * is the broadest generalization of the Hamiltonian possible so that      δ  H   *  ≈   δ  H          δ  H   normal-≈   δ  H    δH*≈δH   when .  To further illuminate the c j , consider how one gets the equations of motion from the naive Hamiltonian in the standard procedure. One expands the variation of the Hamiltonian out in two ways and sets them equal (using a somewhat abbreviated notation with suppressed indices and sums):        δ  H   =      ∂  H    ∂  q    δ  q   +     ∂  H    ∂  p    δ  p    ≈     q  ˙   δ  p   -    p  ˙   δ   q      ,          δ  H           H     q    δ  q         H     p    δ  p              normal-˙  q   δ  p      normal-˙  p   δ  q       \delta H=\frac{\partial H}{\partial q}\delta q+\frac{\partial H}{\partial p}%
 \delta p\approx\dot{q}\delta p-\dot{p}\delta q~{},   where the second equality holds after simplifying with the Euler-Lagrange equations of motion and the definition of canonical momentum. From this equality, one deduces the equations of motion in the Hamiltonian formalism from          (     ∂  H    ∂  q    +   p  ˙    )   δ  q   +    (     ∂  H    ∂  p    -   q  ˙    )   δ  p    =   0    ,                H     q     normal-˙  p    δ  q           H     p     normal-˙  q    δ  p    0    \left(\frac{\partial H}{\partial q}+\dot{p}\right)\delta q+\left(\frac{%
 \partial H}{\partial p}-\dot{q}\right)\delta p=0~{},   where the weak equality symbol is no longer displayed explicitly, since by definition the equations of motion only hold weakly. In the present context, one cannot simply set the coefficients of    δ  q      δ  q    δq   and    δ  p      δ  p    δp   separately to zero, since the variations are somewhat restricted by the constraints. In particular, the variations must be tangent to the constraint surface.  One can demonstrate the solution to          ∑  n     A  n   δ   q  n     +    ∑  n     B  n   δ   p  n      =  0   ,          subscript   n      subscript  A  n   δ   subscript  q  n       subscript   n      subscript  B  n   δ   subscript  p  n      0    \sum_{n}A_{n}\delta q_{n}+\sum_{n}B_{n}\delta p_{n}=0,   for the variations δq n and restricted by the constraints     ϕ  j   ≈  0       subscript  ϕ  j   0    \phi_{j}\approx 0   (assuming the constraints satisfy some regularity conditions ) is generally 4       A  n   =    ∑  m     u  m     ∂   ϕ  m     ∂   q  n            subscript  A  n     subscript   m      subscript  u  m        subscript  ϕ  m       subscript  q  n         A_{n}=\sum_{m}u_{m}\frac{\partial\phi_{m}}{\partial q_{n}}           B  n   =    ∑  m     u  m     ∂   ϕ  m     ∂   p  n        ,       subscript  B  n     subscript   m      subscript  u  m        subscript  ϕ  m       subscript  p  n         B_{n}=\sum_{m}u_{m}\frac{\partial\phi_{m}}{\partial p_{n}},   where the u m are arbitrary functions.  Using this result, the equations of motion become        p  ˙   j   =    -    ∂  H    ∂   q  j      -    ∑  k     u  k     ∂   ϕ  k     ∂   q  j             subscript   normal-˙  p   j           H      subscript  q  j        subscript   k      subscript  u  k        subscript  ϕ  k       subscript  q  j          \dot{p}_{j}=-\frac{\partial H}{\partial q_{j}}-\sum_{k}u_{k}\frac{\partial\phi%
 _{k}}{\partial q_{j}}           q  ˙   j   =     ∂  H    ∂   p  j     +    ∑  k     u  k     ∂   ϕ  k     ∂   p  j             subscript   normal-˙  q   j         H      subscript  p  j       subscript   k      subscript  u  k        subscript  ϕ  k       subscript  p  j          \dot{q}_{j}=\frac{\partial H}{\partial p_{j}}+\sum_{k}u_{k}\frac{\partial\phi_%
 {k}}{\partial p_{j}}            ϕ  j    (  q  ,  p  )    =  0   ,         subscript  ϕ  j    q  p    0    \phi_{j}(q,p)=0,   where the are functions of coordinates and velocities that can be determined, in principle, from the second equation of motion above.  The Legendre transform between the Lagrangian formalism and the Hamiltonian formalism has been saved at the cost of adding new variables.  Consistency conditions  The equations of motion become more compact when using the Poisson bracket, since if   f   f   f   is some function of the coordinates and momenta then        f  ˙   ≈    {  f  ,   H  *   }    P  B    ≈     {  f  ,  H  }    P  B    +    ∑  k     u  k     {  f  ,   ϕ  k   }    P  B        ,         normal-˙  f    subscript   f   superscript  H       P  B            subscript   f  H     P  B      subscript   k      subscript  u  k    subscript   f   subscript  ϕ  k      P  B          \dot{f}\approx\{f,H^{*}\}_{PB}\approx\{f,H\}_{PB}+\sum_{k}u_{k}\{f,\phi_{k}\}_%
 {PB},   if one assumes that the Poisson bracket with the u k (functions of the velocity) exist; this causes no problems since the contribution weakly vanishes. Now, there are some consistency conditions which must be satisfied in order for this formalism to make sense. If the constraints are going to be satisfied, then their equations of motion must weakly vanish, that is, we require        ϕ  j   ˙   ≈     {   ϕ  j   ,  H  }    P  B    +    ∑  k     u  k     {   ϕ  j   ,   ϕ  k   }    P  B       ≈  0.         normal-˙   subscript  ϕ  j       subscript    subscript  ϕ  j   H     P  B      subscript   k      subscript  u  k    subscript    subscript  ϕ  j    subscript  ϕ  k      P  B            0.     \dot{\phi_{j}}\approx\{\phi_{j},H\}_{PB}+\sum_{k}u_{k}\{\phi_{j},\phi_{k}\}_{%
 PB}\approx 0.   There are four different types of conditions that can result from the above:   An equation that is inherently false, such as 1=0 .  An equation that is identically true, possibly after using one of our primary constraints.  An equation that places new constraints on our coordinates and momenta, but is independent of the .  An equation that serves to specify the .   The first case indicates that the starting Lagrangian gives inconsistent equations of motion, such as    L  =  q      L  q    L=q   . The second case does not contribute anything new.  The third case gives new constraints in phase space. A constraint derived in this manner is called a secondary constraint . Upon finding the secondary constraint one should add it to the extended Hamiltonian and check the new consistency conditions, which may result in still more constraints. Iterate this process until there are no more constraints. The distinction between primary and secondary constraints is largely an artificial one (i.e. a constraint for the same system can be primary or secondary depending on the Lagrangian), so this article does not distinguish between them from here on. Assuming the consistency condition has been iterated until all of the constraints have been found, then   φ   φ   φ    j will index all of them. Note this article uses secondary constraint to mean any constraint that was not initially in the problem or derived from the definition of canonical momenta; some authors distinguish between secondary constraints, tertiary constraints, et cetera.  Finally, the last case helps fix the . If, at the end of this process, the are not completely determined, then that means there are unphysical (gauge) degrees of freedom in the system. Once all of the constraints (primary and secondary) are added to the naive Hamiltonian and the solutions to the consistency conditions for the are plugged in, the result is called the total Hamiltonian .  Fixing the  The u k must solve a set of inhomogeneous linear equations of the form         {   ϕ  j   ,  H  }    P  B    +    ∑  k     u  k     {   ϕ  j   ,   ϕ  k   }    P  B       ≈  0.         subscript    subscript  ϕ  j   H     P  B      subscript   k      subscript  u  k    subscript    subscript  ϕ  j    subscript  ϕ  k      P  B       0.    \{\phi_{j},H\}_{PB}+\sum_{k}u_{k}\{\phi_{j},\phi_{k}\}_{PB}\approx 0.   The above equation must possess at least one solution, since otherwise the initial Lagrangian is inconsistent; however, in systems with gauge degrees of freedom, the solution will not be unique. The most general solution is of the form        u  k   =    U  k   +   V  k     ,       subscript  u  k      subscript  U  k    subscript  V  k      u_{k}=U_{k}+V_{k},   where    U  k     subscript  U  k    U_{k}   is a particular solution and is the most general solution to the homogeneous equation        ∑  k     V  k     {   ϕ  j   ,   ϕ  k   }    P  B      ≈  0.        subscript   k      subscript  V  k    subscript    subscript  ϕ  j    subscript  ϕ  k      P  B      0.    \sum_{k}V_{k}\{\phi_{j},\phi_{k}\}_{PB}\approx 0.   The most general solution will be a linear combination of linearly independent solutions to the above homogeneous equation. The number of linearly independent solutions equals the number of (which is the same as the number of constraints) minus the number of consistency conditions of the fourth type (in previous subsection). This is the number of unphysical degrees of freedom in the system. Labeling the linear independent solutions where the index   a   a   a   runs from 1 to the number of unphysical degrees of freedom, the general solution to the consistency conditions is of the form        u  k   ≈    U  k   +    ∑  a     v  a    V  k  a       ,       subscript  u  k      subscript  U  k     subscript   a      subscript  v  a    subscript   superscript  V  a   k        u_{k}\approx U_{k}+\sum_{a}v_{a}V^{a}_{k},   where the are completely arbitrary functions of time. A different choice of the corresponds to a gauge transformation, and should leave the physical state of the system unchanged. 5  The total Hamiltonian  At this point, it is natural to introduce the total Hamiltonian       H  T   =   H  +    ∑  k     U  k    ϕ  k     +    ∑   a  ,  k      v  a    V  k  a    ϕ  k           subscript  H  T     H    subscript   k      subscript  U  k    subscript  ϕ  k       subscript    a  k       subscript  v  a    subscript   superscript  V  a   k    subscript  ϕ  k        H_{T}=H+\sum_{k}U_{k}\phi_{k}+\sum_{a,k}v_{a}V^{a}_{k}\phi_{k}   and what is denoted        H  ′   =   H  +    ∑  k     U  k    ϕ  k       .       superscript  H  normal-′     H    subscript   k      subscript  U  k    subscript  ϕ  k        H^{\prime}=H+\sum_{k}U_{k}\phi_{k}.   The time evolution of a function on the phase space,   f   f   f   is governed by        f  ˙   ≈    {  f  ,   H  T   }    P  B     .       normal-˙  f    subscript   f   subscript  H  T      P  B      \dot{f}\approx\{f,H_{T}\}_{PB}.   Later, the extended Hamiltonian is introduced. For gauge-invariant (physically measurable quantities) quantities, all of the Hamiltonians should give the same time evolution, since they are all weakly equivalent. It is only for nongauge-invariant quantities that the distinction becomes important.  The Dirac bracket  Above is everything needed to find the equations of motion in Dirac's modified Hamiltonian procedure. Having the equations of motion, however, is not the endpoint for theoretical considerations. If one wants to canonically quantize a general system, then one needs the Dirac brackets. Before defining Dirac brackets, first-class and second-class constraints need to be introduced.  We call a function    f   (  q  ,  p  )       f   q  p     f(q,p)   of coordinates and momenta first class if its Poisson bracket with all of the constraints weakly vanishes, that is,         {  f  ,   ϕ  j   }    P  B    ≈  0   ,       subscript   f   subscript  ϕ  j      P  B    0    \{f,\phi_{j}\}_{PB}\approx 0,   for all   j   j   j   . Note that the only quantities that weakly vanish are the constraints   φ   φ   φ    j , and therefore anything that weakly vanishes must be strongly equal to a linear combination of the constraints. One can demonstrate that the Poisson bracket of two first class quantities must also be first class. The first class constraints are intimately connected with the unphysical degrees of freedom mentioned earlier. Namely, the number of independent first class constraints is equal to the number of unphysical degrees of freedom, and furthermore the primary first class constraints generate gauge transformations. Dirac further postulated that all secondary first class constraints are generators of gauge transformations, which turns out to be false; however, typically one operates under the assumption that all first class constraints generate gauge transformations when using this treatment. 6  When the first-class secondary constraints are added into the Hamiltonian with arbitrary as the first class primary constraints are added to arrive at the total Hamiltonian, then one obtains the extended Hamiltonian . The extended Hamiltonian gives the most general possible time evolution for any gauge-dependent quantities, and may actually generalize the equations of motion from those of the Lagrangian formalism.  For the purposes of introducing the Dirac bracket, of more immediate interest are the second class constraints . Second class constraints are constraints that have nonvanishing Poisson bracket with at least one other constraint.  For instance, consider constraints   φ   φ   φ    1 and   φ   φ   φ    2 whose Poisson bracket is simply a constant,   c   c   c   ,         {   ϕ  1   ,   ϕ  2   }    P  B    =   c    .       subscript    subscript  ϕ  1    subscript  ϕ  2      P  B    c    \{\phi_{1},\phi_{2}\}_{PB}=c~{}.   Now, suppose one wishes to employ canonical quantization, then the phase-space coordinates become operators whose commutators become    i  ħ      i  ħ    iħ   times their classical Poisson bracket. Assuming there are no ordering issues that give rise to new quantum corrections, this implies that        [    ϕ  ^   1   ,    ϕ  ^   2   ]   =   i   ℏ   c    ,        subscript   normal-^  ϕ   1    subscript   normal-^  ϕ   2      i  Planck-constant-over-2-pi  c     [\hat{\phi}_{1},\hat{\phi}_{2}]=i\hbar~{}c,   where the hats emphasize the fact that the constraints are on operators.  On the one hand, canonical quantization gives the above commutation relation, but on the other hand   φ   φ   φ    1 and   φ   φ   φ    2 are constraints that must vanish on physical states, whereas the right-hand side cannot vanish. This example illustrates the need for some generalization of the Poisson bracket which respects the system's constraints, and which leads to a consistent quantization procedure. This new bracket should be bilinear, antisymmetric, satisfy the Jacobi identity as does the Poisson bracket, reduce to the Poisson bracket for unconstrained systems, and, additionally, the bracket of any constraint with any other quantity must vanish .  At this point, the second class constraints will be labeled a . Define a matrix with entries        M   a  b    =    {    ϕ  ~   a   ,    ϕ  ~   b   }    P  B     .       subscript  M    a  b     subscript    subscript   normal-~  ϕ   a    subscript   normal-~  ϕ   b      P  B      M_{ab}=\{\tilde{\phi}_{a},\tilde{\phi}_{b}\}_{PB}.   In this case, the Dirac bracket of two functions on phase space,   f   f   f   and   g   g   g   , is defined as  where denotes the    a  b      a  b    ab   entry of   M   M   M   's inverse matrix. Dirac proved that   M   M   M    will always be invertible .  It is straightforward to check that the above definition of the Dirac bracket satisfies all of the desired properties, and especially the last one, of vanishing for an argument which is a constraint.  When applying canonical quantization on a constrained Hamiltonian system, the commutator of the operators is supplanted by    i  ħ      i  ħ    iħ   times their classical Dirac bracket . Since the Dirac bracket respects the constraints, one need not be careful about evaluating all brackets before using any weak equations, as is the case with the Poisson bracket.  Note that while the Poisson bracket of bosonic (Grassmann even) variables with itself must vanish, the Poisson bracket of fermions represented as a Grassmann variables with itself need not vanish. This means that in the fermionic case it is possible for there to be an odd number of second class constraints.  Illustration on the example provided  Returning to the above example, the naive Hamiltonian and the two primary constraints are      H  =   V   (  x  ,  y  )        H    V   x  y      H=V(x,y)            ϕ  1   =    p  x   +      q  B    2  c     y     ,    ϕ  2   =    p  y   -      q  B    2  c     x      .     formulae-sequence     subscript  ϕ  1      subscript  p  x         q  B     2  c    y        subscript  ϕ  2      subscript  p  y         q  B     2  c    x       \phi_{1}=p_{x}+\tfrac{qB}{2c}y,\qquad\phi_{2}=p_{y}-\tfrac{qB}{2c}x.   Therefore the extended Hamiltonian can be written        H  *   =    V   (  x  ,  y  )    +    u  1    (    p  x   +      q  B    2  c     y    )    +    u  2    (    p  y   -      q  B    2  c     x    )      .       superscript  H        V   x  y       subscript  u  1      subscript  p  x         q  B     2  c    y        subscript  u  2      subscript  p  y         q  B     2  c    x        H^{*}=V(x,y)+u_{1}\left(p_{x}+\tfrac{qB}{2c}y\right)+u_{2}\left(p_{y}-\tfrac{%
 qB}{2c}x\right).   The next step is to apply the consistency conditions     {   ϕ  j   ,   H  *   }    P  B      subscript    subscript  ϕ  j    superscript  H       P  B     \{\phi_{j},H^{*}\}_{PB}   ≈ 0, which in this case become         {   ϕ  1   ,  H  }    P  B    +    ∑  j     u  j     {   ϕ  1   ,   ϕ  j   }    P  B       =    -    ∂  V    ∂  x     +    u  2     q  B   c     ≈  0           subscript    subscript  ϕ  1   H     P  B      subscript   j      subscript  u  j    subscript    subscript  ϕ  1    subscript  ϕ  j      P  B               V     x        subscript  u  2       q  B   c          0     \{\phi_{1},H\}_{PB}+\sum_{j}u_{j}\{\phi_{1},\phi_{j}\}_{PB}=-\frac{\partial V}%
 {\partial x}+u_{2}\frac{qB}{c}\approx 0            {   ϕ  2   ,  H  }    P  B    +    ∑  j     u  j     {   ϕ  2   ,   ϕ  j   }    P  B       =    -    ∂  V    ∂  y     -    u  1     q  B   c     ≈  0.           subscript    subscript  ϕ  2   H     P  B      subscript   j      subscript  u  j    subscript    subscript  ϕ  2    subscript  ϕ  j      P  B               V     y        subscript  u  1       q  B   c          0.     \{\phi_{2},H\}_{PB}+\sum_{j}u_{j}\{\phi_{2},\phi_{j}\}_{PB}=-\frac{\partial V}%
 {\partial y}-u_{1}\frac{qB}{c}\approx 0.   These are not secondary constraints, but conditions that fix and . Therefore, there are no secondary constraints and the arbitrary coefficients are completely determined, indicating that there are no unphysical degrees of freedom.  If one plugs in with the values of and , then one can see that the equations of motion are       x  ˙   =     {  x  ,  H  }    P  B    +    u  1     {  x  ,   ϕ  1   }    P  B     +    u  2    {  x  ,   ϕ  2   }     =   -    c   q  B      ∂  V    ∂  y             normal-˙  x      subscript   x  H     P  B       subscript  u  1    subscript   x   subscript  ϕ  1      P  B        subscript  u  2    x   subscript  ϕ  2                 c    q  B        V     y         \dot{x}=\{x,H\}_{PB}+u_{1}\{x,\phi_{1}\}_{PB}+u_{2}\{x,\phi_{2}\}=-\frac{c}{qB%
 }\frac{\partial V}{\partial y}          y  ˙   =    c   q  B      ∂  V    ∂  x          normal-˙  y       c    q  B        V     x       \dot{y}=\frac{c}{qB}\frac{\partial V}{\partial x}           p  ˙   x   =   -    1  2     ∂  V    ∂  x           subscript   normal-˙  p   x         1  2       V     x        \dot{p}_{x}=-\frac{1}{2}\frac{\partial V}{\partial x}            p  ˙   y   =   -    1  2     ∂  V    ∂  y       ,       subscript   normal-˙  p   y         1  2       V     y        \dot{p}_{y}=-\frac{1}{2}\frac{\partial V}{\partial y},   which are self-consistent and coincide with the Lagrangian equations of motion.  A simple calculation confirms that   φ   φ   φ    1 and   φ   φ   φ    2 are second class constraints since         {   ϕ  1   ,   ϕ  2   }    P  B    =   -    {   ϕ  2   ,   ϕ  1   }    P  B     =    q  B   c    ,         subscript    subscript  ϕ  1    subscript  ϕ  2      P  B       subscript    subscript  ϕ  2    subscript  ϕ  1      P  B              q  B   c      \{\phi_{1},\phi_{2}\}_{PB}=-\{\phi_{2},\phi_{1}\}_{PB}=\frac{qB}{c},   hence the matrix looks like       M  =     q  B   c    (     0    1       -  1     0     )     ,      M        q  B   c     0  1      1   0       M=\frac{qB}{c}\left(\begin{matrix}0&1\\
 -1&0\end{matrix}\right),   which is easily inverted to         M   -  1    =     c   q  B     (     0     -  1       1    0     )    ⇒      M   a  b    -  1    =   -    c   q   B  0      ϵ   a  b        ,     formulae-sequence     superscript  M    1         c    q  B      0    1     1  0     normal-⇒       subscript   superscript  M    1      a  b          c    q   subscript  B  0      subscript  ϵ    a  b         M^{-1}=\frac{c}{qB}\left(\begin{matrix}0&-1\\
 1&0\end{matrix}\right)\quad\Rightarrow\quad M^{-1}_{ab}=-\frac{c}{qB_{0}}%
 \epsilon_{ab},   where    ϵ   a  b      subscript  ϵ    a  b     \epsilon_{ab}   is the Levi-Civita symbol . Thus, the Dirac brackets are defined to be         {  f  ,  g  }    D  B    =     {  f  ,  g  }    P  B    +     c   ϵ   a  b      q  B      {  f  ,   ϕ  a   }    P  B      {   ϕ  b   ,  g  }    P  B       .       subscript   f  g     D  B       subscript   f  g     P  B          c   subscript  ϵ    a  b       q  B     subscript   f   subscript  ϕ  a      P  B     subscript    subscript  ϕ  b   g     P  B        \{f,g\}_{DB}=\{f,g\}_{PB}+\frac{c\epsilon_{ab}}{qB}\{f,\phi_{a}\}_{PB}\{\phi_{%
 b},g\}_{PB}.   If one always uses the Dirac bracket instead of the Poisson bracket, then there is no issue about the order of applying constraints and evaluating expressions, since the Dirac bracket of anything weakly zero is strongly equal to zero. This means that one can just use the naive Hamiltonian with Dirac brackets, instead, to thus get the correct equations of motion, which one can easily confirm on the above ones.  To quantize the system, the Dirac brackets between all of the phase space variables are needed. The nonvanishing Dirac brackets for this system are        {  x  ,  y  }    D  B    =   -    c   q  B           subscript   x  y     D  B        c    q  B       \{x,y\}_{DB}=-\tfrac{c}{qB}           {  x  ,   p  x   }    D  B    =    {  y  ,   p  y   }    D  B    =   1  2          subscript   x   subscript  p  x      D  B     subscript   y   subscript  p  y      D  B           1  2      \{x,p_{x}\}_{DB}=\{y,p_{y}\}_{DB}=\frac{1}{2}   while the cross-terms vanish, and         {   p  x   ,   p  y   }    D  B    =   -     q  B    4  c       .       subscript    subscript  p  x    subscript  p  y      D  B          q  B     4  c       \{p_{x},p_{y}\}_{DB}=-\tfrac{qB}{4c}.     Therefore, the correct implementation of canonical quantization dictates the commutation relations,       [   x  ^   ,   y  ^   ]   =   -   i     ℏ  c    q  B             normal-^  x    normal-^  y        i      Planck-constant-over-2-pi  c     q  B        [\hat{x},\hat{y}]=-i\tfrac{\hbar c}{qB}          [   x  ^   ,    p  ^   x   ]   =   [   y  ^   ,    p  ^   y   ]   =   i   ℏ  2            normal-^  x    subscript   normal-^  p   x      normal-^  y    subscript   normal-^  p   y           i    Planck-constant-over-2-pi  2       [\hat{x},\hat{p}_{x}]=[\hat{y},\hat{p}_{y}]=i\frac{\hbar}{2}   with the cross terms vanishing, and        [    p  ^   x   ,    p  ^   y   ]   =   -   i      ℏ  q  B    4  c         .        subscript   normal-^  p   x    subscript   normal-^  p   y        i      Planck-constant-over-2-pi  q  B     4  c        [\hat{p}_{x},\hat{p}_{y}]=-i\tfrac{\hbar qB}{4c}~{}.     Interestingly, this example has a nonvanishing commutator between  and , which means this structure specifies a noncommutative geometry . (Since the two coordinates do not commute, there will be an uncertainty principle for the   x   x   x   and   y   y   y   positions.)  Similarly, for free motion on a hypersphere , the   n   n   n   +1 coordinates are constrained, 1}} . From a plain kinetic Lagrangian, it is evident that their momenta are perpendicular to them, 0}} . Thus the corresponding Dirac Brackets are likewise simple to work out, 7         {   x  i   ,   x  j   }    D  B    =  0   ,       subscript    subscript  x  i    subscript  x  j      D  B    0    \{x_{i},x_{j}\}_{DB}=0,            {   x  i   ,   p  j   }    D  B    =    δ   i  j    -    x  i    x  j      ,       subscript    subscript  x  i    subscript  p  j      D  B       subscript  δ    i  j       subscript  x  i    subscript  x  j       \{x_{i},p_{j}\}_{DB}=\delta_{ij}-x_{i}x_{j},            {   p  i   ,   p  j   }    D  B    =     x  j    p  i    -    x  i     p  j       .       subscript    subscript  p  i    subscript  p  j      D  B         subscript  x  j    subscript  p  i       subscript  x  i    subscript  p  j       \{p_{i},p_{j}\}_{DB}=x_{j}p_{i}-x_{i}p_{j}~{}.   The 2(   n   n   n   +1) constrained phase-space variables obey much simpler Dirac brackets than the 2   n   n   n   unconstrained variables, had one eliminated one of the   x   x   x   s and one of the   p   p   p   s through the two constraints ab initio, which would obey plain Poisson brackets. The Dirac brackets add simplicity and elegance, at the cost of excessive (constrained) phase-space variables.  For example, for free motion on a circle,   n   n   n   =1, for   x   x   x    1 ≡   z   z   z   and eliminating   x   x   x    2 from the circle constraint yields the unconstrained       L  =    1  2       z  ˙   2    1  -   z  2        ,      L      1  2      superscript   normal-˙  z   2     1   superscript  z  2        L=\frac{1}{2}\frac{{\dot{z}}^{2}}{1-z^{2}}~{},   with equations of motion        z  ¨   =   -   z     z  ˙   2    1  -   z  2       =   -   z  2   E      ,         normal-¨  z       z     superscript   normal-˙  z   2     1   superscript  z  2                z  2  E       {\ddot{z}}=-z\frac{{\dot{z}}^{2}}{1-z^{2}}=-z2E~{},   an oscillation; whereas the equivalent constrained system with   H   H   H   =   p   p   p    2 /2 =   E   E   E   yields         x  ˙   i   =    {   x  i   ,  H  }    D  B    =    p  i     ,         superscript   normal-˙  x   i    subscript    superscript  x  i   H     D  B          superscript  p  i      {\dot{x}}^{i}=\{x^{i},H\}_{DB}=p^{i}~{},            p  ˙   i   =    {   p  i   ,  H  }    D  B    =     x  i      p  2      ,         superscript   normal-˙  p   i    subscript    superscript  p  i   H     D  B            superscript  x  i    superscript  p  2       {\dot{p}}^{i}=\{p^{i},H\}_{DB}=x^{i}~{}p^{2}~{},   whence, instantly, virtually by inspection, oscillation for both variables,         x  ¨   i   =   -    x  i   2   E      .       superscript   normal-¨  x   i        superscript  x  i   2  E      {\ddot{x}}^{i}=-x^{i}2E~{}.     References  See also   Canonical quantization  Hamiltonian mechanics  Poisson bracket  First class constraint  Second class constraints  Lagrangian  Symplectic structure  Overcompleteness   "  Category:Mathematical quantization  Category:Symplectic geometry  Category:Hamiltonian mechanics  Category:Theoretical physics     ; Dover, ISBN 0486417131. ↩  See pages 48-58 of Ch. 2 in Henneaux, Marc and Teitelboim, Claudio, Quantization of Gauge Systems . Princeton University Press, 1992. ISBN 0-691-08775-X ↩  ↩  See page 8 in Henneaux and Teitelboim in the references. ↩  Weinberg, Steven, The Quantum Theory of Fields , Volume 1. Cambridge University Press, 1995. ISBN 0-521-55001-7 ↩  See Henneaux and Teitelboim, pages 18-19. ↩  ↩     