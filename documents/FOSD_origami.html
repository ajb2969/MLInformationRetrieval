<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="690">FOSD origami</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>FOSD origami</h1>
<hr/>

<p><a href="Feature_Oriented_Programming" title="wikilink">Feature Oriented Programming</a> or <strong><em>Feature Oriented Software Development (FOSD)</em></strong> is a general paradigm for program synthesis in software product lines. Please read the <a href="Feature_Oriented_Programming" title="wikilink">Feature Oriented Programming</a> page that explains how an FOSD model of a domain is a tuple of 0-ary functions (called values) and a set of 1-ary (unary) functions called features. This page discusses multidimensional generalizations of FOSD models, which are important for compact specifications of complex programs.</p>
<h2 id="origami">Origami</h2>

<p>A fundamental generalization of metamodels is <em>origami</em>. The essential idea is that a program's design need not be represented by a single expression; multiple expressions can be used.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a><a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a><a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> This involves the use of multiple orthogonal GenVoca models.</p>
<dl>
<dd><dl>
<dd>Example: Let T be a tool model, which has features P (parse), H (harvest),D (doclet), and J (translate to Java). P is a value and the rest are unary-functions. A tool T1 that parses a file written in a Java dialect language and translates it to pure Java is modeled by: T1 = J•P. And a javadoc-like tool T2 parses a file in a Java dialect, harvests comments, and translates harvested comments into an HTML page is: T2 = D•H•P. So tools T1 and T2 are among the products of the product line of T.
</dd>
</dl>
</dd>
</dl>
<dl>
<dd><dl>
<dd>A language model L describes a family (product line) of Java dialects. It includes the features: B (Java 1.4), G (generics), S (State machines). B is a value, and the rest are unary functions. So a dialect of Java L1 that has generics (i.e., Java 1.5) is: L1 = G•B. And a dialect of Java L2 that has language support for state machines is: L2 = S•B. So dialects L1 and L2 are among the products of the product line of L.
</dd>
</dl>
</dd>
</dl>
<dl>
<dd><dl>
<dd>To describe a javadoc like tool (E) for the dialect of Java with state machines requires two expressions: one that defines the tool functionality for E (using the T model) and its Java dialect (using the L model):
</dd>
</dl>
</dd>
</dl>

<p><code>  E = D•H•P    -- tool equation</code><br/>
<code>  E = S•B      -- language equation</code></p>
<dl>
<dd><dl>
<dd>Models L and T are orthogonal GenVoca models: one expresses the feature-based structure of the E tool, and the other the feature-based structure of its input language. Note that models T and L really are <em>abstract</em> in the following sense: the implementation of any feature of T really depends on the tool's dialect (expressed by L), and (symmetrically) the implementation of any feature of L really depends on the tool's functionality (expressed by T). So the only way one could implement E is by knowing both T and L equations.
</dd>
</dl>
</dd>
</dl>

<p>Let U=[U<sub>1</sub>,U<sub>2</sub>,...,U<sub>n</sub>] be a GenVoca model of n features, and W=[W<sub>1</sub>,...W<sub>m</sub>] be a GenVoca model of m features. The relationship between two orthogonal models U and W is a matrix UW, called an <strong><em>Origami matrix</em></strong>, where each row corresponds to a feature in U and each column corresponds to a feature in W. Entry UW<sub>ij</sub> is a function that implements the <em>combination</em> of features U<sub>i</sub> and W<sub>j</sub>.</p>
<dl>
<dd>Note: UW is the <a href="tensor_product" title="wikilink">tensor product</a> of U and W (i.e., UW=U×W).
</dd>
</dl>

<p><code>    </code>

<math display="inline" id="FOSD_origami:0">
 <semantics>
  <mrow>
   <mrow>
    <mi>U</mi>
    <mi>W</mi>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>U</mi>
    <mo>×</mo>
    <mi>W</mi>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo>[</mo>
    <mtable>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>U</mi>
        <msub>
         <mi>W</mi>
         <mn>11</mn>
        </msub>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>U</mi>
        <msub>
         <mi>W</mi>
         <mn>12</mn>
        </msub>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mi mathvariant="normal">⋯</mi>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>U</mi>
        <msub>
         <mi>W</mi>
         <mrow>
          <mn>1</mn>
          <mi>n</mi>
         </mrow>
        </msub>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi mathvariant="normal">⋮</mi>
      </mtd>
      <mtd columnalign="center">
       <mi mathvariant="normal">⋮</mi>
      </mtd>
      <mtd columnalign="center">
       <mi mathvariant="normal">⋱</mi>
      </mtd>
      <mtd columnalign="center">
       <mi mathvariant="normal">⋮</mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>U</mi>
        <msub>
         <mi>W</mi>
         <mrow>
          <mi>m</mi>
          <mn>1</mn>
         </mrow>
        </msub>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>U</mi>
        <msub>
         <mi>W</mi>
         <mrow>
          <mi>m</mi>
          <mn>2</mn>
         </mrow>
        </msub>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mi mathvariant="normal">⋯</mi>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>U</mi>
        <msub>
         <mi>W</mi>
         <mrow>
          <mi>m</mi>
          <mi>n</mi>
         </mrow>
        </msub>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
    <mo>]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <times></times>
      <ci>U</ci>
      <ci>W</ci>
     </apply>
     <apply>
      <times></times>
      <ci>U</ci>
      <ci>W</ci>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <matrix>
      <matrixrow>
       <apply>
        <times></times>
        <ci>U</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>W</ci>
         <cn type="integer">11</cn>
        </apply>
       </apply>
       <apply>
        <times></times>
        <ci>U</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>W</ci>
         <cn type="integer">12</cn>
        </apply>
       </apply>
       <ci>normal-⋯</ci>
       <apply>
        <times></times>
        <ci>U</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>W</ci>
         <apply>
          <times></times>
          <cn type="integer">1</cn>
          <ci>n</ci>
         </apply>
        </apply>
       </apply>
      </matrixrow>
      <matrixrow>
       <ci>normal-⋮</ci>
       <ci>normal-⋮</ci>
       <ci>normal-⋱</ci>
       <ci>normal-⋮</ci>
      </matrixrow>
      <matrixrow>
       <apply>
        <times></times>
        <ci>U</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>W</ci>
         <apply>
          <times></times>
          <ci>m</ci>
          <cn type="integer">1</cn>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <ci>U</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>W</ci>
         <apply>
          <times></times>
          <ci>m</ci>
          <cn type="integer">2</cn>
         </apply>
        </apply>
       </apply>
       <ci>normal-⋯</ci>
       <apply>
        <times></times>
        <ci>U</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>W</ci>
         <apply>
          <times></times>
          <ci>m</ci>
          <ci>n</ci>
         </apply>
        </apply>
       </apply>
      </matrixrow>
     </matrix>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   UW=U\times W=\begin{bmatrix}UW_{11}&UW_{12}&\cdots&UW_{1n}\\
\vdots&\vdots&\ddots&\vdots\\
UW_{m1}&UW_{m2}&\cdots&UW_{mn}\end{bmatrix}
  </annotation>
 </semantics>
</math>

</p>
<dl>
<dd><dl>
<dd>Example. Recall models T=[P,H,D,J] and L=[B,G,S]. The Origami matrix TL is:
</dd>
</dl>
</dd>
</dl>

<p><code>    </code>

<math display="inline" id="FOSD_origami:1">
 <semantics>
  <mrow>
   <mrow>
    <mi>T</mi>
    <mi>L</mi>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>T</mi>
    <mo>×</mo>
    <mi>L</mi>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo>[</mo>
    <mtable>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>P</mi>
        <mi>B</mi>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>P</mi>
        <mi>G</mi>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>P</mi>
        <mi>S</mi>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>H</mi>
        <mi>B</mi>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>H</mi>
        <mi>G</mi>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>H</mi>
        <mi>S</mi>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>D</mi>
        <mi>B</mi>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>D</mi>
        <mi>G</mi>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>D</mi>
        <mi>S</mi>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>J</mi>
        <mi>B</mi>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>J</mi>
        <mi>G</mi>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>J</mi>
        <mi>S</mi>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
    <mo>]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <times></times>
      <ci>T</ci>
      <ci>L</ci>
     </apply>
     <apply>
      <times></times>
      <ci>T</ci>
      <ci>L</ci>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <matrix>
      <matrixrow>
       <apply>
        <times></times>
        <ci>P</ci>
        <ci>B</ci>
       </apply>
       <apply>
        <times></times>
        <ci>P</ci>
        <ci>G</ci>
       </apply>
       <apply>
        <times></times>
        <ci>P</ci>
        <ci>S</ci>
       </apply>
      </matrixrow>
      <matrixrow>
       <apply>
        <times></times>
        <ci>H</ci>
        <ci>B</ci>
       </apply>
       <apply>
        <times></times>
        <ci>H</ci>
        <ci>G</ci>
       </apply>
       <apply>
        <times></times>
        <ci>H</ci>
        <ci>S</ci>
       </apply>
      </matrixrow>
      <matrixrow>
       <apply>
        <times></times>
        <ci>D</ci>
        <ci>B</ci>
       </apply>
       <apply>
        <times></times>
        <ci>D</ci>
        <ci>G</ci>
       </apply>
       <apply>
        <times></times>
        <ci>D</ci>
        <ci>S</ci>
       </apply>
      </matrixrow>
      <matrixrow>
       <apply>
        <times></times>
        <ci>J</ci>
        <ci>B</ci>
       </apply>
       <apply>
        <times></times>
        <ci>J</ci>
        <ci>G</ci>
       </apply>
       <apply>
        <times></times>
        <ci>J</ci>
        <ci>S</ci>
       </apply>
      </matrixrow>
     </matrix>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   TL=T\times L=\begin{bmatrix}PB&PG&PS\\
HB&HG&HS\\
DB&DG&DS\\
JB&JG&JS\end{bmatrix}
  </annotation>
 </semantics>
</math>

</p>
<dl>
<dd><dl>
<dd>where PB is a value that implements a parser for Java, PG is a unary-function that extends a Java parser to parse generics, and PS is a unary-function that extends a Java parser to parse state machine specifications. HB is a unary-function that implements a harvester of comments on Java code. HG is a unary-function that implements a harvester of comments on generic code, and HS is a unary-function that implements a harvester of comments on state machine specifications, and so on.
</dd>
</dl>
</dd>
</dl>

<p>To see how multiple equations are used to synthesize a program, again consider models U and W. A program F is described by two equations, one per model. We can write an equation for F in two different ways: referencing features by name or by their index position, such as:</p>

<p><code>    </code>

<math display="inline" id="FOSD_origami:2">
 <semantics>
  <mrow>
   <mi>F</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>U</mi>
     <mn>1</mn>
    </msub>
    <mo>⋅</mo>
    <msub>
     <mi>U</mi>
     <mn>2</mn>
    </msub>
    <mo>⋅</mo>
    <msub>
     <mi>U</mi>
     <mn>4</mn>
    </msub>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mo largeop="true" symmetric="true">∑</mo>
     <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mrow>
       <mn>1</mn>
       <mo>,</mo>
       <mn>2</mn>
       <mo>,</mo>
       <mn>4</mn>
      </mrow>
     </mrow>
    </msub>
    <msub>
     <mi>U</mi>
     <mi>i</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>F</ci>
     <apply>
      <ci>normal-⋅</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>U</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>U</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>U</ci>
       <cn type="integer">4</cn>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <eq></eq>
        <ci>i</ci>
        <list>
         <cn type="integer">1</cn>
         <cn type="integer">2</cn>
         <cn type="integer">4</cn>
        </list>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>U</ci>
       <ci>i</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F=U_{1}\cdot U_{2}\cdot U_{4}=\sum_{i=1,2,4}U_{i}
  </annotation>
 </semantics>
</math>

<code>—U expression of F</code><br/>
<code>    </code><br/>
<code>    </code>

<math display="inline" id="FOSD_origami:3">
 <semantics>
  <mrow>
   <mi>F</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>W</mi>
     <mn>1</mn>
    </msub>
    <mo>⋅</mo>
    <msub>
     <mi>W</mi>
     <mn>3</mn>
    </msub>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mo largeop="true" symmetric="true">∑</mo>
     <mrow>
      <mi>j</mi>
      <mo>=</mo>
      <mrow>
       <mn>1</mn>
       <mo>,</mo>
       <mn>3</mn>
      </mrow>
     </mrow>
    </msub>
    <msub>
     <mi>W</mi>
     <mi>i</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>F</ci>
     <apply>
      <ci>normal-⋅</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>W</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>W</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <eq></eq>
        <ci>j</ci>
        <list>
         <cn type="integer">1</cn>
         <cn type="integer">3</cn>
        </list>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>W</ci>
       <ci>i</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F=W_{1}\cdot W_{3}=\sum_{j=1,3}W_{i}
  </annotation>
 </semantics>
</math>

<code>—W expression of F</code></p>

<p>The UW model defines how models U and W are implemented. Synthesizing program F involves projecting UW of unneeded columns and rows, and aggregating (a.k.a. <a href="tensor_contraction" title="wikilink">tensor contraction</a>):</p>

<p><code>    </code>

<math display="inline" id="FOSD_origami:4">
 <semantics>
  <mrow>
   <mi>F</mi>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mrow>
      <mrow>
       <mrow>
        <mi>U</mi>
        <msub>
         <mi>W</mi>
         <mn>11</mn>
        </msub>
       </mrow>
       <mo>⋅</mo>
       <mi>U</mi>
      </mrow>
      <msub>
       <mi>W</mi>
       <mn>21</mn>
      </msub>
     </mrow>
     <mo>⋅</mo>
     <mi mathvariant="normal">…</mi>
     <mo>⋅</mo>
     <mi>U</mi>
    </mrow>
    <msub>
     <mi>W</mi>
     <mn>33</mn>
    </msub>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mo largeop="true" symmetric="true">∑</mo>
     <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mrow>
       <mn>1</mn>
       <mo>,</mo>
       <mn>2</mn>
       <mo>,</mo>
       <mn>3</mn>
      </mrow>
     </mrow>
    </msub>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">∑</mo>
      <mrow>
       <mi>j</mi>
       <mo>=</mo>
       <mrow>
        <mn>1</mn>
        <mo>,</mo>
        <mn>3</mn>
       </mrow>
      </mrow>
     </msub>
     <mrow>
      <mi>U</mi>
      <msub>
       <mi>W</mi>
       <mrow>
        <mi>i</mi>
        <mo>,</mo>
        <mi>j</mi>
       </mrow>
      </msub>
     </mrow>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mo largeop="true" symmetric="true">∑</mo>
     <mrow>
      <mi>j</mi>
      <mo>=</mo>
      <mrow>
       <mn>1</mn>
       <mo>,</mo>
       <mn>3</mn>
      </mrow>
     </mrow>
    </msub>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">∑</mo>
      <mrow>
       <mi>i</mi>
       <mo>=</mo>
       <mrow>
        <mn>1</mn>
        <mo>,</mo>
        <mn>2</mn>
        <mo>,</mo>
        <mn>3</mn>
       </mrow>
      </mrow>
     </msub>
     <mrow>
      <mi>U</mi>
      <msub>
       <mi>W</mi>
       <mrow>
        <mi>i</mi>
        <mo>,</mo>
        <mi>j</mi>
       </mrow>
      </msub>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>F</ci>
     <apply>
      <times></times>
      <apply>
       <ci>normal-⋅</ci>
       <apply>
        <times></times>
        <apply>
         <ci>normal-⋅</ci>
         <apply>
          <times></times>
          <ci>U</ci>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>W</ci>
           <cn type="integer">11</cn>
          </apply>
         </apply>
         <ci>U</ci>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>W</ci>
         <cn type="integer">21</cn>
        </apply>
       </apply>
       <ci>normal-…</ci>
       <ci>U</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>W</ci>
       <cn type="integer">33</cn>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <eq></eq>
        <ci>i</ci>
        <list>
         <cn type="integer">1</cn>
         <cn type="integer">2</cn>
         <cn type="integer">3</cn>
        </list>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>j</ci>
         <list>
          <cn type="integer">1</cn>
          <cn type="integer">3</cn>
         </list>
        </apply>
       </apply>
       <apply>
        <times></times>
        <ci>U</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>W</ci>
         <list>
          <ci>i</ci>
          <ci>j</ci>
         </list>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <eq></eq>
        <ci>j</ci>
        <list>
         <cn type="integer">1</cn>
         <cn type="integer">3</cn>
        </list>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>i</ci>
         <list>
          <cn type="integer">1</cn>
          <cn type="integer">2</cn>
          <cn type="integer">3</cn>
         </list>
        </apply>
       </apply>
       <apply>
        <times></times>
        <ci>U</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>W</ci>
         <list>
          <ci>i</ci>
          <ci>j</ci>
         </list>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F=UW_{11}\cdot UW_{21}\cdot...\cdot UW_{33}=\sum_{i=1,2,3}\sum_{j=1,3}UW_{i,j}%
=\sum_{j=1,3}\sum_{i=1,2,3}UW_{i,j}
  </annotation>
 </semantics>
</math>

</p>

<p>A fundamental property of origami matrices, called <strong><em>orthogonality</em></strong>, is that the order in which dimensions are contracted does not matter. In the above equation, summing across the U dimension (index i) first or the W dimension (index j) first does not matter. Of course, orthogonality is a property that must be verified. Efficient (linear) algorithms have been developed to verify that origami matrices (or tensors/n-dimensional arrays) are orthogonal.<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a> The significance of orthogonality is one of view consistency. Aggregating (contracting) along a particular dimension offers a 'view' of a program. Different views should be consistent: if one repairs the program's code in one view (or proves properties about a program in one view), the correctness of those repairs or properties should hold in all views.</p>

<p>In general, a product of a product line may be represented by n expressions, from n <em>orthogonal</em> and <em>abstract</em> GenVoca models G<sub>1</sub> ... G<sub>n</sub>. The Origami matrix (or cube or tensor) is an n-dimensional array A:</p>

<p><code>     </code>

<math display="inline" id="FOSD_origami:5">
 <semantics>
  <mrow>
   <mi>A</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>G</mi>
     <mn>1</mn>
    </msub>
    <mo>×</mo>
    <mi mathvariant="normal">…</mi>
    <mo>×</mo>
    <msub>
     <mi>G</mi>
     <mi>n</mi>
    </msub>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msubsup>
     <mo largeop="true" symmetric="true">∏</mo>
     <mrow>
      <mi>k</mi>
      <mo>=</mo>
      <mn>1</mn>
     </mrow>
     <mi>n</mi>
    </msubsup>
    <msub>
     <mi>G</mi>
     <mi>k</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>A</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>G</ci>
       <cn type="integer">1</cn>
      </apply>
      <ci>normal-…</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>G</ci>
       <ci>n</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <csymbol cd="latexml">product</csymbol>
        <apply>
         <eq></eq>
         <ci>k</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>n</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>G</ci>
       <ci>k</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A=G_{1}\times...\times G_{n}=\prod_{k=1}^{n}G_{k}
  </annotation>
 </semantics>
</math>

</p>

<p>A product H of this product line is formed by eliminating unnecessary rows, columns, etc. from A, and aggregating (contracting) the n-cube into a scalar:</p>

<p><code>    </code>

<math display="inline" id="FOSD_origami:6">
 <semantics>
  <mrow>
   <mi>H</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mo largeop="true" symmetric="true">∑</mo>
     <msub>
      <mi>i</mi>
      <mn>1</mn>
     </msub>
    </msub>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">∑</mo>
      <msub>
       <mi>i</mi>
       <mn>2</mn>
      </msub>
     </msub>
     <mrow>
      <mi mathvariant="normal">…</mi>
      <mrow>
       <msub>
        <mo largeop="true" symmetric="true">∑</mo>
        <msub>
         <mi>i</mi>
         <mi>n</mi>
        </msub>
       </msub>
       <msub>
        <mi>G</mi>
        <mrow>
         <msub>
          <mi>i</mi>
          <mn>1</mn>
         </msub>
         <mo>,</mo>
         <mrow>
          <msub>
           <mi>i</mi>
           <mn>2</mn>
          </msub>
          <mi mathvariant="normal">…</mi>
          <msub>
           <mi>i</mi>
           <mi>n</mi>
          </msub>
         </mrow>
        </mrow>
       </msub>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>H</ci>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>i</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>i</ci>
        <cn type="integer">2</cn>
       </apply>
      </apply>
      <apply>
       <times></times>
       <ci>normal-…</ci>
       <apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <sum></sum>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>i</ci>
          <ci>n</ci>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>G</ci>
         <list>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>i</ci>
           <cn type="integer">1</cn>
          </apply>
          <apply>
           <times></times>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>i</ci>
            <cn type="integer">2</cn>
           </apply>
           <ci>normal-…</ci>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>i</ci>
            <ci>n</ci>
           </apply>
          </apply>
         </list>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   H=\sum_{i_{1}}\sum_{i_{2}}...\sum_{i_{n}}G_{i_{1},i_{2}...i_{n}}
  </annotation>
 </semantics>
</math>

</p>
<dl>
<dd><dl>
<dd>Example. Recall program E and model T=[P,H,D,J]. E=D•H•P=T<sub>2</sub>•T<sub>1</sub>•T<sub>0</sub>. Similarly, E's representation in model L=[B,G,S] is E=S•B=L<sub>2</sub>•L<sub>0</sub>. Synthesizing E given Origami model TL is evaluating the following expression

<math display="block" id="FOSD_origami:7">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mo>=</mo>
   <mrow>
    <munder>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mrow>
       <mn>2</mn>
       <mo>,</mo>
       <mn>0</mn>
      </mrow>
     </mrow>
    </munder>
    <mrow>
     <munder>
      <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
      <mrow>
       <mi>j</mi>
       <mo>=</mo>
       <mrow>
        <mn>2</mn>
        <mo>,</mo>
        <mn>0</mn>
       </mrow>
      </mrow>
     </munder>
     <mrow>
      <mi>T</mi>
      <msub>
       <mi>L</mi>
       <mrow>
        <mi>i</mi>
        <mo>,</mo>
        <mi>j</mi>
       </mrow>
      </msub>
     </mrow>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <munder>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mrow>
      <mi>j</mi>
      <mo>=</mo>
      <mrow>
       <mn>2</mn>
       <mo>,</mo>
       <mn>0</mn>
      </mrow>
     </mrow>
    </munder>
    <mrow>
     <munder>
      <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
      <mrow>
       <mi>i</mi>
       <mo>=</mo>
       <mrow>
        <mn>2</mn>
        <mo>,</mo>
        <mn>0</mn>
       </mrow>
      </mrow>
     </munder>
     <mrow>
      <mi>T</mi>
      <msub>
       <mi>L</mi>
       <mrow>
        <mi>i</mi>
        <mo>,</mo>
        <mi>j</mi>
       </mrow>
      </msub>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>E</ci>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <eq></eq>
        <ci>i</ci>
        <list>
         <cn type="integer">2</cn>
         <cn type="integer">0</cn>
        </list>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>j</ci>
         <list>
          <cn type="integer">2</cn>
          <cn type="integer">0</cn>
         </list>
        </apply>
       </apply>
       <apply>
        <times></times>
        <ci>T</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>L</ci>
         <list>
          <ci>i</ci>
          <ci>j</ci>
         </list>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <eq></eq>
        <ci>j</ci>
        <list>
         <cn type="integer">2</cn>
         <cn type="integer">0</cn>
        </list>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>i</ci>
         <list>
          <cn type="integer">2</cn>
          <cn type="integer">0</cn>
         </list>
        </apply>
       </apply>
       <apply>
        <times></times>
        <ci>T</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>L</ci>
         <list>
          <ci>i</ci>
          <ci>j</ci>
         </list>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E=\sum_{i=2,0}\sum_{j=2,0}TL_{i,j}=\sum_{j=2,0}\sum_{i=2,0}TL_{i,j}
  </annotation>
 </semantics>
</math>

.
</dd>
</dl>
</dd>
</dl>
<h2 id="applications">Applications</h2>

<p>There are several of product line applications developed using Origami. Among them include:</p>
<ul>
<li><a href="ftp://ftp.cs.utexas.edu/pub/predator/Origami.pdf">AHEAD Tool Suite and Extensible Java Preprocessors</a></li>
<li><a href="ftp://ftp.cs.utexas.edu/pub/predator/ECOOP2005.pdf">Expression Problem or the Extensibility Problem</a></li>
<li><a href="ftp://ftp.cs.utexas.edu/pub/predator/OrigamiMDSC.pdf">Refinements and Multi-Dimensional Separation of Concerns</a></li>
</ul>

<p>More applications to be supplied.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Feature_Oriented_Programming" title="wikilink">Feature Oriented Programming</a></li>
<li><a href="FOSD_metamodels" title="wikilink">FOSD metamodels</a></li>
<li><a href="FOSD_Feature_Interactions" title="wikilink">FOSD Feature Interactions</a></li>
</ul>
<h2 id="references">References</h2>

<p>"</p>

<p><a href="Category:Programming_paradigms" title="wikilink">Category:Programming paradigms</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2"><a href="#fnref2">↩</a></li>
<li id="fn3"><a href="#fnref3">↩</a></li>
<li id="fn4"><a href="#fnref4">↩</a></li>
</ol>
</section>
</body>
</html>
