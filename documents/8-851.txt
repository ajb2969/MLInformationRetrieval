   Ridge detection      Ridge detection   The attempt (via software) to locate ridges (or edges) in an image.  In mathematics and computer vision , the ridges (or the ridge set ) of a smooth function of two variables are a set of curves whose points are, in one or more ways to be made precise below, local maxima of the function in at least one dimension. This notion captures the intuition of geographical ridges . For a function of   N   N   N   variables, its ridges are a set of curves whose points are local maxima in    N  -  1      N  1    N-1   dimensions. In this respect, the notion of ridge points extends the concept of a local maximum . Correspondingly, the notion of valleys for a function can be defined by replacing the condition of a local maximum with the condition of a local minimum . The union of ridge sets and valley sets, together with a related set of points called the connector set form a connected set of curves that partition, intersect, or meet at the critical points of the function. This union of sets together is called the function's relative critical set . 1 2  Ridge sets, valley sets, and relative critical sets represent important geometric information intrinsic to a function. In a way, they provide a compact representation of important features of the function, but the extent to which they can be used to determine global features of the function is an open question. The primary motivation for the creation of ridge detection and valley detection procedures has come from image analysis and computer vision and is to capture the interior of elongated objects in the image domain. Ridge-related representations in terms of watersheds have been used for image segmentation . There have also been attempts to capture the shapes of objects by graph-based representations that reflect ridges, valleys and critical points in the image domain. Such representations may, however, be highly noise sensitive if computed at a single scale only. Because scale-space theoretic computations involve convolution with the Gaussian (smoothing) kernel, it has been hoped that use of multi-scale ridges, valleys and critical points in the context of scale space theory should allow for more a robust representation of objects (or shapes) in the image.  In this respect, ridges and valleys can be seen as a complement to natural interest points or local extremal points. With appropriately defined concepts, ridges and valleys in the intensity landscape (or in some other representation derived from the intensity landscape) may form a scale invariant  skeleton for organizing spatial constraints on local appearance, with a number of qualitative similarities to the way the Blum's medial axis transform provides a shape skeleton for binary images . In typical applications, ridge and valley descriptors are often used for detecting roads in aerial images and for detecting blood vessels in retinal images or three-dimensional magnetic resonance images .  Differential geometric definition of ridges and valleys at a fixed scale in a two-dimensional image  Let    f   (  x  ,  y  )       f   x  y     f(x,y)   denote a two-dimensional function, and let   L   L   L   be the scale-space representation of    f   (  x  ,  y  )       f   x  y     f(x,y)   obtained by convolving    f   (  x  ,  y  )       f   x  y     f(x,y)   with a Gaussian function       g   (  x  ,  y  ,  t  )    =    1   2  œÄ  t     e   -     (    x  2   +   y  2    )   /  2   t            g   x  y  t        1    2  œÄ  t     superscript  e           superscript  x  2    superscript  y  2    2   t        g(x,y,t)=\frac{1}{2\pi t}e^{-(x^{2}+y^{2})/2t}   . Furthermore, let    L   p  p      subscript  L    p  p     L_{pp}   and    L   q  q      subscript  L    q  q     L_{qq}   denote the eigenvalues of the Hessian matrix      H  =   [      L   x  x       L   x  y         L   x  y       L   y  y       ]       H     subscript  L    x  x     subscript  L    x  y       subscript  L    x  y     subscript  L    y  y        H=\begin{bmatrix}L_{xx}&L_{xy}\\
 L_{xy}&L_{yy}\end{bmatrix}   of the scale-space representation    L   L   L   with a coordinate transformation (a rotation) applied to local directional derivative operators,        ‚àÇ  p   =     sin  Œ≤    ‚àÇ  x    -    cos  Œ≤    ‚àÇ  y      ,    ‚àÇ  q   =     cos  Œ≤    ‚àÇ  x    +    sin  Œ≤    ‚àÇ  y         formulae-sequence     subscript   p         Œ≤    subscript   x        Œ≤    subscript   y         subscript   q         Œ≤    subscript   x        Œ≤    subscript   y        \partial_{p}=\sin\beta\partial_{x}-\cos\beta\partial_{y},\partial_{q}=\cos%
 \beta\partial_{x}+\sin\beta\partial_{y}   where p and q are coordinates of the rotated coordinate system.  It can be shown that the mixed derivative    L   p  q      subscript  L    p  q     L_{pq}   in the transformed coordinate system is zero if we choose       cos  Œ≤   =     1  2    (   1  +     L   x  x    -   L   y  y         (    L   x  x    -   L   y  y     )   2   +   4   L   x  y   2        )           Œ≤         1  2     1       subscript  L    x  x     subscript  L    y  y          superscript     subscript  L    x  x     subscript  L    y  y     2     4   superscript   subscript  L    x  y    2            \cos\beta=\sqrt{\frac{1}{2}\left(1+\frac{L_{xx}-L_{yy}}{\sqrt{(L_{xx}-L_{yy})^%
 {2}+4L_{xy}^{2}}}\right)}   ,     sin  Œ≤   =    sgn   (   L   x  y    )       1  2    (   1  -     L   x  x    -   L   y  y         (    L   x  x    -   L   y  y     )   2   +   4   L   x  y   2        )            Œ≤      sgn   subscript  L    x  y           1  2     1       subscript  L    x  x     subscript  L    y  y          superscript     subscript  L    x  x     subscript  L    y  y     2     4   superscript   subscript  L    x  y    2             \sin\beta=\operatorname{sgn}(L_{xy})\sqrt{\frac{1}{2}\left(1-\frac{L_{xx}-L_{%
 yy}}{\sqrt{(L_{xx}-L_{yy})^{2}+4L_{xy}^{2}}}\right)}   . Then, a formal differential geometric definition of the ridges of    f   (  x  ,  y  )       f   x  y     f(x,y)   at a fixed scale   t   t   t   can be expressed as the set of points that satisfy 3         L  p   =  0   ,     L   p  p    ‚â§  0   ,    |   L   p  p    |   ‚â•   |   L   q  q    |      .     formulae-sequence     subscript  L  p   0    formulae-sequence     subscript  L    p  p    0        subscript  L    p  p        subscript  L    q  q         L_{p}=0,L_{pp}\leq 0,|L_{pp}|\geq|L_{qq}|.   Correspondingly, the valleys of    f   (  x  ,  y  )       f   x  y     f(x,y)   at scale   t   t   t   are the set of points         L  q   =  0   ,     L   q  q    ‚â•  0   ,    |   L   q  q    |   ‚â•   |   L   p  p    |      .     formulae-sequence     subscript  L  q   0    formulae-sequence     subscript  L    q  q    0        subscript  L    q  q        subscript  L    p  p         L_{q}=0,L_{qq}\geq 0,|L_{qq}|\geq|L_{pp}|.   In terms of a    (  u  ,  v  )     u  v    (u,v)   coordinate system with the   v   v   v   direction parallel to the image gradient        ‚àÇ  u   =     sin  Œ±    ‚àÇ  x    -    cos  Œ±    ‚àÇ  y      ,    ‚àÇ  v   =     cos  Œ±    ‚àÇ  x    +    sin  Œ±    ‚àÇ  y         formulae-sequence     subscript   u         Œ±    subscript   x        Œ±    subscript   y         subscript   v         Œ±    subscript   x        Œ±    subscript   y        \partial_{u}=\sin\alpha\partial_{x}-\cos\alpha\partial_{y},\partial_{v}=\cos%
 \alpha\partial_{x}+\sin\alpha\partial_{y}   where        cos  Œ±   =    L  x      L  x  2   +   L  y  2       ,    sin  Œ±   =    L  y      L  x  2   +   L  y  2          formulae-sequence      Œ±      subscript  L  x        superscript   subscript  L  x   2    superscript   subscript  L  y   2           Œ±      subscript  L  y        superscript   subscript  L  x   2    superscript   subscript  L  y   2         \cos\alpha=\frac{L_{x}}{\sqrt{L_{x}^{2}+L_{y}^{2}}},\sin\alpha=\frac{L_{y}}{%
 \sqrt{L_{x}^{2}+L_{y}^{2}}}   it can be shown that this ridge and valley definition can instead be equivalently 4 be written as        L   u  v    =  0   ,     L   u  u   2   -   L   v  v   2    ‚â•  0      formulae-sequence     subscript  L    u  v    0        superscript   subscript  L    u  u    2    superscript   subscript  L    v  v    2    0     L_{uv}=0,L_{uu}^{2}-L_{vv}^{2}\geq 0   where         L  v  2    L   u  u     =      L  x  2    L   y  y     -   2   L  x    L  y    L   x  y      +    L  y  2    L   x  x       ,         superscript   subscript  L  v   2    subscript  L    u  u            superscript   subscript  L  x   2    subscript  L    y  y       2   subscript  L  x    subscript  L  y    subscript  L    x  y         superscript   subscript  L  y   2    subscript  L    x  x        L_{v}^{2}L_{uu}=L_{x}^{2}L_{yy}-2L_{x}L_{y}L_{xy}+L_{y}^{2}L_{xx},            L  v  2    L   u  v     =     L  x    L  y    (    L   x  x    -   L   y  y     )    -    (    L  x  2   -   L  y  2    )    L   x  y       ,         superscript   subscript  L  v   2    subscript  L    u  v          subscript  L  x    subscript  L  y      subscript  L    x  x     subscript  L    y  y           superscript   subscript  L  x   2    superscript   subscript  L  y   2     subscript  L    x  y        L_{v}^{2}L_{uv}=L_{x}L_{y}(L_{xx}-L_{yy})-(L_{x}^{2}-L_{y}^{2})L_{xy},           L  v  2    L   v  v     =     L  x  2    L   x  x     +   2   L  x    L  y    L   x  y     +    L  y  2    L   y  y             superscript   subscript  L  v   2    subscript  L    v  v          superscript   subscript  L  x   2    subscript  L    x  x       2   subscript  L  x    subscript  L  y    subscript  L    x  y        superscript   subscript  L  y   2    subscript  L    y  y        L_{v}^{2}L_{vv}=L_{x}^{2}L_{xx}+2L_{x}L_{y}L_{xy}+L_{y}^{2}L_{yy}   and the sign of    L   u  u      subscript  L    u  u     L_{uu}   determines the polarity;     L   u  u    <  0       subscript  L    u  u    0    L_{uu}<0   for ridges and     L   u  u    >  0       subscript  L    u  u    0    L_{uu}>0   for valleys.  Computation of variable scale ridges from two-dimensional images  A main problem with the fixed scale ridge definition presented above is that it can be very sensitive to the choice of the scale level. Experiments show that the scale parameter of the Gaussian pre-smoothing kernel must be carefully tuned to the width of the ridge structure in the image domain, in order for the ridge detector to produce a connected curve reflecting the underlying image structures. To handle this problem in the absence of prior information, the notion of scale-space ridges has been introduced, which treats the scale parameter as an inherent property of the ridge definition and allows the scale levels to vary along a scale-space ridge. Moreover, the concept of a scale-space ridge also allows the scale parameter to be automatically tuned to the width of the ridge structures in the image domain, in fact as a consequence of a well-stated definition. In the literature, a number of different approaches have been proposed based on this idea.  Let    R   (  x  ,  y  ,  t  )       R   x  y  t     R(x,y,t)   denote a measure of ridge strength (to be specified below). Then, for a two-dimensional image, a scale-space ridge is the set of points that satisfy         L  p   =  0   ,     L   p  p    ‚â§  0   ,      ‚àÇ  t    (  R  )    =  0   ,     ‚àÇ   t  t     (  R  )    ‚â§  0      ,     formulae-sequence     subscript  L  p   0    formulae-sequence     subscript  L    p  p    0    formulae-sequence      subscript   t   R   0       subscript     t  t    R   0       L_{p}=0,L_{pp}\leq 0,\partial_{t}(R)=0,\partial_{tt}(R)\leq 0,   where   t   t   t   is the scale parameter in the scale-space representation . Similarly, a scale-space valley is the set of points that satisfy        L  q   =  0   ,     L   q  q    ‚â•  0   ,      ‚àÇ  t    (  R  )    =  0   ,     ‚àÇ   t  t     (  R  )    ‚â§  0.        formulae-sequence     subscript  L  q   0    formulae-sequence     subscript  L    q  q    0    formulae-sequence      subscript   t   R   0       subscript     t  t    R   0.       L_{q}=0,L_{qq}\geq 0,\partial_{t}(R)=0,\partial_{tt}(R)\leq 0.   An immediate consequence of this definition is that for a two-dimensional image the concept of scale-space ridges sweeps out a set of one-dimensional curves in the three-dimensional scale-space, where the scale parameter is allowed to vary along the scale-space ridge (or the scale-space valley). The ridge descriptor in the image domain will then be a projection of this three-dimensional curve into the two-dimensional image plane, where the attribute scale information at every ridge point can be used as a natural estimate of the width of the ridge structure in the image domain in a neighbourhood of that point.  In the literature, various measures of ridge strength have been proposed. When Lindeberg (1996, 1998) 5 coined the term scale-space ridge, he considered three measures of ridge strength:   The main principal curvature          L    p  p   ,   Œ≥  -   n  o  r  m      =     t  Œ≥   2    (     L   x  x    +   L   y  y     -      (    L   x  x    -   L   y  y     )   2   +   4   L   x  y   2       )         subscript  L     p  p     Œ≥    n  o  r  m           superscript  t  Œ≥   2        subscript  L    x  x     subscript  L    y  y          superscript     subscript  L    x  x     subscript  L    y  y     2     4   superscript   subscript  L    x  y    2          L_{pp,\gamma-norm}=\frac{t^{\gamma}}{2}\left(L_{xx}+L_{yy}-\sqrt{(L_{xx}-L_{yy%
 })^{2}+4L_{xy}^{2}}\right)       expressed in terms of    Œ≥   Œ≥   \gamma   -normalized derivatives with       ‚àÇ  Œæ   =    t   Œ≥  /  2     ‚àÇ  x     ,    ‚àÇ  Œ∑   =    t   Œ≥  /  2     ‚àÇ  y        formulae-sequence     subscript   Œæ      superscript  t    Œ≥  2     subscript   x        subscript   Œ∑      superscript  t    Œ≥  2     subscript   y       \partial_{\xi}=t^{\gamma/2}\partial_{x},\partial_{\eta}=t^{\gamma/2}\partial_{y}   .     The square of the   Œ≥   Œ≥   \gamma   -normalized square eigenvalue difference           N   Œ≥  -   n  o  r  m     =    (    L    p  p   ,   Œ≥  -   n  o  r  m     2   -   L    q  q   ,   Œ≥  -   n  o  r  m     2    )   2   =    t   4  Œ≥      (    L   x  x    +   L   y  y     )   2    (     (    L   x  x    -   L   y  y     )   2   +   4   L   x  y   2     )     .         subscript  N    Œ≥    n  o  r  m      superscript     superscript   subscript  L     p  p     Œ≥    n  o  r  m      2    superscript   subscript  L     q  q     Œ≥    n  o  r  m      2    2           superscript  t    4  Œ≥     superscript     subscript  L    x  x     subscript  L    y  y     2      superscript     subscript  L    x  x     subscript  L    y  y     2     4   superscript   subscript  L    x  y    2         N_{\gamma-norm}=\left(L_{pp,\gamma-norm}^{2}-L_{qq,\gamma-norm}^{2}\right)^{2}%
 =t^{4\gamma}(L_{xx}+L_{yy})^{2}\left((L_{xx}-L_{yy})^{2}+4L_{xy}^{2}\right).         The square of the   Œ≥   Œ≥   \gamma   -normalized eigenvalue difference           A   Œ≥  -   n  o  r  m     =    (    L    p  p   ,   Œ≥  -   n  o  r  m      -   L    q  q   ,   Œ≥  -   n  o  r  m       )   2   =    t   2  Œ≥     (     (    L   x  x    -   L   y  y     )   2   +   4   L   x  y   2     )     .         subscript  A    Œ≥    n  o  r  m      superscript     subscript  L     p  p     Œ≥    n  o  r  m       subscript  L     q  q     Œ≥    n  o  r  m       2           superscript  t    2  Œ≥       superscript     subscript  L    x  x     subscript  L    y  y     2     4   superscript   subscript  L    x  y    2         A_{\gamma-norm}=\left(L_{pp,\gamma-norm}-L_{qq,\gamma-norm}\right)^{2}=t^{2%
 \gamma}\left((L_{xx}-L_{yy})^{2}+4L_{xy}^{2}\right).        The notion of   Œ≥   Œ≥   \gamma   -normalized derivatives is essential here, since it allows the ridge and valley detector algorithms to be calibrated properly. By requiring that for a one-dimensional Gaussian ridge embedded in two (or three dimensions) the detection scale should be equal to the width of the ridge structure when measured in units of length (a requirement of a match between the size of the detection filter and the image structure it responds to), it follows that one should choose    Œ≥  =   3  /  4       Œ≥    3  4     \gamma=3/4   . Out of these three measures of ridge strength, the first entity    L    p  p   ,   Œ≥  -   n  o  r  m        subscript  L     p  p     Œ≥    n  o  r  m       L_{pp,\gamma-norm}   is a general purpose ridge strength measure with many applications such as blood vessel detection and road extraction. Nevertheless, the entity    A   Œ≥  -   n  o  r  m       subscript  A    Œ≥    n  o  r  m      A_{\gamma-norm}   has been used in applications such as fingerprint enhancement, 6 real-time hand tracking and gesture recognition 7 as well as for modelling local image statistics for detecting and tracking humans in images and video. 8  There are also other closely related ridge definitions that make use of normalized derivatives with the implicit assumption of    Œ≥  =  1      Œ≥  1    \gamma=1   . 9  Develop these approaches in further detail. When detecting ridges with    Œ≥  =  1      Œ≥  1    \gamma=1   , however, the detection scale will be twice as large as for    Œ≥  =   3  /  4       Œ≥    3  4     \gamma=3/4   , resulting in more shape distortions and a lower ability to capture ridges and valleys with nearby interfering image structures in the image domain.  History  The notion of ridges and valleys in digital images was introduced by Haralick in 1983 10 and by Crowley concerning difference of Gaussians  pyramids in 1984. 11 12 The application of ridge descriptors to medical image analysis has been extensively studied by Pizer and his co-workers 13 14 15 resulting in their notion of M-reps. 16 Ridge detection has also been furthered by Lindeberg with the introduction of   Œ≥   Œ≥   \gamma   -normalized derivatives and scale-space ridges defined from local maximization of the appropriately normalized main principal curvature of the Hessian matrix (or other measures of ridge strength) over space and over scale. These notions have later been developed with application to road extraction by Steger et al. 17 18 and to blood vessel segmentation by Frangi et al. 19 as well as to the detection of curvilinear and tubular structures by Sato et al. 20 and Krissian et al. 21 A review of several of the classical ridge definitions at a fixed scale including relations between them has been given by Koenderink and van Doorn. 22 A review of vessel extraction techniques has been presented by Kirbas and Quek. 23  Definition of ridges and valleys in N dimensions  In its broadest sense, the notion of ridge generalizes the idea of a local maximum of a real-valued function. A point    ùê±  0     subscript  ùê±  0    \mathbf{x}_{0}   in the domain of a function    f  :    ‚Ñù  n   ‚Üí  ‚Ñù      normal-:  f   normal-‚Üí   superscript  ‚Ñù  n   ‚Ñù     f:\mathbb{R}^{n}\rightarrow\mathbb{R}   is a local maximum of the function if there is a distance    Œ¥  >  0      Œ¥  0    \delta>0   with the property that if   ùê±   ùê±   \mathbf{x}   is within   Œ¥   Œ¥   \delta   units of    ùê±  0     subscript  ùê±  0    \mathbf{x}_{0}   , then     f   (  ùê±  )    <   f   (   ùê±  0   )          f  ùê±     f   subscript  ùê±  0      f(\mathbf{x})   . It is well known that critical points, of which local maxima are just one type, are isolated points in a function's domain in all but the most unusual situations ( i.e. , the nongeneric cases).  Consider relaxing the condition that     f   (  ùê±  )    <   f   (   ùê±  0   )          f  ùê±     f   subscript  ùê±  0      f(\mathbf{x})   for   ùê±   ùê±   \mathbf{x}   in an entire neighborhood of    ùê±  0     subscript  ùê±  0    \mathbf{x}_{0}   slightly to require only that this hold on an    n  -  1      n  1    n-1   dimensional subset. Presumably this relaxation allows the set of points which satisfy the criteria, which we will call the ridge, to have a single degree of freedom, at least in the generic case. This means that the set of ridge points will form a 1-dimensional locus, or a ridge curve. Notice that the above can be modified to generalize the idea to local minima and result in what might call 1-dimensional valley curves.  This following ridge definition follows the book by Eberly 24 and can be seen as a generalization of some of the abovementioned ridge definitions. Let    U  ‚äÇ   ‚Ñù  n       U   superscript  ‚Ñù  n     U\subset\mathbb{R}^{n}   be an open set, and    f  :   U  ‚Üí  ‚Ñù      normal-:  f   normal-‚Üí  U  ‚Ñù     f:U\rightarrow\mathbb{R}   be smooth. Let     ùê±  0   ‚àà  U       subscript  ùê±  0   U    \mathbf{x}_{0}\in U   . Let     ‚àá   ùê±  0    f      subscript  normal-‚àá   subscript  ùê±  0    f    \nabla_{\mathbf{x}_{0}}f   be the gradient of   f   f   f   at    ùê±  0     subscript  ùê±  0    \mathbf{x}_{0}   , and let     H   ùê±  0     (  f  )        subscript  H   subscript  ùê±  0    f    H_{\mathbf{x}_{0}}(f)   be the    n  √ó  n      n  n    n\times n   Hessian matrix of   f   f   f   at    ùê±  0     subscript  ùê±  0    \mathbf{x}_{0}   . Let     Œª  1   ‚â§   Œª  2   ‚â§  ‚ãØ  ‚â§   Œª  n          subscript  Œª  1    subscript  Œª  2        normal-‚ãØ        subscript  Œª  n      \lambda_{1}\leq\lambda_{2}\leq\cdots\leq\lambda_{n}   be the   n   n   n   ordered eigenvalues of     H   ùê±  0     (  f  )        subscript  H   subscript  ùê±  0    f    H_{\mathbf{x}_{0}}(f)   and let    ùêû  i     subscript  ùêû  i    \mathbf{e}_{i}   be a unit eigenvector in the eigenspace for    Œª  i     subscript  Œª  i    \lambda_{i}   . (For this, one should assume that all the eigenvalues are distinct.)  The point    ùê±  0     subscript  ùê±  0    \mathbf{x}_{0}   is a point on the 1-dimensional ridge of   f   f   f   if the following conditions hold:        Œª   n  -  1    <  0       subscript  Œª    n  1    0    \lambda_{n-1}<0   , and        ‚àá   ùê±  0     f  ‚ãÖ   ùêû  i     =  0        subscript  normal-‚àá   subscript  ùê±  0     normal-‚ãÖ  f   subscript  ùêû  i     0    \nabla_{\mathbf{x}_{0}}f\cdot\mathbf{e}_{i}=0   for    i  =   1  ,  2  ,  ‚Ä¶  ,   n  -  1        i   1  2  normal-‚Ä¶    n  1      i=1,2,\ldots,n-1   .   This makes precise the concept that   f   f   f   restricted to this particular     n  -  1      n  1    n-1   -dimensional subspace has a local maxima at    ùê±  0     subscript  ùê±  0    \mathbf{x}_{0}   .  This definition naturally generalizes to the k -dimensional ridge as follows: the point    ùê±  0     subscript  ùê±  0    \mathbf{x}_{0}   is a point on the k -dimensional ridge of   f   f   f   if the following conditions hold:        Œª   n  -  k    <  0       subscript  Œª    n  k    0    \lambda_{n-k}<0   , and        ‚àá   ùê±  0     f  ‚ãÖ   ùêû  i     =  0        subscript  normal-‚àá   subscript  ùê±  0     normal-‚ãÖ  f   subscript  ùêû  i     0    \nabla_{\mathbf{x}_{0}}f\cdot\mathbf{e}_{i}=0   for    i  =   1  ,  2  ,  ‚Ä¶  ,   n  -  k        i   1  2  normal-‚Ä¶    n  k      i=1,2,\ldots,n-k   .   In many ways, these definitions naturally generalize that of a local maximum of a function. Properties of maximal convexity ridges are put on a solid mathematical footing by Damon 25 and Miller. 26 Their properties in one-parameter families was established by Keller. 27  Maximal Scale Ridge  The following definition can be traced to Fritsch 28 who was interested in extracting geometric information about figures in two dimensional greyscale images. Fritsch filtered his image with a "medialness" filter that gave him information analogous to "distant to the boundary" data in scale-space. Ridges of this image, once projected to the original image, were to be analogous to a shape skeleton ( e.g. , the Blum Medial Axis) of the original image.  What follows is a definition for the maximal scale ridge of a function of three variables, one of which is a "scale" parameter. One thing that we want to be true in this definition is, if    (  ùê±  ,  œÉ  )     ùê±  œÉ    (\mathbf{x},\sigma)   is a point on this ridge, then the value of the function at the point is maximal in the scale dimension. Let    f   (  ùê±  ,  œÉ  )       f   ùê±  œÉ     f(\mathbf{x},\sigma)   be a smooth differentiable function on    U  ‚äÇ    ‚Ñù  2   √ó   ‚Ñù  +        U     superscript  ‚Ñù  2    subscript  ‚Ñù       U\subset\mathbb{R}^{2}\times\mathbb{R}_{+}   . The    (  ùê±  ,  œÉ  )     ùê±  œÉ    (\mathbf{x},\sigma)   is a point on the maximal scale ridge if and only if         ‚àÇ  f    ‚àÇ  œÉ    =  0          f     œÉ    0    \frac{\partial f}{\partial\sigma}=0   and       ‚àÇ  2   f    ‚àÇ   œÉ  2     <  0          superscript   2   f      superscript  œÉ  2     0    \frac{\partial^{2}f}{\partial\sigma^{2}}<0   , and       ‚àá   f  ‚ãÖ   ùêû  1     =  0       normal-‚àá   normal-‚ãÖ  f   subscript  ùêû  1     0    \nabla f\cdot\mathbf{e}_{1}=0   and      ùêû  1  t   H   (  f  )    ùêû  1    <  0         superscript   subscript  ùêû  1   t   H  f   subscript  ùêû  1    0    \mathbf{e}_{1}^{t}H(f)\mathbf{e}_{1}<0   .   Relations between edge detection and ridge detection  The purpose of ridge detection is usually to capture the major axis of symmetry of an elongated object, whereas the purpose of edge detection is usually to capture the boundary of the object. However, some literature on edge detection erroneously includes the notion of ridges into the concept of edges, which confuses the situation.  In terms of definitions, there is a close connection between edge detectors and ridge detectors. With the formulation of non-maximum as given by Canny, 29 it holds that edges are defined as the points where the gradient magnitude assumes a local maximum in the gradient direction. Following a differential geometric way of expressing this definition, 30 we can in the above-mentioned    (  u  ,  v  )     u  v    (u,v)   -coordinate system state that the gradient magnitude of the scale-space representation, which is equal to the first-order directional derivative in the   v   v   v   -direction    L  v     subscript  L  v    L_{v}   , should have its first order directional derivative in the   v   v   v   -direction equal to zero        ‚àÇ  v    (   L  v   )    =  0        subscript   v    subscript  L  v    0    \partial_{v}(L_{v})=0   while the second-order directional derivative in the   v   v   v   -direction of    L  v     subscript  L  v    L_{v}   should be negative, i.e.,        ‚àÇ   v  v     (   L  v   )    ‚â§  0        subscript     v  v     subscript  L  v    0    \partial_{vv}(L_{v})\leq 0   . Written out as an explicit expression in terms of local partial derivatives    L  x     subscript  L  x    L_{x}   ,    L  y     subscript  L  y    L_{y}   ...    L   y  y  y      subscript  L    y  y  y     L_{yyy}   , this edge definition can be expressed as the zero-crossing curves of the differential invariant         L  v  2    L   v  v     =      L  x  2     L   x  x     +    2     L  x      L  y     L   x  y     +     L  y  2     L   y  y      =  0   ,           superscript   subscript  L  v   2    subscript  L    v  v          superscript   subscript  L  x   2    subscript  L    x  x       2   subscript  L  x    subscript  L  y    subscript  L    x  y        superscript   subscript  L  y   2    subscript  L    y  y           0     L_{v}^{2}L_{vv}=L_{x}^{2}\,L_{xx}+2\,L_{x}\,L_{y}\,L_{xy}+L_{y}^{2}\,L_{yy}=0,   that satisfy a sign-condition on the following differential invariant        L  v  3    L   v  v  v     =      L  x  3     L   x  x  x     +    3     L  x  2      L  y     L   x  x  y     +    3     L  x      L  y  2     L   x  y  y     +     L  y  3     L   y  y  y      ‚â§  0           superscript   subscript  L  v   3    subscript  L    v  v  v          superscript   subscript  L  x   3    subscript  L    x  x  x       3   superscript   subscript  L  x   2    subscript  L  y    subscript  L    x  x  y       3   subscript  L  x    superscript   subscript  L  y   2    subscript  L    x  y  y        superscript   subscript  L  y   3    subscript  L    y  y  y           0     L_{v}^{3}L_{vvv}=L_{x}^{3}\,L_{xxx}+3\,L_{x}^{2}\,L_{y}\,L_{xxy}+3\,L_{x}\,L_{%
 y}^{2}\,L_{xyy}+L_{y}^{3}\,L_{yyy}\leq 0   (see the article on edge detection for more information). Notably, the edges obtained in this way are the ridges of the gradient magnitude.  See also   Scale space  Feature detection (computer vision)  Edge detection  Interest point detection  Blob detection  Computer vision   References    External links   Multiscale analysis for optimized vessel segmentation of fundus retina images Ph.D Thesis   "  Category:Feature detection (computer vision)  Category:Multivariable calculus  Category:Smooth functions  Category:Singularity theory     ‚Ü©  Miller, J. Relative Critical Sets in    ‚Ñù  n     superscript  ‚Ñù  n    \mathbb{R}^{n}   and Applications to Image Analysis. Ph.D. Dissertation. University of North Carolina. 1998. ‚Ü©  ‚Ü©  ‚Ü©  Earlier version presented at IEEE Conference on Pattern Recognition and Computer Vision, CVPR'96, San Francisco, California, pages 465‚Äì470, june 1996 ‚Ü©  ‚Ü©  L. Bretzner, I. Laptev and T. Lindeberg: Hand Gesture Recognition using Multi-Scale Colour Features, Hierarchical Models and Particle Filtering, Proc. IEEE Conference on Face and Gesture 2002, Washington DC, 423‚Äì428. ‚Ü©  ‚Ü©  J. Furst and J. Miller, "The Maximal Scale Ridge: Incorporating Scale in the Ridge Definition", Scale Space Theory in Computer Vision: Proceedings of the First International Conference on, Scale Space '97, pp. 93‚Äì104. Springer Lecture Notes in Computer Science, vol. 1682. ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  S. Pizer, S. Joshi, T. Fletcher, M. Styner, G. Tracton, J. Chen (2001) "Segmentation of Single-Figure Objects by Deformable M-reps", Proceedings of the 4th International Conference on Medical Image Computing and Computer-Assisted Intervention, Springer Lecture Notes In Computer Science; Vol. 2208, pp. 862‚Äì871 ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©    Kerrel, R. Generic Transitions of Relative Critical Sets in Parameterized Families with Applications to Image Analysis. University of North Carolina. 1999. ‚Ü©  Fritsch, DS, Eberly,D., Pizer, SM, and McAuliffe, MJ. "Stimulated cores and their applications in medical imaging." Information Processing in Medical Imaging, Y. Bizais, C Barillot, R DiPaola, eds., Kluwer Series in Computational Imaging and Vision, pp. 365‚Äì368. ‚Ü©  ‚Ü©  ‚Ü©     