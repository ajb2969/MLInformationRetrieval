<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="619">Coherent sampling</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Coherent sampling</h1>
<hr/>

<p><a href="Fast_Fourier_Transform" title="wikilink">Fast Fourier Transform</a> (FFT) is a common tool to investigate performance of data converters and other sampled systems. <strong>Coherent sampling</strong> refers to a certain relationship between input <a class="uri" href="frequency" title="wikilink">frequency</a>, 

<math display="inline" id="Coherent_sampling:0">
 <semantics>
  <msub>
   <mi>f</mi>
   <mrow>
    <mi>i</mi>
    <mi>n</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>f</ci>
    <apply>
     <times></times>
     <ci>i</ci>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{in}
  </annotation>
 </semantics>
</math>

, <a href="sampling_frequency" title="wikilink">sampling frequency</a>, 

<math display="inline" id="Coherent_sampling:1">
 <semantics>
  <msub>
   <mi>f</mi>
   <mi>s</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>f</ci>
    <ci>s</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{s}
  </annotation>
 </semantics>
</math>

, number of cycles in the sampled set, 

<math display="inline" id="Coherent_sampling:2">
 <semantics>
  <msub>
   <mi>M</mi>
   <mrow>
    <mi>c</mi>
    <mi>y</mi>
    <mi>c</mi>
    <mi>l</mi>
    <mi>e</mi>
    <mi>s</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>M</ci>
    <apply>
     <times></times>
     <ci>c</ci>
     <ci>y</ci>
     <ci>c</ci>
     <ci>l</ci>
     <ci>e</ci>
     <ci>s</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   M_{cycles}
  </annotation>
 </semantics>
</math>

, and number of samples, 

<math display="inline" id="Coherent_sampling:3">
 <semantics>
  <msub>
   <mi>N</mi>
   <mrow>
    <mi>s</mi>
    <mi>a</mi>
    <mi>m</mi>
    <mi>p</mi>
    <mi>l</mi>
    <mi>e</mi>
    <mi>s</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>N</ci>
    <apply>
     <times></times>
     <ci>s</ci>
     <ci>a</ci>
     <ci>m</ci>
     <ci>p</ci>
     <ci>l</ci>
     <ci>e</ci>
     <ci>s</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   N_{samples}
  </annotation>
 </semantics>
</math>

. With coherent sampling one is assured that the signal power in an FFT is contained within one FFT bin, assuming single input frequency.</p>

<p>The condition for coherent sampling is given by</p>

<p>

<math display="block" id="Coherent_sampling:4">
 <semantics>
  <mrow>
   <mrow>
    <mfrac>
     <msub>
      <mi>f</mi>
      <mrow>
       <mi>i</mi>
       <mi>n</mi>
      </mrow>
     </msub>
     <msub>
      <mi>f</mi>
      <mi>s</mi>
     </msub>
    </mfrac>
    <mo>=</mo>
    <mfrac>
     <msub>
      <mi>M</mi>
      <mrow>
       <mi>c</mi>
       <mi>y</mi>
       <mi>c</mi>
       <mi>l</mi>
       <mi>e</mi>
       <mi>s</mi>
      </mrow>
     </msub>
     <msub>
      <mi>N</mi>
      <mrow>
       <mi>s</mi>
       <mi>a</mi>
       <mi>m</mi>
       <mi>p</mi>
       <mi>l</mi>
       <mi>e</mi>
       <mi>s</mi>
      </mrow>
     </msub>
    </mfrac>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <divide></divide>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>f</ci>
      <apply>
       <times></times>
       <ci>i</ci>
       <ci>n</ci>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>f</ci>
      <ci>s</ci>
     </apply>
    </apply>
    <apply>
     <divide></divide>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>M</ci>
      <apply>
       <times></times>
       <ci>c</ci>
       <ci>y</ci>
       <ci>c</ci>
       <ci>l</ci>
       <ci>e</ci>
       <ci>s</ci>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>N</ci>
      <apply>
       <times></times>
       <ci>s</ci>
       <ci>a</ci>
       <ci>m</ci>
       <ci>p</ci>
       <ci>l</ci>
       <ci>e</ci>
       <ci>s</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \frac{f_{in}}{f_{s}}=\frac{M_{cycles}}{N_{samples}}.
  </annotation>
 </semantics>
</math>

</p>

<p>Where 

<math display="inline" id="Coherent_sampling:5">
 <semantics>
  <msub>
   <mi>N</mi>
   <mrow>
    <mi>s</mi>
    <mi>a</mi>
    <mi>m</mi>
    <mi>p</mi>
    <mi>l</mi>
    <mi>e</mi>
    <mi>s</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>N</ci>
    <apply>
     <times></times>
     <ci>s</ci>
     <ci>a</ci>
     <ci>m</ci>
     <ci>p</ci>
     <ci>l</ci>
     <ci>e</ci>
     <ci>s</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   N_{samples}
  </annotation>
 </semantics>
</math>

 value must be a power of 2 and 

<math display="inline" id="Coherent_sampling:6">
 <semantics>
  <msub>
   <mi>M</mi>
   <mrow>
    <mi>c</mi>
    <mi>y</mi>
    <mi>c</mi>
    <mi>l</mi>
    <mi>e</mi>
    <mi>s</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>M</ci>
    <apply>
     <times></times>
     <ci>c</ci>
     <ci>y</ci>
     <ci>c</ci>
     <ci>l</ci>
     <ci>e</ci>
     <ci>s</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   M_{cycles}
  </annotation>
 </semantics>
</math>

 value must be an odd or prime number.</p>

<p>If we have 

<math display="inline" id="Coherent_sampling:7">
 <semantics>
  <mrow>
   <msub>
    <mi>N</mi>
    <mrow>
     <mi>s</mi>
     <mi>a</mi>
     <mi>m</mi>
     <mi>p</mi>
     <mi>l</mi>
     <mi>e</mi>
     <mi>s</mi>
    </mrow>
   </msub>
   <mo>=</mo>
   <msup>
    <mn>2</mn>
    <mn>11</mn>
   </msup>
   <mo>=</mo>
   <mn>2048</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>N</ci>
      <apply>
       <times></times>
       <ci>s</ci>
       <ci>a</ci>
       <ci>m</ci>
       <ci>p</ci>
       <ci>l</ci>
       <ci>e</ci>
       <ci>s</ci>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <cn type="integer">11</cn>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <cn type="integer">2048</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   N_{samples}=2^{11}=2048
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Coherent_sampling:8">
 <semantics>
  <mrow>
   <msub>
    <mi>f</mi>
    <mi>s</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mn>100</mn>
    <mi>e</mi>
    <mn>6</mn>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <ci>s</ci>
    </apply>
    <apply>
     <times></times>
     <cn type="integer">100</cn>
     <ci>e</ci>
     <cn type="integer">6</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{s}=100e6
  </annotation>
 </semantics>
</math>

 and we want an input frequency close to 

<math display="inline" id="Coherent_sampling:9">
 <semantics>
  <mrow>
   <msub>
    <mi>f</mi>
    <mi>s</mi>
   </msub>
   <mo>/</mo>
   <mn>2</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <divide></divide>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <ci>s</ci>
    </apply>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{s}/2
  </annotation>
 </semantics>
</math>

, let's say 

<math display="inline" id="Coherent_sampling:10">
 <semantics>
  <mrow>
   <msub>
    <mi>f</mi>
    <mrow>
     <mi>i</mi>
     <mi>n</mi>
    </mrow>
   </msub>
   <mo>=</mo>
   <mrow>
    <mn>44</mn>
    <mi>M</mi>
    <mi>H</mi>
    <mi>z</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <apply>
      <times></times>
      <ci>i</ci>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <cn type="integer">44</cn>
     <ci>M</ci>
     <ci>H</ci>
     <ci>z</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{in}=44MHz
  </annotation>
 </semantics>
</math>

, then 

<math display="inline" id="Coherent_sampling:11">
 <semantics>
  <mrow>
   <msub>
    <mi>M</mi>
    <mrow>
     <mi>c</mi>
     <mi>y</mi>
     <mi>c</mi>
     <mi>l</mi>
     <mi>e</mi>
     <mi>s</mi>
    </mrow>
   </msub>
   <mo>=</mo>
   <mn>901.12</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>M</ci>
     <apply>
      <times></times>
      <ci>c</ci>
      <ci>y</ci>
      <ci>c</ci>
      <ci>l</ci>
      <ci>e</ci>
      <ci>s</ci>
     </apply>
    </apply>
    <cn type="float">901.12</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   M_{cycles}=901.12
  </annotation>
 </semantics>
</math>

 which is close to an integer, so we could round it down to 

<math display="inline" id="Coherent_sampling:12">
 <semantics>
  <mrow>
   <msub>
    <mi>M</mi>
    <mrow>
     <mi>c</mi>
     <mi>y</mi>
     <mi>c</mi>
     <mi>l</mi>
     <mi>e</mi>
     <mi>s</mi>
    </mrow>
   </msub>
   <mo>=</mo>
   <mn>901</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>M</ci>
     <apply>
      <times></times>
      <ci>c</ci>
      <ci>y</ci>
      <ci>c</ci>
      <ci>l</ci>
      <ci>e</ci>
      <ci>s</ci>
     </apply>
    </apply>
    <cn type="integer">901</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   M_{cycles}=901
  </annotation>
 </semantics>
</math>

 and we would get 

<math display="inline" id="Coherent_sampling:13">
 <semantics>
  <mrow>
   <msub>
    <mi>f</mi>
    <mrow>
     <mi>i</mi>
     <mi>n</mi>
    </mrow>
   </msub>
   <mo>=</mo>
   <mrow>
    <mn>43994140.625</mn>
    <mi>H</mi>
    <mi>z</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <apply>
      <times></times>
      <ci>i</ci>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <cn type="float">43994140.625</cn>
     <ci>H</ci>
     <ci>z</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{in}=43994140.625Hz
  </annotation>
 </semantics>
</math>

. This is an input frequency that satisfies coherent sampling and makes sure that we get an integer number of cycles.</p>

<p>This integer number 

<math display="inline" id="Coherent_sampling:14">
 <semantics>
  <mi>M</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>M</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   M
  </annotation>
 </semantics>
</math>

 can be chosen to be a <a href="Prime_number" title="wikilink">Prime number</a> (except for 2). This ensures that the same FFT samples will not be repeated across any input signal cycles of the sampled signal<a href="http://www.maxim-ic.com/appnotes.cfm/appnote_number/1040/">1</a>. For example, if N=32 and M=6 (non-prime) then there will be N/M=5.33 samples per cycle of the input frequency, so three cycles of the input will take exactly 16 samples, and so the first 16 samples will be identical to the second 16 samples. Usually, no additional information is gained by repeating with the same sampling points and so generally a non-prime M should not be used.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a class="uri" href="Bin-centres" title="wikilink">Bin-centres</a></li>
</ul>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://www.maxim-ic.com/appnotes.cfm/appnote_number/1040/CMP/ELK1">Coherent Sampling Application Note and Calculator</a></li>
</ul>

<p>"</p>

<p><a href="Category:Signal_processing" title="wikilink">Category:Signal processing</a></p>
</body>
</html>
