<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1950">Expected value of sample information</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Expected value of sample information</h1>
<hr/>

<p>In <a href="decision_theory" title="wikilink">decision theory</a>, the <strong>expected value of sample information (EVSI)</strong> is the expected increase in utility that you could obtain from gaining access to a <a href="sample_(statistics)" title="wikilink">sample</a> of additional observations before making a decision. The additional information obtained from the <a href="sample_(statistics)" title="wikilink">sample</a> may allow you to make a more informed, and thus better, decision, thus resulting in an increase in expected utility. EVSI attempts to estimate what this improvement would be before seeing actual sample data; hence, EVSI is a form of what is known as <em>preposterior analysis</em>.</p>
<h2 id="formulation">Formulation</h2>

<p>Let</p>

<p>

<math display="block" id="Expected_value_of_sample_information:0">
 <semantics>
  <mtable displaystyle="true">
   <mtr>
    <mtd columnalign="left">
     <mrow>
      <mi>d</mi>
      <mo>∈</mo>
      <mi>D</mi>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mtext>the decision being made, chosen from space</mtext>
      <mi>D</mi>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="left">
     <mrow>
      <mi>x</mi>
      <mo>∈</mo>
      <mi>X</mi>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mtext>an uncertain state, with true value in space</mtext>
      <mi>X</mi>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="left">
     <mrow>
      <mi>z</mi>
      <mo>∈</mo>
      <mi>Z</mi>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mtext>an observed sample composed of</mtext>
      <mi>n</mi>
      <mtext>observations</mtext>
      <mrow>
       <mo stretchy="false">⟨</mo>
       <msub>
        <mi>z</mi>
        <mn>1</mn>
       </msub>
       <mo>,</mo>
       <msub>
        <mi>z</mi>
        <mn>2</mn>
       </msub>
       <mo>,</mo>
       <mo>.</mo>
       <mo>.</mo>
       <mo>,</mo>
       <msub>
        <mi>z</mi>
        <mi>n</mi>
       </msub>
       <mo stretchy="false">⟩</mo>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="left">
     <mrow>
      <mi>U</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>d</mi>
       <mo>,</mo>
       <mi>x</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mtext>the utility of selecting decision</mtext>
      <mi>d</mi>
      <mtext>from</mtext>
      <mi>x</mi>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="left">
     <mrow>
      <mi>p</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>x</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mtext>your prior subjective probability distribution (density function) on</mtext>
      <mi>x</mi>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd columnalign="left">
     <mrow>
      <mi>p</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>z</mi>
       <mo stretchy="false">|</mo>
       <mi>x</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mtext>the conditional prior probability of observing the sample</mtext>
      <mi>z</mi>
     </mrow>
    </mtd>
   </mtr>
  </mtable>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <apply>
      <in></in>
      <ci>d</ci>
      <ci>D</ci>
     </apply>
     <apply>
      <times></times>
      <mtext>the decision being made, chosen from space</mtext>
      <ci>D</ci>
     </apply>
    </matrixrow>
    <matrixrow>
     <apply>
      <in></in>
      <ci>x</ci>
      <ci>X</ci>
     </apply>
     <apply>
      <times></times>
      <mtext>an uncertain state, with true value in space</mtext>
      <ci>X</ci>
     </apply>
    </matrixrow>
    <matrixrow>
     <apply>
      <in></in>
      <ci>z</ci>
      <ci>Z</ci>
     </apply>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <mtext>an observed sample composed of</mtext>
      <csymbol cd="unknown">n</csymbol>
      <mtext>observations</mtext>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <ci>normal-⟨</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>z</ci>
        <cn type="integer">1</cn>
       </apply>
       <ci>normal-,</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>z</ci>
        <cn type="integer">2</cn>
       </apply>
       <ci>normal-,</ci>
       <ci>normal-.</ci>
       <ci>normal-.</ci>
       <ci>normal-,</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>z</ci>
        <ci>n</ci>
       </apply>
       <ci>normal-⟩</ci>
      </cerror>
     </cerror>
    </matrixrow>
    <matrixrow>
     <apply>
      <times></times>
      <ci>U</ci>
      <interval closure="open">
       <ci>d</ci>
       <ci>x</ci>
      </interval>
     </apply>
     <apply>
      <times></times>
      <mtext>the utility of selecting decision</mtext>
      <ci>d</ci>
      <mtext>from</mtext>
      <ci>x</ci>
     </apply>
    </matrixrow>
    <matrixrow>
     <apply>
      <times></times>
      <ci>p</ci>
      <ci>x</ci>
     </apply>
     <apply>
      <times></times>
      <mtext>your prior subjective probability distribution (density function) on</mtext>
      <ci>x</ci>
     </apply>
    </matrixrow>
    <matrixrow>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <csymbol cd="unknown">p</csymbol>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <ci>normal-(</ci>
       <csymbol cd="unknown">z</csymbol>
       <ci>normal-|</ci>
       <csymbol cd="unknown">x</csymbol>
       <ci>normal-)</ci>
      </cerror>
     </cerror>
     <apply>
      <times></times>
      <mtext>the conditional prior probability of observing the sample</mtext>
      <ci>z</ci>
     </apply>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{array}[]{ll}d\in D&\mbox{the decision being made, chosen from space }D%
\\
x\in X&\mbox{an uncertain state, with true value in space }X\\
z\in Z&\mbox{an observed sample composed of }n\mbox{ observations }\langle z_{%
1},z_{2},..,z_{n}\rangle\\
U(d,x)&\mbox{the utility of selecting decision }d\mbox{ from }x\\
p(x)&\mbox{your prior subjective probability distribution (density function) %
on }x\\
p(z|x)&\mbox{the conditional prior probability of observing the sample }z\end{array}
  </annotation>
 </semantics>
</math>

</p>

<p>It is common (but not essential) in EVSI scenarios for 

<math display="inline" id="Expected_value_of_sample_information:1">
 <semantics>
  <mrow>
   <msub>
    <mi>Z</mi>
    <mi>i</mi>
   </msub>
   <mo>=</mo>
   <mi>X</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>Z</ci>
     <ci>i</ci>
    </apply>
    <ci>X</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z_{i}=X
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Expected_value_of_sample_information:2">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>z</mi>
    <mo stretchy="false">|</mo>
    <mi>x</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mo largeop="true" symmetric="true">∏</mo>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>z</mi>
     <mi>i</mi>
    </msub>
    <mo stretchy="false">|</mo>
    <mi>x</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">z</csymbol>
     <ci>normal-|</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="latexml">product</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>z</ci>
      <ci>i</ci>
     </apply>
     <ci>normal-|</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p(z|x)=\prod p(z_{i}|x)
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Expected_value_of_sample_information:3">
 <semantics>
  <mrow>
   <mo largeop="true" symmetric="true">∫</mo>
   <mi>z</mi>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>z</mi>
    <mo stretchy="false">|</mo>
    <mi>x</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mi>d</mi>
   <mi>z</mi>
   <mo>=</mo>
   <mi>x</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <int></int>
    <csymbol cd="unknown">z</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">z</csymbol>
     <ci>normal-|</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">d</csymbol>
    <csymbol cd="unknown">z</csymbol>
    <eq></eq>
    <csymbol cd="unknown">x</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \int zp(z|x)dz=x
  </annotation>
 </semantics>
</math>

, which is to say that each observation is an unbiased sensor reading of the underlying state 

<math display="inline" id="Expected_value_of_sample_information:4">
 <semantics>
  <mi>x</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>x</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x
  </annotation>
 </semantics>
</math>

, with each sensor reading being independent and identically distributed.</p>

<p>The utility from the optimal decision based only on your prior, without making any further observations, is given by</p>

<p>

<math display="block" id="Expected_value_of_sample_information:5">
 <semantics>
  <mrow>
   <mrow>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">[</mo>
     <mi>U</mi>
     <mo stretchy="false">]</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mpadded width="+3.3pt">
     <munder>
      <mi>max</mi>
      <mrow>
       <mi>d</mi>
       <mo>∈</mo>
       <mi>D</mi>
      </mrow>
     </munder>
    </mpadded>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">∫</mo>
      <mi>X</mi>
     </msub>
     <mrow>
      <mi>U</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>d</mi>
       <mo>,</mo>
       <mi>x</mi>
       <mo stretchy="false">)</mo>
      </mrow>
      <mi>p</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>x</mi>
       <mo rspace="5.8pt" stretchy="false">)</mo>
      </mrow>
      <mi>d</mi>
      <mi>x</mi>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>E</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <ci>U</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <max></max>
      <apply>
       <in></in>
       <ci>d</ci>
       <ci>D</ci>
      </apply>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <int></int>
       <ci>X</ci>
      </apply>
      <apply>
       <times></times>
       <ci>U</ci>
       <interval closure="open">
        <ci>d</ci>
        <ci>x</ci>
       </interval>
       <ci>p</ci>
       <ci>x</ci>
       <ci>d</ci>
       <ci>x</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E[U]=\max_{d\in D}~{}\int_{X}U(d,x)p(x)~{}dx
  </annotation>
 </semantics>
</math>

</p>

<p>If you could gain access to a single sample, 

<math display="inline" id="Expected_value_of_sample_information:6">
 <semantics>
  <mi>z</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>z</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   z
  </annotation>
 </semantics>
</math>

, the optimal posterior utility would be:</p>

<p>

<math display="block" id="Expected_value_of_sample_information:7">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">[</mo>
    <mi>U</mi>
    <mo stretchy="false">|</mo>
    <mi>z</mi>
    <mo stretchy="false">]</mo>
   </mrow>
   <mo>=</mo>
   <mpadded width="+3.3pt">
    <munder>
     <mi>max</mi>
     <mrow>
      <mi>d</mi>
      <mo>∈</mo>
      <mi>D</mi>
     </mrow>
    </munder>
   </mpadded>
   <msub>
    <mo largeop="true" symmetric="true">∫</mo>
    <mi>X</mi>
   </msub>
   <mi>U</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>d</mi>
    <mo>,</mo>
    <mi>x</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo stretchy="false">|</mo>
    <mi>z</mi>
    <mo rspace="5.8pt" stretchy="false">)</mo>
   </mrow>
   <mi>d</mi>
   <mi>x</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-[</ci>
     <csymbol cd="unknown">U</csymbol>
     <ci>normal-|</ci>
     <csymbol cd="unknown">z</csymbol>
     <ci>normal-]</ci>
    </cerror>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <max></max>
     <apply>
      <in></in>
      <ci>d</ci>
      <ci>D</ci>
     </apply>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <int></int>
     <ci>X</ci>
    </apply>
    <csymbol cd="unknown">U</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">d</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-|</ci>
     <csymbol cd="unknown">z</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">d</csymbol>
    <csymbol cd="unknown">x</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E[U|z]=\max_{d\in D}~{}\int_{X}U(d,x)p(x|z)~{}dx
  </annotation>
 </semantics>
</math>

 where 

<math display="inline" id="Expected_value_of_sample_information:8">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo stretchy="false">|</mo>
    <mi>z</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-|</ci>
     <csymbol cd="unknown">z</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p(x|z)
  </annotation>
 </semantics>
</math>

 is obtained from <a href="Bayes'_theorem" title="wikilink">Bayes' rule</a>:</p>

<p>

<math display="block" id="Expected_value_of_sample_information:9">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo stretchy="false">|</mo>
    <mi>z</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <mi>p</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>z</mi>
      <mo stretchy="false">|</mo>
      <mi>x</mi>
      <mo stretchy="false">)</mo>
     </mrow>
     <mi>p</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>x</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mrow>
     <mi>p</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>z</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-|</ci>
     <csymbol cd="unknown">z</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <apply>
     <divide></divide>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <csymbol cd="unknown">p</csymbol>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <ci>normal-(</ci>
       <csymbol cd="unknown">z</csymbol>
       <ci>normal-|</ci>
       <csymbol cd="unknown">x</csymbol>
       <ci>normal-)</ci>
      </cerror>
      <csymbol cd="unknown">p</csymbol>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <ci>normal-(</ci>
       <csymbol cd="unknown">x</csymbol>
       <ci>normal-)</ci>
      </cerror>
     </cerror>
     <apply>
      <times></times>
      <ci>p</ci>
      <ci>z</ci>
     </apply>
    </apply>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p(x|z)={{p(z|x)p(x)}\over{p(z)}}
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Expected_value_of_sample_information:10">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>z</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mo largeop="true" symmetric="true">∫</mo>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>z</mi>
    <mo stretchy="false">|</mo>
    <mi>x</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo rspace="5.8pt" stretchy="false">)</mo>
   </mrow>
   <mi>d</mi>
   <mi>x</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">z</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <int></int>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">z</csymbol>
     <ci>normal-|</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">d</csymbol>
    <csymbol cd="unknown">x</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p(z)=\int p(z|x)p(x)~{}dx
  </annotation>
 </semantics>
</math>

</p>

<p>Since you don't know what sample would actually be obtained if you were to obtain a sample, you must average over all possible samples to obtain the expected utility given a sample:</p>

<p>

<math display="block" id="Expected_value_of_sample_information:11">
 <semantics>
  <mrow>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">[</mo>
    <mi>U</mi>
    <mo stretchy="false">|</mo>
    <mi>S</mi>
    <mi>I</mi>
    <mo stretchy="false">]</mo>
   </mrow>
   <mo>=</mo>
   <msub>
    <mo largeop="true" symmetric="true">∫</mo>
    <mi>Z</mi>
   </msub>
   <mi>E</mi>
   <mrow>
    <mo stretchy="false">[</mo>
    <mi>U</mi>
    <mo stretchy="false">|</mo>
    <mi>z</mi>
    <mo stretchy="false">]</mo>
   </mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>z</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mi>d</mi>
   <mi>z</mi>
   <mo>=</mo>
   <msub>
    <mo largeop="true" symmetric="true">∫</mo>
    <mi>Z</mi>
   </msub>
   <mpadded width="+3.3pt">
    <munder>
     <mi>max</mi>
     <mrow>
      <mi>d</mi>
      <mo>∈</mo>
      <mi>D</mi>
     </mrow>
    </munder>
   </mpadded>
   <msub>
    <mo largeop="true" symmetric="true">∫</mo>
    <mi>X</mi>
   </msub>
   <mi>U</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>d</mi>
    <mo>,</mo>
    <mi>x</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>z</mi>
    <mo stretchy="false">|</mo>
    <mi>x</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo rspace="5.8pt" stretchy="false">)</mo>
   </mrow>
   <mi>d</mi>
   <mpadded width="+3.3pt">
    <mi>x</mi>
   </mpadded>
   <mi>d</mi>
   <mi>z</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-[</ci>
     <csymbol cd="unknown">U</csymbol>
     <ci>normal-|</ci>
     <csymbol cd="unknown">S</csymbol>
     <csymbol cd="unknown">I</csymbol>
     <ci>normal-]</ci>
    </cerror>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <int></int>
     <ci>Z</ci>
    </apply>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-[</ci>
     <csymbol cd="unknown">U</csymbol>
     <ci>normal-|</ci>
     <csymbol cd="unknown">z</csymbol>
     <ci>normal-]</ci>
    </cerror>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">z</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">d</csymbol>
    <csymbol cd="unknown">z</csymbol>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <int></int>
     <ci>Z</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <max></max>
     <apply>
      <in></in>
      <ci>d</ci>
      <ci>D</ci>
     </apply>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <int></int>
     <ci>X</ci>
    </apply>
    <csymbol cd="unknown">U</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">d</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">z</csymbol>
     <ci>normal-|</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <csymbol cd="unknown">d</csymbol>
    <csymbol cd="unknown">x</csymbol>
    <csymbol cd="unknown">d</csymbol>
    <csymbol cd="unknown">z</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E[U|SI]=\int_{Z}E[U|z]p(z)dz=\int_{Z}\max_{d\in D}~{}\int_{X}U(d,x)p(z|x)p(x)~%
{}dx~{}dz
  </annotation>
 </semantics>
</math>

</p>

<p>The expected value of sample information is then defined as:</p>

<p>

<math display="block" id="Expected_value_of_sample_information:12">
 <semantics>
  <mtable displaystyle="true">
   <mtr>
    <mtd columnalign="right">
     <mrow>
      <mi>E</mi>
      <mi>V</mi>
      <mi>S</mi>
      <mi>I</mi>
     </mrow>
    </mtd>
    <mtd columnalign="left">
     <mrow>
      <mo>=</mo>
      <mi>E</mi>
      <mrow>
       <mo stretchy="false">[</mo>
       <mi>U</mi>
       <mo stretchy="false">|</mo>
       <mi>S</mi>
       <mi>I</mi>
       <mo stretchy="false">]</mo>
      </mrow>
      <mo>-</mo>
      <mi>E</mi>
      <mrow>
       <mo stretchy="false">[</mo>
       <mi>U</mi>
       <mo stretchy="false">]</mo>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
   <mtr>
    <mtd></mtd>
    <mtd columnalign="left">
     <mrow>
      <mo>=</mo>
      <mrow>
       <mo>(</mo>
       <msub>
        <mo largeop="true" symmetric="true">∫</mo>
        <mi>Z</mi>
       </msub>
       <mpadded width="+3.3pt">
        <munder>
         <mi>max</mi>
         <mrow>
          <mi>d</mi>
          <mo>∈</mo>
          <mi>D</mi>
         </mrow>
        </munder>
       </mpadded>
       <msub>
        <mo largeop="true" symmetric="true">∫</mo>
        <mi>X</mi>
       </msub>
       <mi>U</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>d</mi>
        <mo>,</mo>
        <mi>x</mi>
        <mo stretchy="false">)</mo>
       </mrow>
       <mi>p</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>z</mi>
        <mo stretchy="false">|</mo>
        <mi>x</mi>
        <mo stretchy="false">)</mo>
       </mrow>
       <mi>p</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>x</mi>
        <mo rspace="5.8pt" stretchy="false">)</mo>
       </mrow>
       <mi>d</mi>
       <mpadded width="+3.3pt">
        <mi>x</mi>
       </mpadded>
       <mi>d</mi>
       <mi>z</mi>
       <mo>)</mo>
      </mrow>
      <mo>-</mo>
      <mrow>
       <mo>(</mo>
       <mpadded width="+3.3pt">
        <munder>
         <mi>max</mi>
         <mrow>
          <mi>d</mi>
          <mo>∈</mo>
          <mi>D</mi>
         </mrow>
        </munder>
       </mpadded>
       <msub>
        <mo largeop="true" symmetric="true">∫</mo>
        <mi>X</mi>
       </msub>
       <mi>U</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>d</mi>
        <mo>,</mo>
        <mi>x</mi>
        <mo stretchy="false">)</mo>
       </mrow>
       <mi>p</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>x</mi>
        <mo rspace="5.8pt" stretchy="false">)</mo>
       </mrow>
       <mi>d</mi>
       <mi>x</mi>
       <mo>)</mo>
      </mrow>
     </mrow>
    </mtd>
   </mtr>
  </mtable>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <apply>
      <times></times>
      <ci>E</ci>
      <ci>V</ci>
      <ci>S</ci>
      <ci>I</ci>
     </apply>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <eq></eq>
      <csymbol cd="unknown">E</csymbol>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <ci>normal-[</ci>
       <csymbol cd="unknown">U</csymbol>
       <ci>normal-|</ci>
       <csymbol cd="unknown">S</csymbol>
       <csymbol cd="unknown">I</csymbol>
       <ci>normal-]</ci>
      </cerror>
      <minus></minus>
      <csymbol cd="unknown">E</csymbol>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <ci>normal-[</ci>
       <csymbol cd="unknown">U</csymbol>
       <ci>normal-]</ci>
      </cerror>
     </cerror>
    </matrixrow>
    <matrixrow>
     <cerror>
      <csymbol cd="ambiguous">missing-subexpression</csymbol>
     </cerror>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <eq></eq>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <ci>normal-(</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <int></int>
        <ci>Z</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <max></max>
        <apply>
         <in></in>
         <ci>d</ci>
         <ci>D</ci>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <int></int>
        <ci>X</ci>
       </apply>
       <csymbol cd="unknown">U</csymbol>
       <cerror>
        <csymbol cd="ambiguous">fragments</csymbol>
        <ci>normal-(</ci>
        <csymbol cd="unknown">d</csymbol>
        <ci>normal-,</ci>
        <csymbol cd="unknown">x</csymbol>
        <ci>normal-)</ci>
       </cerror>
       <csymbol cd="unknown">p</csymbol>
       <cerror>
        <csymbol cd="ambiguous">fragments</csymbol>
        <ci>normal-(</ci>
        <csymbol cd="unknown">z</csymbol>
        <ci>normal-|</ci>
        <csymbol cd="unknown">x</csymbol>
        <ci>normal-)</ci>
       </cerror>
       <csymbol cd="unknown">p</csymbol>
       <cerror>
        <csymbol cd="ambiguous">fragments</csymbol>
        <ci>normal-(</ci>
        <csymbol cd="unknown">x</csymbol>
        <ci>normal-)</ci>
       </cerror>
       <csymbol cd="unknown">d</csymbol>
       <csymbol cd="unknown">x</csymbol>
       <csymbol cd="unknown">d</csymbol>
       <csymbol cd="unknown">z</csymbol>
       <ci>normal-)</ci>
      </cerror>
      <minus></minus>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <ci>normal-(</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <max></max>
        <apply>
         <in></in>
         <ci>d</ci>
         <ci>D</ci>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <int></int>
        <ci>X</ci>
       </apply>
       <csymbol cd="unknown">U</csymbol>
       <cerror>
        <csymbol cd="ambiguous">fragments</csymbol>
        <ci>normal-(</ci>
        <csymbol cd="unknown">d</csymbol>
        <ci>normal-,</ci>
        <csymbol cd="unknown">x</csymbol>
        <ci>normal-)</ci>
       </cerror>
       <csymbol cd="unknown">p</csymbol>
       <cerror>
        <csymbol cd="ambiguous">fragments</csymbol>
        <ci>normal-(</ci>
        <csymbol cd="unknown">x</csymbol>
        <ci>normal-)</ci>
       </cerror>
       <csymbol cd="unknown">d</csymbol>
       <csymbol cd="unknown">x</csymbol>
       <ci>normal-)</ci>
      </cerror>
     </cerror>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{array}[]{rl}EVSI&=E[U|SI]-E[U]\\
&=\left(\int_{Z}\max_{d\in D}~{}\int_{X}U(d,x)p(z|x)p(x)~{}dx~{}dz\right)-%
\left(\max_{d\in D}~{}\int_{X}U(d,x)p(x)~{}dx\right)\end{array}
  </annotation>
 </semantics>
</math>

</p>
<h2 id="computation">Computation</h2>

<p>It is seldom feasible to carry out the integration over the space of possible observations in E[U|SI] analytically, so the computation of EVSI usually requires a <a href="Monte_Carlo_integration" title="wikilink">Monte Carlo simulation</a>. The method involves randomly simulating a sample, 

<math display="inline" id="Expected_value_of_sample_information:13">
 <semantics>
  <mrow>
   <msup>
    <mi>z</mi>
    <mi>i</mi>
   </msup>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">⟨</mo>
    <msubsup>
     <mi>z</mi>
     <mn>1</mn>
     <mi>i</mi>
    </msubsup>
    <mo>,</mo>
    <msubsup>
     <mi>z</mi>
     <mn>2</mn>
     <mi>i</mi>
    </msubsup>
    <mo>,</mo>
    <mo>.</mo>
    <mo>.</mo>
    <mo>,</mo>
    <msubsup>
     <mi>z</mi>
     <mi>n</mi>
     <mi>i</mi>
    </msubsup>
    <mo stretchy="false">⟩</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>z</ci>
     <ci>i</ci>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-⟨</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>z</ci>
       <ci>i</ci>
      </apply>
      <cn type="integer">1</cn>
     </apply>
     <ci>normal-,</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>z</ci>
       <ci>i</ci>
      </apply>
      <cn type="integer">2</cn>
     </apply>
     <ci>normal-,</ci>
     <ci>normal-.</ci>
     <ci>normal-.</ci>
     <ci>normal-,</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>z</ci>
       <ci>i</ci>
      </apply>
      <ci>n</ci>
     </apply>
     <ci>normal-⟩</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   z^{i}=\langle z^{i}_{1},z^{i}_{2},..,z^{i}_{n}\rangle
  </annotation>
 </semantics>
</math>

, then using it to compute the posterior 

<math display="inline" id="Expected_value_of_sample_information:14">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo stretchy="false">|</mo>
    <msup>
     <mi>z</mi>
     <mi>i</mi>
    </msup>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-|</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>z</ci>
      <ci>i</ci>
     </apply>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p(x|z^{i})
  </annotation>
 </semantics>
</math>

 and maximizing utility based on 

<math display="inline" id="Expected_value_of_sample_information:15">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo stretchy="false">|</mo>
    <msup>
     <mi>z</mi>
     <mi>i</mi>
    </msup>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">x</csymbol>
     <ci>normal-|</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>z</ci>
      <ci>i</ci>
     </apply>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p(x|z^{i})
  </annotation>
 </semantics>
</math>

. This whole process is then repeated many times, for 

<math display="inline" id="Expected_value_of_sample_information:16">
 <semantics>
  <mrow>
   <mi>i</mi>
   <mo>=</mo>
   <mn>1</mn>
   <mo>,</mo>
   <mo>.</mo>
   <mo>.</mo>
   <mo>,</mo>
   <mi>M</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">i</csymbol>
    <eq></eq>
    <cn type="integer">1</cn>
    <ci>normal-,</ci>
    <ci>normal-.</ci>
    <ci>normal-.</ci>
    <ci>normal-,</ci>
    <csymbol cd="unknown">M</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   i=1,..,M
  </annotation>
 </semantics>
</math>

 to obtain a <a href="Monte_Carlo_method" title="wikilink">Monte Carlo sample</a> if optimal utilities. These are averaged to obtain the expected utility given a hypothetical sample.</p>
<h2 id="example">Example</h2>

<p>A regulatory agency is to decide whether to approve a new treatment. Before making the final approve/reject decision, they ask what the value would be of conducting a further trial study on 

<math display="inline" id="Expected_value_of_sample_information:17">
 <semantics>
  <mi>n</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>n</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n
  </annotation>
 </semantics>
</math>

 subjects. This question is answered by the EVSI.</p>
<figure><b>(Figure)</b>
<figcaption>Analytica diagram of EVSI model</figcaption>
</figure>

<p>The diagram shows an <a href="influence_diagram" title="wikilink">influence diagram</a> depiction of an Analytica model for computing the EVSI in this example. For the reader who wishes to study this computation in greater detail, [<a class="uri" href="http://www.AnalyticaWebPlayer.com/2.5/Client/AwpClient.aspx?inviteId=3&amp;inviteCode">http://www.AnalyticaWebPlayer.com/2.5/Client/AwpClient.aspx?inviteId=3&amp;inviteCode;</a>;=7473&amp;subName;=lchrisman%40lumina%2Ecom the model] can be viewed and evaluated from [<a class="uri" href="http://www.AnalyticaWebPlayer.com/2.5/Client/AwpClient.aspx?inviteId=3&amp;inviteCode">http://www.AnalyticaWebPlayer.com/2.5/Client/AwpClient.aspx?inviteId=3&amp;inviteCode;</a>;=7473&amp;subName;=lchrisman%40lumina%2Ecom Analytica Web Player].</p>

<p>The model classifies the outcome for any given subject into one of five categories:</p>

<p>

<math display="block" id="Expected_value_of_sample_information:18">
 <semantics>
  <mrow>
   <msub>
    <mi>Z</mi>
    <mi>i</mi>
   </msub>
   <mo>=</mo>
   <mi></mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>Z</ci>
     <ci>i</ci>
    </apply>
    <csymbol cd="latexml">absent</csymbol>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z_{i}=
  </annotation>
 </semantics>
</math>

 {"Cure", "Improvement", "Ineffective", "Mild side-effect", "Serious side-effect"} And for each of these outcomes, assigns a utility equal to an estimated patient-equivalent monetary value of the outcome.</p>

<p>A decision state, 

<math display="inline" id="Expected_value_of_sample_information:19">
 <semantics>
  <mi>x</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>x</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x
  </annotation>
 </semantics>
</math>

 in this example is a vector of five numbers between 0 and 1 that sum to 1, giving the proportion of future patients that will experience each of the five possible outcomes. For example, a state 

<math display="inline" id="Expected_value_of_sample_information:20">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">[</mo>
    <mrow>
     <mn>5</mn>
     <mo lspace="0pt" rspace="3.5pt">%</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mn>60</mn>
     <mo lspace="0pt" rspace="3.5pt">%</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mn>20</mn>
     <mo lspace="0pt" rspace="3.5pt">%</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mn>10</mn>
     <mo lspace="0pt" rspace="3.5pt">%</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mn>5</mn>
     <mo lspace="0pt" rspace="3.5pt">%</mo>
    </mrow>
    <mo stretchy="false">]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>x</ci>
    <list>
     <apply>
      <csymbol cd="latexml">percent</csymbol>
      <cn type="integer">5</cn>
     </apply>
     <apply>
      <csymbol cd="latexml">percent</csymbol>
      <cn type="integer">60</cn>
     </apply>
     <apply>
      <csymbol cd="latexml">percent</csymbol>
      <cn type="integer">20</cn>
     </apply>
     <apply>
      <csymbol cd="latexml">percent</csymbol>
      <cn type="integer">10</cn>
     </apply>
     <apply>
      <csymbol cd="latexml">percent</csymbol>
      <cn type="integer">5</cn>
     </apply>
    </list>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x=[5\%,60\%,20\%,10\%,5\%]
  </annotation>
 </semantics>
</math>

 denotes the case where 5% of patients are cured, 60% improve, 20% find the treatment ineffective, 10% experience mild side-effects and 5% experience dangerous side-effects.</p>

<p>The prior, 

<math display="inline" id="Expected_value_of_sample_information:21">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>p</ci>
    <ci>x</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p(x)
  </annotation>
 </semantics>
</math>

 is encoded using a <a href="Dirichlet_distribution" title="wikilink">Dirichlet distribution</a>, requiring five numbers (that don't sum to 1) whose relative values capture the expected relative proportion of each outcome, and whose sum encodes the strength of this prior belief. In the diagram, the parameters of the <a href="Dirichlet_distribution" title="wikilink">Dirichlet distribution</a> are contained in the variable <em>dirichlet alpha prior</em>, while the prior distribution itself is in the chance variable <em>Prior</em>. The <a href="Probability_density_function" title="wikilink">probability density graph</a> of the <a href="Marginal_distribution" title="wikilink">marginals</a> is shown here:</p>
<figure><b>(Figure)</b>
<figcaption>EVSI prior marginals.png</figcaption>
</figure>

<p>In the chance variable <em>Trial data</em>, trial data is simulated as a Monte Carlo sample from a <a href="Multinomial_distribution" title="wikilink">Multinomial distribution</a>. For example, when Trial_size=100, each Monte Carlo sample of <em>Trial_data</em> contains a vector that sums to 100 showing the number of subjects in the simulated study that experienced each of the five possible outcomes. The following result table depicts the first 8 simulated trial outcomes:</p>
<figure><b>(Figure)</b>
<figcaption>EVSI trial data.png</figcaption>
</figure>

<p>Combining this trial data with a <a href="Dirichlet_distribution" title="wikilink">Dirichlet prior</a> requires only adding the outcome frequencies to the Dirichlet prior alpha values, resulting in a <a href="Dirichlet_distribution" title="wikilink">Diriclet posterior distribution</a> for each simulated trial. For each of these, the decision to approve is made based on whether the mean utility is positive, and using a utility of zero when the treatment is not approved, the <em>Pre-posterior utility is obtained</em>. Repeating the computation for a range of possible trial sizes, an EVSI is obtained at each possible candidate trial size as depicted in this graph:</p>
<figure><b>(Figure)</b>
<figcaption>EVSI result.png</figcaption>
</figure>
<h2 id="historical-background">Historical background</h2>

<p>The 1961 book Applied Statistical Decision Theory<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> by Schlaifer and Raiffa was among the earliest to utilize EVSI extensively.</p>

<p>More historical background is needed here.</p>
<h2 id="comparison-to-related-measures">Comparison to related measures</h2>

<p>Expected value of sample information (EVSI) is a relaxation of the <a href="expected_value_of_perfect_information" title="wikilink">expected value of perfect information</a> (EVPI) metric, which encodes the increase of utility that would be obtained if one were to learn the true underlying state, 

<math display="inline" id="Expected_value_of_sample_information:22">
 <semantics>
  <mi>x</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>x</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x
  </annotation>
 </semantics>
</math>

. Essentially EVPI indicates the value of perfect information, while EVSI indicates the value of <em>some limited and incomplete</em> information.</p>

<p>The <a href="expected_value_of_including_uncertainty" title="wikilink">expected value of including uncertainty</a> (EVIU) compares the value of modeling uncertain information as compared to modeling a situation without taking uncertainty into account. Since the impact of uncertainty on computed results is often analysed using <a href="Monte_Carlo_methods" title="wikilink">Monte Carlo methods</a>, EVIU appears to be very similar to <em>the value of carrying out an analysis using a <a href="Monte_Carlo_methods" title="wikilink">Monte Carlo sample</a></em>, which closely resembles in statement the notion captured with EVSI. However, EVSI and EVIU are quite distinct—a notable difference between the manner in which EVSI uses <a href="Bayes'_Theorem" title="wikilink">Bayesian updating</a> to incorporate the simulated sample.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Expected_value_of_perfect_information" title="wikilink">Expected value of perfect information</a> (EVPI)</li>
<li><a href="Expected_value_of_including_uncertainty" title="wikilink">Expected value of including uncertainty</a> (EVIU)</li>
</ul>
<h2 id="references">References</h2>

<p>"</p>

<p><a href="Category:Decision_theory" title="wikilink">Category:Decision theory</a> <a href="Category:Game_theory" title="wikilink">Category:Game theory</a> <a href="Category:Bayesian_inference" title="wikilink">Category:Bayesian inference</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">Schlaifer &amp; Raiffa (1961), "Applied Statistical Decision Theory"<a href="#fnref1">↩</a></li>
</ol>
</section>
</body>
</html>
