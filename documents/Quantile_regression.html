<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1654">Quantile regression</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Quantile regression</h1>
<hr/>

<p><strong>Quantile regression</strong> is a type of <a href="regression_analysis" title="wikilink">regression analysis</a> used in statistics and econometrics. Whereas the <a href="method_of_least_squares" title="wikilink">method of least squares</a> results in estimates that approximate the conditional <em>mean</em> of the response variable given certain values of the predictor variables, quantile regression aims at estimating either the conditional <a class="uri" href="median" title="wikilink">median</a> or other <a class="uri" href="quantiles" title="wikilink">quantiles</a> of the response variable.</p>
<h2 id="advantages-and-applications">Advantages and applications</h2>

<p>Quantile regression is desired if conditional quantile functions are of interest. One advantage of quantile regression, relative to the ordinary least squares regression, is that the quantile regression estimates are more robust against outliers in the response measurements. However, the main attraction of quantile regression goes beyond that. Different measures of <a href="central_tendency" title="wikilink">central tendency</a> and <a href="statistical_dispersion" title="wikilink">statistical dispersion</a> can be useful to obtain a more comprehensive analysis of the relationship between variables.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>

<p>In <a class="uri" href="ecology" title="wikilink">ecology</a>, quantile regression has been proposed and used as a way to discover more useful predictive relationships between variables in cases where there is no relationship or only a weak relationship between the means of such variables. The need for and success of quantile regression in ecology has been attributed to the <a class="uri" href="complexity" title="wikilink">complexity</a> of interactions between different factors leading to <a class="uri" href="data" title="wikilink">data</a> with unequal variation of one variable for different ranges of another variable.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></p>

<p>Another application of quantile regression is in the areas of growth charts, where percentile curves are commonly used to screen for abnormal growth.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a><a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></p>
<h2 id="mathematics">Mathematics</h2>

<p>The mathematical forms arising from quantile regression are distinct from those arising in the <a href="method_of_least_squares" title="wikilink">method of least squares</a>. The method of least squares leads to a consideration of problems in an <a href="inner_product_space" title="wikilink">inner product space</a>, involving <a href="projection_(mathematics)" title="wikilink">projection</a> onto subspaces, and thus the problem of minimizing the squared errors can be reduced to a problem in <a href="numerical_linear_algebra" title="wikilink">numerical linear algebra</a>. Quantile regression does not have this structure, and instead leads to problems in <a href="linear_programming" title="wikilink">linear programming</a> that can be solved by the <a href="simplex_method" title="wikilink">simplex method</a>.</p>
<h2 id="history">History</h2>

<p>The idea of estimating a median regression slope, a major theorem about minimizing sum of the absolute deviances and a geometrical algorithm for constructing median regression was proposed in 1760 by <a href="Roger_Joseph_Boscovich" title="wikilink">Ruƒëer Josip Bo≈°koviƒá</a>, a Jesuit Catholic priest from Dubrovnik.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a><a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a> Median regression computations for larger data sets are quite tedious compared to the least squares method, for which reason it has historically generated a lack of popularity among statisticians, until the widespread adoption of computers in the latter part of the 20th century.</p>
<h2 id="quantiles">Quantiles</h2>

<p>Let 

<math display="inline" id="Quantile_regression:0">
 <semantics>
  <mi>Y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y
  </annotation>
 </semantics>
</math>

 be a real valued random variable with <a href="cumulative_distribution_function" title="wikilink">cumulative distribution function</a> 

<math display="inline" id="Quantile_regression:1">
 <semantics>
  <mrow>
   <msub>
    <mi>F</mi>
    <mi>Y</mi>
   </msub>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>=</mo>
   <mi>P</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>Y</mi>
    <mo>‚â§</mo>
    <mi>y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>F</ci>
     <ci>Y</ci>
    </apply>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">y</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <eq></eq>
    <csymbol cd="unknown">P</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">Y</csymbol>
     <leq></leq>
     <csymbol cd="unknown">y</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F_{Y}(y)=P(Y\leq y)
  </annotation>
 </semantics>
</math>

. The 

<math display="inline" id="Quantile_regression:2">
 <semantics>
  <mi>œÑ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>œÑ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau
  </annotation>
 </semantics>
</math>

th quantile of Y is given by</p>

<p>

<math display="block" id="Quantile_regression:3">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>Q</mi>
     <mi>Y</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>œÑ</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msubsup>
     <mi>F</mi>
     <mi>Y</mi>
     <mrow>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
    </msubsup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>œÑ</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo movablelimits="false">inf</mo>
    <mrow>
     <mo>{</mo>
     <mi>y</mi>
     <mo>:</mo>
     <mrow>
      <mrow>
       <msub>
        <mi>F</mi>
        <mi>Y</mi>
       </msub>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>y</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo>‚â•</mo>
      <mi>œÑ</mi>
     </mrow>
     <mo>}</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Q</ci>
       <ci>Y</ci>
      </apply>
      <ci>œÑ</ci>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>F</ci>
        <ci>Y</ci>
       </apply>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <ci>œÑ</ci>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="latexml">infimum</csymbol>
      <apply>
       <csymbol cd="latexml">conditional-set</csymbol>
       <ci>y</ci>
       <apply>
        <geq></geq>
        <apply>
         <times></times>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>F</ci>
          <ci>Y</ci>
         </apply>
         <ci>y</ci>
        </apply>
        <ci>œÑ</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Q_{Y}(\tau)=F_{Y}^{-1}(\tau)=\inf\left\{y:F_{Y}(y)\geq\tau\right\}
  </annotation>
 </semantics>
</math>

 where 

<math display="inline" id="Quantile_regression:4">
 <semantics>
  <mrow>
   <mrow>
    <mi>œÑ</mi>
    <mo>‚àà</mo>
    <mrow>
     <mo stretchy="false">[</mo>
     <mn>0</mn>
     <mo>,</mo>
     <mn>1</mn>
     <mo stretchy="false">]</mo>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>œÑ</ci>
    <interval closure="closed">
     <cn type="integer">0</cn>
     <cn type="integer">1</cn>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau\in[0,1].
  </annotation>
 </semantics>
</math>

</p>

<p>Define the <a href="loss_function" title="wikilink">loss function</a> as 

<math display="inline" id="Quantile_regression:5">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>œÅ</mi>
     <mi>œÑ</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">|</mo>
    <mrow>
     <mi>y</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>œÑ</mi>
       <mo>-</mo>
       <msub>
        <mi>ùïÄ</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>y</mi>
         <mo><</mo>
         <mn>0</mn>
         <mo stretchy="false">)</mo>
        </mrow>
       </msub>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo stretchy="false">|</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>œÅ</ci>
      <ci>œÑ</ci>
     </apply>
     <ci>y</ci>
    </apply>
    <apply>
     <abs></abs>
     <apply>
      <times></times>
      <ci>y</ci>
      <apply>
       <minus></minus>
       <ci>œÑ</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>ùïÄ</ci>
        <cerror>
         <csymbol cd="ambiguous">fragments</csymbol>
         <ci>normal-(</ci>
         <csymbol cd="unknown">y</csymbol>
         <lt></lt>
         <cn type="integer">0</cn>
         <ci>normal-)</ci>
        </cerror>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \rho_{\tau}(y)=|y(\tau-\mathbb{I}_{(y<0)})|
  </annotation>
 </semantics>
</math>

, where 

<math display="inline" id="Quantile_regression:6">
 <semantics>
  <mi>ùïÄ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ùïÄ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{I}
  </annotation>
 </semantics>
</math>

 is an <a href="indicator_variable" title="wikilink">indicator variable</a>. A specific quantile can be found by minimizing the expected loss of 

<math display="inline" id="Quantile_regression:7">
 <semantics>
  <mrow>
   <mi>Y</mi>
   <mo>-</mo>
   <mi>u</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <minus></minus>
    <ci>Y</ci>
    <ci>u</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y-u
  </annotation>
 </semantics>
</math>

 with respect to 

<math display="inline" id="Quantile_regression:8">
 <semantics>
  <mi>u</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>u</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   u
  </annotation>
 </semantics>
</math>

:<a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a></p>

<p>

<math display="block" id="Quantile_regression:9">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <munder accentunder="true">
      <mi>min</mi>
      <mo>ùë¢</mo>
     </munder>
     <mi>E</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <msub>
        <mi>œÅ</mi>
        <mi>œÑ</mi>
       </msub>
       <mrow>
        <mo stretchy="false">(</mo>
        <mrow>
         <mi>Y</mi>
         <mo>-</mo>
         <mi>u</mi>
        </mrow>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mrow>
      <munder accentunder="true">
       <mi>min</mi>
       <mo>ùë¢</mo>
      </munder>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mi>œÑ</mi>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
      <mrow>
       <msubsup>
        <mo largeop="true" symmetric="true">‚à´</mo>
        <mrow>
         <mo>-</mo>
         <mi mathvariant="normal">‚àû</mi>
        </mrow>
        <mi>u</mi>
       </msubsup>
       <mrow>
        <mrow>
         <mo stretchy="false">(</mo>
         <mrow>
          <mi>y</mi>
          <mo>-</mo>
          <mi>u</mi>
         </mrow>
         <mo stretchy="false">)</mo>
        </mrow>
        <mi>d</mi>
        <msub>
         <mi>F</mi>
         <mi>Y</mi>
        </msub>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>y</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mrow>
     </mrow>
     <mo>+</mo>
     <mrow>
      <mi>œÑ</mi>
      <mrow>
       <msubsup>
        <mo largeop="true" symmetric="true">‚à´</mo>
        <mi>u</mi>
        <mi mathvariant="normal">‚àû</mi>
       </msubsup>
       <mrow>
        <mrow>
         <mo stretchy="false">(</mo>
         <mrow>
          <mi>y</mi>
          <mo>-</mo>
          <mi>u</mi>
         </mrow>
         <mo stretchy="false">)</mo>
        </mrow>
        <mi>d</mi>
        <msub>
         <mi>F</mi>
         <mi>Y</mi>
        </msub>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>y</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>u</ci>
      <min></min>
     </apply>
     <ci>E</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>œÅ</ci>
       <ci>œÑ</ci>
      </apply>
      <apply>
       <minus></minus>
       <ci>Y</ci>
       <ci>u</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <times></times>
      <apply>
       <ci>u</ci>
       <min></min>
      </apply>
      <apply>
       <minus></minus>
       <ci>œÑ</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <int></int>
         <apply>
          <minus></minus>
          <infinity></infinity>
         </apply>
        </apply>
        <ci>u</ci>
       </apply>
       <apply>
        <times></times>
        <apply>
         <minus></minus>
         <ci>y</ci>
         <ci>u</ci>
        </apply>
        <ci>d</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>F</ci>
         <ci>Y</ci>
        </apply>
        <ci>y</ci>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>œÑ</ci>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <int></int>
         <ci>u</ci>
        </apply>
        <infinity></infinity>
       </apply>
       <apply>
        <times></times>
        <apply>
         <minus></minus>
         <ci>y</ci>
         <ci>u</ci>
        </apply>
        <ci>d</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>F</ci>
         <ci>Y</ci>
        </apply>
        <ci>y</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \underset{u}{\min}E(\rho_{\tau}(Y-u))=\underset{u}{\min}(\tau-1)\int_{-\infty}%
^{u}(y-u)dF_{Y}(y)+\tau\int_{u}^{\infty}(y-u)dF_{Y}(y).
  </annotation>
 </semantics>
</math>

</p>

<p>This can be shown by setting the derivative of the expected loss function to 0 and letting 

<math display="inline" id="Quantile_regression:10">
 <semantics>
  <msub>
   <mi>q</mi>
   <mi>œÑ</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>q</ci>
    <ci>œÑ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   q_{\tau}
  </annotation>
 </semantics>
</math>

 be the solution of</p>

<p>

<math display="block" id="Quantile_regression:11">
 <semantics>
  <mrow>
   <mrow>
    <mn>0</mn>
    <mo>=</mo>
    <mrow>
     <mrow>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mn>1</mn>
        <mo>-</mo>
        <mi>œÑ</mi>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
      <mrow>
       <msubsup>
        <mo largeop="true" symmetric="true">‚à´</mo>
        <mrow>
         <mo>-</mo>
         <mi mathvariant="normal">‚àû</mi>
        </mrow>
        <msub>
         <mi>q</mi>
         <mi>œÑ</mi>
        </msub>
       </msubsup>
       <mrow>
        <mi>d</mi>
        <msub>
         <mi>F</mi>
         <mi>Y</mi>
        </msub>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>y</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mrow>
     </mrow>
     <mo>-</mo>
     <mrow>
      <mi>œÑ</mi>
      <mrow>
       <msubsup>
        <mo largeop="true" symmetric="true">‚à´</mo>
        <msub>
         <mi>q</mi>
         <mi>œÑ</mi>
        </msub>
        <mi mathvariant="normal">‚àû</mi>
       </msubsup>
       <mrow>
        <mi>d</mi>
        <msub>
         <mi>F</mi>
         <mi>Y</mi>
        </msub>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>y</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <cn type="integer">0</cn>
    <apply>
     <minus></minus>
     <apply>
      <times></times>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
       <ci>œÑ</ci>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <int></int>
         <apply>
          <minus></minus>
          <infinity></infinity>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>q</ci>
         <ci>œÑ</ci>
        </apply>
       </apply>
       <apply>
        <times></times>
        <ci>d</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>F</ci>
         <ci>Y</ci>
        </apply>
        <ci>y</ci>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>œÑ</ci>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <int></int>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>q</ci>
          <ci>œÑ</ci>
         </apply>
        </apply>
        <infinity></infinity>
       </apply>
       <apply>
        <times></times>
        <ci>d</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>F</ci>
         <ci>Y</ci>
        </apply>
        <ci>y</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   0=(1-\tau)\int_{-\infty}^{q_{\tau}}dF_{Y}(y)-\tau\int_{q_{\tau}}^{\infty}dF_{Y%
}(y).
  </annotation>
 </semantics>
</math>

 This equation reduces to</p>

<p>

<math display="block" id="Quantile_regression:12">
 <semantics>
  <mrow>
   <mrow>
    <mn>0</mn>
    <mo>=</mo>
    <mrow>
     <mrow>
      <msub>
       <mi>F</mi>
       <mi>Y</mi>
      </msub>
      <mrow>
       <mo stretchy="false">(</mo>
       <msub>
        <mi>q</mi>
        <mi>œÑ</mi>
       </msub>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>-</mo>
     <mi>œÑ</mi>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <cn type="integer">0</cn>
    <apply>
     <minus></minus>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>F</ci>
       <ci>Y</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>q</ci>
       <ci>œÑ</ci>
      </apply>
     </apply>
     <ci>œÑ</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   0=F_{Y}(q_{\tau})-\tau,
  </annotation>
 </semantics>
</math>

 and then to</p>

<p>

<math display="block" id="Quantile_regression:13">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mi>F</mi>
      <mi>Y</mi>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <msub>
       <mi>q</mi>
       <mi>œÑ</mi>
      </msub>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mi>œÑ</mi>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>F</ci>
      <ci>Y</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>q</ci>
      <ci>œÑ</ci>
     </apply>
    </apply>
    <ci>œÑ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F_{Y}(q_{\tau})=\tau.
  </annotation>
 </semantics>
</math>

</p>

<p>Hence 

<math display="inline" id="Quantile_regression:14">
 <semantics>
  <msub>
   <mi>q</mi>
   <mi>œÑ</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>q</ci>
    <ci>œÑ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   q_{\tau}
  </annotation>
 </semantics>
</math>

 is 

<math display="inline" id="Quantile_regression:15">
 <semantics>
  <mi>œÑ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>œÑ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau
  </annotation>
 </semantics>
</math>

th quantile of the random variable Y.</p>
<h2 id="example">Example</h2>

<p>Let 

<math display="inline" id="Quantile_regression:16">
 <semantics>
  <mi>Y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y
  </annotation>
 </semantics>
</math>

 be a discrete random variable that takes values 1,2,..,9 with equal probabilities. The task is to find the median of Y, and hence the value 

<math display="inline" id="Quantile_regression:17">
 <semantics>
  <mrow>
   <mi>œÑ</mi>
   <mo>=</mo>
   <mn>0.5</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>œÑ</ci>
    <cn type="float">0.5</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau=0.5
  </annotation>
 </semantics>
</math>

 is chosen. The expected loss, , is</p>

<p>

<math display="inline" id="Quantile_regression:18">
 <semantics>
  <mrow>
   <mi>œÑ</mi>
   <mo>=</mo>
   <mn>0.5</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>œÑ</ci>
    <cn type="float">0.5</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau=0.5
  </annotation>
 </semantics>
</math>

 is a constant, it can be taken out of the expected loss function (this is only true if 

<math display="block" id="Quantile_regression:19">
 <semantics>
  <mrow>
   <mrow>
    <mi>L</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>3</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>‚àù</mo>
   <mrow>
    <mrow>
     <munderover>
      <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
      <mrow>
       <mi>i</mi>
       <mo>=</mo>
       <mn>1</mn>
      </mrow>
      <mn>2</mn>
     </munderover>
     <mo>-</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>i</mi>
       <mo>-</mo>
       <mn>3</mn>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>+</mo>
    <mrow>
     <munderover>
      <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
      <mrow>
       <mi>i</mi>
       <mo>=</mo>
       <mn>3</mn>
      </mrow>
      <mn>9</mn>
     </munderover>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>i</mi>
       <mo>-</mo>
       <mn>3</mn>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">[</mo>
    <mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mn>2</mn>
       <mo>+</mo>
       <mn>1</mn>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mo>+</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mn>0</mn>
       <mo>+</mo>
       <mn>1</mn>
       <mo>+</mo>
       <mn>2</mn>
       <mo>+</mo>
       <mi mathvariant="normal">‚Ä¶</mi>
       <mo>+</mo>
       <mn>6</mn>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo stretchy="false">]</mo>
   </mrow>
   <mo>=</mo>
   <mn>24.</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <csymbol cd="latexml">proportional-to</csymbol>
     <apply>
      <times></times>
      <ci>L</ci>
      <cn type="integer">3</cn>
     </apply>
     <apply>
      <plus></plus>
      <apply>
       <minus></minus>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <sum></sum>
         <apply>
          <eq></eq>
          <ci>i</ci>
          <cn type="integer">1</cn>
         </apply>
        </apply>
        <cn type="integer">2</cn>
       </apply>
       <apply>
        <minus></minus>
        <ci>i</ci>
        <cn type="integer">3</cn>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <sum></sum>
         <apply>
          <eq></eq>
          <ci>i</ci>
          <cn type="integer">3</cn>
         </apply>
        </apply>
        <cn type="integer">9</cn>
       </apply>
       <apply>
        <minus></minus>
        <ci>i</ci>
        <cn type="integer">3</cn>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <plus></plus>
       <apply>
        <plus></plus>
        <cn type="integer">2</cn>
        <cn type="integer">1</cn>
       </apply>
       <apply>
        <plus></plus>
        <cn type="integer">0</cn>
        <cn type="integer">1</cn>
        <cn type="integer">2</cn>
        <ci>normal-‚Ä¶</ci>
        <cn type="integer">6</cn>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <cn type="float">24.</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   L(3)\propto\sum_{i=1}^{2}-(i-3)+\sum_{i=3}^{9}(i-3)=[(2+1)+(0+1+2+...+6)]=24.
  </annotation>
 </semantics>
</math>

). Then, at <em>u</em>=3,</p>

<p>

<math display="inline" id="Quantile_regression:20">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>3</mn>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>-</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>6</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo>-</mo>
    <mn>3</mn>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <minus></minus>
     <cn type="integer">3</cn>
     <cn type="integer">6</cn>
    </apply>
    <apply>
     <minus></minus>
     <cn type="integer">3</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (3)-(6)=-3
  </annotation>
 </semantics>
</math>

</p>

<p>Suppose that <em>u</em> is increased by 1 unit. Then the expected loss will be changed by 

<math display="block" id="Quantile_regression:21">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>L</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mn>5</mn>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>‚àù</mo>
    <mrow>
     <mrow>
      <munderover>
       <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
       <mrow>
        <mi>i</mi>
        <mo>=</mo>
        <mn>1</mn>
       </mrow>
       <mn>4</mn>
      </munderover>
      <mi>i</mi>
     </mrow>
     <mo>+</mo>
     <mrow>
      <munderover>
       <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
       <mrow>
        <mi>i</mi>
        <mo>=</mo>
        <mn>0</mn>
       </mrow>
       <mn>4</mn>
      </munderover>
      <mi>i</mi>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mn>20</mn>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <csymbol cd="latexml">proportional-to</csymbol>
     <apply>
      <times></times>
      <ci>L</ci>
      <cn type="integer">5</cn>
     </apply>
     <apply>
      <plus></plus>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <sum></sum>
         <apply>
          <eq></eq>
          <ci>i</ci>
          <cn type="integer">1</cn>
         </apply>
        </apply>
        <cn type="integer">4</cn>
       </apply>
       <ci>i</ci>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <sum></sum>
         <apply>
          <eq></eq>
          <ci>i</ci>
          <cn type="integer">0</cn>
         </apply>
        </apply>
        <cn type="integer">4</cn>
       </apply>
       <ci>i</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <cn type="integer">20</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   L(5)\propto\sum_{i=1}^{4}i+\sum_{i=0}^{4}i=20,
  </annotation>
 </semantics>
</math>

 on changing <em>u</em> to 4. If, <em>u</em>=5, the expected loss is</p>

<p>

<math display="inline" id="Quantile_regression:22">
 <semantics>
  <mrow>
   <mn>0.5</mn>
   <mo>/</mo>
   <mn>9</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <divide></divide>
    <cn type="float">0.5</cn>
    <cn type="integer">9</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   {0.5/9}
  </annotation>
 </semantics>
</math>

 and any change in <em>u</em> will increase the expected loss. Thus <em>u</em>=5 is the median. The Table below shows the expected loss (divided by 

<math display="inline" id="Quantile_regression:23">
 <semantics>
  <mrow>
   <mi>œÑ</mi>
   <mo>=</mo>
   <mn>0.5</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>œÑ</ci>
    <cn type="float">0.5</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau=0.5
  </annotation>
 </semantics>
</math>

) for different values of <em>u</em>.</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p><em>u</em></p></td>
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p>5</p></td>
<td style="text-align: left;">
<p>6</p></td>
<td style="text-align: left;">
<p>7</p></td>
<td style="text-align: left;">
<p>8</p></td>
<td style="text-align: left;">
<p>9</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>Expected loss</p></td>
<td style="text-align: left;">
<p>36</p></td>
<td style="text-align: left;">
<p>29</p></td>
<td style="text-align: left;">
<p>24</p></td>
<td style="text-align: left;">
<p>21</p></td>
<td style="text-align: left;">
<p>20</p></td>
<td style="text-align: left;">
<p>21</p></td>
<td style="text-align: left;">
<p>24</p></td>
<td style="text-align: left;">
<p>29</p></td>
<td style="text-align: left;">
<p>36</p></td>
</tr>
</tbody>
</table>
<h2 id="intuition">Intuition</h2>

<p>Consider 

<math display="inline" id="Quantile_regression:24">
 <semantics>
  <msub>
   <mi>q</mi>
   <mi>œÑ</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>q</ci>
    <ci>œÑ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   q_{\tau}
  </annotation>
 </semantics>
</math>

 and let <em>q</em> be an initial guess for 

<math display="block" id="Quantile_regression:25">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo>-</mo>
     <mrow>
      <mn>0.5</mn>
      <mrow>
       <msubsup>
        <mo largeop="true" symmetric="true">‚à´</mo>
        <mrow>
         <mo>-</mo>
         <mi mathvariant="normal">‚àû</mi>
        </mrow>
        <mi>q</mi>
       </msubsup>
       <mrow>
        <mrow>
         <mo stretchy="false">(</mo>
         <mrow>
          <mi>y</mi>
          <mo>-</mo>
          <mi>q</mi>
         </mrow>
         <mo stretchy="false">)</mo>
        </mrow>
        <mi>d</mi>
        <msub>
         <mi>F</mi>
         <mi>Y</mi>
        </msub>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>y</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mrow>
     </mrow>
    </mrow>
    <mo>+</mo>
    <mrow>
     <mn>0.5</mn>
     <mrow>
      <msubsup>
       <mo largeop="true" symmetric="true">‚à´</mo>
       <mi>q</mi>
       <mi mathvariant="normal">‚àû</mi>
      </msubsup>
      <mrow>
       <mrow>
        <mo stretchy="false">(</mo>
        <mrow>
         <mi>y</mi>
         <mo>-</mo>
         <mi>q</mi>
        </mrow>
        <mo stretchy="false">)</mo>
       </mrow>
       <mi>d</mi>
       <msub>
        <mi>F</mi>
        <mi>Y</mi>
       </msub>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>y</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <plus></plus>
    <apply>
     <minus></minus>
     <apply>
      <times></times>
      <cn type="float">0.5</cn>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <int></int>
         <apply>
          <minus></minus>
          <infinity></infinity>
         </apply>
        </apply>
        <ci>q</ci>
       </apply>
       <apply>
        <times></times>
        <apply>
         <minus></minus>
         <ci>y</ci>
         <ci>q</ci>
        </apply>
        <ci>d</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>F</ci>
         <ci>Y</ci>
        </apply>
        <ci>y</ci>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <cn type="float">0.5</cn>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <int></int>
        <ci>q</ci>
       </apply>
       <infinity></infinity>
      </apply>
      <apply>
       <times></times>
       <apply>
        <minus></minus>
        <ci>y</ci>
        <ci>q</ci>
       </apply>
       <ci>d</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>F</ci>
        <ci>Y</ci>
       </apply>
       <ci>y</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   -0.5\int_{-\infty}^{q}(y-q)dF_{Y}(y)+0.5\int_{q}^{\infty}(y-q)dF_{Y}(y).
  </annotation>
 </semantics>
</math>

. The expected loss evaluated at <em>q</em> is</p>

<p>

<math display="block" id="Quantile_regression:26">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msubsup>
      <mo largeop="true" symmetric="true">‚à´</mo>
      <mrow>
       <mo>-</mo>
       <mi mathvariant="normal">‚àû</mi>
      </mrow>
      <mi>q</mi>
     </msubsup>
     <mrow>
      <mn>1</mn>
      <mi>d</mi>
      <msub>
       <mi>F</mi>
       <mi>Y</mi>
      </msub>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>y</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
    <mo>-</mo>
    <mrow>
     <msubsup>
      <mo largeop="true" symmetric="true">‚à´</mo>
      <mi>q</mi>
      <mi mathvariant="normal">‚àû</mi>
     </msubsup>
     <mrow>
      <mn>1</mn>
      <mi>d</mi>
      <msub>
       <mi>F</mi>
       <mi>Y</mi>
      </msub>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>y</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <minus></minus>
    <apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <int></int>
       <apply>
        <minus></minus>
        <infinity></infinity>
       </apply>
      </apply>
      <ci>q</ci>
     </apply>
     <apply>
      <times></times>
      <cn type="integer">1</cn>
      <ci>d</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>F</ci>
       <ci>Y</ci>
      </apply>
      <ci>y</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <int></int>
       <ci>q</ci>
      </apply>
      <infinity></infinity>
     </apply>
     <apply>
      <times></times>
      <cn type="integer">1</cn>
      <ci>d</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>F</ci>
       <ci>Y</ci>
      </apply>
      <ci>y</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \int_{-\infty}^{q}1dF_{Y}(y)-\int_{q}^{\infty}1dF_{Y}(y).
  </annotation>
 </semantics>
</math>

 In order to minimize the expected loss, we move the value of <em>q</em> a little bit to see whether the expect loss will rise or fall. Suppose we increase <em>q</em> by 1 unit. Then the change of expected loss would be</p>

<p>

<math display="inline" id="Quantile_regression:27">
 <semantics>
  <mrow>
   <msub>
    <mi>F</mi>
    <mi>Y</mi>
   </msub>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>q</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>F</ci>
     <ci>Y</ci>
    </apply>
    <ci>q</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F_{Y}(q)
  </annotation>
 </semantics>
</math>

</p>

<p>The first term of the equation is 

<math display="inline" id="Quantile_regression:28">
 <semantics>
  <mrow>
   <mn>1</mn>
   <mo>-</mo>
   <mrow>
    <msub>
     <mi>F</mi>
     <mi>Y</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>q</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <minus></minus>
    <cn type="integer">1</cn>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>F</ci>
      <ci>Y</ci>
     </apply>
     <ci>q</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   1-F_{Y}(q)
  </annotation>
 </semantics>
</math>

 and second term of the equation is 

<math display="inline" id="Quantile_regression:29">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>F</mi>
     <mi>Y</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>q</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo><</mo>
   <mn>0.5</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <lt></lt>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>F</ci>
      <ci>Y</ci>
     </apply>
     <ci>q</ci>
    </apply>
    <cn type="float">0.5</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F_{Y}(q)<0.5
  </annotation>
 </semantics>
</math>

. Therefore the change of expected loss function is negative if and only if 

<math display="inline" id="Quantile_regression:30">
 <semantics>
  <mi>œÑ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>œÑ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau
  </annotation>
 </semantics>
</math>

, that is if and only if <em>q</em> is smaller than the median. Similarly, if we reduce <em>q</em> by 1 unit, the change of expected loss function is negative if and only if <em>q</em> is larger than the median.</p>

<p>In order to minimize the expected loss function, we would increase (decrease) <em>L</em>(<em>q</em>) if <em>q</em> is smaller (larger) than the median, until <em>q</em> reaches the median. The idea behind the minimization is to count the number of points (weighted with the density) that are larger or smaller than <em>q</em> and then move <em>q</em> to a point where <em>q</em> is larger than 

<math display="inline" id="Quantile_regression:31">
 <semantics>
  <mi>œÑ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>œÑ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau
  </annotation>
 </semantics>
</math>

% of the points.</p>
<h2 id="sample-quantile">Sample quantile</h2>

<p>The 

<math display="block" id="Quantile_regression:32">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mover accent="true">
      <mi>q</mi>
      <mo stretchy="false">^</mo>
     </mover>
     <mi>œÑ</mi>
    </msub>
    <mo>=</mo>
    <mrow>
     <munder accentunder="true">
      <mtext>arg min</mtext>
      <mrow>
       <mi>q</mi>
       <mo>‚àà</mo>
       <mi>R</mi>
      </mrow>
     </munder>
     <mrow>
      <munderover>
       <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
       <mrow>
        <mi>i</mi>
        <mo>=</mo>
        <mn>1</mn>
       </mrow>
       <mi>n</mi>
      </munderover>
      <mrow>
       <msub>
        <mi>œÅ</mi>
        <mi>œÑ</mi>
       </msub>
       <mrow>
        <mo stretchy="false">(</mo>
        <mrow>
         <msub>
          <mi>y</mi>
          <mi>i</mi>
         </msub>
         <mo>-</mo>
         <mi>q</mi>
        </mrow>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <apply>
      <ci>normal-^</ci>
      <ci>q</ci>
     </apply>
     <ci>œÑ</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <apply>
       <in></in>
       <ci>q</ci>
       <ci>R</ci>
      </apply>
      <mtext>arg min</mtext>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>i</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>n</ci>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>œÅ</ci>
        <ci>œÑ</ci>
       </apply>
       <apply>
        <minus></minus>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>y</ci>
         <ci>i</ci>
        </apply>
        <ci>q</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \hat{q}_{\tau}=\underset{q\in R}{\mbox{arg min}}\sum_{i=1}^{n}\rho_{\tau}(y_{i%
}-q),
  </annotation>
 </semantics>
</math>

 sample quantile can be obtained by solving the following minimization problem</p>

<p>

<math display="inline" id="Quantile_regression:33">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>Q</mi>
     <mrow>
      <mi>Y</mi>
      <mo stretchy="false">|</mo>
      <mi>X</mi>
     </mrow>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>œÑ</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>X</mi>
    <msub>
     <mi>Œ≤</mi>
     <mi>œÑ</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Q</ci>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <csymbol cd="unknown">Y</csymbol>
       <ci>normal-|</ci>
       <csymbol cd="unknown">X</csymbol>
      </cerror>
     </apply>
     <ci>œÑ</ci>
    </apply>
    <apply>
     <times></times>
     <ci>X</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Œ≤</ci>
      <ci>œÑ</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Q_{Y|X}(\tau)=X\beta_{\tau}
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="inline" id="Quantile_regression:34">
 <semantics>
  <mi>Y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y
  </annotation>
 </semantics>
</math>

th conditional quantile function is 

<math display="inline" id="Quantile_regression:35">
 <semantics>
  <msub>
   <mi>Œ≤</mi>
   <mi>œÑ</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>Œ≤</ci>
    <ci>œÑ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \beta_{\tau}
  </annotation>
 </semantics>
</math>

. Given the distribution function of 

<math display="block" id="Quantile_regression:36">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>Œ≤</mi>
     <mi>œÑ</mi>
    </msub>
    <mo>=</mo>
    <mrow>
     <munder accentunder="true">
      <mtext>arg min</mtext>
      <mrow>
       <mi>Œ≤</mi>
       <mo>‚àà</mo>
       <msup>
        <mi>R</mi>
        <mi>k</mi>
       </msup>
      </mrow>
     </munder>
     <mi>E</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <msub>
        <mi>œÅ</mi>
        <mi>œÑ</mi>
       </msub>
       <mrow>
        <mo stretchy="false">(</mo>
        <mrow>
         <mi>Y</mi>
         <mo>-</mo>
         <mrow>
          <mi>X</mi>
          <mi>Œ≤</mi>
         </mrow>
        </mrow>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>Œ≤</ci>
     <ci>œÑ</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <apply>
       <in></in>
       <ci>Œ≤</ci>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>R</ci>
        <ci>k</ci>
       </apply>
      </apply>
      <mtext>arg min</mtext>
     </apply>
     <ci>E</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>œÅ</ci>
       <ci>œÑ</ci>
      </apply>
      <apply>
       <minus></minus>
       <ci>Y</ci>
       <apply>
        <times></times>
        <ci>X</ci>
        <ci>Œ≤</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \beta_{\tau}=\underset{\beta\in R^{k}}{\mbox{arg min}}E(\rho_{\tau}(Y-X\beta)).
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Quantile_regression:37">
 <semantics>
  <mi>Œ≤</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>Œ≤</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \beta
  </annotation>
 </semantics>
</math>

 can be obtained by solving</p>

<p>

<math display="block" id="Quantile_regression:38">
 <semantics>
  <mrow>
   <mrow>
    <mover accent="true">
     <msub>
      <mi>Œ≤</mi>
      <mi>œÑ</mi>
     </msub>
     <mo stretchy="false">^</mo>
    </mover>
    <mo>=</mo>
    <mrow>
     <munder accentunder="true">
      <mtext>arg min</mtext>
      <mrow>
       <mi>Œ≤</mi>
       <mo>‚àà</mo>
       <msup>
        <mi>R</mi>
        <mi>k</mi>
       </msup>
      </mrow>
     </munder>
     <mrow>
      <munderover>
       <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
       <mrow>
        <mi>i</mi>
        <mo>=</mo>
        <mn>1</mn>
       </mrow>
       <mi>n</mi>
      </munderover>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <msub>
         <mi>œÅ</mi>
         <mi>œÑ</mi>
        </msub>
        <mrow>
         <mo stretchy="false">(</mo>
         <mrow>
          <msub>
           <mi>Y</mi>
           <mi>i</mi>
          </msub>
          <mo>-</mo>
          <mrow>
           <mi>X</mi>
           <mi>Œ≤</mi>
          </mrow>
         </mrow>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <ci>normal-^</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Œ≤</ci>
      <ci>œÑ</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <apply>
      <apply>
       <in></in>
       <ci>Œ≤</ci>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>R</ci>
        <ci>k</ci>
       </apply>
      </apply>
      <mtext>arg min</mtext>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>i</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>n</ci>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>œÅ</ci>
        <ci>œÑ</ci>
       </apply>
       <apply>
        <minus></minus>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>Y</ci>
         <ci>i</ci>
        </apply>
        <apply>
         <times></times>
         <ci>X</ci>
         <ci>Œ≤</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \hat{\beta_{\tau}}=\underset{\beta\in R^{k}}{\mbox{arg min}}\sum_{i=1}^{n}(%
\rho_{\tau}(Y_{i}-X\beta)).
  </annotation>
 </semantics>
</math>

</p>

<p>Solving the sample analog gives the estimator of 

<math display="block" id="Quantile_regression:39">
 <semantics>
  <mrow>
   <mrow>
    <munder accentunder="true">
     <mi>min</mi>
     <mrow>
      <mrow>
       <msup>
        <mi>Œ≤</mi>
        <mo>+</mo>
       </msup>
       <mo>,</mo>
       <msup>
        <mi>Œ≤</mi>
        <mo>-</mo>
       </msup>
       <mo>,</mo>
       <msup>
        <mi>u</mi>
        <mo>+</mo>
       </msup>
       <mo>,</mo>
       <msup>
        <mi>u</mi>
        <mo>-</mo>
       </msup>
      </mrow>
      <mo>‚àà</mo>
      <mrow>
       <msup>
        <mi>R</mi>
        <mrow>
         <mn>2</mn>
         <mi>k</mi>
        </mrow>
       </msup>
       <mo>√ó</mo>
       <msubsup>
        <mi>R</mi>
        <mo>+</mo>
        <mrow>
         <mn>2</mn>
         <mi>n</mi>
        </mrow>
       </msubsup>
      </mrow>
     </mrow>
    </munder>
    <mrow>
     <mo>{</mo>
     <mrow>
      <mrow>
       <mi>œÑ</mi>
       <msubsup>
        <mn>1</mn>
        <mi>n</mi>
        <msup>
         <mi></mi>
         <mo>‚Ä≤</mo>
        </msup>
       </msubsup>
       <msup>
        <mi>u</mi>
        <mo>+</mo>
       </msup>
      </mrow>
      <mo>+</mo>
      <mrow>
       <mrow>
        <mo stretchy="false">(</mo>
        <mrow>
         <mn>1</mn>
         <mo>-</mo>
         <mi>œÑ</mi>
        </mrow>
        <mo stretchy="false">)</mo>
       </mrow>
       <msubsup>
        <mn>1</mn>
        <mi>n</mi>
        <msup>
         <mi></mi>
         <mo>‚Ä≤</mo>
        </msup>
       </msubsup>
       <msup>
        <mi>u</mi>
        <mo>-</mo>
       </msup>
      </mrow>
     </mrow>
     <mo stretchy="false">|</mo>
     <mrow>
      <mrow>
       <mrow>
        <mrow>
         <mi>X</mi>
         <mrow>
          <mo stretchy="false">(</mo>
          <mrow>
           <msup>
            <mi>Œ≤</mi>
            <mo>+</mo>
           </msup>
           <mo>-</mo>
           <msup>
            <mi>Œ≤</mi>
            <mo>-</mo>
           </msup>
          </mrow>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
        <mo>+</mo>
        <msup>
         <mi>u</mi>
         <mo>+</mo>
        </msup>
       </mrow>
       <mo>-</mo>
       <msup>
        <mi>u</mi>
        <mo>-</mo>
       </msup>
      </mrow>
      <mo>=</mo>
      <mi>Y</mi>
     </mrow>
     <mo>}</mo>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <apply>
      <in></in>
      <list>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>Œ≤</ci>
        <plus></plus>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>Œ≤</ci>
        <minus></minus>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>u</ci>
        <plus></plus>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>u</ci>
        <minus></minus>
       </apply>
      </list>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>R</ci>
        <apply>
         <times></times>
         <cn type="integer">2</cn>
         <ci>k</ci>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>R</ci>
         <plus></plus>
        </apply>
        <apply>
         <times></times>
         <cn type="integer">2</cn>
         <ci>n</ci>
        </apply>
       </apply>
      </apply>
     </apply>
     <min></min>
    </apply>
    <apply>
     <csymbol cd="latexml">conditional-set</csymbol>
     <apply>
      <plus></plus>
      <apply>
       <times></times>
       <ci>œÑ</ci>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <cn type="integer">1</cn>
         <ci>n</ci>
        </apply>
        <apply>
         <ci>normal-‚Ä≤</ci>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>u</ci>
        <plus></plus>
       </apply>
      </apply>
      <apply>
       <times></times>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
        <ci>œÑ</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <cn type="integer">1</cn>
         <ci>n</ci>
        </apply>
        <apply>
         <ci>normal-‚Ä≤</ci>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>u</ci>
        <minus></minus>
       </apply>
      </apply>
     </apply>
     <apply>
      <eq></eq>
      <apply>
       <minus></minus>
       <apply>
        <plus></plus>
        <apply>
         <times></times>
         <ci>X</ci>
         <apply>
          <minus></minus>
          <apply>
           <csymbol cd="ambiguous">superscript</csymbol>
           <ci>Œ≤</ci>
           <plus></plus>
          </apply>
          <apply>
           <csymbol cd="ambiguous">superscript</csymbol>
           <ci>Œ≤</ci>
           <minus></minus>
          </apply>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>u</ci>
         <plus></plus>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>u</ci>
        <minus></minus>
       </apply>
      </apply>
      <ci>Y</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \underset{\beta^{+},\beta^{-},u^{+},u^{-}\in R^{2k}\times R_{+}^{2n}}{\min}%
\left\{\tau 1_{n}^{{}^{\prime}}u^{+}+(1-\tau)1_{n}^{{}^{\prime}}u^{-}|X(\beta^%
{+}-\beta^{-})+u^{+}-u^{-}=Y\right\},
  </annotation>
 </semantics>
</math>

.</p>

<p>

<math display="block" id="Quantile_regression:40">
 <semantics>
  <mrow>
   <msubsup>
    <mi>Œ≤</mi>
    <mi>j</mi>
    <mo>+</mo>
   </msubsup>
   <mo>=</mo>
   <mrow>
    <mi>max</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>Œ≤</mi>
      <mi>j</mi>
     </msub>
     <mo>,</mo>
     <mn>0</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Œ≤</ci>
      <ci>j</ci>
     </apply>
     <plus></plus>
    </apply>
    <apply>
     <max></max>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Œ≤</ci>
      <ci>j</ci>
     </apply>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \beta_{j}^{+}=\max(\beta_{j},0)
  </annotation>
 </semantics>
</math>

</p>
<h2 id="computation">Computation</h2>

<p>The minimization problem can be reformulated as a <a href="linear_programming" title="wikilink">linear programming</a> problem</p>

<p>

<math display="inline" id="Quantile_regression:41">
 <semantics>
  <mrow>
   <msubsup>
    <mi>Œ≤</mi>
    <mi>j</mi>
    <mo>-</mo>
   </msubsup>
   <mo>=</mo>
   <mrow>
    <mo>-</mo>
    <mrow>
     <mi>min</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <msub>
       <mi>Œ≤</mi>
       <mi>j</mi>
      </msub>
      <mo>,</mo>
      <mn>0</mn>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Œ≤</ci>
      <ci>j</ci>
     </apply>
     <minus></minus>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <min></min>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Œ≤</ci>
       <ci>j</ci>
      </apply>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \beta_{j}^{-}=-\min(\beta_{j},0)
  </annotation>
 </semantics>
</math>

</p>

<p>where</p>

<p>

<math display="inline" id="Quantile_regression:42">
 <semantics>
  <mrow>
   <msubsup>
    <mi>u</mi>
    <mi>j</mi>
    <mo>+</mo>
   </msubsup>
   <mo>=</mo>
   <mrow>
    <mi>max</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>u</mi>
      <mi>j</mi>
     </msub>
     <mo>,</mo>
     <mn>0</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>u</ci>
      <ci>j</ci>
     </apply>
     <plus></plus>
    </apply>
    <apply>
     <max></max>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>u</ci>
      <ci>j</ci>
     </apply>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   u_{j}^{+}=\max(u_{j},0)
  </annotation>
 </semantics>
</math>

,¬†¬†¬† 

<math display="inline" id="Quantile_regression:43">
 <semantics>
  <mrow>
   <mrow>
    <msubsup>
     <mi>u</mi>
     <mi>j</mi>
     <mo>-</mo>
    </msubsup>
    <mo>=</mo>
    <mrow>
     <mo>-</mo>
     <mrow>
      <mi>min</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <msub>
        <mi>u</mi>
        <mi>j</mi>
       </msub>
       <mo>,</mo>
       <mn>0</mn>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>u</ci>
      <ci>j</ci>
     </apply>
     <minus></minus>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <min></min>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>u</ci>
       <ci>j</ci>
      </apply>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   u_{j}^{-}=-\min(u_{j},0).
  </annotation>
 </semantics>
</math>

,¬†¬† ¬†

<math display="inline" id="Quantile_regression:44">
 <semantics>
  <mrow>
   <mi>œÑ</mi>
   <mo>‚àà</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mn>0</mn>
    <mo>,</mo>
    <mn>1</mn>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>œÑ</ci>
    <interval closure="open">
     <cn type="integer">0</cn>
     <cn type="integer">1</cn>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau\in(0,1)
  </annotation>
 </semantics>
</math>

 ,¬†¬†¬† 

<math display="inline" id="Quantile_regression:45">
 <semantics>
  <msub>
   <mover accent="true">
    <mi>Œ≤</mi>
    <mo stretchy="false">^</mo>
   </mover>
   <mi>œÑ</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <apply>
     <ci>normal-^</ci>
     <ci>Œ≤</ci>
    </apply>
    <ci>œÑ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \hat{\beta}_{\tau}
  </annotation>
 </semantics>
</math>

</p>

<p><a href="Simplex_algorithm" title="wikilink">Simplex methods</a><a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a> or <a href="interior_point_method" title="wikilink">interior point methods</a><a class="footnoteRef" href="#fn9" id="fnref9"><sup>9</sup></a> can be applied to solve the linear programming problem.</p>
<h2 id="asymptotic-properties">Asymptotic properties</h2>

<p>For 

<math display="block" id="Quantile_regression:46">
 <semantics>
  <mrow>
   <mrow>
    <msqrt>
     <mi>n</mi>
    </msqrt>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <msub>
       <mover accent="true">
        <mi>Œ≤</mi>
        <mo stretchy="false">^</mo>
       </mover>
       <mi>œÑ</mi>
      </msub>
      <mo>-</mo>
      <msub>
       <mi>Œ≤</mi>
       <mi>œÑ</mi>
      </msub>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mover accent="true">
     <mo>‚Üí</mo>
     <mo>ùëë</mo>
    </mover>
    <mi>N</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>0</mn>
     <mo>,</mo>
     <mrow>
      <mi>œÑ</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mn>1</mn>
        <mo>-</mo>
        <mi>œÑ</mi>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
      <msup>
       <mi>D</mi>
       <mrow>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </msup>
      <msub>
       <mi mathvariant="normal">Œ©</mi>
       <mi>x</mi>
      </msub>
      <msup>
       <mi>D</mi>
       <mrow>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </msup>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <root></root>
     <ci>n</ci>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <ci>normal-^</ci>
       <ci>Œ≤</ci>
      </apply>
      <ci>œÑ</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Œ≤</ci>
      <ci>œÑ</ci>
     </apply>
    </apply>
    <apply>
     <ci>d</ci>
     <ci>normal-‚Üí</ci>
    </apply>
    <ci>N</ci>
    <interval closure="open">
     <cn type="integer">0</cn>
     <apply>
      <times></times>
      <ci>œÑ</ci>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
       <ci>œÑ</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>D</ci>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>normal-Œ©</ci>
       <ci>x</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>D</ci>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
       </apply>
      </apply>
     </apply>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sqrt{n}(\hat{\beta}_{\tau}-\beta_{\tau})\overset{d}{\rightarrow}N(0,\tau(1-%
\tau)D^{-1}\Omega_{x}D^{-1}),
  </annotation>
 </semantics>
</math>

, under some regularity conditions, 

<math display="block" id="Quantile_regression:47">
 <semantics>
  <mrow>
   <mi>D</mi>
   <mo>=</mo>
   <mrow>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <msub>
       <mi>f</mi>
       <mi>Y</mi>
      </msub>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mi>X</mi>
        <mi>Œ≤</mi>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
      <mi>X</mi>
      <msup>
       <mi>X</mi>
       <mo>‚Ä≤</mo>
      </msup>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>D</ci>
    <apply>
     <times></times>
     <ci>E</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>f</ci>
       <ci>Y</ci>
      </apply>
      <apply>
       <times></times>
       <ci>X</ci>
       <ci>Œ≤</ci>
      </apply>
      <ci>X</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>X</ci>
       <ci>normal-‚Ä≤</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D=E(f_{Y}(X\beta)XX^{\prime})
  </annotation>
 </semantics>
</math>

 is <a href="Asymptotic_normality" title="wikilink">asymptotically normal</a>:</p>

<p>

<math display="inline" id="Quantile_regression:48">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi mathvariant="normal">Œ©</mi>
     <mi>x</mi>
    </msub>
    <mo>=</mo>
    <mrow>
     <mi>E</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <msup>
        <mi>X</mi>
        <mo>‚Ä≤</mo>
       </msup>
       <mi>X</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>normal-Œ©</ci>
     <ci>x</ci>
    </apply>
    <apply>
     <times></times>
     <ci>E</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>X</ci>
       <ci>normal-‚Ä≤</ci>
      </apply>
      <ci>X</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Omega_{x}=E(X^{\prime}X).
  </annotation>
 </semantics>
</math>

 where</p>

<p>

<math display="inline" id="Quantile_regression:49">
 <semantics>
  <mrow>
   <mi>a</mi>
   <mo>></mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <gt></gt>
    <ci>a</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a>0
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Quantile_regression:50">
 <semantics>
  <mrow>
   <mi>œÑ</mi>
   <mo>‚àà</mo>
   <mrow>
    <mo stretchy="false">[</mo>
    <mn>0</mn>
    <mo>,</mo>
    <mn>1</mn>
    <mo stretchy="false">]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>œÑ</ci>
    <interval closure="closed">
     <cn type="integer">0</cn>
     <cn type="integer">1</cn>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau\in[0,1]
  </annotation>
 </semantics>
</math>

</p>

<p>Direct estimation of the asymptotic variance-covariance matrix is not always satisfactory. Inference for quantile regression parameters can be made with the regression rank-score tests or with the bootstrap methods.<a class="footnoteRef" href="#fn10" id="fnref10"><sup>10</sup></a></p>
<h2 id="equivariance">Equivariance</h2>

<p>See <a href="invariant_estimator" title="wikilink">invariant estimator</a> for background on invariance or see <a class="uri" href="equivariance" title="wikilink">equivariance</a>.</p>
<h3 id="scale-equivariance">Scale equivariance</h3>

<p>For any 

<math display="block" id="Quantile_regression:51">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mover accent="true">
      <mi>Œ≤</mi>
      <mo stretchy="false">^</mo>
     </mover>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>œÑ</mi>
      <mo>;</mo>
      <mrow>
       <mi>a</mi>
       <mi>Y</mi>
      </mrow>
      <mo>,</mo>
      <mi>X</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mi>a</mi>
     <mover accent="true">
      <mi>Œ≤</mi>
      <mo stretchy="false">^</mo>
     </mover>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>œÑ</mi>
      <mo>;</mo>
      <mi>Y</mi>
      <mo>,</mo>
      <mi>X</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>normal-^</ci>
      <ci>Œ≤</ci>
     </apply>
     <list>
      <ci>œÑ</ci>
      <apply>
       <times></times>
       <ci>a</ci>
       <ci>Y</ci>
      </apply>
      <ci>X</ci>
     </list>
    </apply>
    <apply>
     <times></times>
     <ci>a</ci>
     <apply>
      <ci>normal-^</ci>
      <ci>Œ≤</ci>
     </apply>
     <list>
      <ci>œÑ</ci>
      <ci>Y</ci>
      <ci>X</ci>
     </list>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \hat{\beta}(\tau;aY,X)=a\hat{\beta}(\tau;Y,X),
  </annotation>
 </semantics>
</math>

 and 

<math display="block" id="Quantile_regression:52">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mover accent="true">
      <mi>Œ≤</mi>
      <mo stretchy="false">^</mo>
     </mover>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>œÑ</mi>
      <mo>;</mo>
      <mrow>
       <mo>-</mo>
       <mrow>
        <mi>a</mi>
        <mi>Y</mi>
       </mrow>
      </mrow>
      <mo>,</mo>
      <mi>X</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mo>-</mo>
     <mrow>
      <mi>a</mi>
      <mover accent="true">
       <mi>Œ≤</mi>
       <mo stretchy="false">^</mo>
      </mover>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mn>1</mn>
        <mo>-</mo>
        <mi>œÑ</mi>
       </mrow>
       <mo>;</mo>
       <mi>Y</mi>
       <mo>,</mo>
       <mi>X</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>normal-^</ci>
      <ci>Œ≤</ci>
     </apply>
     <list>
      <ci>œÑ</ci>
      <apply>
       <minus></minus>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>Y</ci>
       </apply>
      </apply>
      <ci>X</ci>
     </list>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <times></times>
      <ci>a</ci>
      <apply>
       <ci>normal-^</ci>
       <ci>Œ≤</ci>
      </apply>
      <list>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
        <ci>œÑ</ci>
       </apply>
       <ci>Y</ci>
       <ci>X</ci>
      </list>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \hat{\beta}(\tau;-aY,X)=-a\hat{\beta}(1-\tau;Y,X).
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="inline" id="Quantile_regression:53">
 <semantics>
  <mrow>
   <mi>Œ≥</mi>
   <mo>‚àà</mo>
   <msup>
    <mi>R</mi>
    <mi>k</mi>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>Œ≥</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>R</ci>
     <ci>k</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \gamma\in R^{k}
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="inline" id="Quantile_regression:54">
 <semantics>
  <mrow>
   <mi>œÑ</mi>
   <mo>‚àà</mo>
   <mrow>
    <mo stretchy="false">[</mo>
    <mn>0</mn>
    <mo>,</mo>
    <mn>1</mn>
    <mo stretchy="false">]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>œÑ</ci>
    <interval closure="closed">
     <cn type="integer">0</cn>
     <cn type="integer">1</cn>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau\in[0,1]
  </annotation>
 </semantics>
</math>

</p>
<h3 id="shift-equivariance">Shift equivariance</h3>

<p>For any 

<math display="block" id="Quantile_regression:55">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mover accent="true">
      <mi>Œ≤</mi>
      <mo stretchy="false">^</mo>
     </mover>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>œÑ</mi>
      <mo>;</mo>
      <mrow>
       <mi>Y</mi>
       <mo>+</mo>
       <mrow>
        <mi>X</mi>
        <mi>Œ≥</mi>
       </mrow>
      </mrow>
      <mo>,</mo>
      <mi>X</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mrow>
      <mover accent="true">
       <mi>Œ≤</mi>
       <mo stretchy="false">^</mo>
      </mover>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>œÑ</mi>
       <mo>;</mo>
       <mi>Y</mi>
       <mo>,</mo>
       <mi>X</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>+</mo>
     <mi>Œ≥</mi>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>normal-^</ci>
      <ci>Œ≤</ci>
     </apply>
     <list>
      <ci>œÑ</ci>
      <apply>
       <plus></plus>
       <ci>Y</ci>
       <apply>
        <times></times>
        <ci>X</ci>
        <ci>Œ≥</ci>
       </apply>
      </apply>
      <ci>X</ci>
     </list>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <times></times>
      <apply>
       <ci>normal-^</ci>
       <ci>Œ≤</ci>
      </apply>
      <list>
       <ci>œÑ</ci>
       <ci>Y</ci>
       <ci>X</ci>
      </list>
     </apply>
     <ci>Œ≥</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \hat{\beta}(\tau;Y+X\gamma,X)=\hat{\beta}(\tau;Y,X)+\gamma.
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Quantile_regression:56">
 <semantics>
  <mi>A</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>A</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="inline" id="Quantile_regression:57">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo>√ó</mo>
   <mi>p</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>p</ci>
    <ci>p</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p\times p
  </annotation>
 </semantics>
</math>

</p>
<h3 id="equivariance-to-reparameterization-of-design">Equivariance to reparameterization of design</h3>

<p>Let 

<math display="inline" id="Quantile_regression:58">
 <semantics>
  <mrow>
   <mi>œÑ</mi>
   <mo>‚àà</mo>
   <mrow>
    <mo stretchy="false">[</mo>
    <mn>0</mn>
    <mo>,</mo>
    <mn>1</mn>
    <mo stretchy="false">]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>œÑ</ci>
    <interval closure="closed">
     <cn type="integer">0</cn>
     <cn type="integer">1</cn>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tau\in[0,1]
  </annotation>
 </semantics>
</math>

 be any 

<math display="block" id="Quantile_regression:59">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mover accent="true">
      <mi>Œ≤</mi>
      <mo stretchy="false">^</mo>
     </mover>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>œÑ</mi>
      <mo>;</mo>
      <mi>Y</mi>
      <mo>,</mo>
      <mrow>
       <mi>X</mi>
       <mi>A</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <msup>
      <mi>A</mi>
      <mrow>
       <mo>-</mo>
       <mn>1</mn>
      </mrow>
     </msup>
     <mover accent="true">
      <mi>Œ≤</mi>
      <mo stretchy="false">^</mo>
     </mover>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>œÑ</mi>
      <mo>;</mo>
      <mi>Y</mi>
      <mo>,</mo>
      <mi>X</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>normal-^</ci>
      <ci>Œ≤</ci>
     </apply>
     <list>
      <ci>œÑ</ci>
      <ci>Y</ci>
      <apply>
       <times></times>
       <ci>X</ci>
       <ci>A</ci>
      </apply>
     </list>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>A</ci>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <apply>
      <ci>normal-^</ci>
      <ci>Œ≤</ci>
     </apply>
     <list>
      <ci>œÑ</ci>
      <ci>Y</ci>
      <ci>X</ci>
     </list>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \hat{\beta}(\tau;Y,XA)=A^{-1}\hat{\beta}(\tau;Y,X).
  </annotation>
 </semantics>
</math>

 nonsingular matrix and 

<math display="inline" id="Quantile_regression:60">
 <semantics>
  <mi>h</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>h</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   h
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Quantile_regression:61">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>h</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <msub>
        <mi>Q</mi>
        <mrow>
         <mi>Y</mi>
         <mo stretchy="false">|</mo>
         <mi>X</mi>
        </mrow>
       </msub>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>œÑ</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>‚â°</mo>
    <mrow>
     <msub>
      <mi>Q</mi>
      <mrow>
       <mi>h</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>Y</mi>
        <mo stretchy="false">)</mo>
       </mrow>
       <mo stretchy="false">|</mo>
       <mi>X</mi>
      </mrow>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>œÑ</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <equivalent></equivalent>
    <apply>
     <times></times>
     <ci>h</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Q</ci>
       <cerror>
        <csymbol cd="ambiguous">fragments</csymbol>
        <csymbol cd="unknown">Y</csymbol>
        <ci>normal-|</ci>
        <csymbol cd="unknown">X</csymbol>
       </cerror>
      </apply>
      <ci>œÑ</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Q</ci>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <csymbol cd="unknown">h</csymbol>
       <cerror>
        <csymbol cd="ambiguous">fragments</csymbol>
        <ci>normal-(</ci>
        <csymbol cd="unknown">Y</csymbol>
        <ci>normal-)</ci>
       </cerror>
       <ci>normal-|</ci>
       <csymbol cd="unknown">X</csymbol>
      </cerror>
     </apply>
     <ci>œÑ</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   h(Q_{Y|X}(\tau))\equiv Q_{h(Y)|X}(\tau).
  </annotation>
 </semantics>
</math>

</p>
<h3 id="invariance-to-monotone-transformations">Invariance to monotone transformations</h3>

<p>If 

<math display="inline" id="Quantile_regression:62">
 <semantics>
  <mrow>
   <mi>Y</mi>
   <mo>=</mo>
   <mrow>
    <mi>ln</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>W</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>Y</ci>
    <apply>
     <ln></ln>
     <ci>W</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y=\ln(W)
  </annotation>
 </semantics>
</math>

 is a nondecreasing function on <em>'R</em>, the following <a href="Invariant_estimator" title="wikilink">invariance</a> property applies:</p>

<p>

<math display="inline" id="Quantile_regression:63">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>Q</mi>
     <mrow>
      <mi>Y</mi>
      <mo stretchy="false">|</mo>
      <mi>X</mi>
     </mrow>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>œÑ</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>X</mi>
    <msub>
     <mi>Œ≤</mi>
     <mi>œÑ</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Q</ci>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <csymbol cd="unknown">Y</csymbol>
       <ci>normal-|</ci>
       <csymbol cd="unknown">X</csymbol>
      </cerror>
     </apply>
     <ci>œÑ</ci>
    </apply>
    <apply>
     <times></times>
     <ci>X</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Œ≤</ci>
      <ci>œÑ</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Q_{Y|X}(\tau)=X\beta_{\tau}
  </annotation>
 </semantics>
</math>

</p>

<p>Example (1):</p>

<p>Let 

<math display="inline" id="Quantile_regression:64">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>Q</mi>
     <mrow>
      <mi>W</mi>
      <mo stretchy="false">|</mo>
      <mi>X</mi>
     </mrow>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>œÑ</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>exp</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>X</mi>
      <msub>
       <mi>Œ≤</mi>
       <mi>œÑ</mi>
      </msub>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Q</ci>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <csymbol cd="unknown">W</csymbol>
       <ci>normal-|</ci>
       <csymbol cd="unknown">X</csymbol>
      </cerror>
     </apply>
     <ci>œÑ</ci>
    </apply>
    <apply>
     <exp></exp>
     <apply>
      <times></times>
      <ci>X</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Œ≤</ci>
       <ci>œÑ</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Q_{W|X}(\tau)=\exp(X\beta_{\tau})
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Quantile_regression:65">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo>E</mo>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>ln</mi>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>Y</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>‚â†</mo>
    <mrow>
     <mi>ln</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mo>E</mo>
       <mrow>
        <mo stretchy="false">(</mo>
        <mi>Y</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <neq></neq>
    <apply>
     <ci>normal-E</ci>
     <apply>
      <ln></ln>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <ln></ln>
     <apply>
      <ci>normal-E</ci>
      <ci>Y</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \operatorname{E}(\ln(Y))\neq\ln(\operatorname{E}(Y)).
  </annotation>
 </semantics>
</math>

, then 

<math display="inline" id="Quantile_regression:66">
 <semantics>
  <mrow>
   <msup>
    <mi>Y</mi>
    <mi>c</mi>
   </msup>
   <mo>=</mo>
   <mrow>
    <mi>max</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>0</mn>
     <mo>,</mo>
     <mi>Y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>Y</ci>
     <ci>c</ci>
    </apply>
    <apply>
     <max></max>
     <cn type="integer">0</cn>
     <ci>Y</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y^{c}=\max(0,Y)
  </annotation>
 </semantics>
</math>

. The mean regression does not have the same property since 

<math display="inline" id="Quantile_regression:67">
 <semantics>
  <mrow>
   <msub>
    <mi>Q</mi>
    <mrow>
     <mi>Y</mi>
     <mo stretchy="false">|</mo>
     <mi>X</mi>
    </mrow>
   </msub>
   <mo>=</mo>
   <mrow>
    <mi>X</mi>
    <msub>
     <mi>Œ≤</mi>
     <mi>œÑ</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>Q</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <csymbol cd="unknown">Y</csymbol>
      <ci>normal-|</ci>
      <csymbol cd="unknown">X</csymbol>
     </cerror>
    </apply>
    <apply>
     <times></times>
     <ci>X</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Œ≤</ci>
      <ci>œÑ</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Q_{Y|X}=X\beta_{\tau}
  </annotation>
 </semantics>
</math>

</p>
<h2 id="bayesian-methods-for-quantile-regression">Bayesian methods for Quantile Regression</h2>

<p>Because quantile regression does not normally assume a parametric likelihood for the conditional distributions of Y|X, the Bayesian methods work with a working likelihood. A convenient choice is the asymmetric Laplacian likelihood,<a class="footnoteRef" href="#fn11" id="fnref11"><sup>11</sup></a> because the mode of the resulting posterior under a flat prior is the usual quantile regression estimates. The posterior inference, however, must be interpreted with care. Yang and He <a class="footnoteRef" href="#fn12" id="fnref12"><sup>12</sup></a> showed that one can have asymptotically valid posterior inference if the working likelihood is chosen to be the empirical likelihood.</p>
<h2 id="censored-quantile-regression">Censored Quantile Regression</h2>

<p>If the response variable is subject to censoring, the conditional mean is not identifiable without additional distributional assumptions, but the conditional quantile is often identifiable. For recent work on censored quantile regression, see: Portnoy <a class="footnoteRef" href="#fn13" id="fnref13"><sup>13</sup></a> and Wang and Wang <a class="footnoteRef" href="#fn14" id="fnref14"><sup>14</sup></a></p>

<p>Example (2):</p>

<p>Let 

<math display="inline" id="Quantile_regression:68">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>Q</mi>
     <mrow>
      <msup>
       <mi>Y</mi>
       <mi>c</mi>
      </msup>
      <mo stretchy="false">|</mo>
      <mi>X</mi>
     </mrow>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>œÑ</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>max</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>0</mn>
     <mo>,</mo>
     <mrow>
      <mi>X</mi>
      <msub>
       <mi>Œ≤</mi>
       <mi>œÑ</mi>
      </msub>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Q</ci>
      <cerror>
       <csymbol cd="ambiguous">fragments</csymbol>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>Y</ci>
        <ci>c</ci>
       </apply>
       <ci>normal-|</ci>
       <csymbol cd="unknown">X</csymbol>
      </cerror>
     </apply>
     <ci>œÑ</ci>
    </apply>
    <apply>
     <max></max>
     <cn type="integer">0</cn>
     <apply>
      <times></times>
      <ci>X</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Œ≤</ci>
       <ci>œÑ</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Q_{Y^{c}|X}(\tau)=\max(0,X\beta_{\tau})
  </annotation>
 </semantics>
</math>

 and <span class="LaTeX">$Q_{Y|X}=X\beta_{\tau}$</span>, then <span class="LaTeX">$Q_{Y^{c}|X}(\tau)=\max(0,X\beta_{\tau})$</span>. This is the censored quantile regression model: estimated values can be obtained without making any distributional assumptions, but at the cost of computational difficulty,<a class="footnoteRef" href="#fn15" id="fnref15"><sup>15</sup></a> some of which can be avoided by using a simple three step censored quantile regression procedure as an approximation.<a class="footnoteRef" href="#fn16" id="fnref16"><sup>16</sup></a></p>

<p>For random censoring on the response variables, the censored quantile regression of Portnoy (2003) provides consistent estimates of all identifiable quantile functions based on reweighting each censored point appropriately.</p>
<h2 id="implementations">Implementations</h2>

<p>Statistical software packages, such as <a href="R_(programming_language)" title="wikilink">R</a>, <a class="uri" href="Eviews" title="wikilink">Eviews</a> (ver. 6), <a class="uri" href="Stata" title="wikilink">Stata</a> (via <strong>qreg</strong>), <a class="uri" href="gretl" title="wikilink">gretl</a>, <a href="SAS_System" title="wikilink">SAS</a> through proc quantreg (ver. 9.2) and proc quantselect (ver. 9.3), <a href="Vowpal_Wabbit" title="wikilink">Vowpal Wabbit</a> (via <em>--loss_function quantile</em>), and <a href="Regression_Analysis_of_Time_Series" title="wikilink">RATS</a> include implementations of quantile regression. Several R packages implement quantile regression using different methods: <a href="http://cran.r-project.org/web/packages/quantreg/index.html">quantreg package</a> by Roger Koenker, <a href="http://cran.r-project.org/web/packages/gbm/">gbm</a>, and <a href="http://cran.r-project.org/web/packages/quantregForest/index.html">quantregForest</a>.</p>
<h2 id="references">References</h2>
<h2 id="further-reading">Further reading</h2>
<ul>
<li></li>
</ul>

<p>"</p>

<p><a href="Category:Regression_analysis" title="wikilink">Category:Regression analysis</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">‚Ü©</a></li>
<li id="fn2"><a href="#fnref2">‚Ü©</a></li>
<li id="fn3"><a href="#fnref3">‚Ü©</a></li>
<li id="fn4"><a href="#fnref4">‚Ü©</a></li>
<li id="fn5"></li>
<li id="fn6"><a href="#fnref6">‚Ü©</a></li>
<li id="fn7"></li>
<li id="fn8"></li>
<li id="fn9"></li>
<li id="fn10"><a href="#fnref10">‚Ü©</a></li>
<li id="fn11"><a href="#fnref11">‚Ü©</a></li>
<li id="fn12"><a href="#fnref12">‚Ü©</a></li>
<li id="fn13"><a href="#fnref13">‚Ü©</a></li>
<li id="fn14"><a href="#fnref14">‚Ü©</a></li>
<li id="fn15"><a href="#fnref15">‚Ü©</a></li>
<li id="fn16"><a href="#fnref16">‚Ü©</a></li>
</ol>
</section>
</body>
</html>
