   Homography (computer vision)      Homography (computer vision)   In the field of computer vision , any two images of the same planar surface in space are related by a homography (assuming a pinhole camera model ). This has many practical applications, such as image rectification , image registration , or computation of camera motion‚Äîrotation and translation‚Äîbetween two images. Once camera rotation and translation have been extracted from an estimated homography matrix, this information may be used for navigation, or to insert models of 3D objects into an image or video, so that they are rendered with the correct perspective and appear to have been part of the original scene (see Augmented reality ).  3D plane to plane equation  We have two cameras a and b , looking at points    P  i     subscript  P  i    P_{i}   in a plane. Passing the projections of    P  i     subscript  P  i    P_{i}   from    p  i     b     superscript   subscript  p  i   b    {}^{b}p_{i}   in b to a point    p  i     a     superscript   subscript  p  i   a    {}^{a}p_{i}   in a :       p  i     a   =    K  a   ‚ãÖ   H   b  a    ‚ãÖ   K  b   -  1    ‚ãÖ   p  i     b         superscript   subscript  p  i   a    normal-‚ãÖ   subscript  K  a    subscript  H    b  a     superscript   subscript  K  b     1     superscript   subscript  p  i   b      {}^{a}p_{i}=K_{a}\cdot H_{ba}\cdot K_{b}^{-1}\cdot{}^{b}p_{i}     where the homography matrix    H   b  a      subscript  H    b  a     H_{ba}   is        H   b  a    =   R  -    t   n  T    d     .       subscript  H    b  a      R      t   superscript  n  T    d      H_{ba}=R-\frac{tn^{T}}{d}.      R   R   R   is the rotation matrix by which b is rotated in relation to a ; t is the translation vector from a to b ; n and d are the normal vector of the plane and the distance to the plane respectively. K a and K b are the cameras' intrinsic parameter matrices.  (Figure)  Homography-transl-bold.svg   The figure shows camera b looking at the plane at distance d . Note: From above figure, assuming       n  T    P  i    +  d   =  0           superscript  n  T    subscript  P  i    d   0    n^{T}P_{i}+d=0   as plane model,     n  T    P  i        superscript  n  T    subscript  P  i     n^{T}P_{i}   is the projection of vector    P  i     subscript  P  i    P_{i}   into    n  T     superscript  n  T    n^{T}   , and equal to    -  d      d    -d   . So    t  =   t   (   -     n  T    P  i    d    )        t    t         superscript  n  T    subscript  P  i    d       t=t\left(-\frac{n^{T}P_{i}}{d}\right)   . And we have      H   b  a     P  i    =    R   P  i    +  t          subscript  H    b  a     subscript  P  i        R   subscript  P  i    t     H_{ba}P_{i}=RP_{i}+t   where     H   b  a    =   R  -    t   n  T    d         subscript  H    b  a      R      t   superscript  n  T    d      H_{ba}=R-\frac{tn^{T}}{d}   .  This formula is only valid if camera b has no rotation and no translation. In the general case where     R  a   ,   R  b       subscript  R  a    subscript  R  b     R_{a},R_{b}   and     t  a   ,   t  b       subscript  t  a    subscript  t  b     t_{a},t_{b}   are the respective rotations and translations of camera a and b ,    R  =    R  a    R  b  T        R     subscript  R  a    superscript   subscript  R  b   T      R=R_{a}R_{b}^{T}   and the homography matrix    H   b  a      subscript  H    b  a     H_{ba}   becomes        H   b  a    =     R  a    R  b  T    -    R  a      (    t  b   -   t  a    )    n  T    d    R  b  T     =    R  a    (   I  -     (    t  b   -   t  a    )    n  T    d    )    R  b  T     .         subscript  H    b  a         subscript  R  a    superscript   subscript  R  b   T       subscript  R  a          subscript  t  b    subscript  t  a     superscript  n  T    d    superscript   subscript  R  b   T             subscript  R  a     I         subscript  t  b    subscript  t  a     superscript  n  T    d     superscript   subscript  R  b   T       H_{ba}=R_{a}R_{b}^{T}-R_{a}\frac{(t_{b}-t_{a})n^{T}}{d}R_{b}^{T}=R_{a}\left(I-%
 \frac{(t_{b}-t_{a})n^{T}}{d}\right)R_{b}^{T}.     where d is the distance of the camera b to the plane.  Mathematical definition  In higher dimensions Homogeneous coordinates are used to represent projective transformations by means of matrix multiplications. With Cartesian coordinates matrix multiplication cannot perform the division required for perspective projection . In other words, with Cartesian coordinates a perspective projection is a non- linear transformation .  Given:        p  a   =   [      x  a        y  a       1     ]    ,     p  b  ‚Ä≤   =   [       w  ‚Ä≤    x  b          w  ‚Ä≤    y  b         w  ‚Ä≤      ]    ,    ùêá   a  b    =   [      h  11      h   ;  12       h   ;  13         h  21      h   ;  22       h   ;  23         h  31      h   ;  32       h   ;  33       ]        formulae-sequence     subscript  p  a      subscript  x  a      subscript  y  a     1      formulae-sequence     subscript   superscript  p  normal-‚Ä≤   b        superscript  w  normal-‚Ä≤    subscript  x  b         superscript  w  normal-‚Ä≤    subscript  y  b       superscript  w  normal-‚Ä≤         subscript  ùêá    a  b       subscript  h  11    fragments  h   subscript  normal-;  12     fragments  h   subscript  normal-;  13       subscript  h  21    fragments  h   subscript  normal-;  22     fragments  h   subscript  normal-;  23       subscript  h  31    fragments  h   subscript  normal-;  32     fragments  h   subscript  normal-;  33          p_{a}=\begin{bmatrix}x_{a}\\
 y_{a}\\
 1\end{bmatrix},p^{\prime}_{b}=\begin{bmatrix}w^{\prime}x_{b}\\
 w^{\prime}y_{b}\\
 w^{\prime}\end{bmatrix},\mathbf{H}_{ab}=\begin{bmatrix}h_{11}&h_{12}&h_{13}%
 \\
 h_{21}&h_{22}&h_{23}\\
 h_{31}&h_{32}&h_{33}\end{bmatrix}     Then:       p  b  ‚Ä≤   =    ùêá   a  b      p  a          subscript   superscript  p  normal-‚Ä≤   b      subscript  ùêá    a  b     subscript  p  a      p^{\prime}_{b}=\mathbf{H}_{ab}p_{a}\,   where      ùêá   b  a    =   ùêá   a  b    -  1     .       subscript  ùêá    b  a     superscript   subscript  ùêá    a  b      1      \mathbf{H}_{ba}=\mathbf{H}_{ab}^{-1}.     Also:       p  b   =    p  b  ‚Ä≤   /   w  ‚Ä≤    =   [      x  b        y  b       1     ]          subscript  p  b      subscript   superscript  p  normal-‚Ä≤   b    superscript  w  normal-‚Ä≤            subscript  x  b      subscript  y  b     1       p_{b}=p^{\prime}_{b}/w^{\prime}=\begin{bmatrix}x_{b}\\
 y_{b}\\
 1\end{bmatrix}     Affine homography  When the image region in which the homography is computed is small or the image has been acquired with a large focal length, an affine homography is a more appropriate model of image displacements. An affine homography is a special type of a general homography whose last row is fixed to        h  31   =   h  32   =  0   ,    h  33   =  1.      formulae-sequence       subscript  h  31    subscript  h  32        0       subscript  h  33   1.     h_{31}=h_{32}=0,\;h_{33}=1.     See also   Direct linear transformation  Epipolar geometry  Feature (computer vision)  Fundamental matrix (computer vision)  Pose (computer vision)   References     External links   Serge Belongie & David Kriegman (2007) Explanation of Homography Estimation from Department of Computer Science and Engineering, University of California, San Diego .  A. Criminsi, I. Reid & A. Zisserman (1997) "A Plane Measuring Device" , ¬ß3 Computing the Plane to Plane Homography, from Visual Geometry Group, Department of Engineering Science, University of Oxford .  Elan Dubrofsky (2009) Homography Estimation , Master's thesis , from Department of Computer Science, University of British Columbia .  Richard Hartley & Andrew Zisserman (2004) Multiple View Geometry from Visual Geometry Group, Oxford. Includes Matlab  Functions for calculating a homography and the fundamental matrix (computer vision) .  Manolis Lourakis (2007) homest , a GPL  C / C++ library for robust , non-linear (based on the Levenberg‚ÄìMarquardt algorithm ) homography estimation from matched point pairs, from Institute of Computer Science, Foundation for Research and Technology ‚Äì Hellas, Heraklion, Crete .  OpenCV is a complete ( open and free ) computer vision software library that has many routines related to homography estimation ( cvFindHomography ) and re-projection ( cvPerspectiveTransform ).  GIMP Tutorial ‚Äì using the Perspective Tool by Billy Kerr on YouTube . Shows how to do a perspective transform using GIMP .  Allan Jepson (2010) Planar Homographies from Department of Computer Science, University of Toronto . Includes 2D homography from four pairs of corresponding points, mosaics in image processing, removing perspective distortion in computer vision, rendering textures in computer graphics, and computing planar shadows.  Plane transfer homography Course notes from CSE576 at University of Washington in Seattle .  Etienne Vincent & Robert Laganiere (2000) Detecting Planar Homographies in an Image Pair from School of Information Technology and Engineering, University of Ottawa . Describes an algorithm for detecting planes in images, uses random sample consensus ( RANSAC ) method, describes heuristics and iteration.   "  Category:Geometry in computer vision  Category:Functions and mappings   