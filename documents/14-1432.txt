   Op amp integrator      Op amp integrator   The operational amplifier integrator is an electronic integration circuit. Based on the operational amplifier (op-amp), it performs the mathematical operation of integration with respect to time; that is, its output voltage is proportional to the input voltage integrated over time.  Applications  The integrator circuit is mostly used in analog computers , analog-to-digital converters and wave-shaping circuits. A common wave-shaping use is as a charge amplifier and they are usually constructed using an operational amplifier though they can use high gain discrete transistor configurations.  Design  The input current is offset by a negative feedback current flowing in the capacitor, which is generated by an increase in output voltage of the amplifier. The output voltage is therefore dependent on the value of input current it has to offset and the inverse of the value of the feedback capacitor. The greater the capacitor value, the less output voltage has to be generated to produce a particular feedback current flow.  The input impedance of the circuit is almost zero because of the Miller effect . Hence all the stray capacitances (the cable capacitance, the amplifier input capacitance, etc.) are virtually grounded and they have no influence on the output signal. 1  Ideal circuit  (Figure)  Integrator circuit   The circuit operates by passing a current that charges or discharges the capacitor C f during the time under consideration, which strives to retain the virtual ground condition at the input by off-setting the effect of the input current. Referring to the above diagram, if the op-amp is assumed to be ideal , nodes v 1 and v 2 are held equal, and so v 2 is a virtual ground. The input voltage passes a current     v   i  n     R  1        subscript  v    i  n     subscript  R  1     \frac{v_{in}}{R_{1}}   through the resistor producing a compensating current flow through the series capacitor to maintain the virtual ground. This charges or discharges the capacitor over time. Because the resistor and capacitor are connected to a virtual ground, the input current does not vary with capacitor charge and a linear integration of output is achieved.  The circuit can be analyzed by applying Kirchhoff's current law at the node v 2 , keeping ideal op-amp behaviour in mind.       i  1   =    I  B   +   i  F         subscript  i  1      subscript  I  B    subscript  i  F      i_{\text{1}}=I_{\text{B}}+i_{\text{F}}        I  B   =  0       subscript  I  B   0    I_{\text{B}}=0   in an ideal op-amp, so:       i  1   =   i  F        subscript  i  1    subscript  i  F     i_{\text{1}}=i_{\text{F}}     Furthermore, the capacitor has a voltage-current relationship governed by the equation:       I  C   =   C    d   V  c     d  t          subscript  I  C     C      d   subscript  V  c      d  t       I_{\text{C}}=C\frac{dV_{\text{c}}}{dt}     Substituting the appropriate variables:         v  in   -   v  2     R  1    =    C  F     d   (    v  2   -   v  o    )     d  t              subscript  v  in    subscript  v  2     subscript  R  1       subscript  C  F       d     subscript  v  2    subscript  v  o       d  t       \frac{v_{\text{in}}-v_{\text{2}}}{R_{\text{1}}}=C_{\text{F}}\frac{d(v_{\text{2%
 }}-v_{\text{o}})}{dt}        v  2   =   v  1   =  0         subscript  v  2    subscript  v  1        0     v_{2}=v_{1}=0   in an ideal op-amp, resulting in:        v  in    R  1    =   -    C  F     d   v  o     d  t             subscript  v  in    subscript  R  1         subscript  C  F       d   subscript  v  o      d  t        \frac{v_{\text{in}}}{R_{\text{1}}}=-C_{\text{F}}\frac{dv_{\text{o}}}{dt}     Integrating both sides with respect to time:        ∫  0  t       v  in    R  1     d   t     =   -    ∫  0  t     C  F      d   v  o     d  t     d  t           superscript   subscript   0   t        subscript  v  in    subscript  R  1    d  t        superscript   subscript   0   t      subscript  C  F       d   subscript  v  o      d  t    d  t       \int_{0}^{t}\frac{v_{\text{in}}}{R_{\text{1}}}\ dt\ =-\int_{0}^{t}C_{\text{F}}%
 \frac{dv_{\text{o}}}{dt}\,dt     If the initial value of v o is assumed to be 0 V, this results in a DC error of: 2       v  o   =   -    1    R  1    C  F       ∫  0  t      v  in    d  t           subscript  v  o         1     subscript  R  1    subscript  C  F       superscript   subscript   0   t      subscript  v  in   d  t        v_{\text{o}}=-\frac{1}{R_{\text{1}}C_{\text{F}}}\int_{0}^{t}v_{\text{in}}\,dt     Practical circuit  The ideal circuit is not a practical integrator design for a number of reasons. Practical op-amps have a finite open-loop gain , an input offset voltage and input bias currents (    I  B     subscript  I  B    I_{B}   ). This can cause several issues for the ideal design; most importantly, if     v  in   =  0       subscript  v  in   0    v_{\text{in}}=0   , both the output offset voltage and the input bias current    I  B     subscript  I  B    I_{B}   can cause current to pass through the capacitor, causing the output voltage to drift over time until the op-amp saturates. Similarly, if    v  in     subscript  v  in    v_{\text{in}}   were a signal centered about zero volts (i.e. without a DC component), no drift would be expected in an ideal circuit, but may occur in a real circuit. To negate the effect of the input bias current, it is necessary to set:       R  on   =    R  1    ||   R  f   ||    R  L         subscript  R  on      subscript  R  1    norm   subscript  R  f     subscript  R  L      R_{\text{on}}=R_{1}||R_{f}||R_{L}   . The error voltage then becomes:       V  E   =    (     R  f    R  1    +  1   )    V   I  O  S          subscript  V  E          subscript  R  f    subscript  R  1    1    subscript  V    I  O  S       V_{\text{E}}=\left(\frac{R_{\text{f}}}{R_{1}}+1\right)V_{IOS}     The input bias current thus causes the same voltage drops at both the positive and negative terminals.  Also, in a DC steady state, the capacitor acts as an open circuit. The DC gain of the ideal circuit is therefore infinite (or in practice, the open-loop gain of a non-ideal op-amp). To counter this, a large resistor    R  F     subscript  R  F    R_{F}   is inserted in parallel with the feedback capacitor, as shown in the figure above. This limits the DC gain of the circuit to a finite value, and hence changes the output drift into a finite, preferably small, DC error. Referring to the above diagram:       V  E   =   (    R  f    R  1    +  1  )    (   V   I  O  S    +   I   B  I     (   R  f   ∥   R  1   )   )      fragments   subscript  V  E     fragments  normal-(     subscript  R  f    subscript  R  1     1  normal-)    fragments  normal-(   subscript  V    I  O  S      subscript  I    B  I     fragments  normal-(   subscript  R  f   parallel-to   subscript  R  1   normal-)   normal-)     V_{\text{E}}=\left(\frac{R_{\text{f}}}{R_{1}}+1\right)\left(V_{IOS}+I_{BI}%
 \left(R_{\text{f}}\parallel R_{1}\right)\right)     where    V   I  O  S      subscript  V    I  O  S     V_{IOS}   is the input offset voltage and    I   B  I      subscript  I    B  I     I_{BI}   is the input bias current on the inverting terminal.     R  f   ∥   R  1      fragments   subscript  R  f   parallel-to   subscript  R  1     R_{f}\parallel R_{1}   indicates two resistance values in parallel.  Frequency response  (Figure)  Frequency response of ideal and practical integrator.   The frequency responses of the practical and ideal integrator are shown in the above figure. For both circuits, the crossover frequency    f  b     subscript  f  b    f_{\text{b}}   , at which the gain is 0 dB, is given by:       f  b   =   1   2  π   R  1    C  F          subscript  f  b     1    2  π   subscript  R  1    subscript  C  F       f_{\text{b}}=\frac{1}{{2\pi}{R_{\text{1}}}{C_{\text{F}}}}     The 3 dB cutoff frequency     f  a     subscript  f  a    f_{\text{a}}   of the practical circuit is given by:       f  a   =   1   2  π   R  F    C  F          subscript  f  a     1    2  π   subscript  R  F    subscript  C  F       f_{\text{a}}=\frac{1}{{2\pi}{R_{\text{F}}}{C_{\text{F}}}}     The practical integrator circuit is equivalent to an active first-order low-pass filter . The gain is relatively constant up to the cutoff frequency and decreases by 20 dB per decade beyond it. The integration operation occurs for frequencies in the range    [   f  a   ,   f  b   ]      subscript  f  a    subscript  f  b     \left[f_{\text{a}},f_{\text{b}}\right]   , provided that     f  a   <   f  b        subscript  f  a    subscript  f  b     f_{\text{a}}   . This condition can be achieved by appropriate choice of     R  F    C  F        subscript  R  F    subscript  C  F     R_{\text{F}}C_{\text{F}}   and     R  1    C  F        subscript  R  1    subscript  C  F     R_{1}C_{\text{F}}   time constants.  References   OP AMP Integrator Complete Tutorial   "  Category:Analog circuits  Category:Linear electronic circuits     Transducers with Charge Output ↩  ↩     