<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1669">Controlled grammar</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Controlled grammar</h1>
<hr/>

<p><strong>Controlled grammars</strong><a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> are a class of grammars that extend, usually, the <a href="context-free_grammar" title="wikilink">context-free grammars</a> with additional controls on the derivations of a sentence in the language. A number of different kinds of controlled grammars exist, the four main divisions being <a href="Indexed_grammar" title="wikilink">Indexed grammars</a>, grammars with prescribed derivation sequences, grammars with contextual conditions on rule application, and grammars with parallelism in rule application. Because indexed grammars are so well established in the field, this article will address only the latter three kinds of controlled grammars.</p>
<h2 id="control-by-prescribed-sequences">Control by prescribed sequences</h2>

<p>Grammars with prescribed sequences are grammars in which the sequence of rule application is constrained in some way. There are four different versions of prescribed sequence grammars: language controlled grammars (often called just controlled grammars), matrix grammars, vector grammars, and programmed grammars.</p>

<p>In the standard context-free grammar formalism, a grammar itself is viewed as a 4-tuple, 

<math display="inline" id="Controlled_grammar:0">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>S</ci>
     <ci>P</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,S,P)
  </annotation>
 </semantics>
</math>

, where <em>N</em> is a set of non-terminal/phrasal symbols, <em>T</em> is a disjoint set of terminal/word symbols, <em>S</em> is a specially designated start symbol chosen from <em>N</em>, and <em>P</em> is a set of production rules like 

<math display="inline" id="Controlled_grammar:1">
 <semantics>
  <mrow>
   <mi>X</mi>
   <mo>→</mo>
   <mi>α</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>X</ci>
    <ci>α</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X\to\alpha
  </annotation>
 </semantics>
</math>

, where <em>X</em> is some member of <em>N</em>, and 

<math display="inline" id="Controlled_grammar:2">
 <semantics>
  <mi>α</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>α</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \alpha
  </annotation>
 </semantics>
</math>

 is some member of 

<math display="inline" id="Controlled_grammar:3">
 <semantics>
  <msup>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mi>N</mi>
     <mo>∪</mo>
     <mi>T</mi>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>*</mo>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <apply>
     <union></union>
     <ci>N</ci>
     <ci>T</ci>
    </apply>
    <times></times>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (N\cup T)^{*}
  </annotation>
 </semantics>
</math>

.</p>

<p>Productions over such a grammar are sequences of rules in <em>P</em> that, when applied in order of the sequence, lead to a terminal string. That is, one can view the set of imaginable derivations in <em>G</em> as the set 

<math display="inline" id="Controlled_grammar:4">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <mrow>
    <msub>
     <mi>p</mi>
     <mn>1</mn>
    </msub>
    <msub>
     <mi>p</mi>
     <mn>2</mn>
    </msub>
    <mi mathvariant="normal">…</mi>
    <msub>
     <mi>p</mi>
     <mi>n</mi>
    </msub>
   </mrow>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <cn type="integer">2</cn>
     </apply>
     <ci>normal-…</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{p_{1}p_{2}...p_{n}:n\geq 0\}
  </annotation>
 </semantics>
</math>

, and the language of <em>G</em> as being the set of terminal strings 

<math display="inline" id="Controlled_grammar:5">
 <semantics>
  <mrow>
   <mrow>
    <mi>L</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>G</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">{</mo>
    <mrow>
     <mi>w</mi>
     <mo>∈</mo>
     <msup>
      <mi>T</mi>
      <mo>*</mo>
     </msup>
    </mrow>
    <mo>:</mo>
    <mrow>
     <mi>S</mi>
     <msub>
      <mo>⇒</mo>
      <msub>
       <mi>p</mi>
       <mn>1</mn>
      </msub>
     </msub>
     <mi mathvariant="normal">…</mi>
     <msub>
      <mo>⇒</mo>
      <msub>
       <mi>p</mi>
       <mi>n</mi>
      </msub>
     </msub>
     <mi>w</mi>
    </mrow>
    <mo stretchy="false">}</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>L</ci>
     <ci>G</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">conditional-set</csymbol>
     <apply>
      <in></in>
      <ci>w</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>T</ci>
       <times></times>
      </apply>
     </apply>
     <apply>
      <and></and>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>normal-⇒</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>p</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>S</ci>
       <ci>normal-…</ci>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>normal-⇒</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>p</ci>
         <ci>n</ci>
        </apply>
       </apply>
       <share href="#.cmml">
       </share>
       <ci>w</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   L(G)=\{w\in T^{*}:S\Rightarrow_{p_{1}}...\Rightarrow_{p_{n}}w\}
  </annotation>
 </semantics>
</math>

. Control grammars take seriously this definition of the language generated by a grammar, concretizing the set-of-derivations as an aspect of the grammar. Thus, a prescribed sequence controlled grammar is at least approximately a 5-tuple 

<math display="inline" id="Controlled_grammar:6">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo>,</mo>
    <mi>R</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>S</ci>
     <ci>P</ci>
     <ci>R</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,S,P,R)
  </annotation>
 </semantics>
</math>

 where everything except <em>R</em> is the same as in a CFG, and <em>R</em> is an infinite set of valid derivation sequences 

<math display="inline" id="Controlled_grammar:7">
 <semantics>
  <mrow>
   <msub>
    <mi>p</mi>
    <mn>1</mn>
   </msub>
   <msub>
    <mi>p</mi>
    <mn>2</mn>
   </msub>
   <mi mathvariant="normal">…</mi>
   <msub>
    <mi>p</mi>
    <mi>n</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>p</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>p</ci>
     <cn type="integer">2</cn>
    </apply>
    <ci>normal-…</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>p</ci>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p_{1}p_{2}...p_{n}
  </annotation>
 </semantics>
</math>

.</p>

<p>The set <em>R</em>, due to its infinitude, is almost always (though not necessarily) described via some more convenient mechanism, such as a grammar (as in language controlled grammars), or a set of matrices or vectors (as in matrix and vector grammars). The different variations of prescribed sequence grammars thus differ by how the sequence of derivations is defined on top of the context-free base. Because matrix grammars and vector grammars are essentially special cases of language controlled grammars, examples of the former two will not be provided below.</p>
<h3 id="language-controlled-grammars">Language controlled grammars</h3>

<p>Language controlled grammars are grammars in which the production sequences constitute a well-defined language of arbitrary nature, usually though not necessarily regular, over a set of (again usually though not necessarily) context-free production rules. They also often have a sixth set in the grammar tuple, making it 

<math display="inline" id="Controlled_grammar:8">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo>,</mo>
    <mi>R</mi>
    <mo>,</mo>
    <mi>F</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>S</ci>
     <ci>P</ci>
     <ci>R</ci>
     <ci>F</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,S,P,R,F)
  </annotation>
 </semantics>
</math>

, where <em>F</em> is a set of productions that are allowed to apply vacuously. This version of language controlled grammars, ones with what is called "appearance checking", is the one henceforth.</p>
<h4 id="proof-theoretic-description">Proof-theoretic description</h4>

<p>We let a regularly controlled context-free grammar with appearance checking be a 6-tuple 

<math display="inline" id="Controlled_grammar:9">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo>,</mo>
    <mi>R</mi>
    <mo>,</mo>
    <mi>F</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>S</ci>
     <ci>P</ci>
     <ci>R</ci>
     <ci>F</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,S,P,R,F)
  </annotation>
 </semantics>
</math>

 where <em>N</em>, <em>T</em>, <em>S</em>, and <em>P</em> are defined as in CFGs, <em>R</em> is a subset of <em>P*</em> constituting a regular language over <em>P</em>, and <em>F</em> is some subset of <em>P</em>. We then define the immediately derives relation 

<math display="inline" id="Controlled_grammar:10">
 <semantics>
  <msub>
   <mo>⇒</mo>
   <msub>
    <mi>p</mi>
    <mi>i</mi>
   </msub>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>normal-⇒</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>p</ci>
     <ci>i</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{p_{i}}
  </annotation>
 </semantics>
</math>

 as follows:</p>

<p>Given some strings <em>x</em> and <em>y</em>, both in 

<math display="inline" id="Controlled_grammar:11">
 <semantics>
  <msup>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mi>N</mi>
     <mo>∪</mo>
     <mi>T</mi>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>*</mo>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <apply>
     <union></union>
     <ci>N</ci>
     <ci>T</ci>
    </apply>
    <times></times>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (N\cup T)^{*}
  </annotation>
 </semantics>
</math>

, and some rule 

<math display="inline" id="Controlled_grammar:12">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo>=</mo>
   <mi>A</mi>
   <mo>→</mo>
   <mi>w</mi>
   <mo>∈</mo>
   <mi>P</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>p</ci>
     <ci>A</ci>
    </apply>
    <apply>
     <ci>normal-→</ci>
     <share href="#.cmml">
     </share>
     <ci>w</ci>
    </apply>
    <apply>
     <in></in>
     <share href="#.cmml">
     </share>
     <ci>P</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p=A\to w\in P
  </annotation>
 </semantics>
</math>

,</p>

<p>

<math display="block" id="Controlled_grammar:13">
 <semantics>
  <mrow>
   <mi>x</mi>
   <msubsup>
    <mo>⇒</mo>
    <mi>p</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mi>y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <times></times>
       <ci>a</ci>
       <ci>c</ci>
      </apply>
     </apply>
     <ci>p</ci>
    </apply>
    <ci>x</ci>
    <ci>y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x\Rightarrow^{ac}_{p}y
  </annotation>
 </semantics>
</math>

</p>

<p>holds if either</p>

<p>

<math display="block" id="Controlled_grammar:14">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>x</mi>
     <mn>1</mn>
    </msub>
    <mi>A</mi>
    <msub>
     <mi>x</mi>
     <mn>2</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>x</ci>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>A</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x=x_{1}Ax_{2}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Controlled_grammar:15">
 <semantics>
  <mrow>
   <mi>y</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>y</mi>
     <mn>1</mn>
    </msub>
    <mi>w</mi>
    <msub>
     <mi>y</mi>
     <mn>2</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>y</ci>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>y</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>w</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>y</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   y=y_{1}wy_{2}
  </annotation>
 </semantics>
</math>

, or</p>

<p>

<math display="block" id="Controlled_grammar:16">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mo>=</mo>
   <mi>y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>x</ci>
    <ci>y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x=y
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Controlled_grammar:17">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo>∈</mo>
   <mi>F</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>p</ci>
    <ci>F</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p\in F
  </annotation>
 </semantics>
</math>

</p>

<p>Intuitively, this simply spells out that a rule can apply to a string if the rule's left-hand-side appears in that string, or if the rule is in the set of "vacuously applicable" rules which can "apply" to a string without changing anything. This requirement that the non-vacuously applicable rules must apply is the appearance checking aspect of such a grammar. The language for this kind of grammar is then simply set of terminal strings 

<math display="inline" id="Controlled_grammar:18">
 <semantics>
  <mrow>
   <mrow>
    <mi>L</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>G</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">{</mo>
    <mrow>
     <mi>w</mi>
     <mo>∈</mo>
     <msup>
      <mi>T</mi>
      <mo>*</mo>
     </msup>
    </mrow>
    <mo>:</mo>
    <mrow>
     <mrow>
      <mi>S</mi>
      <msubsup>
       <mo>⇒</mo>
       <msub>
        <mi>p</mi>
        <mn>1</mn>
       </msub>
       <mrow>
        <mi>a</mi>
        <mi>c</mi>
       </mrow>
      </msubsup>
      <msub>
       <mi>w</mi>
       <mn>1</mn>
      </msub>
      <msubsup>
       <mo>⇒</mo>
       <msub>
        <mi>p</mi>
        <mn>2</mn>
       </msub>
       <mrow>
        <mi>a</mi>
        <mi>c</mi>
       </mrow>
      </msubsup>
      <msub>
       <mi>w</mi>
       <mn>2</mn>
      </msub>
      <msubsup>
       <mo>⇒</mo>
       <msub>
        <mi>p</mi>
        <mn>3</mn>
       </msub>
       <mrow>
        <mi>a</mi>
        <mi>c</mi>
       </mrow>
      </msubsup>
      <mi mathvariant="normal">…</mi>
      <msubsup>
       <mo>⇒</mo>
       <msub>
        <mi>p</mi>
        <mi>n</mi>
       </msub>
       <mrow>
        <mi>a</mi>
        <mi>c</mi>
       </mrow>
      </msubsup>
      <mi>w</mi>
     </mrow>
     <mo rspace="7.5pt">,</mo>
     <mrow>
      <mrow>
       <mi>f</mi>
       <mi>o</mi>
       <mpadded width="+5pt">
        <mi>r</mi>
       </mpadded>
       <mi>s</mi>
       <mi>o</mi>
       <mi>m</mi>
       <mpadded width="+5pt">
        <mi>e</mi>
       </mpadded>
       <msub>
        <mi>p</mi>
        <mn>1</mn>
       </msub>
       <msub>
        <mi>p</mi>
        <mn>2</mn>
       </msub>
       <mi mathvariant="normal">…</mi>
       <msub>
        <mi>p</mi>
        <mi>n</mi>
       </msub>
      </mrow>
      <mo>∈</mo>
      <mi>R</mi>
     </mrow>
    </mrow>
    <mo stretchy="false">}</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>L</ci>
     <ci>G</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">conditional-set</csymbol>
     <apply>
      <in></in>
      <ci>w</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>T</ci>
       <times></times>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">formulae-sequence</csymbol>
      <apply>
       <and></and>
       <apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>normal-⇒</ci>
          <apply>
           <times></times>
           <ci>a</ci>
           <ci>c</ci>
          </apply>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>p</ci>
          <cn type="integer">1</cn>
         </apply>
        </apply>
        <ci>S</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>w</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>normal-⇒</ci>
          <apply>
           <times></times>
           <ci>a</ci>
           <ci>c</ci>
          </apply>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>p</ci>
          <cn type="integer">2</cn>
         </apply>
        </apply>
        <share href="#.cmml">
        </share>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>w</ci>
         <cn type="integer">2</cn>
        </apply>
       </apply>
       <apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>normal-⇒</ci>
          <apply>
           <times></times>
           <ci>a</ci>
           <ci>c</ci>
          </apply>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>p</ci>
          <cn type="integer">3</cn>
         </apply>
        </apply>
        <share href="#.cmml">
        </share>
        <ci>normal-…</ci>
       </apply>
       <apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>normal-⇒</ci>
          <apply>
           <times></times>
           <ci>a</ci>
           <ci>c</ci>
          </apply>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>p</ci>
          <ci>n</ci>
         </apply>
        </apply>
        <share href="#.cmml">
        </share>
        <ci>w</ci>
       </apply>
      </apply>
      <apply>
       <in></in>
       <apply>
        <times></times>
        <ci>f</ci>
        <ci>o</ci>
        <ci>r</ci>
        <ci>s</ci>
        <ci>o</ci>
        <ci>m</ci>
        <ci>e</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>p</ci>
         <cn type="integer">1</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>p</ci>
         <cn type="integer">2</cn>
        </apply>
        <ci>normal-…</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>p</ci>
         <ci>n</ci>
        </apply>
       </apply>
       <ci>R</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   L(G)=\{w\in T^{*}:S\Rightarrow^{ac}_{p_{1}}w_{1}\Rightarrow^{ac}_{p_{2}}w_{2}%
\Rightarrow^{ac}_{p_{3}}...\Rightarrow^{ac}_{p_{n}}w,\ for\ some\ p_{1}p_{2}..%
.p_{n}\in R\}
  </annotation>
 </semantics>
</math>

.</p>
<h4 id="example">Example</h4>

<p>Let's consider a simple (though not the simplest) context-free grammar that generates the language 

<math display="inline" id="Controlled_grammar:19">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <msup>
    <mi>a</mi>
    <mi>n</mi>
   </msup>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>1</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>a</ci>
     <ci>n</ci>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{n}:n\geq 1\}
  </annotation>
 </semantics>
</math>

:</p>

<p>Let 

<math display="inline" id="Controlled_grammar:20">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo>,</mo>
     <mi>A</mi>
     <mo>,</mo>
     <mi>X</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>a</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>f</mi>
     <mo>,</mo>
     <mi>g</mi>
     <mo>,</mo>
     <mi>h</mi>
     <mo>,</mo>
     <mi>k</mi>
     <mo>,</mo>
     <mi>l</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <set>
      <ci>S</ci>
      <ci>A</ci>
      <ci>X</ci>
     </set>
     <set>
      <ci>a</ci>
     </set>
     <ci>S</ci>
     <set>
      <ci>f</ci>
      <ci>g</ci>
      <ci>h</ci>
      <ci>k</ci>
      <ci>l</ci>
     </set>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(\{S,A,X\},\{a\},S,\{f,g,h,k,l\})
  </annotation>
 </semantics>
</math>

, where</p>

<p>

<math display="block" id="Controlled_grammar:21">
 <semantics>
  <mrow>
   <mi>f</mi>
   <mo>:</mo>
   <mrow>
    <mi>S</mi>
    <mo>→</mo>
    <mrow>
     <mi>A</mi>
     <mi>A</mi>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>f</ci>
    <apply>
     <ci>normal-→</ci>
     <ci>S</ci>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f:S\to AA
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:22">
 <semantics>
  <mrow>
   <mi>g</mi>
   <mo>:</mo>
   <mrow>
    <mi>S</mi>
    <mo>→</mo>
    <mi>X</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>g</ci>
    <apply>
     <ci>normal-→</ci>
     <ci>S</ci>
     <ci>X</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   g:S\to X
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:23">
 <semantics>
  <mrow>
   <mi>h</mi>
   <mo>:</mo>
   <mrow>
    <mi>A</mi>
    <mo>→</mo>
    <mi>S</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>h</ci>
    <apply>
     <ci>normal-→</ci>
     <ci>A</ci>
     <ci>S</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   h:A\to S
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:24">
 <semantics>
  <mrow>
   <mi>k</mi>
   <mo>:</mo>
   <mrow>
    <mi>A</mi>
    <mo>→</mo>
    <mi>X</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>k</ci>
    <apply>
     <ci>normal-→</ci>
     <ci>A</ci>
     <ci>X</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   k:A\to X
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:25">
 <semantics>
  <mrow>
   <mi>l</mi>
   <mo>:</mo>
   <mrow>
    <mi>S</mi>
    <mo>→</mo>
    <mi>a</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>l</ci>
    <apply>
     <ci>normal-→</ci>
     <ci>S</ci>
     <ci>a</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   l:S\to a
  </annotation>
 </semantics>
</math>

</p>

<p>In language controlled form, this grammar is simply 

<math display="inline" id="Controlled_grammar:26">
 <semantics>
  <mrow>
   <msup>
    <mi>G</mi>
    <mo>′</mo>
   </msup>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo>,</mo>
     <mi>A</mi>
     <mo>,</mo>
     <mi>X</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>a</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>f</mi>
     <mo>,</mo>
     <mi>g</mi>
     <mo>,</mo>
     <mi>h</mi>
     <mo>,</mo>
     <mi>k</mi>
     <mo>,</mo>
     <mi>l</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <msup>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>f</mi>
       <mrow>
        <mo stretchy="false">|</mo>
        <mi>g</mi>
        <mo stretchy="false">|</mo>
       </mrow>
       <mi>h</mi>
       <mrow>
        <mo stretchy="false">|</mo>
        <mi>k</mi>
        <mo stretchy="false">|</mo>
       </mrow>
       <mi>l</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mo>*</mo>
    </msup>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>f</mi>
     <mo>,</mo>
     <mi>g</mi>
     <mo>,</mo>
     <mi>h</mi>
     <mo>,</mo>
     <mi>k</mi>
     <mo>,</mo>
     <mi>l</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>G</ci>
     <ci>normal-′</ci>
    </apply>
    <vector>
     <set>
      <ci>S</ci>
      <ci>A</ci>
      <ci>X</ci>
     </set>
     <set>
      <ci>a</ci>
     </set>
     <ci>S</ci>
     <set>
      <ci>f</ci>
      <ci>g</ci>
      <ci>h</ci>
      <ci>k</ci>
      <ci>l</ci>
     </set>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <times></times>
       <ci>f</ci>
       <apply>
        <abs></abs>
        <ci>g</ci>
       </apply>
       <ci>h</ci>
       <apply>
        <abs></abs>
        <ci>k</ci>
       </apply>
       <ci>l</ci>
      </apply>
      <times></times>
     </apply>
     <set>
      <ci>f</ci>
      <ci>g</ci>
      <ci>h</ci>
      <ci>k</ci>
      <ci>l</ci>
     </set>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G^{\prime}=(\{S,A,X\},\{a\},S,\{f,g,h,k,l\},(f|g|h|k|l)^{*},\{f,g,h,k,l\})
  </annotation>
 </semantics>
</math>

 (where 

<math display="inline" id="Controlled_grammar:27">
 <semantics>
  <msup>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mi>f</mi>
     <mrow>
      <mo stretchy="false">|</mo>
      <mi>g</mi>
      <mo stretchy="false">|</mo>
     </mrow>
     <mi>h</mi>
     <mrow>
      <mo stretchy="false">|</mo>
      <mi>k</mi>
      <mo stretchy="false">|</mo>
     </mrow>
     <mi>l</mi>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>*</mo>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <apply>
     <times></times>
     <ci>f</ci>
     <apply>
      <abs></abs>
      <ci>g</ci>
     </apply>
     <ci>h</ci>
     <apply>
      <abs></abs>
      <ci>k</ci>
     </apply>
     <ci>l</ci>
    </apply>
    <times></times>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (f|g|h|k|l)^{*}
  </annotation>
 </semantics>
</math>

 is a regular expression denoting the set of all sequences of production rules). A simple modification to this grammar, changing is control sequence set <em>R</em> into the set 

<math display="inline" id="Controlled_grammar:28">
 <semantics>
  <mrow>
   <msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <msup>
       <mi>f</mi>
       <mo>*</mo>
      </msup>
      <mi>g</mi>
      <msup>
       <mi>h</mi>
       <mo>*</mo>
      </msup>
      <mi>k</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>*</mo>
   </msup>
   <msup>
    <mi>l</mi>
    <mo>*</mo>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>f</ci>
       <times></times>
      </apply>
      <ci>g</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>h</ci>
       <times></times>
      </apply>
      <ci>k</ci>
     </apply>
     <times></times>
    </apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>l</ci>
     <times></times>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (f^{*}gh^{*}k)^{*}l^{*}
  </annotation>
 </semantics>
</math>

, and changing its vacuous rule set <em>F</em> to 

<math display="inline" id="Controlled_grammar:29">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <mi>g</mi>
   <mo>,</mo>
   <mi>k</mi>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <set>
    <ci>g</ci>
    <ci>k</ci>
   </set>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{g,k\}
  </annotation>
 </semantics>
</math>

, yields a grammar which generates the non-CF language 

<math display="inline" id="Controlled_grammar:30">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <msup>
    <mi>a</mi>
    <msup>
     <mn>2</mn>
     <mi>n</mi>
    </msup>
   </msup>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>a</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{2^{n}}:n\geq 0\}
  </annotation>
 </semantics>
</math>

. To see how, let's consider the general case of some string with <em>n</em> instances of <em>S</em> in it, i.e. 

<math display="inline" id="Controlled_grammar:31">
 <semantics>
  <msup>
   <mi>S</mi>
   <mi>n</mi>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>S</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S^{n}
  </annotation>
 </semantics>
</math>

 (the special case 

<math display="inline" id="Controlled_grammar:32">
 <semantics>
  <msup>
   <mi>S</mi>
   <mn>1</mn>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>S</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S^{1}
  </annotation>
 </semantics>
</math>

 trivially derives the string <em>a</em> which is 

<math display="inline" id="Controlled_grammar:33">
 <semantics>
  <msup>
   <mi>a</mi>
   <msup>
    <mn>2</mn>
    <mn>0</mn>
   </msup>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>a</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <cn type="integer">2</cn>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a^{2^{0}}
  </annotation>
 </semantics>
</math>

, an uninteresting fact).</p>

<p>If we chose some arbitrary production sequence 

<math display="inline" id="Controlled_grammar:34">
 <semantics>
  <mrow>
   <msup>
    <mi>f</mi>
    <mi>u</mi>
   </msup>
   <mi>g</mi>
   <msup>
    <mi>h</mi>
    <mi>v</mi>
   </msup>
   <mi>k</mi>
   <mi mathvariant="normal">…</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>f</ci>
     <ci>u</ci>
    </apply>
    <ci>g</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>h</ci>
     <ci>v</ci>
    </apply>
    <ci>k</ci>
    <ci>normal-…</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f^{u}gh^{v}k...
  </annotation>
 </semantics>
</math>

, we can consider three possibilities

<math display="block" id="Controlled_grammar:35">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>=</mo>
   <mi>u</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>n</ci>
    <ci>u</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n=u
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Controlled_grammar:36">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo><</mo>
   <mi>u</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <lt></lt>
    <ci>n</ci>
    <ci>u</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n<u
  </annotation>
 </semantics>
</math>

, and 

<math display="inline" id="Controlled_grammar:37">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>></mo>
   <mi>u</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <gt></gt>
    <ci>n</ci>
    <ci>u</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n>u
  </annotation>
 </semantics>
</math>

 When 

<math display="inline" id="Controlled_grammar:38">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>=</mo>
   <mi>u</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>n</ci>
    <ci>u</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n=u
  </annotation>
 </semantics>
</math>

 we rewrite all <em>n</em> instances of <em>S</em> as <em>AA</em>, by applying rule <em>f</em> to the string <em>u</em> times, and proceed to apply <em>g</em>, which applies vacuously (by virtue of being in <em>F</em>) . When 

<math display="inline" id="Controlled_grammar:39">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo><</mo>
   <mi>u</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <lt></lt>
    <ci>n</ci>
    <ci>u</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n<u
  </annotation>
 </semantics>
</math>

, we rewrite all <em>n</em> instances of <em>S</em> as <em>AA</em>, and then try to perform the <em>n+1</em> rewrite using rule <em>f</em>, but this fails because there are no more <em>S</em>s to rewrite, and <em>f</em> is not in <em>F</em> and so cannot apply vacuously, thus when 

<math display="inline" id="Controlled_grammar:40">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo><</mo>
   <mi>u</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <lt></lt>
    <ci>n</ci>
    <ci>u</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n<u
  </annotation>
 </semantics>
</math>

, the derivation fails. Lastly, then 

<math display="inline" id="Controlled_grammar:41">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>></mo>
   <mi>u</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <gt></gt>
    <ci>n</ci>
    <ci>u</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n>u
  </annotation>
 </semantics>
</math>

, we rewrite <em>u</em> instances of <em>S</em>, leaving at least one instance of <em>S</em> to be rewritten by the subsequent application of <em>g</em>, rewriting <em>S</em> as <em>X</em>. Given that no rule of this grammar ever rewrites <em>X</em>, such a derivation is destined to never produce a terminal string. Thus only derivations with 

<math display="inline" id="Controlled_grammar:42">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>=</mo>
   <mi>u</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>n</ci>
    <ci>u</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n=u
  </annotation>
 </semantics>
</math>

 will ever successfully rewrite the string 

<math display="inline" id="Controlled_grammar:43">
 <semantics>
  <msup>
   <mi>S</mi>
   <mi>n</mi>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>S</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S^{n}
  </annotation>
 </semantics>
</math>

. Similar reasoning holds of the number of <em>A</em>s and <em>v</em>. In general, then, we can say that the only valid derivations have the structure 

<math display="inline" id="Controlled_grammar:44">
 <semantics>
  <mrow>
   <msup>
    <mi>S</mi>
    <mi>n</mi>
   </msup>
   <msub>
    <mo>⇒</mo>
    <mi>f</mi>
   </msub>
   <mi mathvariant="normal">…</mi>
   <msub>
    <mo>⇒</mo>
    <mi>f</mi>
   </msub>
   <msup>
    <mi>A</mi>
    <mrow>
     <mn>2</mn>
     <mi>n</mi>
    </mrow>
   </msup>
   <mo>⇒</mo>
   <mrow>
    <mi>g</mi>
    <msup>
     <mi>A</mi>
     <mrow>
      <mn>2</mn>
      <mi>n</mi>
     </mrow>
    </msup>
   </mrow>
   <mo>⇒</mo>
   <mrow>
    <mi>h</mi>
    <mi mathvariant="normal">…</mi>
   </mrow>
   <mo>⇒</mo>
   <mrow>
    <mi>h</mi>
    <msup>
     <mi>S</mi>
     <mrow>
      <mn>2</mn>
      <mi>n</mi>
     </mrow>
    </msup>
   </mrow>
   <mo>⇒</mo>
   <mrow>
    <mi>k</mi>
    <msup>
     <mi>S</mi>
     <mrow>
      <mn>2</mn>
      <mi>n</mi>
     </mrow>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>f</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>S</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-…</ci>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>f</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>A</ci>
      <apply>
       <times></times>
       <cn type="integer">2</cn>
       <ci>n</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <ci>normal-⇒</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>g</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>A</ci>
       <apply>
        <times></times>
        <cn type="integer">2</cn>
        <ci>n</ci>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <ci>normal-⇒</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>h</ci>
      <ci>normal-…</ci>
     </apply>
    </apply>
    <apply>
     <ci>normal-⇒</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>h</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>S</ci>
       <apply>
        <times></times>
        <cn type="integer">2</cn>
        <ci>n</ci>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <ci>normal-⇒</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>k</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>S</ci>
       <apply>
        <times></times>
        <cn type="integer">2</cn>
        <ci>n</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S^{n}\Rightarrow_{f}...\Rightarrow_{f}A^{2n}\Rightarrow{g}A^{2n}\Rightarrow{h}%
...\Rightarrow{h}S^{2n}\Rightarrow{k}S^{2n}
  </annotation>
 </semantics>
</math>

 will produce terminal strings of the grammar. The <em>X</em> rules, combined with the structure of the control, essentially force all <em>S</em>s to be rewritten as <em>AA</em>s prior to any <em>A</em>s being rewritten as <em>S</em>s, which again is forced to happen prior to all still later iterations over the <em>S-to-AA</em> cycle. Finally, the <em>S</em>s are rewritten as <em>a</em>s. In this way, the number of <em>S</em>s doubles each for each instantiation of 

<math display="inline" id="Controlled_grammar:45">
 <semantics>
  <mrow>
   <msup>
    <mi>f</mi>
    <mn>8</mn>
   </msup>
   <mi>g</mi>
   <msup>
    <mi>h</mi>
    <mo>*</mo>
   </msup>
   <mi>k</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>f</ci>
     <cn type="integer">8</cn>
    </apply>
    <ci>g</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>h</ci>
     <times></times>
    </apply>
    <ci>k</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f^{8}gh^{*}k
  </annotation>
 </semantics>
</math>

 that appears in a terminal-deriving sequence.</p>

<p>Choosing two random non-terminal deriving sequences, and one terminal-deriving one, we can see this in work:</p>

<p>Let 

<math display="inline" id="Controlled_grammar:46">
 <semantics>
  <mrow>
   <msub>
    <mi>s</mi>
    <mn>1</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mi>f</mi>
    <mi>f</mi>
    <mi>g</mi>
    <mi>h</mi>
    <mi>k</mi>
    <mi>l</mi>
    <mi>l</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>s</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <times></times>
     <ci>f</ci>
     <ci>f</ci>
     <ci>g</ci>
     <ci>h</ci>
     <ci>k</ci>
     <ci>l</ci>
     <ci>l</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   s_{1}=ffghkll
  </annotation>
 </semantics>
</math>

, then we get the failed derivation:</p>

<p>

<math display="block" id="Controlled_grammar:47">
 <semantics>
  <mrow>
   <mi>S</mi>
   <msubsup>
    <mo>⇒</mo>
    <mi>f</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>f</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mtext>failure: f cannot apply, no S to rewrite</mtext>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>f</ci>
     </apply>
     <ci>S</ci>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>f</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <mtext>failure: f cannot apply, no S to rewrite</mtext>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\Rightarrow^{ac}_{f}AA\Rightarrow^{ac}_{f}\text{failure: f cannot apply, no S%
 to rewrite}
  </annotation>
 </semantics>
</math>

</p>

<p>Let 

<math display="inline" id="Controlled_grammar:48">
 <semantics>
  <mrow>
   <msub>
    <mi>s</mi>
    <mn>2</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mi>f</mi>
    <mi>g</mi>
    <mi>h</mi>
    <mi>h</mi>
    <mi>h</mi>
    <mi>k</mi>
    <mi>l</mi>
    <mi>l</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>s</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <times></times>
     <ci>f</ci>
     <ci>g</ci>
     <ci>h</ci>
     <ci>h</ci>
     <ci>h</ci>
     <ci>k</ci>
     <ci>l</ci>
     <ci>l</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   s_{2}=fghhhkll
  </annotation>
 </semantics>
</math>

, then we get the failed derivation:</p>

<p>

<math display="block" id="Controlled_grammar:49">
 <semantics>
  <mrow>
   <mi>S</mi>
   <msubsup>
    <mo>⇒</mo>
    <mi>f</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>g</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>h</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>S</mi>
    <mi>A</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>h</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>h</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mtext>failure: h cannot apply, no A to rewrite</mtext>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>f</ci>
     </apply>
     <ci>S</ci>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>g</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <mtext>failure: h cannot apply, no A to rewrite</mtext>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\Rightarrow^{ac}_{f}AA\Rightarrow^{ac}_{g}AA\Rightarrow^{ac}_{h}SA\Rightarrow%
^{ac}_{h}SS\Rightarrow^{ac}_{h}\text{failure: h cannot apply, no A to rewrite}
  </annotation>
 </semantics>
</math>

</p>

<p>Let 

<math display="inline" id="Controlled_grammar:50">
 <semantics>
  <mrow>
   <msub>
    <mi>s</mi>
    <mn>3</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mi>f</mi>
    <mi>g</mi>
    <mi>h</mi>
    <mi>h</mi>
    <mi>k</mi>
    <mi>l</mi>
    <mi>l</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>s</ci>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <times></times>
     <ci>f</ci>
     <ci>g</ci>
     <ci>h</ci>
     <ci>h</ci>
     <ci>k</ci>
     <ci>l</ci>
     <ci>l</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   s_{3}=fghhkll
  </annotation>
 </semantics>
</math>

, then we get the successful derivation:</p>

<p>

<math display="block" id="Controlled_grammar:51">
 <semantics>
  <mrow>
   <mi>S</mi>
   <msubsup>
    <mo>⇒</mo>
    <mi>f</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>g</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>h</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>S</mi>
    <mi>A</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>h</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>k</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>l</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>a</mi>
    <mi>S</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>l</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>f</ci>
     </apply>
     <ci>S</ci>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>g</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>k</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>l</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>l</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\Rightarrow^{ac}_{f}AA\Rightarrow^{ac}_{g}AA\Rightarrow^{ac}_{h}SA\Rightarrow%
^{ac}_{h}SS\Rightarrow^{ac}_{k}SS\Rightarrow^{ac}_{l}aS\Rightarrow^{ac}_{l}aa
  </annotation>
 </semantics>
</math>

</p>

<p>Similar derivations with a second cycle of 

<math display="inline" id="Controlled_grammar:52">
 <semantics>
  <mrow>
   <msup>
    <mi>f</mi>
    <mo>*</mo>
   </msup>
   <mi>g</mi>
   <msup>
    <mi>h</mi>
    <mo>*</mo>
   </msup>
   <mi>k</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>f</ci>
     <times></times>
    </apply>
    <ci>g</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>h</ci>
     <times></times>
    </apply>
    <ci>k</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f^{*}gh^{*}k
  </annotation>
 </semantics>
</math>

 produce only <em>SSSS</em>. Showing only the (continued) successful derivation:</p>

<p>

<math display="block" id="Controlled_grammar:53">
 <semantics>
  <mrow>
   <mi mathvariant="normal">…</mi>
   <mo>⇒</mo>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>f</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>S</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>f</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>g</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <ci>normal-⇒</ci>
     <ci>normal-…</ci>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>f</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>f</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>g</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   ...\Rightarrow SS\Rightarrow^{ac}_{f}AAS\Rightarrow^{ac}_{f}AAAA\Rightarrow^{%
ac}_{g}AAAA
  </annotation>
 </semantics>
</math>

</p>
<dl>
<dd><dl>
<dd>

<math display="inline" id="Controlled_grammar:54">
 <semantics>
  <mrow>
   <mi></mi>
   <msubsup>
    <mo>⇒</mo>
    <mi>h</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>S</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>h</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>h</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>A</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>h</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>k</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>h</ci>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>k</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow^{ac}_{h}SAAA\Rightarrow^{ac}_{h}SSAA\Rightarrow^{ac}_{h}SSSA%
\Rightarrow^{ac}_{h}SSSS\Rightarrow^{ac}_{k}SSSS
  </annotation>
 </semantics>
</math>


</dd>
</dl>
</dd>
</dl>
<dl>
<dd><dl>
<dd>

<math display="inline" id="Controlled_grammar:55">
 <semantics>
  <mrow>
   <mi></mi>
   <msubsup>
    <mo>⇒</mo>
    <mi>l</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>a</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>l</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>l</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>S</mi>
   </mrow>
   <msubsup>
    <mo>⇒</mo>
    <mi>l</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>l</ci>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>l</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>l</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <ci>l</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow^{ac}_{l}aSSS\Rightarrow^{ac}_{l}aaSS\Rightarrow^{ac}_{l}aaaS%
\Rightarrow^{ac}_{l}aaaa
  </annotation>
 </semantics>
</math>


</dd>
</dl>
</dd>
</dl>
<h3 id="matrix-grammars">Matrix grammars</h3>

<p>Matrix grammars (expanded on in their own <a href="Matrix_grammar" title="wikilink">article</a>) are a special case of regular controlled context-free grammars, in which the production sequence language is of the form 

<math display="inline" id="Controlled_grammar:56">
 <semantics>
  <msup>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>m</mi>
     <mn>1</mn>
    </msub>
    <mo stretchy="false">|</mo>
    <msub>
     <mi>m</mi>
     <mn>2</mn>
    </msub>
    <mo stretchy="false">|</mo>
    <mi mathvariant="normal">…</mi>
    <mo stretchy="false">|</mo>
    <msub>
     <mi>m</mi>
     <mi>n</mi>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>*</mo>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>m</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>normal-|</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>m</ci>
      <cn type="integer">2</cn>
     </apply>
     <ci>normal-|</ci>
     <ci>normal-…</ci>
     <ci>normal-|</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>m</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-)</ci>
    </cerror>
    <times></times>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (m_{1}|m_{2}|...|m_{n})^{*}
  </annotation>
 </semantics>
</math>

, where each "matrix" 

<math display="inline" id="Controlled_grammar:57">
 <semantics>
  <msub>
   <mi>m</mi>
   <mi>i</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>m</ci>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m_{i}
  </annotation>
 </semantics>
</math>

 is a single sequence. For convenience, such a grammar is not represented with a grammar over <em>P</em>, but rather with just a set of the matrices in place of both the language and the production rules. Thus, a matrix grammar is the 5-tuple 

<math display="inline" id="Controlled_grammar:58">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>M</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>F</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>M</ci>
     <ci>S</ci>
     <ci>F</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,M,S,F)
  </annotation>
 </semantics>
</math>

, where <em>N</em>, <em>T</em>, <em>S</em>, and <em>F</em> are defined essentially as previously done (with <em>F</em> a subset of <em>M</em> this time), and <em>M</em> is a set of matrices 

<math display="inline" id="Controlled_grammar:59">
 <semantics>
  <mrow>
   <msub>
    <mi>m</mi>
    <mi>i</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>p</mi>
     <mrow>
      <mi>i</mi>
      <mo>,</mo>
      <mn>1</mn>
     </mrow>
    </msub>
    <msub>
     <mi>p</mi>
     <mrow>
      <mi>i</mi>
      <mo>,</mo>
      <mn>2</mn>
     </mrow>
    </msub>
    <mi mathvariant="normal">…</mi>
    <msub>
     <mi>p</mi>
     <mrow>
      <mi>i</mi>
      <mo>,</mo>
      <msub>
       <mi>n</mi>
       <mi>i</mi>
      </msub>
     </mrow>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>m</ci>
     <ci>i</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <list>
       <ci>i</ci>
       <cn type="integer">1</cn>
      </list>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <list>
       <ci>i</ci>
       <cn type="integer">2</cn>
      </list>
     </apply>
     <ci>normal-…</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <list>
       <ci>i</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>n</ci>
        <ci>i</ci>
       </apply>
      </list>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m_{i}=p_{i,1}p_{i,2}...p_{i,n_{i}}
  </annotation>
 </semantics>
</math>

 where each 

<math display="inline" id="Controlled_grammar:60">
 <semantics>
  <msub>
   <mi>p</mi>
   <mrow>
    <mi>i</mi>
    <mo>,</mo>
    <mi>j</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>p</ci>
    <list>
     <ci>i</ci>
     <ci>j</ci>
    </list>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p_{i,j}
  </annotation>
 </semantics>
</math>

 is a context-free production rule.</p>

<p>The derives relation in a matrix grammar is thus defined simply as:</p>

<p>Given some strings <em>x</em> and <em>y</em>, both in 

<math display="inline" id="Controlled_grammar:61">
 <semantics>
  <msup>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mi>N</mi>
     <mo>∪</mo>
     <mi>T</mi>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>*</mo>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <apply>
     <union></union>
     <ci>N</ci>
     <ci>T</ci>
    </apply>
    <times></times>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (N\cup T)^{*}
  </annotation>
 </semantics>
</math>

, and some matrix 

<math display="inline" id="Controlled_grammar:62">
 <semantics>
  <mrow>
   <mi>m</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>p</mi>
     <mn>1</mn>
    </msub>
    <msub>
     <mi>p</mi>
     <mn>2</mn>
    </msub>
    <mi mathvariant="normal">…</mi>
    <msub>
     <mi>p</mi>
     <mi>n</mi>
    </msub>
   </mrow>
   <mo>∈</mo>
   <mi>M</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>m</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <ci>n</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <in></in>
     <share href="#.cmml">
     </share>
     <ci>M</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m=p_{1}p_{2}...p_{n}\in M
  </annotation>
 </semantics>
</math>

,</p>

<p>

<math display="block" id="Controlled_grammar:63">
 <semantics>
  <mrow>
   <mi>x</mi>
   <msubsup>
    <mo>⇒</mo>
    <mi>m</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mi>y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <times></times>
       <ci>a</ci>
       <ci>c</ci>
      </apply>
     </apply>
     <ci>m</ci>
    </apply>
    <ci>x</ci>
    <ci>y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x\Rightarrow^{ac}_{m}y
  </annotation>
 </semantics>
</math>

</p>

<p>holds if either</p>

<p>

<math display="block" id="Controlled_grammar:64">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>x</mi>
     <mn>1</mn>
    </msub>
    <mi>A</mi>
    <msub>
     <mi>x</mi>
     <mn>2</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>x</ci>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>A</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x=x_{1}Ax_{2}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Controlled_grammar:65">
 <semantics>
  <mrow>
   <mi>y</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>y</mi>
     <mn>1</mn>
    </msub>
    <mi>w</mi>
    <msub>
     <mi>y</mi>
     <mn>2</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>y</ci>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>y</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>w</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>y</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   y=y_{1}wy_{2}
  </annotation>
 </semantics>
</math>

, and 

<math display="inline" id="Controlled_grammar:66">
 <semantics>
  <mrow>
   <mi>A</mi>
   <msubsup>
    <mo>⇒</mo>
    <msub>
     <mi>p</mi>
     <mn>1</mn>
    </msub>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <msub>
    <mi>w</mi>
    <mn>1</mn>
   </msub>
   <msubsup>
    <mo>⇒</mo>
    <msub>
     <mi>p</mi>
     <mn>2</mn>
    </msub>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <msub>
    <mi>w</mi>
    <mn>2</mn>
   </msub>
   <msubsup>
    <mo>⇒</mo>
    <msub>
     <mi>p</mi>
     <mn>3</mn>
    </msub>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mi mathvariant="normal">…</mi>
   <msubsup>
    <mo>⇒</mo>
    <msub>
     <mi>p</mi>
     <mi>n</mi>
    </msub>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mi>w</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>A</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <cn type="integer">1</cn>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <ci>normal-…</ci>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <ci>n</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <ci>w</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A\Rightarrow^{ac}_{p_{1}}w_{1}\Rightarrow^{ac}_{p_{2}}w_{2}\Rightarrow^{ac}_{p%
_{3}}...\Rightarrow^{ac}_{p_{n}}w
  </annotation>
 </semantics>
</math>

, or</p>

<p>

<math display="block" id="Controlled_grammar:67">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mo>=</mo>
   <mi>y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>x</ci>
    <ci>y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x=y
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Controlled_grammar:68">
 <semantics>
  <mrow>
   <mi>m</mi>
   <mo>∈</mo>
   <mi>F</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>m</ci>
    <ci>F</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m\in F
  </annotation>
 </semantics>
</math>

</p>

<p>Informally, a matrix grammar is simply a grammar in which during each rewriting cycle, a particular sequence of rewrite operations must be performed, rather than just a single rewrite operation, i.e. one rule "triggers" a cascade of other rules. Similar phenomena can be performed in the standard context-sensitive idiom, as done in rule-based phonology and earlier <a href="Transformational_grammar" title="wikilink">Transformational grammar</a>, by what are known as "feeding" rules, which alter a derivation in such a way as to provide the environment for a non-optional rule that immediately follows it.</p>
<h3 id="vector-grammars">Vector grammars</h3>

<p>Vector grammars are closely related to matrix grammars, and in fact can be seen as a special class of matrix grammars, in which if 

<math display="inline" id="Controlled_grammar:69">
 <semantics>
  <mrow>
   <mi>m</mi>
   <mo>∈</mo>
   <mi>M</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>m</ci>
    <ci>M</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m\in M
  </annotation>
 </semantics>
</math>

, then so are all of its permutations 

<math display="inline" id="Controlled_grammar:70">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>m</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>p</ci>
    <ci>m</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p(m)
  </annotation>
 </semantics>
</math>

. For convenience, however, we will define vector grammars as follows: a vector grammar is a 5-tuple 

<math display="inline" id="Controlled_grammar:71">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>M</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>F</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>M</ci>
     <ci>S</ci>
     <ci>F</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,M,S,F)
  </annotation>
 </semantics>
</math>

, where <em>N</em>, <em>T</em>, and <em>F</em> are defined previously (<em>F</em> being a subset of <em>M</em> again), and where <em>M</em> is a set of vectors 

<math display="inline" id="Controlled_grammar:72">
 <semantics>
  <mrow>
   <msub>
    <mi>m</mi>
    <mi>i</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">{</mo>
    <msub>
     <mi>p</mi>
     <mn>1</mn>
    </msub>
    <mo>,</mo>
    <msub>
     <mi>p</mi>
     <mn>2</mn>
    </msub>
    <mo>,</mo>
    <mi mathvariant="normal">…</mi>
    <mo>,</mo>
    <msub>
     <mi>p</mi>
     <mi>n</mi>
    </msub>
    <mo stretchy="false">}</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>m</ci>
     <ci>i</ci>
    </apply>
    <set>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <cn type="integer">2</cn>
     </apply>
     <ci>normal-…</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <ci>n</ci>
     </apply>
    </set>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m_{i}=\{p_{1},p_{2},...,p_{n}\}
  </annotation>
 </semantics>
</math>

, each vector being a set of context free rules.</p>

<p>The derives relation in a vector grammar is then:</p>

<p>Given some strings <em>x</em> and <em>y</em>, both in 

<math display="inline" id="Controlled_grammar:73">
 <semantics>
  <msup>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mi>N</mi>
     <mo>∪</mo>
     <mi>T</mi>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>*</mo>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <apply>
     <union></union>
     <ci>N</ci>
     <ci>T</ci>
    </apply>
    <times></times>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (N\cup T)^{*}
  </annotation>
 </semantics>
</math>

, and some matrix 

<math display="inline" id="Controlled_grammar:74">
 <semantics>
  <mrow>
   <mi>m</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">{</mo>
    <msub>
     <mi>p</mi>
     <mn>1</mn>
    </msub>
    <mo>,</mo>
    <msub>
     <mi>p</mi>
     <mn>2</mn>
    </msub>
    <mo>,</mo>
    <mi mathvariant="normal">…</mi>
    <mo>,</mo>
    <msub>
     <mi>p</mi>
     <mi>n</mi>
    </msub>
    <mo stretchy="false">}</mo>
   </mrow>
   <mo>∈</mo>
   <mi>M</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>m</ci>
     <set>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <ci>n</ci>
      </apply>
     </set>
    </apply>
    <apply>
     <in></in>
     <share href="#.cmml">
     </share>
     <ci>M</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m=\{p_{1},p_{2},...,p_{n}\}\in M
  </annotation>
 </semantics>
</math>

,</p>

<p>

<math display="block" id="Controlled_grammar:75">
 <semantics>
  <mrow>
   <mi>x</mi>
   <msubsup>
    <mo>⇒</mo>
    <mi>m</mi>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mi>y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <times></times>
       <ci>a</ci>
       <ci>c</ci>
      </apply>
     </apply>
     <ci>m</ci>
    </apply>
    <ci>x</ci>
    <ci>y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x\Rightarrow^{ac}_{m}y
  </annotation>
 </semantics>
</math>

</p>

<p>holds if either</p>

<p>

<math display="block" id="Controlled_grammar:76">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>x</mi>
     <mn>1</mn>
    </msub>
    <mi>A</mi>
    <msub>
     <mi>x</mi>
     <mn>2</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>x</ci>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>A</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x=x_{1}Ax_{2}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Controlled_grammar:77">
 <semantics>
  <mrow>
   <mi>y</mi>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>y</mi>
     <mn>1</mn>
    </msub>
    <mi>w</mi>
    <msub>
     <mi>y</mi>
     <mn>2</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>y</ci>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>y</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>w</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>y</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   y=y_{1}wy_{2}
  </annotation>
 </semantics>
</math>

, and 

<math display="inline" id="Controlled_grammar:78">
 <semantics>
  <mrow>
   <mi>A</mi>
   <msubsup>
    <mo>⇒</mo>
    <msub>
     <mi>p</mi>
     <msub>
      <mi>i</mi>
      <mn>1</mn>
     </msub>
    </msub>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <msub>
    <mi>w</mi>
    <mn>1</mn>
   </msub>
   <msubsup>
    <mo>⇒</mo>
    <msub>
     <mi>p</mi>
     <msub>
      <mi>i</mi>
      <mn>2</mn>
     </msub>
    </msub>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <msub>
    <mi>w</mi>
    <mn>2</mn>
   </msub>
   <msubsup>
    <mo>⇒</mo>
    <msub>
     <mi>p</mi>
     <msub>
      <mi>i</mi>
      <mn>3</mn>
     </msub>
    </msub>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mi mathvariant="normal">…</mi>
   <msubsup>
    <mo>⇒</mo>
    <msub>
     <mi>p</mi>
     <msub>
      <mi>i</mi>
      <mi>n</mi>
     </msub>
    </msub>
    <mrow>
     <mi>a</mi>
     <mi>c</mi>
    </mrow>
   </msubsup>
   <mi>w</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>i</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
     </apply>
     <ci>A</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <cn type="integer">1</cn>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>i</ci>
        <cn type="integer">2</cn>
       </apply>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>i</ci>
        <cn type="integer">3</cn>
       </apply>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <ci>normal-…</ci>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <apply>
        <times></times>
        <ci>a</ci>
        <ci>c</ci>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>i</ci>
        <ci>n</ci>
       </apply>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <ci>w</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A\Rightarrow^{ac}_{p_{i_{1}}}w_{1}\Rightarrow^{ac}_{p_{i_{2}}}w_{2}\Rightarrow%
^{ac}_{p_{i_{3}}}...\Rightarrow^{ac}_{p_{i_{n}}}w
  </annotation>
 </semantics>
</math>

, where 

<math display="inline" id="Controlled_grammar:79">
 <semantics>
  <mrow>
   <mi>m</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">{</mo>
    <msub>
     <mi>p</mi>
     <msub>
      <mi>i</mi>
      <mn>1</mn>
     </msub>
    </msub>
    <mo>,</mo>
    <msub>
     <mi>p</mi>
     <msub>
      <mi>i</mi>
      <mn>2</mn>
     </msub>
    </msub>
    <mo>,</mo>
    <mi mathvariant="normal">…</mi>
    <mo>,</mo>
    <msub>
     <mi>p</mi>
     <msub>
      <mi>i</mi>
      <mi>n</mi>
     </msub>
    </msub>
    <mo stretchy="false">}</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>m</ci>
    <set>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>i</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>i</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <ci>normal-…</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>i</ci>
       <ci>n</ci>
      </apply>
     </apply>
    </set>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m=\{p_{i_{1}},p_{i_{2}},...,p_{i_{n}}\}
  </annotation>
 </semantics>
</math>

, or</p>

<p>

<math display="block" id="Controlled_grammar:80">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mo>=</mo>
   <mi>y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>x</ci>
    <ci>y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x=y
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Controlled_grammar:81">
 <semantics>
  <mrow>
   <mi>m</mi>
   <mo>∈</mo>
   <mi>F</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>m</ci>
    <ci>F</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m\in F
  </annotation>
 </semantics>
</math>

</p>

<p>Notice that the number of production rules used in the derivation sequence, <em>n</em>, is the same as the number of production rules in the vector. Informally, then, a vector grammar is one in which a set of productions is applied, each production applied exactly once, in arbitrary order, to derive one string from another. Thus vector grammars are almost identical to matrix grammars, minus the restriction on the order in which the productions must occur during each cycle of rule application.</p>
<h3 id="programmed-grammars">Programmed grammars</h3>

<p>Programmed grammars are relatively simple extensions to context-free grammars with rule-by-rule control of the derivation. A programmed grammar is a 4-tuple 

<math display="inline" id="Controlled_grammar:82">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>S</ci>
     <ci>P</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,S,P)
  </annotation>
 </semantics>
</math>

, where <em>N</em>, <em>T</em>, and <em>S</em> are as in a context-free grammar, and <em>P</em> is a set of tuples 

<math display="inline" id="Controlled_grammar:83">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mi>p</mi>
   <mo>,</mo>
   <mi>σ</mi>
   <mo>,</mo>
   <mi>ϕ</mi>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <vector>
    <ci>p</ci>
    <ci>σ</ci>
    <ci>ϕ</ci>
   </vector>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (p,\sigma,\phi)
  </annotation>
 </semantics>
</math>

, where <em>p</em> is a context-free production rule, 

<math display="inline" id="Controlled_grammar:84">
 <semantics>
  <mi>σ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>σ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sigma
  </annotation>
 </semantics>
</math>

 is a subset of <em>N</em> (called the success field), and 

<math display="inline" id="Controlled_grammar:85">
 <semantics>
  <mi>ϕ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ϕ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \phi
  </annotation>
 </semantics>
</math>

 is a subset of <em>N</em> (called the failure field). If the failure field of every rule in <em>P</em> is empty, the grammar is lacks appearance checking, and if at least one failure field is not empty, the grammar has appearance checking. The derivation relation on a programmed grammar is defined as follows:</p>

<p>Given two strings 

<math display="inline" id="Controlled_grammar:86">
 <semantics>
  <mrow>
   <mrow>
    <mi>x</mi>
    <mo>,</mo>
    <mi>y</mi>
   </mrow>
   <mo>∈</mo>
   <msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>N</mi>
      <mo>∪</mo>
      <mi>T</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>*</mo>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <list>
     <ci>x</ci>
     <ci>y</ci>
    </list>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <union></union>
      <ci>N</ci>
      <ci>T</ci>
     </apply>
     <times></times>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x,y\in(N\cup T)^{*}
  </annotation>
 </semantics>
</math>

, and some rule 

<math display="inline" id="Controlled_grammar:87">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>A</mi>
    <mo>→</mo>
    <mi>w</mi>
    <mo>,</mo>
    <mi>σ</mi>
    <mo>,</mo>
    <mi>ϕ</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>∈</mo>
   <mi>P</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">A</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">w</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">σ</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">ϕ</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <in></in>
    <csymbol cd="unknown">P</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p=(A\to w,\sigma,\phi)\in P
  </annotation>
 </semantics>
</math>

,</p>

<p>

<math display="block" id="Controlled_grammar:88">
 <semantics>
  <mrow>
   <mi>x</mi>
   <msub>
    <mo>⇒</mo>
    <mi>p</mi>
   </msub>
   <mi>y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>normal-⇒</ci>
     <ci>p</ci>
    </apply>
    <ci>x</ci>
    <ci>y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x\Rightarrow_{p}y
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Controlled_grammar:89">
 <semantics>
  <mrow>
   <mrow>
    <mi>x</mi>
    <mo>=</mo>
    <mrow>
     <msup>
      <mi>x</mi>
      <mo>′</mo>
     </msup>
     <mi>A</mi>
     <msup>
      <mi>x</mi>
      <mi>′′</mi>
     </msup>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>y</mi>
    <mo>=</mo>
    <mrow>
     <msup>
      <mi>x</mi>
      <mo>′</mo>
     </msup>
     <mi>w</mi>
     <msup>
      <mi>x</mi>
      <mi>′′</mi>
     </msup>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <ci>x</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <ci>normal-′</ci>
      </apply>
      <ci>A</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <ci>′′</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <ci>y</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <ci>normal-′</ci>
      </apply>
      <ci>w</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <ci>′′</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x=x^{\prime}Ax^{\prime\prime},y=x^{\prime}wx^{\prime\prime}
  </annotation>
 </semantics>
</math>

, or</p>

<p>

<math display="block" id="Controlled_grammar:90">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mo>=</mo>
   <mi>y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>x</ci>
    <ci>y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x=y
  </annotation>
 </semantics>
</math>

 and A does not appear in x.</p>

<p>The language of a programmed grammar <em>G</em> is defined by constraining the derivation rule-wise, as 

<math display="inline" id="Controlled_grammar:91">
 <semantics>
  <mrow>
   <mrow>
    <mi>L</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>G</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">{</mo>
    <mrow>
     <mi>w</mi>
     <mo>∈</mo>
     <msup>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mi>N</mi>
        <mo>∪</mo>
        <mi>T</mi>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
      <mo>*</mo>
     </msup>
    </mrow>
    <mo>:</mo>
    <mrow>
     <mi>S</mi>
     <msub>
      <mo>⇒</mo>
      <msub>
       <mi>p</mi>
       <mn>1</mn>
      </msub>
     </msub>
     <msub>
      <mi>w</mi>
      <mn>1</mn>
     </msub>
     <msub>
      <mo>⇒</mo>
      <msub>
       <mi>p</mi>
       <mn>2</mn>
      </msub>
     </msub>
     <mi mathvariant="normal">…</mi>
     <msub>
      <mo>⇒</mo>
      <msub>
       <mi>p</mi>
       <mi>n</mi>
      </msub>
     </msub>
     <mi>w</mi>
    </mrow>
    <mo stretchy="false">}</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>L</ci>
     <ci>G</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">conditional-set</csymbol>
     <apply>
      <in></in>
      <ci>w</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <union></union>
        <ci>N</ci>
        <ci>T</ci>
       </apply>
       <times></times>
      </apply>
     </apply>
     <apply>
      <and></and>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>normal-⇒</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>p</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <ci>S</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>w</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>normal-⇒</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>p</ci>
         <cn type="integer">2</cn>
        </apply>
       </apply>
       <share href="#.cmml">
       </share>
       <ci>normal-…</ci>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>normal-⇒</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>p</ci>
         <ci>n</ci>
        </apply>
       </apply>
       <share href="#.cmml">
       </share>
       <ci>w</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   L(G)=\{w\in(N\cup T)^{*}:S\Rightarrow_{p_{1}}w_{1}\Rightarrow_{p_{2}}...%
\Rightarrow_{p_{n}}w\}
  </annotation>
 </semantics>
</math>

, where for each 

<math display="inline" id="Controlled_grammar:92">
 <semantics>
  <mrow>
   <msub>
    <mi>p</mi>
    <mi>i</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>A</mi>
     <mi>i</mi>
    </msub>
    <mo>→</mo>
    <msub>
     <mi>v</mi>
     <mi>i</mi>
    </msub>
    <mo>,</mo>
    <msub>
     <mi>σ</mi>
     <mi>i</mi>
    </msub>
    <mo>,</mo>
    <msub>
     <mi>ϕ</mi>
     <mi>i</mi>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>p</ci>
     <ci>i</ci>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>A</ci>
      <ci>i</ci>
     </apply>
     <ci>normal-→</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>v</ci>
      <ci>i</ci>
     </apply>
     <ci>normal-,</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>σ</ci>
      <ci>i</ci>
     </apply>
     <ci>normal-,</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>ϕ</ci>
      <ci>i</ci>
     </apply>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p_{i}=(A_{i}\to v_{i},\sigma_{i},\phi_{i})
  </annotation>
 </semantics>
</math>

, either 

<math display="inline" id="Controlled_grammar:93">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>w</mi>
     <mrow>
      <mi>i</mi>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
    </msub>
    <mo>=</mo>
    <mrow>
     <msub>
      <mi>x</mi>
      <mrow>
       <mi>i</mi>
       <mo>-</mo>
       <mn>1</mn>
      </mrow>
     </msub>
     <mi>A</mi>
     <msubsup>
      <mi>x</mi>
      <mrow>
       <mi>i</mi>
       <mo>-</mo>
       <mn>1</mn>
      </mrow>
      <mo>′</mo>
     </msubsup>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mrow>
     <msub>
      <mi>w</mi>
      <mi>i</mi>
     </msub>
     <mo>=</mo>
     <mrow>
      <msub>
       <mi>x</mi>
       <mrow>
        <mi>i</mi>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </msub>
      <msub>
       <mi>v</mi>
       <mi>i</mi>
      </msub>
      <msubsup>
       <mi>x</mi>
       <mrow>
        <mi>i</mi>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
       <mo>′</mo>
      </msubsup>
     </mrow>
    </mrow>
    <mo rspace="7.5pt">,</mo>
    <mrow>
     <mrow>
      <mi>a</mi>
      <mi>n</mi>
      <mpadded width="+5pt">
       <mi>d</mi>
      </mpadded>
      <msub>
       <mi>p</mi>
       <mrow>
        <mi>i</mi>
        <mo>+</mo>
        <mn>1</mn>
       </mrow>
      </msub>
     </mrow>
     <mo>∈</mo>
     <msub>
      <mi>σ</mi>
      <mi>i</mi>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <apply>
       <minus></minus>
       <ci>i</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <apply>
        <minus></minus>
        <ci>i</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <ci>A</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>x</ci>
        <ci>normal-′</ci>
       </apply>
       <apply>
        <minus></minus>
        <ci>i</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <csymbol cd="ambiguous">formulae-sequence</csymbol>
     <apply>
      <eq></eq>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>w</ci>
       <ci>i</ci>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>x</ci>
        <apply>
         <minus></minus>
         <ci>i</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>v</ci>
        <ci>i</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>x</ci>
         <ci>normal-′</ci>
        </apply>
        <apply>
         <minus></minus>
         <ci>i</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
      </apply>
     </apply>
     <apply>
      <in></in>
      <apply>
       <times></times>
       <ci>a</ci>
       <ci>n</ci>
       <ci>d</ci>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>p</ci>
        <apply>
         <plus></plus>
         <ci>i</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>σ</ci>
       <ci>i</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   w_{i-1}=x_{i-1}Ax^{\prime}_{i-1},w_{i}=x_{i-1}v_{i}x^{\prime}_{i-1},\ and\ p_{%
i+1}\in\sigma_{i}
  </annotation>
 </semantics>
</math>

 or 

<math display="inline" id="Controlled_grammar:94">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>w</mi>
     <mrow>
      <mi>i</mi>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
    </msub>
    <mo>=</mo>
    <msub>
     <mi>w</mi>
     <mi>i</mi>
    </msub>
   </mrow>
   <mo>,</mo>
   <mrow>
    <msub>
     <mi>p</mi>
     <mrow>
      <mi>i</mi>
      <mo>+</mo>
      <mn>1</mn>
     </mrow>
    </msub>
    <mo>∈</mo>
    <msub>
     <mi>ϕ</mi>
     <mi>i</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <apply>
       <minus></minus>
       <ci>i</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <ci>i</ci>
     </apply>
    </apply>
    <apply>
     <in></in>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <apply>
       <plus></plus>
       <ci>i</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>ϕ</ci>
      <ci>i</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   w_{i-1}=w_{i},p_{i+1}\in\phi_{i}
  </annotation>
 </semantics>
</math>

.</p>

<p>Intuitively, when applying a rule <em>p</em> in a programmed grammar, the rule can either succeed at rewriting a symbol in the string, in which case the subsequent rule must be in <em>p</em>s success field, or the rule can fail to rewrite a symbol (thus applying vacuously), in which case the subsequent rule must be in <em>p</em>s failure field. The choice of which rule to apply to the start string is arbitrary, unlike in a language controlled grammar, but once a choice is made the rules that can be applied after it constrain the sequence of rules from that point on.</p>
<h4 id="example-1">Example</h4>

<p>As with so many controlled grammars, programmed grammars can generate the language 

<math display="inline" id="Controlled_grammar:95">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <msup>
    <mi>a</mi>
    <msup>
     <mn>2</mn>
     <mi>n</mi>
    </msup>
   </msup>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>a</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{2^{n}}:n\geq 0\}
  </annotation>
 </semantics>
</math>

:</p>

<p>Let 

<math display="inline" id="Controlled_grammar:96">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo>,</mo>
     <mi>A</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>a</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <msub>
      <mi>r</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>r</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>r</mi>
      <mn>3</mn>
     </msub>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <set>
      <ci>S</ci>
      <ci>A</ci>
     </set>
     <set>
      <ci>a</ci>
     </set>
     <ci>S</ci>
     <set>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </set>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(\{S,A\},\{a\},S,\{r_{1},r_{2},r_{3}\})
  </annotation>
 </semantics>
</math>

, where</p>

<p>

<math display="block" id="Controlled_grammar:97">
 <semantics>
  <mrow>
   <msub>
    <mi>r</mi>
    <mn>1</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>A</mi>
    <mi>A</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <msub>
      <mi>r</mi>
      <mn>1</mn>
     </msub>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <msub>
      <mi>r</mi>
      <mn>2</mn>
     </msub>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>r</ci>
     <cn type="integer">1</cn>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">A</csymbol>
     <csymbol cd="unknown">A</csymbol>
     <ci>normal-,</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-{</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
      <ci>normal-}</ci>
     </cerror>
     <ci>normal-,</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-{</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-}</ci>
     </cerror>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{1}=(S\to AA,\{r_{1}\},\{r_{2}\})
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:98">
 <semantics>
  <mrow>
   <msub>
    <mi>r</mi>
    <mn>2</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>A</mi>
    <mo>→</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <msub>
      <mi>r</mi>
      <mn>2</mn>
     </msub>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <msub>
      <mi>r</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>r</mi>
      <mn>3</mn>
     </msub>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>r</ci>
     <cn type="integer">2</cn>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">A</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-,</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-{</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-}</ci>
     </cerror>
     <ci>normal-,</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-{</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
      <ci>normal-,</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
      <ci>normal-}</ci>
     </cerror>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{2}=(A\to S,\{r_{2}\},\{r_{1},r_{3}\})
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:99">
 <semantics>
  <mrow>
   <msub>
    <mi>r</mi>
    <mn>3</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>a</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <msub>
      <mi>r</mi>
      <mn>3</mn>
     </msub>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mi mathvariant="normal">∅</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>r</ci>
     <cn type="integer">3</cn>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">a</csymbol>
     <ci>normal-,</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-{</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
      <ci>normal-}</ci>
     </cerror>
     <ci>normal-,</ci>
     <emptyset></emptyset>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{3}=(S\to a,\{r_{3}\},\emptyset)
  </annotation>
 </semantics>
</math>

</p>

<p>The derivation for the string <em>aaaa</em> is as follows:</p>

<p>

<math display="block" id="Controlled_grammar:100">
 <semantics>
  <mrow>
   <mi>S</mi>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>1</mn>
    </msub>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>1</mn>
    </msub>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>S</ci>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\Rightarrow_{r_{1}}AA\Rightarrow_{r_{1}}AA\Rightarrow_{r_{2}}SA\Rightarrow_{r%
_{2}}SS\Rightarrow_{r_{2}}SS
  </annotation>
 </semantics>
</math>

</p>
<dl>
<dd><dl>
<dd>

<math display="inline" id="Controlled_grammar:101">
 <semantics>
  <mrow>
   <mi></mi>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>1</mn>
    </msub>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>1</mn>
    </msub>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>1</mn>
    </msub>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{r_{1}}AAS\Rightarrow_{r_{1}}AAAA\Rightarrow_{r_{1}}AAAA
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:102">
 <semantics>
  <mrow>
   <mi></mi>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{r_{2}}SAAA\Rightarrow_{r_{2}}SSAA\Rightarrow_{r_{2}}SSSA%
\Rightarrow_{r_{2}}SSSS\Rightarrow_{r_{2}}SSSS
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:103">
 <semantics>
  <mrow>
   <mi></mi>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{r_{3}}aSSS\Rightarrow_{r_{3}}aaSS\Rightarrow_{r_{3}}aaaS%
\Rightarrow_{r_{3}}aaaa\Rightarrow_{r_{3}}aaaa
  </annotation>
 </semantics>
</math>


</dd>
</dl>
</dd>
</dl>

<p>As can be seen from the derivation and the rules, each time 

<math display="inline" id="Controlled_grammar:104">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>1</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{1}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Controlled_grammar:105">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>2</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{2}
  </annotation>
 </semantics>
</math>

 succeed, they feed back to themselves, which forces each rule to continue to rewrite the string over and over until it can do so no more. Upon failing, the derivation can switch to a different rule. In the case of 

<math display="inline" id="Controlled_grammar:106">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>1</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{1}
  </annotation>
 </semantics>
</math>

, that means rewriting all <em>S</em>s as <em>AA</em>s, then switching to 

<math display="inline" id="Controlled_grammar:107">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>2</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{2}
  </annotation>
 </semantics>
</math>

. In the case of 

<math display="inline" id="Controlled_grammar:108">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>2</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{2}
  </annotation>
 </semantics>
</math>

, it means rewriting all <em>A</em>s as <em>S</em>s, then switching either to 

<math display="inline" id="Controlled_grammar:109">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>1</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{1}
  </annotation>
 </semantics>
</math>

, which will lead to doubling the number of <em>S</em>s produced, or to 

<math display="inline" id="Controlled_grammar:110">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>3</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">3</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{3}
  </annotation>
 </semantics>
</math>

 which converts the <em>S</em>s to <em>a</em>s then halts the derivation. Each cycle through 

<math display="inline" id="Controlled_grammar:111">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>1</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{1}
  </annotation>
 </semantics>
</math>

 then 

<math display="inline" id="Controlled_grammar:112">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>2</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{2}
  </annotation>
 </semantics>
</math>

 therefore either doubles the initial number of <em>S</em>s, or converts the <em>S</em>s to <em>a</em>s. The trivial case of generating <em>a</em>, in case it is difficult to see, simply involves vacuously applying 

<math display="inline" id="Controlled_grammar:113">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>1</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{1}
  </annotation>
 </semantics>
</math>

, thus jumping straight to 

<math display="inline" id="Controlled_grammar:114">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>2</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{2}
  </annotation>
 </semantics>
</math>

 which also vacuously applies, then jumping to 

<math display="inline" id="Controlled_grammar:115">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>3</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">3</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{3}
  </annotation>
 </semantics>
</math>

 which produces <em>a</em>.</p>
<h2 id="control-by-context-conditions">Control by context conditions</h2>

<p>Unlike grammars controlled by prescribed sequences of production rules, which constrain the space of valid derivations but do not constrain the sorts of sentences that a production rule can apply to, grammars controlled by context conditions have no sequence constraints, but permit constraints of varying complexity on the sentences to which a production rule applies. Similar to grammars controlled by prescribed sequences, there are multiple different kinds of grammars controlled by context conditions: conditional grammars, semi-conditional grammars, random context grammars, and ordered grammars.</p>
<h3 id="conditional-grammars">Conditional grammars</h3>

<p>Conditional grammars are the simplest version of grammars controlled by context conditions. The structure of a conditional grammar is very similar to that of a normal rewrite grammar

<math display="block" id="Controlled_grammar:116">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>S</ci>
     <ci>P</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,S,P)
  </annotation>
 </semantics>
</math>

, where <em>N</em>, <em>T</em>, and <em>S</em> are as defined in a context-free grammar, and <em>P</em> is a set of pairs of the form 

<math display="inline" id="Controlled_grammar:117">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mi>p</mi>
   <mo>,</mo>
   <mi>R</mi>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <interval closure="open">
    <ci>p</ci>
    <ci>R</ci>
   </interval>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (p,R)
  </annotation>
 </semantics>
</math>

 where <em>p</em> is a production rule (usually context-free), and <em>R</em> is a language (usually regular) over 

<math display="inline" id="Controlled_grammar:118">
 <semantics>
  <mrow>
   <mi>N</mi>
   <mo>∪</mo>
   <mi>T</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <union></union>
    <ci>N</ci>
    <ci>T</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   N\cup T
  </annotation>
 </semantics>
</math>

. When <em>R</em> is regular, <em>R</em> can just be expressed as a regular expression.</p>
<h4 id="proof-theoretic-definition">Proof-theoretic definition</h4>

<p>With this definition of a conditional grammar, we can define the derives relation as follows:</p>

<p>Given two strings 

<math display="inline" id="Controlled_grammar:119">
 <semantics>
  <mrow>
   <mrow>
    <mi>x</mi>
    <mo>,</mo>
    <mi>y</mi>
   </mrow>
   <mo>∈</mo>
   <msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>N</mi>
      <mo>∪</mo>
      <mi>T</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>*</mo>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <list>
     <ci>x</ci>
     <ci>y</ci>
    </list>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <union></union>
      <ci>N</ci>
      <ci>T</ci>
     </apply>
     <times></times>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x,y\in(N\cup T)^{*}
  </annotation>
 </semantics>
</math>

, and some production rule 

<math display="inline" id="Controlled_grammar:120">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>A</mi>
    <mo>→</mo>
    <mi>w</mi>
    <mo>,</mo>
    <mi>R</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>∈</mo>
   <mi>P</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">A</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">w</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">R</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <in></in>
    <csymbol cd="unknown">P</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p=(A\to w,R)\in P
  </annotation>
 </semantics>
</math>

,</p>

<p>

<math display="block" id="Controlled_grammar:121">
 <semantics>
  <mrow>
   <mi>x</mi>
   <msub>
    <mo>⇒</mo>
    <mi>p</mi>
   </msub>
   <mi>y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>normal-⇒</ci>
     <ci>p</ci>
    </apply>
    <ci>x</ci>
    <ci>y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x\Rightarrow_{p}y
  </annotation>
 </semantics>
</math>

 if and only if 

<math display="inline" id="Controlled_grammar:122">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mo>=</mo>
   <mrow>
    <msup>
     <mi>x</mi>
     <mo>′</mo>
    </msup>
    <mi>A</mi>
    <msup>
     <mi>x</mi>
     <mi>′′</mi>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>x</ci>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>x</ci>
      <ci>normal-′</ci>
     </apply>
     <ci>A</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>x</ci>
      <ci>′′</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x=x^{\prime}Ax^{\prime\prime}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Controlled_grammar:123">
 <semantics>
  <mrow>
   <mi>y</mi>
   <mo>=</mo>
   <mrow>
    <msup>
     <mi>x</mi>
     <mo>′</mo>
    </msup>
    <mi>w</mi>
    <msup>
     <mi>x</mi>
     <mi>′′</mi>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>y</ci>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>x</ci>
      <ci>normal-′</ci>
     </apply>
     <ci>w</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>x</ci>
      <ci>′′</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   y=x^{\prime}wx^{\prime\prime}
  </annotation>
 </semantics>
</math>

, and 

<math display="inline" id="Controlled_grammar:124">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mo>∈</mo>
   <mi>R</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <ci>x</ci>
    <ci>R</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x\in R
  </annotation>
 </semantics>
</math>

</p>

<p>Informally then, the production rule for some pair in <em>P</em> can apply only to strings that are in its context language. Thus, for example, if we had some pair 

<math display="inline" id="Controlled_grammar:125">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mrow>
    <mi>S</mi>
    <mo>→</mo>
    <mrow>
     <mi>x</mi>
     <mo>,</mo>
     <mrow>
      <msup>
       <mi>a</mi>
       <mo>*</mo>
      </msup>
      <mi>S</mi>
      <msup>
       <mi>b</mi>
       <mo>*</mo>
      </msup>
     </mrow>
    </mrow>
   </mrow>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>S</ci>
    <list>
     <ci>x</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>a</ci>
       <times></times>
      </apply>
      <ci>S</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>b</ci>
       <times></times>
      </apply>
     </apply>
    </list>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (S\to x,a^{*}Sb^{*})
  </annotation>
 </semantics>
</math>

, we can only apply this to strings consisting of any number of <em>a</em>s followed by exactly only <em>S</em> followed by any number of <em>b</em>s, i.e. to sentences in 

<math display="inline" id="Controlled_grammar:126">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <mrow>
    <msup>
     <mi>a</mi>
     <mi>m</mi>
    </msup>
    <mi>A</mi>
    <msup>
     <mi>b</mi>
     <mi>n</mi>
    </msup>
   </mrow>
   <mo>:</mo>
   <mrow>
    <mrow>
     <mi>m</mi>
     <mo>,</mo>
     <mi>n</mi>
    </mrow>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>a</ci>
      <ci>m</ci>
     </apply>
     <ci>A</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>b</ci>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <list>
      <ci>m</ci>
      <ci>n</ci>
     </list>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{m}Ab^{n}:m,n\geq 0\}
  </annotation>
 </semantics>
</math>

, such as the strings <em>S</em>, <em>aSb</em>, <em>aaaS</em>, <em>aSbbbbbb</em>, etc. It cannot apply to strings like <em>xSy</em>, <em>aaaSxbbb</em>, etc.</p>
<h4 id="example-2">Example</h4>

<p>Conditional grammars can generate the context-sensitive language 

<math display="inline" id="Controlled_grammar:127">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <msup>
    <mi>a</mi>
    <msup>
     <mn>2</mn>
     <mi>n</mi>
    </msup>
   </msup>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>a</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{2^{n}}:n\geq 0\}
  </annotation>
 </semantics>
</math>

.</p>

<p>Let 

<math display="inline" id="Controlled_grammar:128">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo>,</mo>
     <msup>
      <mi>S</mi>
      <mo>′</mo>
     </msup>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>a</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>f</mi>
     <mo>,</mo>
     <mi>g</mi>
     <mo>,</mo>
     <mi>h</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mi>S</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <set>
      <ci>S</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>S</ci>
       <ci>normal-′</ci>
      </apply>
     </set>
     <set>
      <ci>a</ci>
     </set>
     <set>
      <ci>f</ci>
      <ci>g</ci>
      <ci>h</ci>
     </set>
     <ci>S</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(\{S,S^{\prime}\},\{a\},\{f,g,h\},S)
  </annotation>
 </semantics>
</math>

, where</p>

<p>

<math display="block" id="Controlled_grammar:129">
 <semantics>
  <mrow>
   <mi>f</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>A</mi>
    <mi>A</mi>
    <mo>,</mo>
    <msup>
     <mi>A</mi>
     <mo>*</mo>
    </msup>
    <msup>
     <mi>S</mi>
     <mo>+</mo>
    </msup>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">f</csymbol>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">A</csymbol>
     <csymbol cd="unknown">A</csymbol>
     <ci>normal-,</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>A</ci>
      <times></times>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>S</ci>
      <plus></plus>
     </apply>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f=(S\to AA,A^{*}S^{+})
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:130">
 <semantics>
  <mrow>
   <mi>g</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>A</mi>
    <mo>→</mo>
    <mi>B</mi>
    <mo>,</mo>
    <msup>
     <mi>B</mi>
     <mo>*</mo>
    </msup>
    <msup>
     <mi>A</mi>
     <mo>+</mo>
    </msup>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">g</csymbol>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">A</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">B</csymbol>
     <ci>normal-,</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>B</ci>
      <times></times>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>A</ci>
      <plus></plus>
     </apply>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   g=(A\to B,B^{*}A^{+})
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:131">
 <semantics>
  <mrow>
   <mi>h</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>B</mi>
    <mo>→</mo>
    <mi>S</mi>
    <mo>,</mo>
    <msup>
     <mi>S</mi>
     <mo>*</mo>
    </msup>
    <msup>
     <mi>B</mi>
     <mo>+</mo>
    </msup>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">h</csymbol>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">B</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-,</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>S</ci>
      <times></times>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>B</ci>
      <plus></plus>
     </apply>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   h=(B\to S,S^{*}B^{+})
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:132">
 <semantics>
  <mrow>
   <mi>k</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>a</mi>
    <mo>,</mo>
    <msup>
     <mi>a</mi>
     <mo>*</mo>
    </msup>
    <msup>
     <mi>S</mi>
     <mo>+</mo>
    </msup>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">k</csymbol>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">a</csymbol>
     <ci>normal-,</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>a</ci>
      <times></times>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>S</ci>
      <plus></plus>
     </apply>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   k=(S\to a,a^{*}S^{+})
  </annotation>
 </semantics>
</math>

</p>

<p>We can then generate the sentence <em>aaaa</em> with the following derivation:</p>

<p>

<math display="block" id="Controlled_grammar:133">
 <semantics>
  <mrow>
   <mi>S</mi>
   <msub>
    <mo>⇒</mo>
    <mi>f</mi>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>g</mi>
   </msub>
   <mrow>
    <mi>B</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>g</mi>
   </msub>
   <mrow>
    <mi>B</mi>
    <mi>B</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>f</ci>
     </apply>
     <ci>S</ci>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>g</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>B</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>g</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>B</ci>
      <ci>B</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\Rightarrow_{f}AA\Rightarrow_{g}BA\Rightarrow_{g}BB
  </annotation>
 </semantics>
</math>

</p>
<dl>
<dd><dl>
<dd>

<math display="inline" id="Controlled_grammar:134">
 <semantics>
  <mrow>
   <mi></mi>
   <msub>
    <mo>⇒</mo>
    <mi>h</mi>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>B</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>h</mi>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>f</mi>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>f</mi>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>h</ci>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>B</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>f</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>f</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{h}SB\Rightarrow_{h}SS\Rightarrow_{f}AAS\Rightarrow_{f}AAAA
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:135">
 <semantics>
  <mrow>
   <mi></mi>
   <msub>
    <mo>⇒</mo>
    <mi>g</mi>
   </msub>
   <mrow>
    <mi>B</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>g</mi>
   </msub>
   <mrow>
    <mi>B</mi>
    <mi>B</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>g</mi>
   </msub>
   <mrow>
    <mi>B</mi>
    <mi>B</mi>
    <mi>B</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>g</mi>
   </msub>
   <mrow>
    <mi>B</mi>
    <mi>B</mi>
    <mi>B</mi>
    <mi>B</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>g</ci>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>B</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>g</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>B</ci>
      <ci>B</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>g</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>B</ci>
      <ci>B</ci>
      <ci>B</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>g</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>B</ci>
      <ci>B</ci>
      <ci>B</ci>
      <ci>B</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{g}BAAA\Rightarrow_{g}BBAA\Rightarrow_{g}BBBA\Rightarrow_{g}BBBB
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:136">
 <semantics>
  <mrow>
   <mi></mi>
   <msub>
    <mo>⇒</mo>
    <mi>h</mi>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>B</mi>
    <mi>B</mi>
    <mi>B</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>h</mi>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>B</mi>
    <mi>B</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>h</mi>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>B</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>h</mi>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>h</ci>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>B</ci>
      <ci>B</ci>
      <ci>B</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>B</ci>
      <ci>B</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>B</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{h}SBBB\Rightarrow_{h}SSBB\Rightarrow_{h}SSSB\Rightarrow_{h}SSSS
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:137">
 <semantics>
  <mrow>
   <mi></mi>
   <msub>
    <mo>⇒</mo>
    <mi>k</mi>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>k</mi>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>k</mi>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>k</mi>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>k</ci>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>k</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>k</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>k</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{k}aSSS\Rightarrow_{k}aaSS\Rightarrow_{k}aaaS\Rightarrow_{k}aaaa
  </annotation>
 </semantics>
</math>


</dd>
</dl>
</dd>
</dl>
<h3 id="semi-conditional-grammars">Semi-conditional grammars</h3>

<p>A semi-conditional grammar is very similar to a conditional grammar, and technically the class of semi-conditional grammars are a subset of the conditional grammars. Rather than specifying what the whole of the string must look like for a rule to apply, semi-conditional grammars specify that a string must have as substrings all of some set of strings, and none of another set, in order for a rule to apply. Formally, then, a semi-conditional grammar is a tuple 

<math display="inline" id="Controlled_grammar:138">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>S</ci>
     <ci>P</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,S,P)
  </annotation>
 </semantics>
</math>

, where, <em>N</em>, <em>T</em>, and <em>S</em> are defined as in a CFG, and <em>P</em> is a set of rules like 

<math display="inline" id="Controlled_grammar:139">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mi>p</mi>
   <mo>,</mo>
   <mi>R</mi>
   <mo>,</mo>
   <mi>Q</mi>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <vector>
    <ci>p</ci>
    <ci>R</ci>
    <ci>Q</ci>
   </vector>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (p,R,Q)
  </annotation>
 </semantics>
</math>

 where <em>p</em> is a (usually context-free) production rule, and <em>R</em> and <em>Q</em> are finite sets of strings. The derives relation can then be defined as follows.</p>

<p>For two strings 

<math display="inline" id="Controlled_grammar:140">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>x</mi>
     <mi>A</mi>
     <msup>
      <mi>x</mi>
      <mo>′</mo>
     </msup>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mi>x</mi>
     <mi>w</mi>
     <msup>
      <mi>x</mi>
      <mo>′</mo>
     </msup>
    </mrow>
   </mrow>
   <mo>∈</mo>
   <msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>N</mi>
      <mo>∪</mo>
      <mi>T</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>*</mo>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <list>
     <apply>
      <times></times>
      <ci>x</ci>
      <ci>A</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <ci>normal-′</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>x</ci>
      <ci>w</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <ci>normal-′</ci>
      </apply>
     </apply>
    </list>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <union></union>
      <ci>N</ci>
      <ci>T</ci>
     </apply>
     <times></times>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   xAx^{\prime},xwx^{\prime}\in(N\cup T)^{*}
  </annotation>
 </semantics>
</math>

, and some rule 

<math display="inline" id="Controlled_grammar:141">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>A</mi>
    <mo>→</mo>
    <mi>w</mi>
    <mo>,</mo>
    <mi>R</mi>
    <mo>,</mo>
    <mi>Q</mi>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>∈</mo>
   <mi>P</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">A</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">w</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">R</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">Q</csymbol>
     <ci>normal-)</ci>
    </cerror>
    <in></in>
    <csymbol cd="unknown">P</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p=(A\to w,R,Q)\in P
  </annotation>
 </semantics>
</math>

,</p>

<p>

<math display="block" id="Controlled_grammar:142">
 <semantics>
  <mrow>
   <mrow>
    <mi>x</mi>
    <mi>A</mi>
    <msup>
     <mi>x</mi>
     <mo>′</mo>
    </msup>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>p</mi>
   </msub>
   <mrow>
    <mi>x</mi>
    <mi>w</mi>
    <msup>
     <mi>x</mi>
     <mo>′</mo>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>normal-⇒</ci>
     <ci>p</ci>
    </apply>
    <apply>
     <times></times>
     <ci>x</ci>
     <ci>A</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>x</ci>
      <ci>normal-′</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>x</ci>
     <ci>w</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>x</ci>
      <ci>normal-′</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   xAx^{\prime}\Rightarrow_{p}xwx^{\prime}
  </annotation>
 </semantics>
</math>

 if and only if every string in <em>R</em> is a substring of 

<math display="inline" id="Controlled_grammar:143">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mi>A</mi>
   <msup>
    <mi>x</mi>
    <mo>′</mo>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>x</ci>
    <ci>A</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>x</ci>
     <ci>normal-′</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   xAx^{\prime}
  </annotation>
 </semantics>
</math>

, and no string in <em>Q</em> is a substring of 

<math display="inline" id="Controlled_grammar:144">
 <semantics>
  <mrow>
   <mi>x</mi>
   <mi>A</mi>
   <msup>
    <mi>x</mi>
    <mo>′</mo>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>x</ci>
    <ci>A</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>x</ci>
     <ci>normal-′</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   xAx^{\prime}
  </annotation>
 </semantics>
</math>

</p>

<p>The language of a semi-conditional grammar is then trivially the set of terminal strings 

<math display="inline" id="Controlled_grammar:145">
 <semantics>
  <mrow>
   <mrow>
    <mi>L</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>G</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">{</mo>
    <mrow>
     <mi>w</mi>
     <mo>∈</mo>
     <msup>
      <mi>T</mi>
      <mo>*</mo>
     </msup>
    </mrow>
    <mo>:</mo>
    <mrow>
     <mi>S</mi>
     <msup>
      <mo>⇒</mo>
      <mo>*</mo>
     </msup>
     <mi>w</mi>
    </mrow>
    <mo stretchy="false">}</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>L</ci>
     <ci>G</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">conditional-set</csymbol>
     <apply>
      <in></in>
      <ci>w</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>T</ci>
       <times></times>
      </apply>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>normal-⇒</ci>
       <times></times>
      </apply>
      <ci>S</ci>
      <ci>w</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   L(G)=\{w\in T^{*}:S\Rightarrow^{*}w\}
  </annotation>
 </semantics>
</math>

.</p>

<p>An example of a semi-conditional grammar is given below also as an example of random context grammars.</p>
<h3 id="random-context-grammars">Random context grammars</h3>

<p>A random context grammar is a semi-conditional grammar in which the <em>R</em> and <em>Q</em> sets are all subsets of <em>N</em>. Because subsets of <em>N</em> are finite sets over 

<math display="inline" id="Controlled_grammar:146">
 <semantics>
  <msup>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mi>N</mi>
     <mo>∪</mo>
     <mi>T</mi>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>*</mo>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <apply>
     <union></union>
     <ci>N</ci>
     <ci>T</ci>
    </apply>
    <times></times>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (N\cup T)^{*}
  </annotation>
 </semantics>
</math>

, it is clear that that random context grammars are indeed kinds of semi-conditional grammars.</p>
<h4 id="example-3">Example</h4>

<p>Like conditional grammars, random context grammars (and thus semi-conditional grammars) can generate the language 

<math display="inline" id="Controlled_grammar:147">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <msup>
    <mi>a</mi>
    <msup>
     <mn>2</mn>
     <mi>n</mi>
    </msup>
   </msup>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>a</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{2^{n}}:n\geq 0\}
  </annotation>
 </semantics>
</math>

. One grammar which can do this is:</p>

<p>Let 

<math display="inline" id="Controlled_grammar:148">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo>,</mo>
     <mi>X</mi>
     <mo>,</mo>
     <mi>Y</mi>
     <mo>,</mo>
     <mi>A</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>a</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <msub>
      <mi>r</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>r</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>r</mi>
      <mn>3</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>r</mi>
      <mn>4</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>r</mi>
      <mn>5</mn>
     </msub>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <set>
      <ci>S</ci>
      <ci>X</ci>
      <ci>Y</ci>
      <ci>A</ci>
     </set>
     <set>
      <ci>a</ci>
     </set>
     <ci>S</ci>
     <set>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">4</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">5</cn>
      </apply>
     </set>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(\{S,X,Y,A\},\{a\},S,\{r_{1},r_{2},r_{3},r_{4},r_{5}\})
  </annotation>
 </semantics>
</math>

, where</p>

<p>

<math display="block" id="Controlled_grammar:149">
 <semantics>
  <mrow>
   <msub>
    <mi>r</mi>
    <mn>1</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>X</mi>
    <mi>X</mi>
    <mo>,</mo>
    <mi mathvariant="normal">∅</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>Y</mi>
     <mo>,</mo>
     <mi>A</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>r</ci>
     <cn type="integer">1</cn>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">X</csymbol>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-,</ci>
     <emptyset></emptyset>
     <ci>normal-,</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-{</ci>
      <csymbol cd="unknown">Y</csymbol>
      <ci>normal-,</ci>
      <csymbol cd="unknown">A</csymbol>
      <ci>normal-}</ci>
     </cerror>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{1}=(S\to XX,\emptyset,\{Y,A\})
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:150">
 <semantics>
  <mrow>
   <msub>
    <mi>r</mi>
    <mn>2</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>X</mi>
    <mo>→</mo>
    <mi>Y</mi>
    <mo>,</mo>
    <mi mathvariant="normal">∅</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>r</ci>
     <cn type="integer">2</cn>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">X</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">Y</csymbol>
     <ci>normal-,</ci>
     <emptyset></emptyset>
     <ci>normal-,</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-{</ci>
      <csymbol cd="unknown">S</csymbol>
      <ci>normal-}</ci>
     </cerror>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{2}=(X\to Y,\emptyset,\{S\})
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:151">
 <semantics>
  <mrow>
   <msub>
    <mi>r</mi>
    <mn>3</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>Y</mi>
    <mo>→</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi mathvariant="normal">∅</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>X</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>r</ci>
     <cn type="integer">3</cn>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">Y</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-,</ci>
     <emptyset></emptyset>
     <ci>normal-,</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-{</ci>
      <csymbol cd="unknown">X</csymbol>
      <ci>normal-}</ci>
     </cerror>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{3}=(Y\to S,\emptyset,\{X\})
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:152">
 <semantics>
  <mrow>
   <msub>
    <mi>r</mi>
    <mn>4</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>A</mi>
    <mo>,</mo>
    <mi mathvariant="normal">∅</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>X</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>r</ci>
     <cn type="integer">4</cn>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">A</csymbol>
     <ci>normal-,</ci>
     <emptyset></emptyset>
     <ci>normal-,</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-{</ci>
      <csymbol cd="unknown">X</csymbol>
      <ci>normal-}</ci>
     </cerror>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{4}=(S\to A,\emptyset,\{X\})
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:153">
 <semantics>
  <mrow>
   <msub>
    <mi>r</mi>
    <mn>5</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>A</mi>
    <mo>→</mo>
    <mi>a</mi>
    <mo>,</mo>
    <mi mathvariant="normal">∅</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>r</ci>
     <cn type="integer">5</cn>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">A</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">a</csymbol>
     <ci>normal-,</ci>
     <emptyset></emptyset>
     <ci>normal-,</ci>
     <cerror>
      <csymbol cd="ambiguous">fragments</csymbol>
      <ci>normal-{</ci>
      <csymbol cd="unknown">S</csymbol>
      <ci>normal-}</ci>
     </cerror>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{5}=(A\to a,\emptyset,\{S\})
  </annotation>
 </semantics>
</math>

</p>

<p>Consider now the production for <em>aaaa</em>:</p>

<p>

<math display="block" id="Controlled_grammar:154">
 <semantics>
  <mrow>
   <mi>S</mi>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>1</mn>
    </msub>
   </msub>
   <mrow>
    <mi>X</mi>
    <mi>X</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>Y</mi>
    <mi>X</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>Y</mi>
    <mi>Y</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>Y</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>S</ci>
     <apply>
      <times></times>
      <ci>X</ci>
      <ci>X</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>X</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\Rightarrow_{r_{1}}XX\Rightarrow_{r_{2}}YX\Rightarrow_{r_{2}}YY\Rightarrow_{r%
_{3}}SY\Rightarrow_{r_{3}}SS
  </annotation>
 </semantics>
</math>

</p>
<dl>
<dd><dl>
<dd>

<math display="inline" id="Controlled_grammar:155">
 <semantics>
  <mrow>
   <mi></mi>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>1</mn>
    </msub>
   </msub>
   <mrow>
    <mi>X</mi>
    <mi>X</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>1</mn>
    </msub>
   </msub>
   <mrow>
    <mi>X</mi>
    <mi>X</mi>
    <mi>X</mi>
    <mi>X</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>Y</mi>
    <mi>X</mi>
    <mi>X</mi>
    <mi>X</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>Y</mi>
    <mi>Y</mi>
    <mi>X</mi>
    <mi>X</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>Y</mi>
    <mi>Y</mi>
    <mi>Y</mi>
    <mi>X</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>Y</mi>
    <mi>Y</mi>
    <mi>Y</mi>
    <mi>Y</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>X</ci>
      <ci>X</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>X</ci>
      <ci>X</ci>
      <ci>X</ci>
      <ci>X</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>X</ci>
      <ci>X</ci>
      <ci>X</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>X</ci>
      <ci>X</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>X</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>Y</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{r_{1}}XXS\Rightarrow_{r_{1}}XXXX\Rightarrow_{r_{2}}YXXX%
\Rightarrow_{r_{2}}YYXX\Rightarrow_{r_{2}}YYYX\Rightarrow_{r_{2}}YYYY
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:156">
 <semantics>
  <mrow>
   <mi></mi>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>Y</mi>
    <mi>Y</mi>
    <mi>Y</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>Y</mi>
    <mi>Y</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>Y</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>Y</ci>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{r_{3}}SYYY\Rightarrow_{r_{3}}SSYY\Rightarrow_{r_{3}}SSSY%
\Rightarrow_{r_{3}}SSSS
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:157">
 <semantics>
  <mrow>
   <mi></mi>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>4</mn>
    </msub>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>4</mn>
    </msub>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>4</mn>
    </msub>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>4</mn>
    </msub>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">4</cn>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">4</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">4</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">4</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{r_{4}}ASSS\Rightarrow_{r_{4}}AASS\Rightarrow_{r_{4}}AAAS%
\Rightarrow_{r_{4}}AAAA
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:158">
 <semantics>
  <mrow>
   <mi></mi>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>5</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>5</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>5</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>5</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">5</cn>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">5</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">5</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">5</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{r_{5}}aAAA\Rightarrow_{r_{5}}aaAA\Rightarrow_{r_{5}}aaaA%
\Rightarrow_{r_{5}}aaaa
  </annotation>
 </semantics>
</math>


</dd>
</dl>
</dd>
</dl>

<p>The behavior of the <em>R</em> sets here is trivial: any string can be rewritten according to them, because they do not require any substrings to be present. The behavior of the <em>Q</em> sets, however, are more interesting. In 

<math display="inline" id="Controlled_grammar:159">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>1</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{1}
  </annotation>
 </semantics>
</math>

, we are forced by the <em>Q</em> set to rewrite an <em>S</em>, thus beginning an <em>S</em>-doubling process, only when no <em>Y</em>s or <em>A</em>s are present in the string, which means only when a prior <em>S</em>-doubling process has been fully initiated, eliminating the possibility of only doubling some of the <em>S</em>s. In 

<math display="inline" id="Controlled_grammar:160">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>2</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{2}
  </annotation>
 </semantics>
</math>

, which moves the <em>S</em>-doubling process into its second stage, we cannot begin this process until the first stage is complete and there are no more <em>S</em>s to try to double, because the <em>Q</em> set prevents the rule from applying if there is an <em>S</em> symbol still in the string. In 

<math display="inline" id="Controlled_grammar:161">
 <semantics>
  <msub>
   <mi>r</mi>
   <mn>3</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>r</ci>
    <cn type="integer">3</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{3}
  </annotation>
 </semantics>
</math>

, we complete the doubling stage by introducing the <em>S</em>s back only when there are no more <em>X</em>s to rewrite, thus when the second stage is complete. We can cycle through these stages as many times as we want, rewriting all <em>S</em>s to <em>XX</em>s before then rewriting each <em>X</em> to a Y, and then each <em>Y</em> to an <em>S</em>, finally ending by replacing each <em>S</em> with an <em>A</em> and then an <em>a</em>. Because the rule for replacing <em>S</em> with <em>A</em> prohibits application to a string with an <em>X</em> in it, we cannot apply this in the middle of the first stage of the <em>S</em>-doubling process, thus again preventing us from only doubling some <em>S</em>s.</p>
<h3 id="ordered-grammars">Ordered grammars</h3>

<p>Ordered grammars are perhaps one of the simpler extensions of grammars into the controlled grammar domain. An ordered grammar is simply a tuple 

<math display="inline" id="Controlled_grammar:162">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>S</ci>
     <ci>P</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,S,P)
  </annotation>
 </semantics>
</math>

 where <em>N</em>, <em>T</em>, and <em>S</em> are identical to those in a CFG, and <em>P</em> is a set of context-free rewrite rules with a partial ordering <math>. The partial ordering is then used to determine which rule to apply to a string, when multiple rules are applicable. The derives relation is then:</math></p>

<p>Given some strings 

<math display="inline" id="Controlled_grammar:163">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>x</mi>
     <mi>A</mi>
     <msup>
      <mi>x</mi>
      <mo>′</mo>
     </msup>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mi>x</mi>
     <mi>w</mi>
     <msup>
      <mi>x</mi>
      <mo>′</mo>
     </msup>
    </mrow>
   </mrow>
   <mo>∈</mo>
   <msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>N</mi>
      <mo>∪</mo>
      <mi>T</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>*</mo>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <list>
     <apply>
      <times></times>
      <ci>x</ci>
      <ci>A</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <ci>normal-′</ci>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>x</ci>
      <ci>w</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <ci>normal-′</ci>
      </apply>
     </apply>
    </list>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <union></union>
      <ci>N</ci>
      <ci>T</ci>
     </apply>
     <times></times>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   xAx^{\prime},xwx^{\prime}\in(N\cup T)^{*}
  </annotation>
 </semantics>
</math>

 and some rule 

<math display="inline" id="Controlled_grammar:164">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo>=</mo>
   <mi>A</mi>
   <mo>→</mo>
   <mi>w</mi>
   <mo>∈</mo>
   <mi>P</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>p</ci>
     <ci>A</ci>
    </apply>
    <apply>
     <ci>normal-→</ci>
     <share href="#.cmml">
     </share>
     <ci>w</ci>
    </apply>
    <apply>
     <in></in>
     <share href="#.cmml">
     </share>
     <ci>P</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p=A\to w\in P
  </annotation>
 </semantics>
</math>

,</p>

<p>

<math display="block" id="Controlled_grammar:165">
 <semantics>
  <mrow>
   <mrow>
    <mi>x</mi>
    <mi>A</mi>
    <msup>
     <mi>x</mi>
     <mo>′</mo>
    </msup>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>p</mi>
   </msub>
   <mrow>
    <mi>x</mi>
    <mi>w</mi>
    <msup>
     <mi>x</mi>
     <mo>′</mo>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>normal-⇒</ci>
     <ci>p</ci>
    </apply>
    <apply>
     <times></times>
     <ci>x</ci>
     <ci>A</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>x</ci>
      <ci>normal-′</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>x</ci>
     <ci>w</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>x</ci>
      <ci>normal-′</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   xAx^{\prime}\Rightarrow_{p}xwx^{\prime}
  </annotation>
 </semantics>
</math>

 if and only if there is no rule 

<math display="inline" id="Controlled_grammar:166">
 <semantics>
  <mrow>
   <msup>
    <mi>p</mi>
    <mo>′</mo>
   </msup>
   <mo>=</mo>
   <mi>A</mi>
   <mo>→</mo>
   <msup>
    <mi>w</mi>
    <mo>′</mo>
   </msup>
   <mo>∈</mo>
   <mi>P</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>p</ci>
      <ci>normal-′</ci>
     </apply>
     <ci>A</ci>
    </apply>
    <apply>
     <ci>normal-→</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>w</ci>
      <ci>normal-′</ci>
     </apply>
    </apply>
    <apply>
     <in></in>
     <share href="#.cmml">
     </share>
     <ci>P</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p^{\prime}=A\to w^{\prime}\in P
  </annotation>
 </semantics>
</math>

 such that 

<math display="inline" id="Controlled_grammar:167">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo><</mo>
   <msup>
    <mi>p</mi>
    <mo>′</mo>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <lt></lt>
    <ci>p</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>p</ci>
     <ci>normal-′</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p<p^{\prime}
  </annotation>
 </semantics>
</math>

.</p>
<h4 id="example-4">Example</h4>

<p>Like many other contextually controlled grammars, ordered grammars can enforce the application of rules in a particular order. Since this is the essential property of previous grammars that could generate the language 

<math display="inline" id="Controlled_grammar:168">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <msup>
    <mi>a</mi>
    <msup>
     <mn>2</mn>
     <mi>n</mi>
    </msup>
   </msup>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>a</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{2^{n}}:n\geq 0\}
  </annotation>
 </semantics>
</math>

, it should be no surprise that a grammar that explicitly uses rule ordering, rather than encoding it via string contexts, should similarly be able to capture that language. And as it turns out, just such an ordered grammar exists:</p>

<p>Let 

<math display="inline" id="Controlled_grammar:169">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo>,</mo>
     <mi>X</mi>
     <mo>,</mo>
     <mi>Y</mi>
     <mo>,</mo>
     <mi>Z</mi>
     <mo>,</mo>
     <mi>A</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>a</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <set>
      <ci>S</ci>
      <ci>X</ci>
      <ci>Y</ci>
      <ci>Z</ci>
      <ci>A</ci>
     </set>
     <set>
      <ci>a</ci>
     </set>
     <ci>S</ci>
     <ci>P</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(\{S,X,Y,Z,A\},\{a\},S,P)
  </annotation>
 </semantics>
</math>

, where <em>P</em> is the partially ordered set described by the <a href="Hasse_diagram" title="wikilink">Hasse diagram</a></p>
<dl>
<dd>
</dd>
</dl>

<p>The derivation for the string <em>aaaa</em> is simply:</p>

<p>

<math display="block" id="Controlled_grammar:170">
 <semantics>
  <mrow>
   <mi>S</mi>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>S</mi>
      <mo>→</mo>
      <mrow>
       <mi>X</mi>
       <mi>X</mi>
      </mrow>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>X</mi>
    <mpadded width="+5pt">
     <mi>X</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>X</mi>
      <mo>→</mo>
      <mi>Y</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>Y</mi>
    <mpadded width="+5pt">
     <mi>X</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>X</mi>
      <mo>→</mo>
      <mi>Y</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>Y</mi>
    <mpadded width="+5pt">
     <mi>Y</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>Y</mi>
      <mo>→</mo>
      <mi>S</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>S</mi>
    <mpadded width="+5pt">
     <mi>Y</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>Y</mi>
      <mo>→</mo>
      <mi>S</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>Y</mi>
    <mi>Y</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>S</ci>
       <apply>
        <times></times>
        <ci>X</ci>
        <ci>X</ci>
       </apply>
      </apply>
     </apply>
     <ci>S</ci>
     <apply>
      <times></times>
      <ci>X</ci>
      <ci>X</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>X</ci>
       <ci>Y</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>X</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>X</ci>
       <ci>Y</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>Y</ci>
       <ci>S</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>Y</ci>
       <ci>S</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>Y</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\Rightarrow_{S\to XX}\ XX\ \Rightarrow_{X\to Y}\ YX\ \Rightarrow_{X\to Y}\ YY%
\ \Rightarrow_{Y\to S}\ SY\ \Rightarrow_{Y\to S}\ YY
  </annotation>
 </semantics>
</math>

</p>
<dl>
<dd><dl>
<dd>

<math display="inline" id="Controlled_grammar:171">
 <semantics>
  <mrow>
   <mi></mi>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>S</mi>
      <mo>→</mo>
      <mrow>
       <mi>X</mi>
       <mi>X</mi>
      </mrow>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>X</mi>
    <mi>X</mi>
    <mpadded width="+5pt">
     <mi>S</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>S</mi>
      <mo>→</mo>
      <mrow>
       <mi>X</mi>
       <mi>X</mi>
      </mrow>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>X</mi>
    <mi>X</mi>
    <mi>X</mi>
    <mi>X</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>S</ci>
       <apply>
        <times></times>
        <ci>X</ci>
        <ci>X</ci>
       </apply>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>X</ci>
      <ci>X</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>S</ci>
       <apply>
        <times></times>
        <ci>X</ci>
        <ci>X</ci>
       </apply>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>X</ci>
      <ci>X</ci>
      <ci>X</ci>
      <ci>X</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{S\to XX}\ XXS\ \Rightarrow_{S\to XX}\ XXXX
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:172">
 <semantics>
  <mrow>
   <mi></mi>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>X</mi>
      <mo>→</mo>
      <mi>Y</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>Y</mi>
    <mi>X</mi>
    <mi>X</mi>
    <mpadded width="+5pt">
     <mi>X</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>X</mi>
      <mo>→</mo>
      <mi>Y</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>Y</mi>
    <mi>Y</mi>
    <mi>X</mi>
    <mpadded width="+5pt">
     <mi>X</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>X</mi>
      <mo>→</mo>
      <mi>Y</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>Y</mi>
    <mi>Y</mi>
    <mi>Y</mi>
    <mpadded width="+5pt">
     <mi>X</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>X</mi>
      <mo>→</mo>
      <mi>Y</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>Y</mi>
    <mi>Y</mi>
    <mi>Y</mi>
    <mi>Y</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>X</ci>
       <ci>Y</ci>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>X</ci>
      <ci>X</ci>
      <ci>X</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>X</ci>
       <ci>Y</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>X</ci>
      <ci>X</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>X</ci>
       <ci>Y</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>X</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>X</ci>
       <ci>Y</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>Y</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{X\to Y}\ YXXX\ \Rightarrow_{X\to Y}\ YYXX\ \Rightarrow_{X\to Y}\ %
YYYX\ \Rightarrow_{X\to Y}\ YYYY
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:173">
 <semantics>
  <mrow>
   <mi></mi>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>Y</mi>
      <mo>→</mo>
      <mi>S</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>S</mi>
    <mi>Y</mi>
    <mi>Y</mi>
    <mpadded width="+5pt">
     <mi>Y</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>Y</mi>
      <mo>→</mo>
      <mi>S</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>Y</mi>
    <mpadded width="+5pt">
     <mi>Y</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>Y</mi>
      <mo>→</mo>
      <mi>S</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mpadded width="+5pt">
     <mi>Y</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>Y</mi>
      <mo>→</mo>
      <mi>S</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>Y</ci>
       <ci>S</ci>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>Y</ci>
      <ci>Y</ci>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>Y</ci>
       <ci>S</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>Y</ci>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>Y</ci>
       <ci>S</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>Y</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>Y</ci>
       <ci>S</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{Y\to S}\ SYYY\ \Rightarrow_{Y\to S}\ SSYY\ \Rightarrow_{Y\to S}\ %
SSSY\ \Rightarrow_{Y\to S}\ SSSS
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:174">
 <semantics>
  <mrow>
   <mi></mi>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>S</mi>
      <mo>→</mo>
      <mi>A</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>A</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mpadded width="+5pt">
     <mi>S</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>S</mi>
      <mo>→</mo>
      <mi>A</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>S</mi>
    <mpadded width="+5pt">
     <mi>S</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>S</mi>
      <mo>→</mo>
      <mi>A</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mpadded width="+5pt">
     <mi>S</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>S</mi>
      <mo>→</mo>
      <mi>A</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>S</ci>
       <ci>A</ci>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>S</ci>
       <ci>A</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>S</ci>
       <ci>A</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>S</ci>
       <ci>A</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{S\to A}\ ASSS\ \Rightarrow_{S\to A}\ AASS\ \Rightarrow_{S\to A}\ %
AAAS\ \Rightarrow_{S\to A}\ AAAA
  </annotation>
 </semantics>
</math>


</dd>
<dd>

<math display="inline" id="Controlled_grammar:175">
 <semantics>
  <mrow>
   <mi></mi>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>A</mi>
      <mo>→</mo>
      <mi>a</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>a</mi>
    <mi>A</mi>
    <mi>A</mi>
    <mpadded width="+5pt">
     <mi>A</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>A</mi>
      <mo>→</mo>
      <mi>a</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>A</mi>
    <mpadded width="+5pt">
     <mi>A</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>A</mi>
      <mo>→</mo>
      <mi>a</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mpadded width="+5pt">
     <mi>A</mi>
    </mpadded>
   </mrow>
   <mpadded width="+5pt">
    <msub>
     <mo>⇒</mo>
     <mrow>
      <mi>A</mi>
      <mo>→</mo>
      <mi>a</mi>
     </mrow>
    </msub>
   </mpadded>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>A</ci>
       <ci>a</ci>
      </apply>
     </apply>
     <csymbol cd="latexml">absent</csymbol>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>A</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>A</ci>
       <ci>a</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>A</ci>
       <ci>a</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <ci>normal-→</ci>
       <ci>A</ci>
       <ci>a</ci>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Rightarrow_{A\to a}\ aAAA\ \Rightarrow_{A\to a}\ aaAA\ \Rightarrow_{A\to a}\ %
aaaA\ \Rightarrow_{A\to a}\ aaaa
  </annotation>
 </semantics>
</math>


</dd>
</dl>
</dd>
</dl>

<p>At each step of the way, the derivation proceeds by rewriting in cycles. Notice that if at the fifth step <em>SY</em>, we had four options

<math display="block" id="Controlled_grammar:176">
 <semantics>
  <mrow>
   <mrow>
    <mi>Y</mi>
    <mo>→</mo>
    <mi>Z</mi>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mrow>
     <mi>S</mi>
     <mo>→</mo>
     <mi>Z</mi>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mrow>
      <mi>Y</mi>
      <mo>→</mo>
      <mi>S</mi>
     </mrow>
     <mo>,</mo>
     <mrow>
      <mi>S</mi>
      <mo>→</mo>
      <mi>A</mi>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <ci>normal-→</ci>
     <ci>Y</ci>
     <ci>Z</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">formulae-sequence</csymbol>
     <apply>
      <ci>normal-→</ci>
      <ci>S</ci>
      <ci>Z</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">formulae-sequence</csymbol>
      <apply>
       <ci>normal-→</ci>
       <ci>Y</ci>
       <ci>S</ci>
      </apply>
      <apply>
       <ci>normal-→</ci>
       <ci>S</ci>
       <ci>A</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y\to Z,S\to Z,Y\to S,S\to A
  </annotation>
 </semantics>
</math>

, the first two of which halt the derivation, as <em>Z</em> cannot be rewritten. In the example, we used 

<math display="inline" id="Controlled_grammar:177">
 <semantics>
  <mrow>
   <mi>Y</mi>
   <mo>→</mo>
   <mi>S</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>Y</ci>
    <ci>S</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y\to S
  </annotation>
 </semantics>
</math>

 to derive <em>SS</em>, but consider if we had chosen 

<math display="inline" id="Controlled_grammar:178">
 <semantics>
  <mrow>
   <mi>S</mi>
   <mo>→</mo>
   <mi>A</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>S</ci>
    <ci>A</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\to A
  </annotation>
 </semantics>
</math>

 instead. We would have produced the string <em>AS</em>, the options for which are 

<math display="inline" id="Controlled_grammar:179">
 <semantics>
  <mrow>
   <mi>Y</mi>
   <mo>→</mo>
   <mi>Z</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>Y</ci>
    <ci>Z</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Y\to Z
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Controlled_grammar:180">
 <semantics>
  <mrow>
   <mi>A</mi>
   <mo>→</mo>
   <mi>Z</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>A</ci>
    <ci>Z</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A\to Z
  </annotation>
 </semantics>
</math>

, both of which halt the derivation. Thus with the string <em>SY</em>, and conversely with <em>YS</em>, we must rewrite the <em>Y</em> to produce <em>SS</em>. The same hold for other combinations, so that overall, the ordering forces the derivation to halt, or else proceed by rewriting all <em>S</em>s to <em>XX</em>s, then all <em>X</em>s to <em>Y</em>s, then all <em>Y</em>s to <em>S</em>s, and so on, then finally all <em>S</em>s to <em>A</em>s then all <em>A</em>s to <em>a</em>s. In this way, a string 

<math display="inline" id="Controlled_grammar:181">
 <semantics>
  <msup>
   <mi>S</mi>
   <mi>n</mi>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>S</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S^{n}
  </annotation>
 </semantics>
</math>

 can only ever be rewritten as 

<math display="inline" id="Controlled_grammar:182">
 <semantics>
  <msup>
   <mi>A</mi>
   <mi>n</mi>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>A</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A^{n}
  </annotation>
 </semantics>
</math>

 which produces <em>a</em>s, or as 

<math display="inline" id="Controlled_grammar:183">
 <semantics>
  <msup>
   <mi>S</mi>
   <mrow>
    <mn>2</mn>
    <mi>n</mi>
   </mrow>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>S</ci>
    <apply>
     <times></times>
     <cn type="integer">2</cn>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S^{2n}
  </annotation>
 </semantics>
</math>

. Starting with <em>n = 0</em>, it should be clear that this grammar only generates the language 

<math display="inline" id="Controlled_grammar:184">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <msup>
    <mi>a</mi>
    <msup>
     <mn>2</mn>
     <mi>n</mi>
    </msup>
   </msup>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>a</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{2^{n}}:n\geq 0\}
  </annotation>
 </semantics>
</math>

.</p>
<h2 id="grammars-with-parallelism">Grammars with parallelism</h2>

<p>A still further class of controlled grammars is the class of grammars with parallelism in the application of a rewrite operation, in which each rewrite step can (or must) rewrite more than one non-terminal simultaneously. These, too, come in several flavors: Indian parallel grammars, k-grammars, scattered context grammars, unordered scattered context grammars, and k-simple matrix grammars. Again, the variants differ in how the parallelism is defined.</p>
<h3 id="indian-parallel-grammars">Indian parallel grammars</h3>

<p>An Indian parallel grammar is simply a CFG in which to use a rewrite rule, all instances of the rules non-terminal symbol must be rewritten simultaneously. Thus, for example, given the string <em>aXbYcXd</em>, with two instances of <em>X</em>, and some rule 

<math display="inline" id="Controlled_grammar:185">
 <semantics>
  <mrow>
   <mi>X</mi>
   <mo>→</mo>
   <mi>w</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>X</ci>
    <ci>w</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X\to w
  </annotation>
 </semantics>
</math>

, the only way to rewrite this string with this rule is to rewrite it as <em>awbYcwd</em>; neither <em>awbYcXd</em> nor <em>aXbYcwd</em> are valid rewrites in an Indian parallel grammar, because they did not rewrite all instances of <em>X</em>.</p>

<p>Indian parallel grammars can easily produce the language 

<math display="inline" id="Controlled_grammar:186">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <mrow>
    <mi>w</mi>
    <mi>w</mi>
   </mrow>
   <mo>:</mo>
   <mrow>
    <mi>w</mi>
    <mo>∈</mo>
    <msup>
     <mrow>
      <mo stretchy="false">{</mo>
      <mi>a</mi>
      <mo>,</mo>
      <mi>b</mi>
      <mo stretchy="false">}</mo>
     </mrow>
     <mo>*</mo>
    </msup>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <times></times>
     <ci>w</ci>
     <ci>w</ci>
    </apply>
    <apply>
     <in></in>
     <ci>w</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <set>
       <ci>a</ci>
       <ci>b</ci>
      </set>
      <times></times>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{ww:w\in\{a,b\}^{*}\}
  </annotation>
 </semantics>
</math>

:</p>

<p>Let 

<math display="inline" id="Controlled_grammar:187">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo>,</mo>
     <mi>A</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>a</mi>
     <mo>,</mo>
     <mi>b</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>f</mi>
     <mo>,</mo>
     <mi>g</mi>
     <mo>,</mo>
     <mi>h</mi>
     <mo>,</mo>
     <mi>k</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <set>
      <ci>S</ci>
      <ci>A</ci>
     </set>
     <set>
      <ci>a</ci>
      <ci>b</ci>
     </set>
     <ci>S</ci>
     <set>
      <ci>f</ci>
      <ci>g</ci>
      <ci>h</ci>
      <ci>k</ci>
     </set>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(\{S,A\},\{a,b\},S,\{f,g,h,k\})
  </annotation>
 </semantics>
</math>

, where</p>

<p>

<math display="block" id="Controlled_grammar:188">
 <semantics>
  <mrow>
   <mi>f</mi>
   <mo>=</mo>
   <mi>S</mi>
   <mo>→</mo>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>f</ci>
     <ci>S</ci>
    </apply>
    <apply>
     <ci>normal-→</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f=S\to AA
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:189">
 <semantics>
  <mrow>
   <mi>g</mi>
   <mo>=</mo>
   <mi>A</mi>
   <mo>→</mo>
   <mrow>
    <mi>a</mi>
    <mi>A</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>g</ci>
     <ci>A</ci>
    </apply>
    <apply>
     <ci>normal-→</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>A</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   g=A\to aA
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:190">
 <semantics>
  <mrow>
   <mi>h</mi>
   <mo>=</mo>
   <mi>A</mi>
   <mo>→</mo>
   <mrow>
    <mi>b</mi>
    <mi>A</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>h</ci>
     <ci>A</ci>
    </apply>
    <apply>
     <ci>normal-→</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>b</ci>
      <ci>A</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   h=A\to bA
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:191">
 <semantics>
  <mrow>
   <mi>k</mi>
   <mo>=</mo>
   <mi>A</mi>
   <mo>→</mo>
   <mi>ϵ</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>k</ci>
     <ci>A</ci>
    </apply>
    <apply>
     <ci>normal-→</ci>
     <share href="#.cmml">
     </share>
     <ci>ϵ</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   k=A\to\epsilon
  </annotation>
 </semantics>
</math>

</p>

<p>Generating <em>aabaab</em> then is quite simple:</p>

<p>

<math display="block" id="Controlled_grammar:192">
 <semantics>
  <mrow>
   <mi>S</mi>
   <msub>
    <mo>⇒</mo>
    <mi>f</mi>
   </msub>
   <mrow>
    <mi>A</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>g</mi>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>A</mi>
    <mi>a</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>g</mi>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>A</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>h</mi>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>b</mi>
    <mi>A</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>b</mi>
    <mi>A</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <mi>k</mi>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>b</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>b</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>f</ci>
     </apply>
     <ci>S</ci>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>g</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>A</ci>
      <ci>a</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>g</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>A</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>h</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>b</ci>
      <ci>A</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>b</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <ci>k</ci>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>b</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>b</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\Rightarrow_{f}AA\Rightarrow_{g}aAaA\Rightarrow_{g}aaAaaA\Rightarrow_{h}%
aabAaabA\Rightarrow_{k}aabaab
  </annotation>
 </semantics>
</math>

</p>

<p>The language 

<math display="inline" id="Controlled_grammar:193">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <msup>
    <mi>a</mi>
    <msup>
     <mn>2</mn>
     <mi>n</mi>
    </msup>
   </msup>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>a</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{2^{n}}:n\geq 0\}
  </annotation>
 </semantics>
</math>

 is even simpler:</p>

<p>Let 

<math display="inline" id="Controlled_grammar:194">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>a</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <set>
      <ci>S</ci>
     </set>
     <set>
      <ci>a</ci>
     </set>
     <ci>S</ci>
     <ci>P</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(\{S\},\{a\},S,P)
  </annotation>
 </semantics>
</math>

, where <em>P</em> consists of</p>

<p>

<math display="block" id="Controlled_grammar:195">
 <semantics>
  <mrow>
   <mi>S</mi>
   <mo>→</mo>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>S</ci>
    <apply>
     <times></times>
     <ci>S</ci>
     <ci>S</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\to SS
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:196">
 <semantics>
  <mrow>
   <mi>S</mi>
   <mo>→</mo>
   <mi>a</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>S</ci>
    <ci>a</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\to a
  </annotation>
 </semantics>
</math>

</p>

<p>It should be obvious, just from the first rule, and the requirement that all instances of a non-terminal are rewritten simultaneously with the same rule, that the number of <em>S</em>s doubles on each rewrite step using the first rule, giving the derivation steps 

<math display="inline" id="Controlled_grammar:197">
 <semantics>
  <mrow>
   <mi>S</mi>
   <mo>⇒</mo>
   <msup>
    <mi>S</mi>
    <mn>2</mn>
   </msup>
   <mo>⇒</mo>
   <msup>
    <mi>S</mi>
    <mn>4</mn>
   </msup>
   <mo>⇒</mo>
   <msup>
    <mi>S</mi>
    <mn>8</mn>
   </msup>
   <mo>⇒</mo>
   <mi mathvariant="normal">…</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <ci>normal-⇒</ci>
     <ci>S</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>S</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <apply>
     <ci>normal-⇒</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>S</ci>
      <cn type="integer">4</cn>
     </apply>
    </apply>
    <apply>
     <ci>normal-⇒</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>S</ci>
      <cn type="integer">8</cn>
     </apply>
    </apply>
    <apply>
     <ci>normal-⇒</ci>
     <share href="#.cmml">
     </share>
     <ci>normal-…</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\Rightarrow S^{2}\Rightarrow S^{4}\Rightarrow S^{8}\Rightarrow...
  </annotation>
 </semantics>
</math>

. Final application of the second rule replaces all the <em>S</em>s with <em>a</em>s, thus showing how this simple language can produce the language 

<math display="inline" id="Controlled_grammar:198">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <msup>
    <mi>a</mi>
    <msup>
     <mn>2</mn>
     <mi>n</mi>
    </msup>
   </msup>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>a</ci>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{2^{n}}:n\geq 0\}
  </annotation>
 </semantics>
</math>

.</p>
<h3 id="k-grammars">K-grammars</h3>

<p>A k-grammar is yet another kind of parallel grammar, very different from an Indian parallel grammar, but still with a level of parallelism. In a k-grammar, for some number <em>k</em>, exactly <em>k</em> non-terminal symbols must be rewritten at every step (except the first step, where the only symbol in the string is the start symbol). If the string has less than <em>k</em> non-terminals, the derivation fails.</p>

<p>A 3-grammar can produce the language 

<math display="inline" id="Controlled_grammar:199">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <mrow>
    <msup>
     <mi>a</mi>
     <mi>n</mi>
    </msup>
    <msup>
     <mi>b</mi>
     <mi>n</mi>
    </msup>
    <msup>
     <mi>c</mi>
     <mi>n</mi>
    </msup>
   </mrow>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>a</ci>
      <ci>n</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>b</ci>
      <ci>n</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>c</ci>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{n}b^{n}c^{n}:n\geq 0\}
  </annotation>
 </semantics>
</math>

, as can be seen below:</p>

<p>Let 

<math display="inline" id="Controlled_grammar:200">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo>,</mo>
     <mi>A</mi>
     <mo>,</mo>
     <mi>B</mi>
     <mo>,</mo>
     <mi>C</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>a</mi>
     <mo>,</mo>
     <mi>b</mi>
     <mo>,</mo>
     <mi>c</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <set>
      <ci>S</ci>
      <ci>A</ci>
      <ci>B</ci>
      <ci>C</ci>
     </set>
     <set>
      <ci>a</ci>
      <ci>b</ci>
      <ci>c</ci>
     </set>
     <ci>S</ci>
     <ci>P</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(\{S,A,B,C\},\{a,b,c\},S,P)
  </annotation>
 </semantics>
</math>

, where <em>P</em> consists of:</p>

<p>

<math display="block" id="Controlled_grammar:201">
 <semantics>
  <mrow>
   <mi>S</mi>
   <mo>→</mo>
   <mrow>
    <mi>A</mi>
    <mi>B</mi>
    <mi>C</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>S</ci>
    <apply>
     <times></times>
     <ci>A</ci>
     <ci>B</ci>
     <ci>C</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\to ABC
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:202">
 <semantics>
  <mrow>
   <mi>A</mi>
   <mo>→</mo>
   <mrow>
    <mi>a</mi>
    <mi>A</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>A</ci>
    <apply>
     <times></times>
     <ci>a</ci>
     <ci>A</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A\to aA
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:203">
 <semantics>
  <mrow>
   <mi>A</mi>
   <mo>→</mo>
   <mi>a</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>A</ci>
    <ci>a</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A\to a
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:204">
 <semantics>
  <mrow>
   <mi>B</mi>
   <mo>→</mo>
   <mrow>
    <mi>b</mi>
    <mi>B</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>B</ci>
    <apply>
     <times></times>
     <ci>b</ci>
     <ci>B</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   B\to bB
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:205">
 <semantics>
  <mrow>
   <mi>B</mi>
   <mo>→</mo>
   <mi>b</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>B</ci>
    <ci>b</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   B\to b
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:206">
 <semantics>
  <mrow>
   <mi>C</mi>
   <mo>→</mo>
   <mrow>
    <mi>c</mi>
    <mi>C</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>C</ci>
    <apply>
     <times></times>
     <ci>c</ci>
     <ci>C</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   C\to cC
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:207">
 <semantics>
  <mrow>
   <mi>C</mi>
   <mo>→</mo>
   <mi>c</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>C</ci>
    <ci>c</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   C\to c
  </annotation>
 </semantics>
</math>

</p>

<p>With the following derivation for <em>aaabbbccc</em>:</p>

<p>

<math display="block" id="Controlled_grammar:208">
 <semantics>
  <mrow>
   <mi>S</mi>
   <mo>⇒</mo>
   <mrow>
    <mi>A</mi>
    <mi>B</mi>
    <mi>C</mi>
   </mrow>
   <mo>⇒</mo>
   <mrow>
    <mi>a</mi>
    <mi>A</mi>
    <mi>b</mi>
    <mi>B</mi>
    <mi>c</mi>
    <mi>C</mi>
   </mrow>
   <mo>⇒</mo>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>A</mi>
    <mi>b</mi>
    <mi>b</mi>
    <mi>B</mi>
    <mi>c</mi>
    <mi>c</mi>
    <mi>C</mi>
   </mrow>
   <mo>⇒</mo>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>b</mi>
    <mi>b</mi>
    <mi>b</mi>
    <mi>c</mi>
    <mi>c</mi>
    <mi>c</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <ci>normal-⇒</ci>
     <ci>S</ci>
     <apply>
      <times></times>
      <ci>A</ci>
      <ci>B</ci>
      <ci>C</ci>
     </apply>
    </apply>
    <apply>
     <ci>normal-⇒</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>A</ci>
      <ci>b</ci>
      <ci>B</ci>
      <ci>c</ci>
      <ci>C</ci>
     </apply>
    </apply>
    <apply>
     <ci>normal-⇒</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>A</ci>
      <ci>b</ci>
      <ci>b</ci>
      <ci>B</ci>
      <ci>c</ci>
      <ci>c</ci>
      <ci>C</ci>
     </apply>
    </apply>
    <apply>
     <ci>normal-⇒</ci>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>b</ci>
      <ci>b</ci>
      <ci>b</ci>
      <ci>c</ci>
      <ci>c</ci>
      <ci>c</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\Rightarrow ABC\Rightarrow aAbBcC\Rightarrow aaAbbBccC\Rightarrow aaabbbccc
  </annotation>
 </semantics>
</math>

</p>

<p>At each step in the derivation except the first and last, we used the self-recursive rules 

<math display="inline" id="Controlled_grammar:209">
 <semantics>
  <mrow>
   <mrow>
    <mi>A</mi>
    <mo>→</mo>
    <mrow>
     <mi>a</mi>
     <mi>A</mi>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mrow>
     <mi>B</mi>
     <mo>→</mo>
     <mrow>
      <mi>b</mi>
      <mi>B</mi>
     </mrow>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mi>C</mi>
     <mo>→</mo>
     <mrow>
      <mi>c</mi>
      <mi>C</mi>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <ci>normal-→</ci>
     <ci>A</ci>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <csymbol cd="ambiguous">formulae-sequence</csymbol>
     <apply>
      <ci>normal-→</ci>
      <ci>B</ci>
      <apply>
       <times></times>
       <ci>b</ci>
       <ci>B</ci>
      </apply>
     </apply>
     <apply>
      <ci>normal-→</ci>
      <ci>C</ci>
      <apply>
       <times></times>
       <ci>c</ci>
       <ci>C</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A\to aA,B\to bB,C\to cC
  </annotation>
 </semantics>
</math>

. If we had not use the recursive rules, instead using, say, 

<math display="inline" id="Controlled_grammar:210">
 <semantics>
  <mrow>
   <mrow>
    <mi>A</mi>
    <mo>→</mo>
    <mi>a</mi>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mrow>
     <mi>B</mi>
     <mo>→</mo>
     <mrow>
      <mi>b</mi>
      <mi>B</mi>
     </mrow>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mi>C</mi>
     <mo>→</mo>
     <mrow>
      <mi>c</mi>
      <mi>C</mi>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <ci>normal-→</ci>
     <ci>A</ci>
     <ci>a</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">formulae-sequence</csymbol>
     <apply>
      <ci>normal-→</ci>
      <ci>B</ci>
      <apply>
       <times></times>
       <ci>b</ci>
       <ci>B</ci>
      </apply>
     </apply>
     <apply>
      <ci>normal-→</ci>
      <ci>C</ci>
      <apply>
       <times></times>
       <ci>c</ci>
       <ci>C</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A\to a,B\to bB,C\to cC
  </annotation>
 </semantics>
</math>

, where one of the rules is not self-recursive, the number of non-terminals would have decreased to 2, thus making the string unable to be derived further because it would have too few non-terminals to be rewritten.</p>
<h3 id="russian-parallel-grammars">Russian parallel grammars</h3>

<p>Russian parallel grammars<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> are somewhere between Indian parallel grammars and k-grammars, defined as 

<math display="inline" id="Controlled_grammar:211">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>S</ci>
     <ci>P</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,S,P)
  </annotation>
 </semantics>
</math>

, where <em>N</em>, <em>T</em>, and <em>S</em> are as in a context-free grammar, and <em>P</em> is a set of pairs 

<math display="inline" id="Controlled_grammar:212">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mrow>
    <mi>A</mi>
    <mo>→</mo>
    <mrow>
     <mi>w</mi>
     <mo>,</mo>
     <mi>k</mi>
    </mrow>
   </mrow>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>A</ci>
    <list>
     <ci>w</ci>
     <ci>k</ci>
    </list>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (A\to w,k)
  </annotation>
 </semantics>
</math>

, where 

<math display="inline" id="Controlled_grammar:213">
 <semantics>
  <mrow>
   <mi>A</mi>
   <mo>→</mo>
   <mi>w</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <ci>A</ci>
    <ci>w</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A\to w
  </annotation>
 </semantics>
</math>

 is a context-free production rule, and <em>k</em> is either 1 or 2. Application of a rule 

<math display="inline" id="Controlled_grammar:214">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>A</mi>
    <mo>→</mo>
    <mi>w</mi>
    <mo>,</mo>
    <mi>k</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">A</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">w</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">k</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p=(A\to w,k)
  </annotation>
 </semantics>
</math>

 involves rewriting <em>k</em> occurrences of <em>A</em> to <em>w</em> simultaneously.</p>
<h3 id="scattered-context-grammars">Scattered context grammars</h3>

<p>A scattered context grammar is a 4-tuple 

<math display="inline" id="Controlled_grammar:215">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>N</mi>
    <mo>,</mo>
    <mi>T</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mi>P</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <ci>N</ci>
     <ci>T</ci>
     <ci>S</ci>
     <ci>P</ci>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(N,T,S,P)
  </annotation>
 </semantics>
</math>

 where <em>N</em>, <em>T</em>, and <em>S</em> are defined as in a context-free grammar, and <em>P</em> is a set of tuples called matrixes 

<math display="inline" id="Controlled_grammar:216">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>A</mi>
     <mn>1</mn>
    </msub>
    <mo>→</mo>
    <msub>
     <mi>w</mi>
     <mn>1</mn>
    </msub>
    <mo>,</mo>
    <mi mathvariant="normal">…</mi>
    <mo>,</mo>
    <msub>
     <mi>A</mi>
     <mi>n</mi>
    </msub>
    <mo>→</mo>
    <msub>
     <mi>w</mi>
     <mi>n</mi>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>A</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>normal-→</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>normal-,</ci>
     <ci>normal-…</ci>
     <ci>normal-,</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>A</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-→</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p=(A_{1}\to w_{1},...,A_{n}\to w_{n})
  </annotation>
 </semantics>
</math>

, where 

<math display="inline" id="Controlled_grammar:217">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>></mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <gt></gt>
    <ci>n</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n>0
  </annotation>
 </semantics>
</math>

 can vary according to the matrix. The derives relation for such a grammar is</p>

<p>

<math display="block" id="Controlled_grammar:218">
 <semantics>
  <mrow>
   <mi>x</mi>
   <msub>
    <mo>⇒</mo>
    <mi>p</mi>
   </msub>
   <mi>y</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>normal-⇒</ci>
     <ci>p</ci>
    </apply>
    <ci>x</ci>
    <ci>y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x\Rightarrow_{p}y
  </annotation>
 </semantics>
</math>

 if and only if</p>
<dl>
<dd><dl>
<dd>

<math display="inline" id="Controlled_grammar:219">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>A</mi>
     <mn>1</mn>
    </msub>
    <mo>→</mo>
    <msub>
     <mi>w</mi>
     <mn>1</mn>
    </msub>
    <mo>,</mo>
    <mi mathvariant="normal">…</mi>
    <mo>,</mo>
    <msub>
     <mi>A</mi>
     <mi>n</mi>
    </msub>
    <mo>→</mo>
    <msub>
     <mi>w</mi>
     <mi>n</mi>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>∈</mo>
   <mi>P</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">p</csymbol>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>A</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>normal-→</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>normal-,</ci>
     <ci>normal-…</ci>
     <ci>normal-,</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>A</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-→</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <ci>n</ci>
     </apply>
     <ci>normal-)</ci>
    </cerror>
    <in></in>
    <csymbol cd="unknown">P</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p=(A_{1}\to w_{1},...,A_{n}\to w_{n})\in P
  </annotation>
 </semantics>
</math>

, and
</dd>
<dd>

<math display="inline" id="Controlled_grammar:220">
 <semantics>
  <mrow>
   <mrow>
    <mi>x</mi>
    <mo>=</mo>
    <mrow>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <msub>
      <mi>A</mi>
      <mn>1</mn>
     </msub>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mi mathvariant="normal">…</mi>
     <msub>
      <mi>x</mi>
      <mi>n</mi>
     </msub>
     <msub>
      <mi>A</mi>
      <mi>n</mi>
     </msub>
     <msub>
      <mi>x</mi>
      <mrow>
       <mi>n</mi>
       <mo>+</mo>
       <mn>1</mn>
      </mrow>
     </msub>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>y</mi>
    <mo>=</mo>
    <mrow>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <msub>
      <mi>w</mi>
      <mn>1</mn>
     </msub>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mi mathvariant="normal">…</mi>
     <msub>
      <mi>x</mi>
      <mi>n</mi>
     </msub>
     <msub>
      <mi>w</mi>
      <mi>n</mi>
     </msub>
     <msub>
      <mi>x</mi>
      <mrow>
       <mi>n</mi>
       <mo>+</mo>
       <mn>1</mn>
      </mrow>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <ci>x</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>A</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <ci>n</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>A</ci>
       <ci>n</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <apply>
        <plus></plus>
        <ci>n</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <ci>y</ci>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>w</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <ci>n</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>w</ci>
       <ci>n</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <apply>
        <plus></plus>
        <ci>n</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x=x_{1}A_{1}x_{2}...x_{n}A_{n}x_{n+1},y=x_{1}w_{1}x_{2}...x_{n}w_{n}x_{n+1}
  </annotation>
 </semantics>
</math>

, for 

<math display="inline" id="Controlled_grammar:221">
 <semantics>
  <mrow>
   <msub>
    <mi>x</mi>
    <mi>i</mi>
   </msub>
   <mo>∈</mo>
   <msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>N</mi>
      <mo>∪</mo>
      <mi>T</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mo>*</mo>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <ci>i</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <union></union>
      <ci>N</ci>
      <ci>T</ci>
     </apply>
     <times></times>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x_{i}\in(N\cup T)^{*}
  </annotation>
 </semantics>
</math>


</dd>
</dl>
</dd>
</dl>

<p>Intuitively, then, the matrixes in a scattered context grammar provide a list of rules which must each be applied to non-terminals in a string, where those non-terminals appear in the same linear order as the rules that rewrite them.</p>

<p>An unordered scattered context grammar is a scattered context grammar in which, for every rule in <em>P</em>, each of its permutations is also in <em>P</em>. As such, a rule and its permutations can instead be represented as a set rather than as tuples.</p>
<h4 id="example-5">Example</h4>

<p>Scattered context grammars are capable of describing the language 

<math display="inline" id="Controlled_grammar:222">
 <semantics>
  <mrow>
   <mo stretchy="false">{</mo>
   <mrow>
    <msup>
     <mi>a</mi>
     <mi>n</mi>
    </msup>
    <msup>
     <mi>b</mi>
     <mi>n</mi>
    </msup>
    <msup>
     <mi>c</mi>
     <mi>n</mi>
    </msup>
   </mrow>
   <mo>:</mo>
   <mrow>
    <mi>n</mi>
    <mo>≥</mo>
    <mn>0</mn>
   </mrow>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">conditional-set</csymbol>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>a</ci>
      <ci>n</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>b</ci>
      <ci>n</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>c</ci>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <geq></geq>
     <ci>n</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{a^{n}b^{n}c^{n}:n\geq 0\}
  </annotation>
 </semantics>
</math>

 quite easily.</p>

<p>Let 

<math display="inline" id="Controlled_grammar:223">
 <semantics>
  <mrow>
   <mi>G</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>S</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <mi>a</mi>
     <mo>,</mo>
     <mi>b</mi>
     <mo>,</mo>
     <mi>c</mi>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo>,</mo>
    <mi>S</mi>
    <mo>,</mo>
    <mrow>
     <mo stretchy="false">{</mo>
     <msub>
      <mi>r</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>r</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>r</mi>
      <mn>3</mn>
     </msub>
     <mo stretchy="false">}</mo>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>G</ci>
    <vector>
     <set>
      <ci>S</ci>
     </set>
     <set>
      <ci>a</ci>
      <ci>b</ci>
      <ci>c</ci>
     </set>
     <ci>S</ci>
     <set>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </set>
    </vector>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   G=(\{S\},\{a,b,c\},S,\{r_{1},r_{2},r_{3}\})
  </annotation>
 </semantics>
</math>

, where</p>

<p>

<math display="block" id="Controlled_grammar:224">
 <semantics>
  <mrow>
   <msub>
    <mi>r</mi>
    <mn>1</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>r</ci>
     <cn type="integer">1</cn>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">S</csymbol>
     <csymbol cd="unknown">S</csymbol>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{1}=(S\to SSS)
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:225">
 <semantics>
  <mrow>
   <msub>
    <mi>r</mi>
    <mn>2</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>a</mi>
    <mi>S</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>b</mi>
    <mi>S</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>c</mi>
    <mi>S</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>r</ci>
     <cn type="integer">2</cn>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">a</csymbol>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">b</csymbol>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">c</csymbol>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{2}=(S\to aS,S\to bS,S\to cS)
  </annotation>
 </semantics>
</math>

</p>

<p>

<math display="block" id="Controlled_grammar:226">
 <semantics>
  <mrow>
   <msub>
    <mi>r</mi>
    <mn>3</mn>
   </msub>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>ϵ</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>ϵ</mi>
    <mo>,</mo>
    <mi>S</mi>
    <mo>→</mo>
    <mi>ϵ</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>r</ci>
     <cn type="integer">3</cn>
    </apply>
    <eq></eq>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">ϵ</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">ϵ</csymbol>
     <ci>normal-,</ci>
     <csymbol cd="unknown">S</csymbol>
     <ci>normal-→</ci>
     <csymbol cd="unknown">ϵ</csymbol>
     <ci>normal-)</ci>
    </cerror>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   r_{3}=(S\to\epsilon,S\to\epsilon,S\to\epsilon)
  </annotation>
 </semantics>
</math>

</p>

<p>Deriving <em>aaabbbccc</em> then is trivial:</p>

<p>

<math display="block" id="Controlled_grammar:227">
 <semantics>
  <mrow>
   <mi>S</mi>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>1</mn>
    </msub>
   </msub>
   <mrow>
    <mi>S</mi>
    <mi>S</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>S</mi>
    <mi>b</mi>
    <mi>S</mi>
    <mi>c</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>S</mi>
    <mi>b</mi>
    <mi>b</mi>
    <mi>S</mi>
    <mi>c</mi>
    <mi>c</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>2</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>S</mi>
    <mi>b</mi>
    <mi>b</mi>
    <mi>b</mi>
    <mi>S</mi>
    <mi>c</mi>
    <mi>c</mi>
    <mi>c</mi>
    <mi>S</mi>
   </mrow>
   <msub>
    <mo>⇒</mo>
    <msub>
     <mi>r</mi>
     <mn>3</mn>
    </msub>
   </msub>
   <mrow>
    <mi>a</mi>
    <mi>a</mi>
    <mi>a</mi>
    <mi>b</mi>
    <mi>b</mi>
    <mi>b</mi>
    <mi>c</mi>
    <mi>c</mi>
    <mi>c</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>S</ci>
     <apply>
      <times></times>
      <ci>S</ci>
      <ci>S</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>S</ci>
      <ci>b</ci>
      <ci>S</ci>
      <ci>c</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>S</ci>
      <ci>b</ci>
      <ci>b</ci>
      <ci>S</ci>
      <ci>c</ci>
      <ci>c</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>S</ci>
      <ci>b</ci>
      <ci>b</ci>
      <ci>b</ci>
      <ci>S</ci>
      <ci>c</ci>
      <ci>c</ci>
      <ci>c</ci>
      <ci>S</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>normal-⇒</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>r</ci>
       <cn type="integer">3</cn>
      </apply>
     </apply>
     <share href="#.cmml">
     </share>
     <apply>
      <times></times>
      <ci>a</ci>
      <ci>a</ci>
      <ci>a</ci>
      <ci>b</ci>
      <ci>b</ci>
      <ci>b</ci>
      <ci>c</ci>
      <ci>c</ci>
      <ci>c</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S\Rightarrow_{r_{1}}SSS\Rightarrow_{r_{2}}aSbScS\Rightarrow_{r_{2}}aaSbbSccS%
\Rightarrow_{r_{2}}aaaSbbbScccS\Rightarrow_{r_{3}}aaabbbccc
  </annotation>
 </semantics>
</math>

</p>
<h2 id="references">References</h2>

<p>"</p>

<p><a href="Category:Formal_languages" title="wikilink">Category:Formal languages</a> <a href="Category:Grammar_frameworks" title="wikilink">Category:Grammar frameworks</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">Dassow, J., Pǎun, Gh., and Salomaa, A. Grammars with Controlled Derivations. In G. Rozenberg and A. Salomaa (Eds.) <em>Handbook of Formal Languages</em>, Vol. 2, Ch. 3.<a href="#fnref1">↩</a></li>
<li id="fn2">Dassow, J. 1984. <em>On some extensions of russian parallel context free grammars</em>. Acta Cybernetica 6, pp. 355-360.<a href="#fnref2">↩</a></li>
</ol>
</section>
</body>
</html>
