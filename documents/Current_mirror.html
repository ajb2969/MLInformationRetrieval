<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title offset="1614">Current mirror</title>
   <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js">
    </script>
</head>
<body>
<h1>Current mirror</h1>
<hr/>
<p>A <strong>current mirror</strong> is a circuit designed to copy a <a href="current_(electricity)" title="wikilink">current</a> through one <a href="active_device" title="wikilink">active device</a> by controlling the current in another active device of a circuit, keeping the output current constant regardless of loading. The current being 'copied' can be, and sometimes is, a varying signal current. Conceptually, an ideal current mirror is simply an ideal <em>inverting current amplifier</em> that reverses the current direction as well or it is a <a href="Electronic_amplifier#Input_and_output_variables" title="wikilink">current-controlled current source (CCCS)</a>. The current mirror is used to provide bias currents and <a href="active_load" title="wikilink">active loads</a> to circuits.</p>
<p>The circuit topology covered here is one that appears in many monolithic ICs. It is a <a href="Widlar_current_source" title="wikilink">Widlar mirror</a> without an emitter degeneration resistor in the follower (output) transistor. This topology can only be done in an IC as the matching has to be extremely close and cannot be achieved with discretes.</p>
<p>Another topology is the Wilson mirror. The <a href="Wilson_current_mirror" title="wikilink">Wilson mirror</a> solves the <a href="Early_effect" title="wikilink">Early effect</a> voltage problem in his design.</p>
<h2 id="mirror-characteristics">Mirror characteristics</h2>
<p>There are three main specifications that characterize a current mirror. The first is the transfer ratio (in the case of a current amplifier) or the output current magnitude (in the case of a constant current source CCS). The second is its AC output resistance, which determines how much the output current varies with the voltage applied to the mirror. The third specification is the minimum voltage drop across the output part of the mirror necessary to make it work properly. This minimum voltage is dictated by the need to keep the output transistor of the mirror in active mode. The range of voltages where the mirror works is called the <strong>compliance range</strong> and the voltage marking the boundary between good and bad behavior is called the <strong>compliance voltage</strong>. There are also a number of secondary performance issues with mirrors, for example, temperature stability.</p>
<h2 id="practical-approximations">Practical approximations</h2>
<p>For small-signal analysis the current mirror can be approximated by its equivalent <a href="Norton's_theorem" title="wikilink">Norton impedance</a> .</p>
<p>In large-signal hand analysis, a current mirror is usually and simply approximated by an ideal current source. However, an ideal current source is unrealistic in several respects:</p>
<ul>
<li>it has infinite AC impedance, while a practical mirror has finite impedance</li>
<li>it provides the same current regardless of voltage, that is, there are no compliance range requirements</li>
<li>it has no frequency limitations, while a real mirror has limitations due to the parasitic capacitances of the transistors</li>
<li>the ideal source has no sensitivity to real-world effects like noise, power-supply voltage variations and component tolerances.</li>
</ul>
<h2 id="circuit-realizations-of-current-mirrors">Circuit realizations of current mirrors</h2>
<h3 id="basic-idea">Basic idea</h3>
<p>A bipolar transistor can be used as the simplest <em>current-to-current converter</em> but its transfer ratio would highly depend on temperature variations, β tolerances, etc. To eliminate these undesired disturbances, a current mirror is composed of two cascaded <em>current-to-voltage</em> and <em>voltage-to-current</em> converters placed at the same conditions and having reverse characteristics. It is not obligatory for them to be linear; the only requirement is their characteristics to be mirrorlike (for example, in the BJT current mirror below, they are logarithmic and exponential). Usually, two identical converters are used but the characteristic of the first one is reversed by applying a negative feedback. Thus a current mirror consists of two cascaded equal converters (the first - reversed and the second - direct).</p>
<figure><b>(Figure)</b>
<figcaption>Figure 1: A current mirror implemented with npn bipolar transistors using a resistor to set the reference current I<sub>REF</sub>; V<sub>CC</sub> = supply voltage</figcaption>
</figure>
<h3 id="basic-bjt-current-mirror">Basic BJT current mirror</h3>
<p>If a voltage is applied to the BJT base-emitter junction as an input quantity and the collector current is taken as an output quantity, the transistor will act as an <em>exponential voltage-to-current converter</em>. By applying a negative feedback (simply joining the base and collector) the transistor can be "reversed" and it will begin acting as the opposite <em>logarithmic current-to-voltage converter</em>; now it will adjust the "output" base-emitter voltage so as to pass the applied "input" collector current.</p>
<p>The simplest bipolar current mirror (shown in Figure 1) implements this idea. It consists of two cascaded transistor stages acting accordingly as a <em>reversed</em> and <em>direct</em> voltage-to-current converters. The emitter of transistor Q<sub>1</sub> is connected to ground. Its collector-base voltage is zero as shown. Consequently, the voltage drop across Q<sub>1</sub> is <em>V</em><sub>BE</sub>, that is, this voltage is set by the <a href="Diode_modelling#Shockley_diode_model" title="wikilink">diode law</a> and Q<sub>1</sub> is said to be <a href="Diode-connected_transistor" title="wikilink">diode connected</a>. (See also <a href="Bipolar_transistor#Ebers.E2.80.93Moll_model" title="wikilink">Ebers-Moll model</a>.) It is important to have Q<sub>1</sub> in the circuit instead of a simple diode, because Q<sub>1</sub> sets <em>V<sub>BE</sub></em> for transistor Q<sub>2</sub>. If Q<sub>1</sub> and Q<sub>2</sub> are matched, that is, have substantially the same device properties, and if the mirror output voltage is chosen so the collector-base voltage of Q<sub>2</sub> is also zero, then the <em>V<sub>BE</sub></em>-value set by Q<sub>1</sub> results in an emitter current in the matched Q<sub>2</sub> that is the same as the emitter current in Q<sub>1</sub>{citation needed). Because Q<sub>1</sub> and Q<sub>2</sub> are matched, their β<sub>0</sub>-values also agree, making the mirror output current the same as the collector current of Q<sub>1</sub>.</p>
<p>The current delivered by the mirror for arbitrary collector-base reverse bias <em>V</em><sub>CB</sub> of the output transistor is given by (see <a href="bipolar_transistor" title="wikilink">bipolar transistor</a>):</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$I_\text{C} = I_\text{S} \left( e^{\frac{V_\text{BE}}{V_\text{T}}} - 1 \right) \left(1 + \frac{V_\text{CB}}{V_\text{A}}\right)$</span>,
</dd>
</dl>
</dd>
</dl>
<p>where <em>I<sub>S</sub></em> = reverse saturation current or scale current, <em>V<sub>T</sub></em> = <a href="Boltzmann_constant#Role_in_semiconductor_physics:_the_thermal_voltage" title="wikilink">thermal voltage</a> and <em>V<sub>A</sub></em> = <a href="Early_voltage" title="wikilink">Early voltage</a>. This current is related to the reference current <em>I<sub>REF</sub></em> when the output transistor <em>V<sub>CB</sub></em> = 0 V by:</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$I_\text{ref} = I_C \left( 1 + \frac{2}{\beta_0} \right) \ ,$</span>
</dd>
</dl>
</dd>
</dl>
<p>as found using <a href="Kirchhoff's_current_law" title="wikilink">Kirchhoff's current law</a> at the collector node of Q<sub>1</sub>:</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$I_\text{ref} = I_C + I_{B1} + I_{B2} .$</span>
</dd>
</dl>
</dd>
</dl>
<p>The reference current supplies the collector current to Q<sub>1</sub> and the base currents to both transistors — when both transistors have zero base-collector bias, the two base currents are equal, I<sub>B1</sub>=I<sub>B2</sub>=I<sub>B</sub>.</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$I_\text{ref} = I_C + I_B + I_B = I_C + 2 I_B = I_C \left(1 + \frac {2} {\beta_0} \right) \ ,$</span>
</dd>
</dl>
</dd>
</dl>
<p>Parameter β<sub>0</sub> is the transistor β-value for <em>V</em><sub>CB</sub> = 0 V.</p>
<h4 id="output-resistance">Output resistance</h4>
<p>If V<sub>BC</sub> is greater than zero in output transistor Q<sub>2</sub>, the collector current in Q<sub>2</sub> will be somewhat larger than for Q<sub>1</sub> due to the <a href="Early_effect" title="wikilink">Early effect</a>. In other words, the mirror has a finite output (or Norton) resistance given by the <em>r<sub>o</sub></em> of the output transistor, namely:</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$R_N = r_o = \frac{V_A + V_{CE}}{I_C}$</span>,
</dd>
</dl>
</dd>
</dl>
<p>where <em>V<sub>A</sub></em> = Early voltage and <em>V<sub>CE</sub></em> = collector-to-emitter voltage of output transistor.</p>
<h4 id="compliance-voltage">Compliance voltage</h4>
<p>To keep the output transistor active, <em>V<sub>CB</sub></em> ≥ 0 V. That means the lowest output voltage that results in correct mirror behavior, the compliance voltage, is <em>V<sub>OUT</sub></em> = <em>V<sub>CV</sub></em> = <em>V<sub>BE</sub></em> under bias conditions with the output transistor at the output current level <em>I<sub>C</sub></em> and with <em>V<sub>CB</sub></em> = 0 V or, inverting the <em>I-V</em> relation above:</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$V_{CV} = V_T \ln\left(\frac{I_C}{I_S} + 1\right) \ ,$</span>
</dd>
</dl>
</dd>
</dl>
<p>where <em>V<sub>T</sub></em> = <a href="Boltzmann_constant#Role_in_semiconductor_physics:_the_thermal_voltage" title="wikilink">thermal voltage</a> and <em>I<sub>S</sub></em> = reverse saturation current or scale current.</p>
<h4 id="extensions-and-complications">Extensions and complications</h4>
<p>When Q<sub>2</sub> has <em>V<sub>CB</sub></em> > 0 V, the transistors no longer are matched. In particular, their β-values differ due to the Early effect, with</p>
<dl>
<dd><dl>
<dd><math>\begin{align}
</math></dd>
</dl>
</dd>
</dl>
<p><code>   \beta_1 &= \beta_0 \\</code><br/>
<code>   \beta_2 &= \beta_0 \left(1 + \frac{V_{CB}}{V_A}\right)</code></p>
<p>\end{align}</p>
<p>where V<sub>A</sub> is the <a href="Early_effect" title="wikilink">Early voltage</a> and β<sub>0</sub> = transistor β for V<sub>CB</sub> = 0 V. Besides the difference due to the Early effect, the transistor β-values will differ because the β<sub>0</sub>-values depend on current, and the two transistors now carry different currents (see <a href="Gummel–Poon_model" title="wikilink">Gummel-Poon model</a>).</p>
<p>Further, Q<sub>2</sub> may get substantially hotter than Q<sub>1</sub> due to the associated higher power dissipation. To maintain matching, the temperature of the transistors must be nearly the same. In <a href="integrated_circuit" title="wikilink">integrated circuits</a> and transistor arrays where both transistors are on the same die, this is easy to achieve. But if the two transistors are widely separated, the precision of the current mirror is compromised.</p>
<p>Additional matched transistors can be connected to the same base and will supply the same collector current. In other words, the right half of the circuit can be duplicated several times with various resistor values replacing R<sub>2</sub> on each. Note, however, that each additional right-half transistor "steals" a bit of collector current from Q<sub>1</sub> due to the non-zero base currents of the right-half transistors. This will result in a small reduction in the programmed current.</p>
<p>See also an <a href="Two-port_network#Example:_bipolar_current_mirror_with_emitter_degeneration" title="wikilink">example of a mirror with emitter degeneration to increase mirror resistance</a>.</p>
<p>For the simple mirror shown in the diagram, typical values of <span class="LaTeX">$\beta$</span> will yield a current match of 1% or better.</p>
<figure><b>(Figure)</b>
<figcaption>Figure 2: An n-channel MOSFET current mirror with a resistor to set the reference current I<sub>REF</sub>; V<sub>DD</sub> is the supply voltage</figcaption>
</figure>
<h3 id="basic-mosfet-current-mirror">Basic MOSFET current mirror</h3>
<p>The basic current mirror can also be implemented using MOSFET transistors, as shown in Figure 2. Transistor <em>M</em><sub>1</sub> is operating in the <a href="MOSFET#Modes_of_operation" title="wikilink">saturation or active</a> mode, and so is <em>M</em><sub>2</sub>. In this setup, the output current <em>I</em><sub>OUT</sub> is directly related to <em>I</em><sub>REF</sub>, as discussed next.</p>
<p>The drain current of a MOSFET <em>I</em><sub>D</sub> is a function of both the gate-source voltage and the drain-to-gate voltage of the MOSFET given by <em>I</em><sub>D</sub> = <em>f</em> (<em>V</em><sub>GS</sub>, <em>V</em><sub>DG</sub>), a relationship derived from the functionality of the <a class="uri" href="MOSFET" title="wikilink">MOSFET</a> device. In the case of transistor <em>M</em><sub>1</sub> of the mirror, <em>I</em><sub>D</sub> = <em>I</em><sub>REF</sub>. Reference current <em>I</em><sub>REF</sub> is a known current, and can be provided by a resistor as shown, or by a "threshold-referenced" or "<a href="biasing" title="wikilink">self-biased</a>" current source to ensure that it is constant, independent of voltage supply variations.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>
<p>Using <em>V</em><sub>DG</sub>=0 for transistor <em>M</em><sub>1</sub>, the drain current in <em>M</em><sub>1</sub> is <em>I</em><sub>D</sub> = <em>f</em> (<em>V</em><sub>GS</sub>,<em>V</em><sub>DG</sub>=0), so we find: <em>f</em> (<em>V</em><sub>GS</sub>, 0) = <em>I</em><sub>REF</sub>, implicitly determining the value of <em>V</em><sub>GS</sub>. Thus <em>I</em><sub>REF</sub> sets the value of <em>V</em><sub>GS</sub>. The circuit in the diagram forces the same <em>V</em><sub>GS</sub> to apply to transistor <em>M</em><sub>2</sub>. If <em>M</em><sub>2</sub> is also biased with zero <em>V</em><sub>DG</sub> and provided transistors <em>M</em><sub>1</sub> and <em>M</em><sub>2</sub> have good matching of their properties, such as channel length, width, threshold voltage <em>etc.</em>, the relationship <em>I</em><sub>OUT</sub> = <em>f</em> (<em>V</em><sub>GS</sub>,<em>V</em><sub>DG</sub>=0 ) applies, thus setting <em>I</em><sub>OUT</sub> = <em>I</em><sub>REF</sub>; that is, the output current is the same as the reference current when <em>V</em><sub>DG</sub>=0 for the output transistor, and both transistors are matched.</p>
<p>The drain-to-source voltage can be expressed as <em>V</em><sub>DS</sub>=<em>V</em><sub>DG</sub> +<em>V</em><sub>GS</sub>. With this substitution, the Shichman-Hodges model provides an approximate form for function <em>f</em> (<em>V</em><sub>GS</sub>,<em>V</em><sub>DG</sub>):<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></p>
<dl>
<dd><dl>
<dd><math>\begin{align}
</math></dd>
</dl>
</dd>
</dl>
<p><code> I_{d} &= f(V_{GS},V_{DG}) \\</code><br/>
<code>       &= \frac{1}{2}K_{p}\left(\frac{W}{L}\right)(V_{GS} - V_{th})^2 (1 + \lambda V_{DS}) \\</code><br/>
<code>       &= \frac{1}{2}K_{p}\left[\frac{W}{L}\right][V_{GS} - V_{th}]^2 \left[1 + \lambda (V_{DG} + V_{GS})\right] \\</code></p>
<p>\end{align}</p>
<p>where, <span class="LaTeX">$K_p$</span> is a technology related constant associated with the transistor, <em>W/L</em> is the width to length ratio of the transistor, <em>V</em><sub>GS</sub> is the gate-source voltage, <em>V</em><sub>th</sub> is the threshold voltage, λ is the <a href="channel_length_modulation" title="wikilink">channel length modulation</a> constant, and <em>V</em><sub>DS</sub> is the drain source voltage.</p>
<h4 id="output-resistance-1">Output resistance</h4>
<p>Because of channel-length modulation, the mirror has a finite output (or Norton) resistance given by the <em>r<sub>o</sub></em> of the output transistor, namely (see <a href="channel_length_modulation" title="wikilink">channel length modulation</a>):</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$R_N = r_o = \frac{\frac{1}{\lambda}r + V_{DS}}{I_D} = \frac{V_{E} L + V_{DS}}{I_D}$</span>
</dd>
</dl>
</dd>
</dl>
<p>where <em>λ</em> = channel-length modulation parameter and <em>V<sub>DS</sub></em> = drain-to-source bias.</p>
<h4 id="compliance-voltage-1">Compliance voltage</h4>
<p>To keep the output transistor resistance high, <em>V<sub>DG</sub></em> ≥ 0 V.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> (see Baker).<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a> That means the lowest output voltage that results in correct mirror behavior, the compliance voltage, is <em>V<sub>OUT</sub></em> = <em>V<sub>CV</sub></em> = <em>V<sub>GS</sub></em> for the output transistor at the output current level with <em>V<sub>DG</sub></em> = 0 V, or using the inverse of the <em>f</em>-function, <em>f<sup> −1</sup></em>:</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$V_{CV} = V_{GS} (\text{for}\ I_D\ \text{at} \  V_{DG} = 0V) = f^{-1}(I_D) \ \text{with}\ V_{DG} = 0$</span>.
</dd>
</dl>
</dd>
</dl>
<p>For Shichman-Hodges model, <em>f<sup>−1</sup></em> is approximately a square-root function.</p>
<h4 id="extensions-and-reservations">Extensions and reservations</h4>
<p>A useful feature of this mirror is the linear dependence of <em>f</em> upon device width <em>W</em>, a proportionality approximately satisfied even for models more accurate than the Shichman-Hodges model. Thus, by adjusting the ratio of widths of the two transistors, multiples of the reference current can be generated.</p>
<p>It must be recognized that the Shichman-Hodges model<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> is accurate only for rather dated technology, although it often is used simply for convenience even today. Any quantitative design based upon new technology uses computer models for the devices that account for the changed current-voltage characteristics. Among the differences that must be accounted for in an accurate design is the failure of the square law in <em>V</em><sub>gs</sub> for voltage dependence and the very poor modeling of <em>V</em><sub>ds</sub> drain voltage dependence provided by λ<em>V</em><sub>ds</sub>. Another failure of the equations that proves very significant is the inaccurate dependence upon the channel length <em>L</em>. A significant source of <em>L</em>-dependence stems from λ, as noted by Gray and Meyer, who also note that λ usually must be taken from experimental data.<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a></p>
<p>Due to the wide variation of V<sub>th</sub> even within a particular device number discrete versions are problematic. Although the variation can be somewhat compensated for by using a Source degenerate resistor its value becomes so large that the output resistance suffers (i.e. reduces). This variation relegates the MOSFET version to the IC/monolithic arena.</p>
<h3 id="feedback-assisted-current-mirror">Feedback assisted current mirror</h3>
<p>  Figure 3 shows a mirror using <a href="negative_feedback" title="wikilink">negative feedback</a> to increase output resistance. Because of the op amp, these circuits are sometimes called <strong>gain-boosted current mirrors</strong>. Because they have relatively low compliance voltages, they also are called <strong>wide-swing current mirrors</strong>. A variety of circuits based upon this idea are in use,<a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a><a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a><a class="footnoteRef" href="#fn9" id="fnref9"><sup>9</sup></a> particularly for MOSFET mirrors because MOSFETs have rather low intrinsic output resistance values. A MOSFET version of Figure 3 is shown in Figure 4 where MOSFETs <em>M<sub>3</sub></em> and <em>M<sub>4</sub></em> operate in <a href="MOSFET#Modes_of_operation" title="wikilink">Ohmic mode</a> to play the same role as emitter resistors <em>R<sub>E</sub></em> in Figure 3, and MOSFETs <em>M<sub>1</sub></em> and <em>M<sub>2</sub></em> operate in active mode in the same roles as mirror transistors <em>Q<sub>1</sub></em> and <em>Q<sub>2</sub></em> in Figure 3. An explanation follows of how the circuit in Figure 3 works.</p>
<p>The operational amplifier is fed the difference in voltages <em>V<sub>1</sub> - V<sub>2</sub></em> at the top of the two emitter-leg resistors of value <em>R<sub>E</sub></em>. This difference is amplified by the op amp and fed to the base of output transistor <em>Q<sub>2</sub></em>. If the collector base reverse bias on <em>Q<sub>2</sub></em> is increased by increasing the applied voltage <em>V<sub>A</sub></em>, the current in <em>Q<sub>2</sub></em> increases, increasing <em>V<sub>2</sub></em> and decreasing the difference <em>V<sub>1</sub> - V<sub>2</sub></em> entering the op amp. Consequently, the base voltage of <em>Q<sub>2</sub></em> is decreased, and <em>V<sub>BE</sub></em> of <em>Q<sub>2</sub></em> decreases, counteracting the increase in output current.</p>
<p>If the op amp gain <em>A<sub>v</sub></em> is large, only a very small difference <em>V<sub>1</sub> - V<sub>2</sub></em> is sufficient to generate the needed base voltage <em>V<sub>B</sub></em> for <em>Q<sub>2</sub></em>, namely</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$V_1 - V_2 = \frac{V_B}{A_v} \ .$</span>
</dd>
</dl>
</dd>
</dl>
<p>Consequently, the currents in the two leg resistors are held nearly the same, and the output current of the mirror is very nearly the same as the collector current <em>I<sub>C1</sub></em> in <em>Q<sub>1</sub></em>, which in turn is set by the reference current as</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$I_\text{ref} = I_{C1} \left(1 + \frac{1}{\beta_1}\right) \ ,$</span>
</dd>
</dl>
</dd>
</dl>
<p>where β<sub>1</sub> for transistor <em>Q<sub>1</sub></em> and β<sub>2</sub> for <em>Q<sub>2</sub></em> differ due to the <a href="Early_effect" title="wikilink">Early effect</a> if the reverse bias across the collector-base of <em>Q<sub>2</sub></em> is non-zero.</p>
<figure><b>(Figure)</b>
<figcaption>Figure 5: Small-signal circuit to determine output resistance of mirror; transistor Q<sub>2</sub> is replaced with its <a href="hybrid-pi_model" title="wikilink">hybrid-pi model</a>; a test current <em>I</em><sub>X</sub> at the output generates a voltage <em>V</em><sub>X</sub>, and the output resistance is <em>R</em><sub>out</sub> = <em>V</em><sub>X</sub> / <em>I</em><sub>X</sub>.</figcaption>
</figure>
<h4 id="output-resistance-2">Output resistance</h4>
<p>An idealized treatment of output resistance is given in the footnote.<ref group="nb">An idealized version of the argument in the text, valid for infinite op amp gain, is as follows. If the op amp is replaced by a <a class="uri" href="nullor" title="wikilink">nullor</a>, voltage <em>V</em><sub>2</sub> = <em>V</em><sub>1</sub>, so the currents in the leg resistors are held at the same value. That means the emitter currents of the transistors are the same. If the <em>V</em><sub>CB</sub> of Q<sub>2</sub> increases, so does the output transistor β because of the <a href="Early_effect" title="wikilink">Early effect</a>: β = β<sub>0</sub> ( 1 + <em>V</em><sub>CB</sub> / <em>V</em><sub>A</sub> ). Consequently the base current to Q<sub>2</sub> given by <em>I</em><sub>B</sub> = <em>I</em><sub>E</sub> / (β + 1) decreases and the output current <em>I</em><sub>out</sub> = <em>I</em><sub>E</sub> / (1 + 1 / β) increases slightly because β increases slightly. Doing the math,</ref></p>
<dl>
<dd><dl>
<dd><math>\begin{align}
</math></dd>
</dl>
</dd>
</dl>
<p><code> \frac {1}{R_\text{out}} &= \frac{ \partial I_{out} }{ \partial V_{CB} } = I_E \frac{\partial}{\partial V_{CB}} \left(\frac{\beta}{\beta + 1}\right) = I_E \left(\frac{1}{(\beta + 1)^2}\right) \frac{\partial\beta}{\partial V_{CB}} \\</code><br/>
<code>                         &= \left(\frac{\beta I_E} {\beta + 1}\right) \left(\frac{1}{\beta}\right) \left(\frac{\beta_0}{V_A}\right) \left(\frac{1}{\beta + 1}\right) \\</code><br/>
<code>                         &= I_\text{out} \left(\frac{1}{1 + \frac{V_{CB}}{V_A}}\right) \left(\frac{1}{V_A}\right) \left(\frac{1}{\beta + 1}\right) \\</code><br/>
<code>                         &= \frac{1}{(\beta + 1) r_0} \ ,</code></p>
<p>\end{align}</p>
<p>where the transistor output resistance is given by r<sub>O</sub> = ( <em>V</em><sub>A</sub> + <em>V</em><sub>CB</sub> ) / <em>I</em><sub>out</sub>. That is, the ideal mirror resistance for the circuit using an ideal op amp <a class="uri" href="nullor" title="wikilink">nullor</a> is <em>R</em><sub>out</sub> = ( β + 1 ) r<sub>O</sub>, in agreement with the value given later in the text when the gain → ∞. A small-signal analysis for an op amp with finite gain <em>A</em><sub>v</sub> but otherwise ideal is based upon Figure 5 (β, r<sub>O</sub> and <em>r<sub>π</sub></em> refer to <em>Q<sub>2</sub></em>). To arrive at Figure 5, notice that the positive input of the op amp in Figure 3 is at AC ground, so the voltage input to the op amp is simply the AC emitter voltage <em>V</em><sub>e</sub> applied to its negative input, resulting in a voltage output of −<em>A</em><sub>v</sub> <em>V</em><sub>e</sub>. Using <a href="Ohm's_law" title="wikilink">Ohm's law</a> across the input resistance r<sub>π</sub> determines the small-signal base current <em>I</em><sub>b</sub> as:</p>
<p><span class="LaTeX">$$I_b = \frac{V_e}\frac{r_\pi}{A_v + 1} \ .$$</span></p>
<p>Combining this result with Ohm's law for <em>R</em><sub>E</sub>, <em>V</em><sub>e</sub> can be eliminated, to find:<a class="footnoteRef" href="#fn10" id="fnref10"><sup>10</sup></a></p>
<p><span class="LaTeX">$$I_b = I_X \frac{R_E}{ R_E + \frac{r_\pi}{A_v + 1} } \ .$$</span></p>
<p><a href="Kirchhoff's_voltage_law" title="wikilink">Kirchhoff's voltage law</a> from the test source <em>I</em><sub>X</sub> to the ground of <em>R</em><sub>E</sub> provides:</p>
<p><span class="LaTeX">$$V_X = (I_X + \beta I_b) r_O + (I_X - I_b )R_E \ .$$</span></p>
<p>Substituting for <em>I</em><sub>b</sub> and collecting terms the output resistance <em>R</em><sub>out</sub> is found to be:</p>
<p><span class="LaTeX">$$R_\text{out} = \frac{V_X}{I_X} = r_O \left( 1 + \beta \frac{R_E}{R_E + \frac{r_\pi}{A_v + 1}} \right) + R_E\|\frac{r_\pi}{A_v + 1} \ .$$</span></p>
<p>For a large gain <em>A<sub>v</sub> >> r<sub>π</sub> / R<sub>E</sub></em> the maximum output resistance obtained with this circuit is</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$R_\text{out} = (\beta + 1)r_O \ ,$</span>
</dd>
</dl>
</dd>
</dl>
<p>a substantial improvement over the basic mirror where ''R<sub>out</sub> = <em>r<sub>O</sub></em>.</p>
<p>The small-signal analysis of the MOSFET circuit of Figure 4 is obtained from the bipolar analysis by setting β = <em>g<sub>m</sub> r<sub>π</sub></em> in the formula for <em>R<sub>out</sub></em> and then letting <em>r<sub>π</sub></em> → ∞. The result is</p>
<dl>
<dd><dl>
<dd><span class="LaTeX">$R_\text{out} = r_O \left(1 + g_m R_E(A_v + 1)\right) + R_E \ .$</span>
</dd>
</dl>
</dd>
</dl>
<p>This time, <em>R<sub>E</sub></em> is the resistance of the source-leg MOSFETs M<sub>3</sub>, M<sub>4</sub>. Unlike Figure 3, however, as <em>A<sub>v</sub></em> is increased (holding <em>R<sub>E</sub></em> fixed in value), <em>R<sub>out</sub></em> continues to increase, and does not approach a limiting value at large <em>A<sub>v</sub></em>.</p>
<h4 id="compliance-voltage-2">Compliance voltage</h4>
<p>For Figure 3, a large op amp gain achieves the maximum <em>R<sub>out</sub></em> with only a small <em>R<sub>E</sub></em>. A low value for <em>R<sub>E</sub></em> means <em>V<sub>2</sub></em> also is small, allowing a low compliance voltage for this mirror, only a voltage <em>V<sub>2</sub></em> larger than the compliance voltage of the simple bipolar mirror. For this reason this type of mirror also is called a <em>wide-swing current mirror</em>, because it allows the output voltage to swing low compared to other types of mirror that achieve a large <em>R<sub>out</sub></em> only at the expense of large compliance voltages.</p>
<p>With the MOSFET circuit of Figure 4, like the circuit in Figure 3, the larger the op amp gain <em>A<sub>v</sub></em>, the smaller <em>R<sub>E</sub></em> can be made at a given <em>R<sub>out</sub></em>, and the lower the compliance voltage of the mirror.</p>
<h3 id="other-current-mirrors">Other current mirrors</h3>
<p>There are many sophisticated current mirrors that have higher <a href="output_impedance" title="wikilink">output resistances</a> than the basic mirror (more closely approach an ideal mirror with current output independent of output voltage) and produce currents less sensitive to temperature and device parameter <a href="Design_for_manufacturability_(IC)" title="wikilink">variations</a> and to circuit voltage fluctuations. These multi-transistor mirror circuits are used both with bipolar and MOS transistors. These circuits include:</p>
<ul>
<li>the <a href="Widlar_current_source" title="wikilink">Widlar current source</a></li>
<li>the <a href="Wilson_current_source" title="wikilink">Wilson current source</a></li>
<li>the Cascoded current sources</li>
</ul>
<h2 id="notes">Notes</h2>
<references group="nb">
</references>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Current_source" title="wikilink">Current source</a></li>
<li><a href="Widlar_current_source" title="wikilink">Widlar current source</a></li>
<li><a href="Wilson_current_mirror" title="wikilink">Wilson current mirror</a></li>
<li><a href="Bipolar_junction_transistor" title="wikilink">Bipolar junction transistor</a></li>
<li><a class="uri" href="MOSFET" title="wikilink">MOSFET</a></li>
<li></li>
<li><a href="Channel_length_modulation" title="wikilink">Channel length modulation</a></li>
<li><a href="Early_effect" title="wikilink">Early effect</a></li>
</ul>
<h2 id="references">References</h2>
<references>
</references>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://www.4qdtec.com/csm.html">4QD tec - Current sources and mirrors</a> Compendium of circuits and descriptions</li>
</ul>
<p>"</p>
<p><a href="Category:Analog_circuits" title="wikilink">Category:Analog circuits</a> <a href="Category:Electronic_design" title="wikilink">Category:Electronic design</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2"><a href="#fnref2">↩</a></li>
<li id="fn3">Keeping the output resistance high means more than keeping the MOSFET in active mode, because the output resistance of real MOSFETs only begins to increase on entry into the active region, then rising to become close to maximum value only when <em>V<sub>DG</sub></em> ≥ 0 V.<a href="#fnref3">↩</a></li>
<li id="fn4"><a href="#fnref4">↩</a></li>
<li id="fn5"><a href="http://www.nanodottek.com/NDT14_08_2007.pdf">NanoDotTek Report NDT14-08-2007, 12 August 2007</a><a href="#fnref5">↩</a></li>
<li id="fn6"><a href="#fnref6">↩</a></li>
<li id="fn7"><a href="#fnref7">↩</a></li>
<li id="fn8"><a href="#fnref8">↩</a></li>
<li id="fn9"><a href="#fnref9">↩</a></li>
<li id="fn10">Notice that as <em>A</em><sub>v</sub> → ∞, <em>V</em><sub>e</sub> → 0 and <em>I</em><sub>b</sub> → ''I<sub>X</sub>.<a href="#fnref10">↩</a></li>
</ol>
</section>
</body>
</html>
