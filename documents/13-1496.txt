   Statistical association football predictions      Statistical association football predictions   Statistical Football prediction is a method used in sports betting , to predict the outcome of football (soccer) matches by means of statistical tools. The goal of statistical match prediction is to outperform the predictions of bookmakers , who use them to set odds on the outcome of football matches.  The most widely used statistical approach to prediction is ranking . Football ranking systems assign a rank to each team based on their past game results, so that the highest rank is assigned to the strongest team. The outcome of the match can be predicted by comparing the opponents’ ranks. Today, eight different football ranking systems exist: FIFA World Rankings , World Football Elo Ratings , AQB Sports Ratings, The Roon Ba , InternationalMark , Rsoccer , Mondfoot and Chance de Gol .  There are three main drawbacks to football match predictions that are based on ranking systems:   Ranks assigned to the teams do not differentiate between their attacking and defensive strengths.  Ranks are accumulated averages which do not account for skill changes in football teams.  The main goal of a ranking system is not to predict the results of football games, but to sort the teams according to their average strength.   Another approach to football prediction is known as rating systems .While ranking refers only to team order, rating systems assign to each team a continuously scaled strength indicator. Moreover, rating can be assigned not only to a team but to its attacking and defensive strengths, home field advantage or even to the skills of each team player (according to Stern 1 ). An example of a football rating system is the pi-rating system 2 which provides relative measures of superiority between football teams (also applicable to other sports), and which is said to outperform considerably (in terms of profitability against the betting market) the widely accepted Elo rating system.  History  Publications about statistical models for football predictions started appearing from the 90s, but the first model was proposed much earlier by Moroney, 3 who published his first statistical analysis of soccer match results in 1956. According to his analysis, both Poisson distribution and negative binomial distribution provided an adequate fit to results of football games. The series of ball passing between players during football matches was successfully analyzed using negative binomial distribution by Reep and Benjamin 4 in 1968. They improved this method in 1971, and in 1974 Hill 5 indicated that soccer game results are to some degree predictable and not simply a matter of chance.  The first model predicting outcomes of football matches between teams with different skills was proposed by Michael Maher 6 in 1982. According to his model, the goals, which the opponents score during the game, are drawn from the Poisson distribution . The model parameters are defined by the difference between attacking and defensive skills, adjusted by the home field advantage factor. The methods for modeling the home field advantage factor were summarized in an article by Caurneya and Carron 7 in 1992. Time-dependency of team strengths was analyzed by Knorr-Held 8 in 1999. He used recursive Bayesian estimation to rate football teams: this method was more realistic in comparison to soccer prediction based on common average statistics.  Football Prediction Methods  All the prediction methods can be categorized according to tournament type, time-dependence and regression algorithm. Football prediction methods vary between Round-robin tournament and Knockout competition . The methods for Knockout competition are summarized in an article by Diego Kuonen. 9  The table below summarizes the methods related to Round-robin tournament .           Code   Prediction Method   Regression Algorithm   Time Dependence   Performance       1.   TILS   Time Independent Least Squares Rating   Linear Least Squares Regression   No   Poor     2.   TIPR   Time Independent Poisson Regression   Maximum Likelihood   No   Medium     3.   TISR   Time Independent Skellam Regression   Maximum Likelihood   No   Medium     4.   TDPR   Time-Dependent Poisson Regression   Maximum Likelihood   Time dumping factor   High     5.   TDMC   Time-Dependent Markov Chain   Monte-Carlo   Markov Chain model   High       Time Independent Least Squares Rating  This method intends to assign to each team in the tournament a continuously scaled rating value, so that the strongest team will have the highest rating. The method is based on the assumption that the rating assigned to the rival teams is proportional to the outcome of each match.  Assume that the teams A, B, C and D are playing in a tournament and the match outcomes are as follows:        Match #   Home Team   Score   Away Team   Y       1   A   3 - 1   B        y  1   =   3  -  1        subscript  y  1     3  1     y_{1}=3-1        2   C   2 - 1   D        y  2   =   2  -  1        subscript  y  2     2  1     y_{2}=2-1        3   D   1 - 4   B        y  3   =   1  -  4        subscript  y  3     1  4     y_{3}=1-4        4   A   3 - 1   D        y  4   =   3  -  1        subscript  y  4     3  1     y_{4}=3-1        5   B   2 - 0   C        y  5   =   2  -  0        subscript  y  5     2  0     y_{5}=2-0          Though the ratings    r  A     subscript  r  A    r_{A}   ,    r  B     subscript  r  B    r_{B}   ,    r  C     subscript  r  C    r_{C}   and    r  D     subscript  r  D    r_{D}   of teams A, B, C and D respectively are unknown, it may be assumed that the outcome of match #1 is proportional to the difference between the ranks of teams A and B     y  1   =     r  A   -   r  B    +   ε  1         subscript  y  1        subscript  r  A    subscript  r  B     subscript  ε  1      y_{1}=r_{A}-r_{B}+\varepsilon_{1}   . In this way,    y  1     subscript  y  1    y_{1}   corresponds to the score difference and    ε  1     subscript  ε  1    \varepsilon_{1}   is the noise observation. The same assumption can be made for all the matches in the tournament:          y  1   =     r  A   -   r  B    +   ε  1           y  2   =     r  C   -   r  D    +   ε  2         …        y  5   =     r  B   -   r  C    +   ε  5              subscript  y  1        subscript  r  A    subscript  r  B     subscript  ε  1          subscript  y  2        subscript  r  C    subscript  r  D     subscript  ε  2       normal-…       subscript  y  5        subscript  r  B    subscript  r  C     subscript  ε  5        \begin{matrix}y_{1}=r_{A}-r_{B}+\varepsilon_{1}\\
 y_{2}=r_{C}-r_{D}+\varepsilon_{2}\\
 ...\\
 y_{5}=r_{B}-r_{C}+\varepsilon_{5}\\
 \end{matrix}     By introducing a selection matrix X, the equations above can be rewritten in a compact form:      𝐲  =   𝐗𝐫  +  𝐞       𝐲    𝐗𝐫  𝐞     \mathbf{y}=\mathbf{Xr}+\mathbf{e}   Entries of the selection matrix can be either 1, 0 or -1, with 1 corresponding to home teams and -1 to away teams:          𝐲  =   [     2      1       -  3       2      2     ]    ,       𝐗  =   [     1     -  1     0    0      0    0    1     -  1       0     -  1     0    1      1    0    0     -  1       0    1     -  1     0     ]    ,       𝐫  =   [      r  A        r  B        r  C        r  D      ]    ,      𝐞  =   [      ε  1        ε  2        ε  3        ε  4        ε  5      ]            𝐲   delimited-[]    2    1      3     2    2        𝐗   delimited-[]    1    1   0  0    0  0  1    1     0    1   0  1    1  0  0    1     0  1    1   0        𝐫   delimited-[]     subscript  r  A      subscript  r  B      subscript  r  C      subscript  r  D         𝐞   delimited-[]     subscript  ε  1      subscript  ε  2      subscript  ε  3      subscript  ε  4      subscript  ε  5          \begin{matrix}\mathbf{y}=\left[\begin{matrix}2\\
 1\\
 -3\\
 2\\
 2\\
 \end{matrix}\right],&\mathbf{X}=\left[\begin{matrix}1&-1&0&0\\
 0&0&1&-1\\
 0&-1&0&1\\
 1&0&0&-1\\
 0&1&-1&0\\
 \end{matrix}\right],&\mathbf{r}=\left[\begin{matrix}r_{A}\\
 r_{B}\\
 r_{C}\\
 r_{D}\\
 \end{matrix}\right],&\mathbf{e}=\left[\begin{matrix}\varepsilon_{1}\\
 \varepsilon_{2}\\
 \varepsilon_{3}\\
 \varepsilon_{4}\\
 \varepsilon_{5}\\
 \end{matrix}\right]\\
 \end{matrix}     If the matrix     𝐗  T   𝐗       superscript  𝐗  T   𝐗    \mathbf{X}^{T}\mathbf{X}   has full rank, the algebraic solution of the system may be found via the Least squares method:      𝐫  =     (    𝐗  T   𝐗   )    -  1     𝐗  T   𝐲       𝐫     superscript     superscript  𝐗  T   𝐗     1     superscript  𝐗  T   𝐲     \mathbf{r}=\left(\mathbf{X}^{T}\mathbf{X}\right)^{-1}\mathbf{X}^{T}\mathbf{y}     If not, one can use the Moore–Penrose pseudoinverse to get:      𝐫  =    𝐗  +   𝐲       𝐫     superscript  𝐗    𝐲     \mathbf{r}=\mathbf{X}^{+}\mathbf{y}     The final rating parameters are     𝐫  =    [  1.625  ,  0.75  ,   -  0.875   ,   -  1.5   ]   T    .      𝐫   superscript   1.625  0.75    0.875     1.5    T     \mathbf{r}=[1.625,\ 0.75,\ -0.875,\ -1.5]^{T}.   In this case, the strongest team has the highest rating. The advantage of this rating method compared to the standard ranking systems is that the numbers are continuously scaled, defining the precise difference between the teams’ strengths.  Time-Independent Poisson Regression  According to this model (Maher 10 ), if    X   i  ,  j      subscript  X   i  j     X_{i,j}   and    Y   i  ,  j      subscript  Y   i  j     Y_{i,j}   are the goals scored in the match where team i plays against team j, then:      X   i  ,  j      subscript  X   i  j     \displaystyle X_{i,j}       X   i  ,  j      subscript  X   i  j     X_{i,j}   and    Y   i  ,  j      subscript  Y   i  j     Y_{i,j}   are independent random variables with means   λ   λ   \lambda   and   μ   μ   \mu   . Thus, the joint probability of the home team scoring x goals and the away team scoring y goals is a product of the two independent probabilities:      P   (   X   i  ,  j    =  x  ,   Y   i  ,  j    =  y  )   =     λ  x    exp   (   -  λ   )      x  !       μ  y    exp   (   -  μ   )      y  !       fragments  P   fragments  normal-(   subscript  X   i  j     x  normal-,   subscript  Y   i  j     y  normal-)         superscript  λ  x       λ       x         superscript  μ  y       μ       y      P\left(X_{i,j}=x,Y_{i,j}=y\right)=\frac{\lambda^{x}\exp(-\lambda)}{x!}\frac{%
 \mu^{y}\exp(-\mu)}{y!}     while the generalized log-linear model for   λ   λ   \lambda   and   μ   μ   \mu   according to Kuonen 11 and Lee 12 is defined as     log   (  λ  )    =      c  λ   +   a  i    -   d  j    +  h         λ          superscript  c  λ    subscript  a  i     subscript  d  j    h     \log\left(\lambda\right)=c^{\lambda}+a_{i}-d_{j}+h   and     log   (  μ  )    =     c  μ   +   a  j    -   d  i          μ        superscript  c  μ    subscript  a  j     subscript  d  i      \log\left(\mu\right)=c^{\mu}+a_{j}-d_{i}   , where      a  i   ,   d  i   ,  h   >  0        subscript  a  i    subscript  d  i   h   0    a_{i},d_{i},h>0   refers to attacking and defensive strengths and to home field advantage respectively.    c  λ     superscript  c  λ    c^{\lambda}   and    c  μ     superscript  c  μ    c^{\mu}   are correction factors which represent the means of goals scored during the season by home and away teams.  Assuming that C signifies the number of teams participating in a season and N stands for the number of matches played until now, the team strengths can be estimated by minimizing the negative log-likelihood function with respect to   λ   λ   \lambda   and   μ   μ   \mu   :      L   (   a  i   ,   d  i   ,  h  ;  i  =  1  ,  .  .  C  )   =  -  log    ∏   n  =  1   N        λ  n   x  n     exp   (   -   λ  n    )       x  n   !         μ  n   y  n     exp   (   -   μ  n    )       y  n   !        fragments  L   fragments  normal-(   subscript  a  i   normal-,   subscript  d  i   normal-,  h  normal-;  i   1  normal-,  normal-.  normal-.  C  normal-)       superscript   subscript  product    n  1    N        superscript   subscript  λ  n    subscript  x  n         subscript  λ  n         subscript  x  n          superscript   subscript  μ  n    subscript  y  n         subscript  μ  n         subscript  y  n       \displaystyle L(a_{i},d_{i},h;\ i=1,..C)=-\log\prod\limits_{n=1}^{N}{\frac{%
 \lambda_{n}^{x_{n}}\exp(-\lambda_{n})}{x_{n}!}\frac{\mu_{n}^{y_{n}}\exp(-\mu_{%
 n})}{y_{n}!}}     Given that    x  n     subscript  x  n    x_{n}   and    y  n     subscript  y  n    y_{n}   are known, the team attacking and defensive strengths    (   a  i   ,   d  i   )      subscript  a  i    subscript  d  i     \left(a_{i},d_{i}\right)   and home ground advantage    (  h  )    h   \left(h\right)   that minimize the negative log-likelihood can be estimated by Expectation Maximization :        min    a  i   ,   d  i   ,  h     L   (   a  i   ,   d  i   ,  h  ,  i  =  1  ,  .  .  C  )      fragments     subscript  a  i    subscript  d  i   h     L   fragments  normal-(   subscript  a  i   normal-,   subscript  d  i   normal-,  h  normal-,  i   1  normal-,  normal-.  normal-.  C  normal-)     \underset{a_{i},d_{i},h}{\mathop{\min}}\,L(a_{i},d_{i},h,i=1,..C)     Improvements for this model were suggested by Mark Dixon (statistician) and Stuart Coles. 13 They invented a correlation factor for low scores 0-0, 1-0, 0-1 and 1-1, where the independent Poisson model doesn't hold. Dimitris Karlis and Ioannis Ntzoufras 14 built a Time-Independent Skellam distribution model. Unlike the Poisson model that fits the distribution of scores, the Skellam model fits the difference between home and away scores.  Time-Dependent Markov Chain Monte Carlo  On the one hand, statistical models require a large number of observations to make an accurate estimation of its parameters. And when there are not enough observations available during a season (as is usually the situation), working with average statistics makes sense. On the other hand, it is well known that team skills change during the season, making model parameters time-dependent. Mark Dixon (statistician) and Coles 15 tried to solve this trade-off by assigning a larger weight to the latest match results. Rue and Salvesen 16 introduced a novel time-dependent rating method using the Markov Chain model.  They suggested modifying the generalized linear model above for   λ   λ   \lambda   and   μ   μ   \mu   :       log   (  λ  )    =     c  λ   +   a  i    -   d  j   -   γ  ⋅   Δ   i  ,  j            λ        superscript  c  λ    subscript  a  i     subscript  d  j    normal-⋅  γ   subscript  normal-Δ   i  j        \displaystyle\log\left(\lambda\right)=c^{\lambda}+a_{i}-d_{j}-\gamma\cdot%
 \Delta_{i,j}     given that     Δ   i  ,  j    =     (    a  i   -   d  j    )   +   (    d  i   -   a  j    )    2        subscript  normal-Δ   i  j           subscript  a  i    subscript  d  j       subscript  d  i    subscript  a  j     2     \Delta_{i,j}=\frac{\left(a_{i}-d_{j}\right)+\left(d_{i}-a_{j}\right)}{2}   corresponds to the strength difference between teams i and j. The parameter    γ  >  0      γ  0    \gamma>0   then represents the psychological effects caused by underestimation of the opposing teams’ strength.  According to the model, the attacking strength    (  a  )    a   \left(a\right)   of team A can be described by the standard equations of Brownian motion,     B   a  ,  A     (  t  )        subscript  B   a  A    t    B_{a,A}\left(t\right)   , for time     t  1   >   t  0        subscript  t  1    subscript  t  0     t_{1}>t_{0}   :       a  A   t  1    =    a  A   t  0    +    (     B   a  ,  A     (    t  1   /  τ   )    -    B   a  ,  A     (    t  0   /  τ   )     )   ⋅    σ   a  ,  A      1  -   γ   (   1  -   γ  /   2     )              superscript   subscript  a  A    subscript  t  1       superscript   subscript  a  A    subscript  t  0     normal-⋅       subscript  B   a  A       subscript  t  1   τ       subscript  B   a  A       subscript  t  0   τ        subscript  σ   a  A        1    γ    1    γ  2            a_{A}^{t_{1}}=a_{A}^{t_{0}}+\left(B_{a,A}\left(t_{1}/\tau\right)-B_{a,A}\left(%
 t_{0}/\tau\right)\right)\cdot\frac{\sigma_{a,A}}{\sqrt{1-\gamma\left(1-{\gamma%
 }/{2}\;\right)}}     where   τ   τ   \tau   and    σ   a  ,  A   2     superscript   subscript  σ   a  A    2    \sigma_{a,A}^{2}   refer to the loss of memory rate and to the prior attack variance respectively.  This model is based on the assumption that:       a  A   t  1    |    a  A   t  0     ∼  N   (   a  A   t  0    ,     t  1   -   t  0    τ    σ   a  ,  A   2   )      fragments   superscript   subscript  a  A    subscript  t  1    normal-|   superscript   subscript  a  A    subscript  t  0    similar-to  N   fragments  normal-(   superscript   subscript  a  A    subscript  t  0    normal-,       subscript  t  1    subscript  t  0    τ    superscript   subscript  σ   a  A    2   normal-)     {a_{A}^{t_{1}}}|{a_{A}^{t_{0}}}\;\sim N\left(a_{A}^{t_{0}},\ \frac{t_{1}-t_{0}%
 }{\tau}\sigma_{a,A}^{2}\right)     Assuming that three teams A, B and C are playing in the tournament and the matches are played in the following order    t  0     subscript  t  0    t_{0}   : A-B;    t  0     subscript  t  0    t_{0}   : A-C;    t  1     subscript  t  1    t_{1}   : B-C, the joint probability density can be expressed as:       P   (   a  i   ,   d  i   ,  γ  ,  τ  ;  A  ,  B  ,  C  )    =       P   (   λ  A   ,   t  0   )    ⋅  P    (   λ  B   ,   t  0   )    ⋅  P    (   λ  C   ,   t  0   )          P    subscript  a  i    subscript  d  i   γ  τ  A  B  C       normal-⋅     normal-⋅    P    subscript  λ  A    subscript  t  0     P     subscript  λ  B    subscript  t  0     P     subscript  λ  C    subscript  t  0       \displaystyle P(a_{i},d_{i},\gamma,\,\tau;\ A,B,C)=P\left(\lambda_{A},t_{0}%
 \right)\cdot P\left(\lambda_{B},t_{0}\right)\cdot P\left(\lambda_{C},t_{0}\right)     Since analytical estimation of the parameters is difficult in this case, the Monte Carlo method is applied to estimate the parameters of the model.  References  "  Category:Association football records and statistics  Category:Association football rankings      ↩                   