   Eight-point algorithm      Eight-point algorithm   The eight-point algorithm is an algorithm used in computer vision to estimate the essential matrix or the fundamental matrix related to a stereo camera pair from a set of corresponding image points. It was introduced by Christopher Longuet-Higgins in 1981 for the case of the essential matrix. In theory, this algorithm can be used also for the fundamental matrix, but in practice the normalized eight-point algorithm , described by Richard Hartley in 1997, is better suited for this case.  The algorithm's name derives from the fact that it estimates the essential matrix or the fundamental matrix from a set of eight (or more) corresponding image points. However, variations of the algorithm can be used for fewer than eight points.  Coplanarity constraint  One may express the epipolar geometry of two cameras and a point in space with an algebraic equation. Observe that, no matter where the point   P   P   P   is in space, the vectors      O  L   P   ¯     normal-¯     subscript  O  L   P     \overline{O_{L}P}   ,      O  R   P   ¯     normal-¯     subscript  O  R   P     \overline{O_{R}P}   and      O  R    O  L    ¯     normal-¯     subscript  O  R    subscript  O  L      \overline{O_{R}O_{L}}   belong to the same plane. Call    X  L     subscript  X  L    X_{L}   the coordinates of point   P   P   P   in the left eye's reference frame and call    X  R     subscript  X  R    X_{R}   the coordinates of   P   P   P   in the right eye's reference frame and call    R  ,  T     R  T    R,T   the rotation and translation between the two reference frames s.t.     X  R   =   R   (    X  L   -  T   )         subscript  X  R     R     subscript  X  L   T      X_{R}=R(X_{L}-T)   is the relationship between the coordinates of   P   P   P   in the two reference frames. The following equation always equals to zero because the vector generated from    T  ∧   X  L       T   subscript  X  L     T\wedge X_{L}   is orthogonal to both   T   T   T   and    X  L     subscript  X  L    X_{L}   :           X  L  T   T   ∧   X  L    -    T  T   T    ∧   X  L    =      (    X  L   -  T   )   T   T   ∧   X  L    =  0                 superscript   subscript  X  L   T   T    subscript  X  L       superscript  T  T   T     subscript  X  L         superscript     subscript  X  L   T   T   T    subscript  X  L         0     X_{L}^{T}T\wedge X_{L}-T^{T}T\wedge X_{L}=(X_{L}-T)^{T}T\wedge X_{L}=0     Because    I  =    R  T   R       I     superscript  R  T   R     I=R^{T}R   , we get          (    X  L   -  T   )   T    R  T   R  T   ∧   X  L    =  0           superscript     subscript  X  L   T   T    superscript  R  T   R  T    subscript  X  L    0    (X_{L}-T)^{T}R^{T}RT\wedge X_{L}=0   .  Replacing      (    X  L   -  T   )   T    R  T        superscript     subscript  X  L   T   T    superscript  R  T     (X_{L}-T)^{T}R^{T}   with    X  R     subscript  X  R    X_{R}   , we get         X  R  T   R  T   ∧   X  L    =    X  R  T   R  S   X  L    =    X  R  T   E   X  L    =  0             superscript   subscript  X  R   T   R  T    subscript  X  L       superscript   subscript  X  R   T   R  S   subscript  X  L            superscript   subscript  X  R   T   E   subscript  X  L         0     X_{R}^{T}RT\wedge X_{L}=X_{R}^{T}RSX_{L}=X_{R}^{T}EX_{L}=0     Observe that    T  ∧     limit-from  T     T\wedge   may be thought of as a matrix; Longuet-Higgins used the symbol   S   S   S   to denote it. The product       R  T   T   ∧   =   R  S        limit-from     superscript  R  T   T       R  S     R^{T}T\wedge=RS   is often called essential matrix and denoted with   E   E   E   .  The vectors       O  L    p  L    ¯   ,     O  R    p  R    ¯       normal-¯     subscript  O  L    subscript  p  L      normal-¯     subscript  O  R    subscript  p  R       \overline{O_{L}p_{L}},\overline{O_{R}p_{R}}   are parallel to the vectors       O  L   P   ¯   ,     O  R   p   ¯       normal-¯     subscript  O  L   P     normal-¯     subscript  O  R   p      \overline{O_{L}P},\overline{O_{R}p}   and therefore the coplanarity constraint holds if we substitute these vectors. If we call    y  ,   y  ′      y   superscript  y  normal-′     y,y^{\prime}   the coordinates of the projections of   P   P   P   onto the left and right image planes, then the coplanarity constraint may be written as        y   ′  T    𝐄  y   =  0         superscript  y   normal-′  T    𝐄  y   0    y^{\prime T}\mathbf{E}y=0     The basic algorithm  The basic eight-point algorithm is here described for the case of estimating the essential matrix   𝐄   𝐄   \mathbf{E}   . It consists of three steps. First, it formulates a homogeneous linear equation , where the solution is directly related to   𝐄   𝐄   \mathbf{E}   , and then solves the equation, taking into account that it may not have an exact solution. Finally, the internal constraints of the resulting matrix are managed. The first step is described in Longuet-Higgins' paper, the second and third steps are standard approaches in estimation theory.  The constraint defined by the essential matrix   𝐄   𝐄   \mathbf{E}   is          (   𝐲  ′   )   T     𝐄   𝐲   =  0         superscript   superscript  𝐲  normal-′   T   𝐄  𝐲   0    (\mathbf{y}^{\prime})^{T}\,\mathbf{E}\,\mathbf{y}=0     for corresponding image points represented in normalized image coordinates    𝐲  ,   𝐲  ′      𝐲   superscript  𝐲  normal-′     \mathbf{y},\mathbf{y}^{\prime}   . The problem which the algorithm solves is to determine   𝐄   𝐄   \mathbf{E}   for a set of matching image points. In practice, the image coordinates of the image points are affected by noise and the solution may also be over-determined which means that it may not be possible to find   𝐄   𝐄   \mathbf{E}   which satisfies the above constraint exactly for all points. This issue is addressed in the second step of the algorithm.  Step 1: Formulating a homogeneous linear equation  With      𝐲  =   (      y  1        y  2       1     )       𝐲     subscript  y  1      subscript  y  2     1      \mathbf{y}=\begin{pmatrix}y_{1}\\
 y_{2}\\
 1\end{pmatrix}   and     𝐲  ′   =   (      y  1  ′        y  2  ′       1     )        superscript  𝐲  normal-′      subscript   superscript  y  normal-′   1      subscript   superscript  y  normal-′   2     1      \mathbf{y}^{\prime}=\begin{pmatrix}y^{\prime}_{1}\\
 y^{\prime}_{2}\\
 1\end{pmatrix}   and    𝐄  =   (      e  11      e  12      e  13        e  21      e  22      e  23        e  31      e  32      e  33      )       𝐄     subscript  e  11    subscript  e  12    subscript  e  13      subscript  e  21    subscript  e  22    subscript  e  23      subscript  e  31    subscript  e  32    subscript  e  33       \mathbf{E}=\begin{pmatrix}e_{11}&e_{12}&e_{13}\\
 e_{21}&e_{22}&e_{23}\\
 e_{31}&e_{32}&e_{33}\end{pmatrix}     the constraint can also be rewritten as         y  1  ′    y  1    e  11    +    y  1  ′    y  2    e  12    +    y  1  ′    e  13    +    y  2  ′    y  1    e  21    +    y  2  ′    y  2    e  22    +    y  2  ′    e  23    +    y  1    e  31    +    y  2    e  32    +   e  33    =   0            subscript   superscript  y  normal-′   1    subscript  y  1    subscript  e  11       subscript   superscript  y  normal-′   1    subscript  y  2    subscript  e  12       subscript   superscript  y  normal-′   1    subscript  e  13       subscript   superscript  y  normal-′   2    subscript  y  1    subscript  e  21       subscript   superscript  y  normal-′   2    subscript  y  2    subscript  e  22       subscript   superscript  y  normal-′   2    subscript  e  23       subscript  y  1    subscript  e  31       subscript  y  2    subscript  e  32     subscript  e  33    0    y^{\prime}_{1}y_{1}e_{11}+y^{\prime}_{1}y_{2}e_{12}+y^{\prime}_{1}e_{13}+y^{%
 \prime}_{2}y_{1}e_{21}+y^{\prime}_{2}y_{2}e_{22}+y^{\prime}_{2}e_{23}+y_{1}e_{%
 31}+y_{2}e_{32}+e_{33}=0\,     or       𝐞  ⋅   𝐲  ~    =  0       normal-⋅  𝐞   normal-~  𝐲    0    \mathbf{e}\cdot\tilde{\mathbf{y}}=0     where       𝐲  ~   =   (       y  1  ′    y  1          y  1  ′    y  2         y  1  ′         y  2  ′    y  1          y  2  ′    y  2         y  2  ′        y  1        y  2       1     )        normal-~  𝐲        subscript   superscript  y  normal-′   1    subscript  y  1         subscript   superscript  y  normal-′   1    subscript  y  2       subscript   superscript  y  normal-′   1        subscript   superscript  y  normal-′   2    subscript  y  1         subscript   superscript  y  normal-′   2    subscript  y  2       subscript   superscript  y  normal-′   2      subscript  y  1      subscript  y  2     1      \tilde{\mathbf{y}}=\begin{pmatrix}y^{\prime}_{1}y_{1}\\
 y^{\prime}_{1}y_{2}\\
 y^{\prime}_{1}\\
 y^{\prime}_{2}y_{1}\\
 y^{\prime}_{2}y_{2}\\
 y^{\prime}_{2}\\
 y_{1}\\
 y_{2}\\
 1\end{pmatrix}   and    𝐞  =   (      e  11        e  12        e  13        e  21        e  22        e  23        e  31        e  32        e  33      )       𝐞     subscript  e  11      subscript  e  12      subscript  e  13      subscript  e  21      subscript  e  22      subscript  e  23      subscript  e  31      subscript  e  32      subscript  e  33       \mathbf{e}=\begin{pmatrix}e_{11}\\
 e_{12}\\
 e_{13}\\
 e_{21}\\
 e_{22}\\
 e_{23}\\
 e_{31}\\
 e_{32}\\
 e_{33}\end{pmatrix}     that is,   𝐞   𝐞   \mathbf{e}   represents the essential matrix in the form of a 9-dimensional vector and this vector must be orthogonal to the vector    𝐲  ~     normal-~  𝐲    \tilde{\mathbf{y}}   which can be seen as a vector representation of the    3  ×  3      3  3    3\times 3   matrix      𝐲  ′     𝐲  T        superscript  𝐲  normal-′    superscript  𝐲  T     \mathbf{y}^{\prime}\,\mathbf{y}^{T}   .  Each pair of corresponding image points produces a vector    𝐲  ~     normal-~  𝐲    \tilde{\mathbf{y}}   . Given a set of 3D points    𝐏  k     subscript  𝐏  k    \mathbf{P}_{k}   this corresponds to a set of vectors     𝐲  ~   k     subscript   normal-~  𝐲   k    \tilde{\mathbf{y}}_{k}   and all of them must satisfy       𝐞  ⋅    𝐲  ~   k    =  0       normal-⋅  𝐞   subscript   normal-~  𝐲   k    0    \mathbf{e}\cdot\tilde{\mathbf{y}}_{k}=0     for the vector   𝐞   𝐞   \mathbf{e}   . Given sufficiently many (at least eight) linearly independent vectors     𝐲  ~   k     subscript   normal-~  𝐲   k    \tilde{\mathbf{y}}_{k}   it is possible to determine   𝐞   𝐞   \mathbf{e}   in a straightforward way. Collect all vectors     𝐲  ~   k     subscript   normal-~  𝐲   k    \tilde{\mathbf{y}}_{k}   as the columns of a matrix   𝐘   𝐘   \mathbf{Y}   and it must then be the case that         𝐞  T    𝐘   =  𝟎         superscript  𝐞  T   𝐘   0    \mathbf{e}^{T}\,\mathbf{Y}=\mathbf{0}     This means that   𝐞   𝐞   \mathbf{e}   is the solution to a homogeneous linear equation .  Step 2: Solving the equation  A standard approach to solving this equation implies that   𝐞   𝐞   \mathbf{e}   is a left singular vector of   𝐘   𝐘   \mathbf{Y}   corresponding to a singular value that equals zero. Provided that at least eight linearly independent vectors     𝐲  ~   k     subscript   normal-~  𝐲   k    \tilde{\mathbf{y}}_{k}   are used to construct   𝐘   𝐘   \mathbf{Y}   it follows that this singular vector is unique (disregarding scalar multiplication) and, consequently,   𝐞   𝐞   \mathbf{e}   and then   𝐄   𝐄   \mathbf{E}   can be determined.  In the case that more than eight corresponding points are used to construct   𝐘   𝐘   \mathbf{Y}   it is possible that it does not have any singular value equal to zero. This case occurs in practice when the image coordinates are affected by various types of noise. A common approach to deal with this situation is to describe it as a total least squares problem; find   𝐞   𝐞   \mathbf{e}   which minimizes      ∥     𝐞  T    𝐘   ∥     norm     superscript  𝐞  T   𝐘     \|\mathbf{e}^{T}\,\mathbf{Y}\|     when     ∥  𝐞  ∥   =  1       norm  𝐞   1    \|\mathbf{e}\|=1   . The solution is to choose   𝐞   𝐞   \mathbf{e}   as the left singular vector corresponding to the smallest singular value of   𝐘   𝐘   \mathbf{Y}   . A reordering of this   𝐞   𝐞   \mathbf{e}   back into a    3  ×  3      3  3    3\times 3   matrix gives the result of this step, here referred to as    𝐄  est     subscript  𝐄  est    \mathbf{E}_{\rm est}   .  Step 3: Enforcing the internal constraint  Another consequence of dealing with noisy image coordinates is that the resulting matrix may not satisfy the internal constraint of the essential matrix, that is, two of its singular values are equal and nonzero and the other is zero. Depending on the application, smaller or larger deviations from the internal constraint may or may not be a problem. If it is critical that the estimated matrix satisfies the internal constraints, this can be accomplished by finding the matrix    𝐄  ′     superscript  𝐄  normal-′    \mathbf{E}^{\prime}   of rank 2 which minimizes      ∥    𝐄  ′   -   𝐄  est    ∥     norm     superscript  𝐄  normal-′    subscript  𝐄  est      \|\mathbf{E}^{\prime}-\mathbf{E}_{\rm est}\|     where    𝐄  est     subscript  𝐄  est    \mathbf{E}_{\rm est}   is the resulting matrix from Step 2 and the Frobenius matrix norm is used. The solution to the problem is given by first computing a singular value decomposition of    𝐄  est     subscript  𝐄  est    \mathbf{E}_{\rm est}   :       𝐄  est   =    𝐔    𝐒    𝐕  T         subscript  𝐄  est     𝐔  𝐒   superscript  𝐕  T      \mathbf{E}_{\rm est}=\mathbf{U}\,\mathbf{S}\,\mathbf{V}^{T}     where    𝐔  ,  𝐕     𝐔  𝐕    \mathbf{U},\mathbf{V}   are orthogonal matrices and   𝐒   𝐒   \mathbf{S}   is a diagonal matrix which contains the singular values of    𝐄  est     subscript  𝐄  est    \mathbf{E}_{\rm est}   . In the ideal case, one of the diagonal elements of   𝐒   𝐒   \mathbf{S}   should be zero, or at least small compared to the other two which should be equal. In any case, set       𝐒  ′   =   (     1    0    0      0    1    0      0    0    0     )        superscript  𝐒  normal-′     1  0  0    0  1  0    0  0  0      \mathbf{S}^{\prime}=\begin{pmatrix}1&0&0\\
 0&1&0\\
 0&0&0\end{pmatrix}     Finally,    𝐄  ′     superscript  𝐄  normal-′    \mathbf{E}^{\prime}   is given by       𝐄  ′   =    𝐔     𝐒  ′     𝐕  T         superscript  𝐄  normal-′     𝐔   superscript  𝐒  normal-′    superscript  𝐕  T      \mathbf{E}^{\prime}=\mathbf{U}\,\mathbf{S}^{\prime}\,\mathbf{V}^{T}     The matrix    𝐄  ′     superscript  𝐄  normal-′    \mathbf{E}^{\prime}   is the resulting estimate of the essential matrix provided by the algorithm.  Determining R and t from E  This topic is covered in the page on the Essential matrix  (section on determining R and t from E) .  The normalized eight-point algorithm  The basic eight-point algorithm can in principle be used also for estimating the fundamental matrix   𝐅   𝐅   \mathbf{F}   . The defining constraint for   𝐅   𝐅   \mathbf{F}   is          (   𝐲  ′   )   T     𝐅   𝐲   =  0         superscript   superscript  𝐲  normal-′   T   𝐅  𝐲   0    (\mathbf{y}^{\prime})^{T}\,\mathbf{F}\,\mathbf{y}=0     where    𝐲  ,   𝐲  ′      𝐲   superscript  𝐲  normal-′     \mathbf{y},\mathbf{y}^{\prime}   are the homogeneous representations of corresponding image coordinates (not necessary normalized). This means that it is possible to form a matrix   𝐘   𝐘   \mathbf{Y}   in a similar way as for the essential matrix and solve the equation         𝐟  T    𝐘   =  𝟎         superscript  𝐟  T   𝐘   0    \mathbf{f}^{T}\,\mathbf{Y}=\mathbf{0}     for   𝐟   𝐟   \mathbf{f}   which is a reshaped version of   𝐅   𝐅   \mathbf{F}   . By following the procedure outlined above, it is then possible to determine   𝐅   𝐅   \mathbf{F}   from a set of eight matching points. In practice, however, the resulting fundamental matrix may not be useful for determining epipolar constraints.  The problem  The problem is that the resulting   𝐘   𝐘   \mathbf{Y}   often is ill-conditioned . In theory,   𝐘   𝐘   \mathbf{Y}   should have one singular value equal to zero and the rest are non-zero. In practice, however, some of the non-zero singular values can become small relative to the larger ones. If more than eight corresponding points are used to construct   𝐘   𝐘   \mathbf{Y}   , where the coordinates are only approximately correct, there may not be a well-defined singular value which can be identified as approximately zero. Consequently, the solution of the homogeneous linear system of equations may not be sufficiently accurate to be useful.  What's causing the problem  Hartley addressed this estimation problem in his 1997 article. His analysis of the problem shows that the problem is caused by the poor distribution of the homogeneous image coordinates in their space,    ℝ  3     superscript  ℝ  3    \mathbb{R}^{3}   . A typical homogeneous representation of the 2D image coordinate    (   y  1   ,   y  2   )      subscript  y  1    subscript  y  2     (y_{1},y_{2})\,   is      𝐲  =   (      y  1        y  2       1     )       𝐲     subscript  y  1      subscript  y  2     1      \mathbf{y}=\begin{pmatrix}y_{1}\\
 y_{2}\\
 1\end{pmatrix}     where both     y  1   ,    y  2        subscript  y  1    subscript  y  2     y_{1},y_{2}\,   lie in the range 0 to 1000-2000 for a modern digital camera. This means that the first two coordinates in   𝐲   𝐲   \mathbf{y}   vary over a much larger range than the third coordinate. Furthermore, if the image points which are used to construct   𝐘   𝐘   \mathbf{Y}   lie in a relatively small region of the image, for example at     (  700  ,  700  )   ±   (  100  ,  100  )      plus-or-minus   700  700    100  100     (700,700)\pm(100,100)\,   , again the vector   𝐲   𝐲   \mathbf{y}   points in more or less the same direction for all points. As a consequence,   𝐘   𝐘   \mathbf{Y}   will have one large singular value and the remaining are small.  How it can be solved  As a solution to this problem, Hartley proposed that the coordinate system of each of the two images should be transformed, independently, into a new coordinate system according to the following principle.   The origin of the new coordinate system should be centered (have its origin) at the centroid (center of gravity) of the image points. This is accomplished by a translation of the original origin to the new one.  After the translation the coordinates are uniformly scaled so that the mean distance from the origin to a point equals    2      2    \sqrt{2}   .   This principle results, normally, in a distinct coordinate transformation for each of the two images. As a result, new homogeneous image coordinates     𝐲  ¯   ,    𝐲  ¯   ′       normal-¯  𝐲    superscript   normal-¯  𝐲   normal-′     \mathbf{\bar{y}},\mathbf{\bar{y}}^{\prime}   are given by       𝐲  ¯   =    𝐓   𝐲        normal-¯  𝐲     𝐓  𝐲     \mathbf{\bar{y}}=\mathbf{T}\,\mathbf{y}           𝐲  ¯   ′   =     𝐓  ′     𝐲  ′         superscript   normal-¯  𝐲   normal-′      superscript  𝐓  normal-′    superscript  𝐲  normal-′      \mathbf{\bar{y}}^{\prime}=\mathbf{T}^{\prime}\,\mathbf{y}^{\prime}     where    𝐓  ,   𝐓  ′      𝐓   superscript  𝐓  normal-′     \mathbf{T},\mathbf{T}^{\prime}   are the transformations (translation and scaling) from the old to the new normalized image coordinates . This normalization is only dependent on the image points which are used in a single image and is, in general, distinct from normalized image coordinates produced by a normalized camera.  The epipolar constraint based on the fundamental matrix can now be rewritten as      0  =      (    𝐲  ¯   ′   )   T       (    (   𝐓  ′   )   T   )    -  1      𝐅     𝐓   -  1      𝐲  ¯    =      (    𝐲  ¯   ′   )   T      𝐅  ¯     𝐲  ¯          0     superscript   superscript   normal-¯  𝐲   normal-′   T    superscript   superscript   superscript  𝐓  normal-′   T     1    𝐅   superscript  𝐓    1     normal-¯  𝐲            superscript   superscript   normal-¯  𝐲   normal-′   T    normal-¯  𝐅    normal-¯  𝐲       0=(\mathbf{\bar{y}}^{\prime})^{T}\,((\mathbf{T}^{\prime})^{T})^{-1}\,\mathbf{F%
 }\,\mathbf{T}^{-1}\,\mathbf{\bar{y}}=(\mathbf{\bar{y}}^{\prime})^{T}\,\mathbf{%
 \bar{F}}\,\mathbf{\bar{y}}     where     𝐅  ¯   =      (    (   𝐓  ′   )   T   )    -  1      𝐅    𝐓   -  1          normal-¯  𝐅      superscript   superscript   superscript  𝐓  normal-′   T     1    𝐅   superscript  𝐓    1       \mathbf{\bar{F}}=((\mathbf{T}^{\prime})^{T})^{-1}\,\mathbf{F}\,\mathbf{T}^{-1}   . This means that it is possible to use the normalized homogeneous image coordinates     𝐲  ¯   ,    𝐲  ¯   ′       normal-¯  𝐲    superscript   normal-¯  𝐲   normal-′     \mathbf{\bar{y}},\mathbf{\bar{y}}^{\prime}   to estimate the transformed fundamental matrix    𝐅  ¯     normal-¯  𝐅    \mathbf{\bar{F}}   using the basic eight-point algorithm described above.  The purpose of the normalization transformations is that the matrix    𝐘  ¯     normal-¯  𝐘    \mathbf{\bar{Y}}   , constructed from the normalized image coordinates, in general has a better condition number than   𝐘   𝐘   \mathbf{Y}   has. This means that the solution    𝐟  ¯     normal-¯  𝐟    \mathbf{\bar{f}}   is more well-defined as a solution of the homogeneous equation      𝐘  ¯     𝐟  ¯        normal-¯  𝐘    normal-¯  𝐟     \mathbf{\bar{Y}}\,\mathbf{\bar{f}}   than   𝐟   𝐟   \mathbf{f}   is relative to   𝐘   𝐘   \mathbf{Y}   . Once    𝐟  ¯     normal-¯  𝐟    \mathbf{\bar{f}}   has been determined and reshaped into    𝐅  ¯     normal-¯  𝐅    \mathbf{\bar{F}}   the latter can be de-normalized to give   𝐅   𝐅   \mathbf{F}   according to      𝐅  =      (   𝐓  ′   )   T      𝐅  ¯    𝐓       𝐅     superscript   superscript  𝐓  normal-′   T    normal-¯  𝐅   𝐓     \mathbf{F}=(\mathbf{T}^{\prime})^{T}\,\mathbf{\bar{F}}\,\mathbf{T}     In general, this estimate of the fundamental matrix is a better one than would have been obtained by estimating from the un-normalized coordinates.  Using fewer than eight points  Each point pair contributes with one constraining equation on the element in   𝐄   𝐄   \mathbf{E}   . Since   𝐄   𝐄   \mathbf{E}   has five degrees of freedom it should therefore be sufficient with only five point pairs to determine   𝐄   𝐄   \mathbf{E}   . Though possible from a theoretical point of view, the practical implementation of this is not straightforward and relies on solving various non-linear equations.  References           "  Category:Geometry in computer vision   