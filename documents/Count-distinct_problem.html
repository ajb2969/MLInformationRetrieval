<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1314">Count-distinct problem</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Count-distinct problem</h1>
<hr/>

<p>In computer science, the <strong>count-distinct problem</strong><a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> (also known in applied mathematics as the <strong>cardinality estimation problem</strong>) is the problem of finding the number of distinct elements in a data stream with repeated elements. This is a well-known problem with numerous applications. The elements might represent <a href="IP_addresses" title="wikilink">IP addresses</a> of packets passing through a <a href="router_(computing)" title="wikilink">router</a>, <a href="unique_visitor" title="wikilink">unique visitors</a> to a web site, elements in a large database, motifs in a <a class="uri" href="DNA" title="wikilink">DNA</a> sequence, or elements of <a class="uri" href="RFID" title="wikilink">RFID</a>/<a href="sensor_networks" title="wikilink">sensor networks</a>.</p>
<h2 id="formal-definition">Formal definition</h2>
<dl>
<dd><strong>Instance</strong>: A stream of elements 

<math display="inline" id="Count-distinct_problem:0">
 <semantics>
  <mrow>
   <msub>
    <mi>x</mi>
    <mn>1</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>x</mi>
    <mn>2</mn>
   </msub>
   <mo>,</mo>
   <mi mathvariant="normal">…</mi>
   <mo>,</mo>
   <msub>
    <mi>x</mi>
    <mi>s</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <cn type="integer">2</cn>
    </apply>
    <ci>normal-…</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <ci>s</ci>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x_{1},x_{2},\ldots,x_{s}
  </annotation>
 </semantics>
</math>

 with repetitions, and an integer 

<math display="inline" id="Count-distinct_problem:1">
 <semantics>
  <mi>m</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>m</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m
  </annotation>
 </semantics>
</math>

. Let 

<math display="inline" id="Count-distinct_problem:2">
 <semantics>
  <mi>n</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>n</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n
  </annotation>
 </semantics>
</math>

 be the number of distinct elements, namely 

<math display="inline" id="Count-distinct_problem:3">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">|</mo>
    <mrow>
     <mo>{</mo>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mi>s</mi>
     </msub>
     <mo>}</mo>
    </mrow>
    <mo stretchy="false">|</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>n</ci>
    <apply>
     <abs></abs>
     <set>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <ci>s</ci>
      </apply>
     </set>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n=|\left\{{x_{1},x_{2},\ldots,x_{s}}\right\}|
  </annotation>
 </semantics>
</math>

, and let these elements be 

<math display="inline" id="Count-distinct_problem:4">
 <semantics>
  <mrow>
   <mo>{</mo>
   <msub>
    <mi>e</mi>
    <mn>1</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>e</mi>
    <mn>2</mn>
   </msub>
   <mo>,</mo>
   <mi mathvariant="normal">…</mi>
   <mo>,</mo>
   <msub>
    <mi>e</mi>
    <mi>n</mi>
   </msub>
   <mo>}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <set>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>e</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>e</ci>
     <cn type="integer">2</cn>
    </apply>
    <ci>normal-…</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>e</ci>
     <ci>n</ci>
    </apply>
   </set>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \left\{{e_{1},e_{2},\ldots,e_{n}}\right\}
  </annotation>
 </semantics>
</math>

.
</dd>
<dd><strong>Objective</strong>: Find an estimate 

<math display="inline" id="Count-distinct_problem:5">
 <semantics>
  <mover accent="true">
   <mi>n</mi>
   <mo>^</mo>
  </mover>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-^</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \widehat{n}
  </annotation>
 </semantics>
</math>

 of 

<math display="inline" id="Count-distinct_problem:6">
 <semantics>
  <mi>n</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>n</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n
  </annotation>
 </semantics>
</math>

 using only 

<math display="inline" id="Count-distinct_problem:7">
 <semantics>
  <mi>m</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>m</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m
  </annotation>
 </semantics>
</math>

 storage units, where 

<math display="inline" id="Count-distinct_problem:8">
 <semantics>
  <mrow>
   <mi>m</mi>
   <mo>≪</mo>
   <mi>n</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">much-less-than</csymbol>
    <ci>m</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m\ll n
  </annotation>
 </semantics>
</math>

.
</dd>
</dl>

<p>An example of an instance for the cardinality estimation problem is the stream

<math display="block" id="Count-distinct_problem:9">
 <semantics>
  <mrow>
   <mi>a</mi>
   <mo>,</mo>
   <mi>b</mi>
   <mo>,</mo>
   <mi>a</mi>
   <mo>,</mo>
   <mi>c</mi>
   <mo>,</mo>
   <mi>d</mi>
   <mo>,</mo>
   <mi>b</mi>
   <mo>,</mo>
   <mi>d</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <ci>a</ci>
    <ci>b</ci>
    <ci>a</ci>
    <ci>c</ci>
    <ci>d</ci>
    <ci>b</ci>
    <ci>d</ci>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a,b,a,c,d,b,d
  </annotation>
 </semantics>
</math>

. For this instance, 

<math display="inline" id="Count-distinct_problem:10">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">|</mo>
    <mrow>
     <mo>{</mo>
     <mi>a</mi>
     <mo>,</mo>
     <mi>b</mi>
     <mo>,</mo>
     <mi>c</mi>
     <mo>,</mo>
     <mi>d</mi>
     <mo>}</mo>
    </mrow>
    <mo stretchy="false">|</mo>
   </mrow>
   <mo>=</mo>
   <mn>4</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>n</ci>
     <apply>
      <abs></abs>
      <set>
       <ci>a</ci>
       <ci>b</ci>
       <ci>c</ci>
       <ci>d</ci>
      </set>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <cn type="integer">4</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n=|\left\{{a,b,c,d}\right\}|=4
  </annotation>
 </semantics>
</math>

.</p>
<h2 id="naive-solution">Naive solution</h2>

<p>The naive solution to the problem is as follows:</p>

<p><code> Initialize a counter, </code>

<math display="inline" id="Count-distinct_problem:11">
 <semantics>
  <mi>c</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>c</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   c
  </annotation>
 </semantics>
</math>

<code>, to zero, </code>

<math display="inline" id="Count-distinct_problem:12">
 <semantics>
  <mrow>
   <mi>c</mi>
   <mo>←</mo>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-←</ci>
    <ci>c</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   c\leftarrow 0
  </annotation>
 </semantics>
</math>

<code>.</code><br/>
<code> Initialize an efficient dictionary data structure, </code>

<math display="inline" id="Count-distinct_problem:13">
 <semantics>
  <mi>D</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>D</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D
  </annotation>
 </semantics>
</math>

<code>, such as hash table or search tree in which insertion and membership can be performed quickly.  </code><br/>
<code> For each element </code>

<math display="inline" id="Count-distinct_problem:14">
 <semantics>
  <msub>
   <mi>x</mi>
   <mi>i</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>x</ci>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x_{i}
  </annotation>
 </semantics>
</math>

<code>, a membership query is issued. </code><br/>
<code> If </code>

<math display="inline" id="Count-distinct_problem:15">
 <semantics>
  <msub>
   <mi>x</mi>
   <mi>i</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>x</ci>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x_{i}
  </annotation>
 </semantics>
</math>

<code> is not a member of </code>

<math display="inline" id="Count-distinct_problem:16">
 <semantics>
  <mi>D</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>D</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D
  </annotation>
 </semantics>
</math>

<code> (</code>

<math display="inline" id="Count-distinct_problem:17">
 <semantics>
  <mrow>
   <msub>
    <mi>x</mi>
    <mi>i</mi>
   </msub>
   <mo>∉</mo>
   <mi>D</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <notin></notin>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <ci>i</ci>
    </apply>
    <ci>D</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x_{i}\notin D
  </annotation>
 </semantics>
</math>

<code>)</code><br/>
<code>   Add </code>

<math display="inline" id="Count-distinct_problem:18">
 <semantics>
  <msub>
   <mi>x</mi>
   <mi>i</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>x</ci>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x_{i}
  </annotation>
 </semantics>
</math>

<code> to </code>

<math display="inline" id="Count-distinct_problem:19">
 <semantics>
  <mi>D</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>D</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D
  </annotation>
 </semantics>
</math>

<br/>
<code>   Increase </code>

<math display="inline" id="Count-distinct_problem:20">
 <semantics>
  <mi>c</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>c</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   c
  </annotation>
 </semantics>
</math>

<code> by one, </code>

<math display="inline" id="Count-distinct_problem:21">
 <semantics>
  <mrow>
   <mi>c</mi>
   <mo>←</mo>
   <mrow>
    <mi>c</mi>
    <mo>+</mo>
    <mn>1</mn>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-←</ci>
    <ci>c</ci>
    <apply>
     <plus></plus>
     <ci>c</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   c\leftarrow c+1
  </annotation>
 </semantics>
</math>

<br/>
<code> Otherwise (</code>

<math display="inline" id="Count-distinct_problem:22">
 <semantics>
  <mrow>
   <msub>
    <mi>x</mi>
    <mi>i</mi>
   </msub>
   <mo>∈</mo>
   <mi>D</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <ci>i</ci>
    </apply>
    <ci>D</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x_{i}\in D
  </annotation>
 </semantics>
</math>

<code>) do nothing.</code><br/>
<code> Output </code>

<math display="inline" id="Count-distinct_problem:23">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>=</mo>
   <mi>c</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>n</ci>
    <ci>c</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n=c
  </annotation>
 </semantics>
</math>

<code>.</code></p>

<p>As long as the number of distinct elements is not too big, 

<math display="inline" id="Count-distinct_problem:24">
 <semantics>
  <mi>D</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>D</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D
  </annotation>
 </semantics>
</math>

 fits in main memory and an exact answer can be retrieved. However, this approach does not scale for bounded storage, or if the computation performed for each element 

<math display="inline" id="Count-distinct_problem:25">
 <semantics>
  <msub>
   <mi>x</mi>
   <mi>i</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>x</ci>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x_{i}
  </annotation>
 </semantics>
</math>

 should be minimized. In such a case, several <a href="streaming_algorithms" title="wikilink">streaming algorithms</a> have been proposed which use a fixed number of storage units.</p>
<h2 id="streaming-algorithms">Streaming algorithms</h2>

<p>To handle the bounded storage constraint, <a href="streaming_algorithm" title="wikilink">streaming algorithms</a> use a randomization to produce a non-exact estimation of the distinct number of elements, 

<math display="inline" id="Count-distinct_problem:26">
 <semantics>
  <mi>n</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>n</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n
  </annotation>
 </semantics>
</math>

. State-of-the-art estimators <a href="hash_function" title="wikilink">hash</a> every element 

<math display="inline" id="Count-distinct_problem:27">
 <semantics>
  <msub>
   <mi>e</mi>
   <mi>j</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>e</ci>
    <ci>j</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   e_{j}
  </annotation>
 </semantics>
</math>

 into a low dimensional data sketch using a hash function, 

<math display="inline" id="Count-distinct_problem:28">
 <semantics>
  <mrow>
   <mi>h</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>e</mi>
     <mi>j</mi>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>h</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>e</ci>
     <ci>j</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   h(e_{j})
  </annotation>
 </semantics>
</math>

. The different techniques can be classified according to the data sketches they store.</p>
<h3 id="minmax-sketches">Min/max sketches</h3>

<p>Min/max sketches <a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> <a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> store only the minimum/maximum hashed values. Examples of known min/max sketch estimators: Chassaing et al. <a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a> presents max sketch which is the <a href="minimum-variance_unbiased_estimator" title="wikilink">minimum-variance unbiased estimator</a> for the problem. The continuous max sketches estimator <a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> is the <a href="maximum_likelihood" title="wikilink">maximum likelihood</a> estimator. The estimator of choice in practice is the <a class="uri" href="HyperLogLog" title="wikilink">HyperLogLog</a> algorithm.<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a></p>

<p>The intuition behind such estimators is that each sketch carries information about the desired quantity. For example, when every element 

<math display="inline" id="Count-distinct_problem:29">
 <semantics>
  <msub>
   <mi>e</mi>
   <mi>j</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>e</ci>
    <ci>j</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   e_{j}
  </annotation>
 </semantics>
</math>

 is associated with a uniform RV, 

<math display="inline" id="Count-distinct_problem:30">
 <semantics>
  <mrow>
   <mrow>
    <mi>h</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>e</mi>
      <mi>j</mi>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>∼</mo>
   <mrow>
    <mi>U</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>0</mn>
     <mo>,</mo>
     <mn>1</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">similar-to</csymbol>
    <apply>
     <times></times>
     <ci>h</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>e</ci>
      <ci>j</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>U</ci>
     <interval closure="open">
      <cn type="integer">0</cn>
      <cn type="integer">1</cn>
     </interval>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   h(e_{j})\sim U(0,1)
  </annotation>
 </semantics>
</math>

, the expected minimum value of 

<math display="inline" id="Count-distinct_problem:31">
 <semantics>
  <mrow>
   <mrow>
    <mi>h</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>e</mi>
      <mn>1</mn>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>h</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>e</mi>
      <mn>2</mn>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mi mathvariant="normal">…</mi>
   <mo>,</mo>
   <mrow>
    <mi>h</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>e</mi>
      <mi>n</mi>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <times></times>
     <ci>h</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>e</ci>
      <cn type="integer">1</cn>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>h</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>e</ci>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <ci>normal-…</ci>
    <apply>
     <times></times>
     <ci>h</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>e</ci>
      <ci>n</ci>
     </apply>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   h(e_{1}),h(e_{2}),\ldots,h(e_{n})
  </annotation>
 </semantics>
</math>

 is 

<math display="inline" id="Count-distinct_problem:32">
 <semantics>
  <mrow>
   <mn>1</mn>
   <mo>/</mo>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mi>n</mi>
     <mo>+</mo>
     <mn>1</mn>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <divide></divide>
    <cn type="integer">1</cn>
    <apply>
     <plus></plus>
     <ci>n</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   1/(n+1)
  </annotation>
 </semantics>
</math>

. The hash function guarantees that 

<math display="inline" id="Count-distinct_problem:33">
 <semantics>
  <mrow>
   <mi>h</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>e</mi>
     <mi>j</mi>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>h</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>e</ci>
     <ci>j</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   h(e_{j})
  </annotation>
 </semantics>
</math>

 is identical for all the appearances of 

<math display="inline" id="Count-distinct_problem:34">
 <semantics>
  <msub>
   <mi>e</mi>
   <mi>j</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>e</ci>
    <ci>j</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   e_{j}
  </annotation>
 </semantics>
</math>

. Thus, the existence of duplicates does not affect the value of the extreme order statistics.</p>

<p>There are other estimation techniques other than min/max sketches. The first paper on count-distinct estimation by <a href="Philippe_Flajolet" title="wikilink">Flajolet</a> et al. <a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a> describes a bit pattern sketch. In this case, the elements are hashed into a bit vector and the sketch holds the logical OR of all hashed values. The first asymptotically space- and time-optimal algorithm for this problem was given by <a href="Daniel_Kane_(mathematician)" title="wikilink">Daniel M. Kane</a>, Jelani Nelson, and David P. Woodruff.<a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a></p>
<h3 id="bottom-m-sketches">Bottom-<em>m</em> sketches</h3>

<p>Bottom-<em>m</em> sketches <a class="footnoteRef" href="#fn9" id="fnref9"><sup>9</sup></a> are a generalization of min sketches, which maintain the 

<math display="inline" id="Count-distinct_problem:35">
 <semantics>
  <mi>m</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>m</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m
  </annotation>
 </semantics>
</math>

 minimal values, where 

<math display="inline" id="Count-distinct_problem:36">
 <semantics>
  <mrow>
   <mi>m</mi>
   <mo>≥</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <geq></geq>
    <ci>m</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m\geq 1
  </annotation>
 </semantics>
</math>

. See Cosma et al.<a class="footnoteRef" href="#fn10" id="fnref10"><sup>10</sup></a> for a theoretical overview of count-distinct estimation algorithms, and Metwally <a class="footnoteRef" href="#fn11" id="fnref11"><sup>11</sup></a> for a practical overview with comparative simulation results.</p>
<h2 id="weighted-count-distinct-problem">Weighted count-distinct problem</h2>

<p>In its weighted version, each element is associated with a weight and the goal is to estimate the total sum of weights. Formally,</p>
<dl>
<dd><strong>Instance</strong>: A stream of weighted elements 

<math display="inline" id="Count-distinct_problem:37">
 <semantics>
  <mrow>
   <msub>
    <mi>x</mi>
    <mn>1</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>x</mi>
    <mn>2</mn>
   </msub>
   <mo>,</mo>
   <mi mathvariant="normal">…</mi>
   <mo>,</mo>
   <msub>
    <mi>x</mi>
    <mi>s</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <cn type="integer">2</cn>
    </apply>
    <ci>normal-…</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <ci>s</ci>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x_{1},x_{2},\ldots,x_{s}
  </annotation>
 </semantics>
</math>

 with repetitions, and an integer 

<math display="inline" id="Count-distinct_problem:38">
 <semantics>
  <mi>m</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>m</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m
  </annotation>
 </semantics>
</math>

. Let 

<math display="inline" id="Count-distinct_problem:39">
 <semantics>
  <mi>n</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>n</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n
  </annotation>
 </semantics>
</math>

 be the number of distinct elements, namely 

<math display="inline" id="Count-distinct_problem:40">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>=</mo>
   <mrow>
    <mo stretchy="false">|</mo>
    <mrow>
     <mo>{</mo>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mi>s</mi>
     </msub>
     <mo>}</mo>
    </mrow>
    <mo stretchy="false">|</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>n</ci>
    <apply>
     <abs></abs>
     <set>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <ci>s</ci>
      </apply>
     </set>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n=|\left\{{x_{1},x_{2},\ldots,x_{s}}\right\}|
  </annotation>
 </semantics>
</math>

, and let these elements be 

<math display="inline" id="Count-distinct_problem:41">
 <semantics>
  <mrow>
   <mo>{</mo>
   <msub>
    <mi>e</mi>
    <mn>1</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>e</mi>
    <mn>2</mn>
   </msub>
   <mo>,</mo>
   <mi mathvariant="normal">…</mi>
   <mo>,</mo>
   <msub>
    <mi>e</mi>
    <mi>n</mi>
   </msub>
   <mo>}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <set>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>e</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>e</ci>
     <cn type="integer">2</cn>
    </apply>
    <ci>normal-…</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>e</ci>
     <ci>n</ci>
    </apply>
   </set>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \left\{{e_{1},e_{2},\ldots,e_{n}}\right\}
  </annotation>
 </semantics>
</math>

. Finally, let 

<math display="inline" id="Count-distinct_problem:42">
 <semantics>
  <msub>
   <mi>w</mi>
   <mi>j</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>w</ci>
    <ci>j</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   w_{j}
  </annotation>
 </semantics>
</math>

 be the weight of 

<math display="inline" id="Count-distinct_problem:43">
 <semantics>
  <msub>
   <mi>e</mi>
   <mi>j</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>e</ci>
    <ci>j</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   e_{j}
  </annotation>
 </semantics>
</math>

.
</dd>
<dd><strong>Objective</strong>: Find an estimate 

<math display="inline" id="Count-distinct_problem:44">
 <semantics>
  <mover accent="true">
   <mi>w</mi>
   <mo>^</mo>
  </mover>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-^</ci>
    <ci>w</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \widehat{w}
  </annotation>
 </semantics>
</math>

 of 

<math display="inline" id="Count-distinct_problem:45">
 <semantics>
  <mrow>
   <mi>w</mi>
   <mo>=</mo>
   <mrow>
    <msubsup>
     <mo largeop="true" symmetric="true">∑</mo>
     <mrow>
      <mi>j</mi>
      <mo>=</mo>
      <mn>1</mn>
     </mrow>
     <mi>n</mi>
    </msubsup>
    <msub>
     <mi>w</mi>
     <mi>j</mi>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>w</ci>
    <apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <sum></sum>
       <apply>
        <eq></eq>
        <ci>j</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <ci>n</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <ci>j</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   w=\sum_{j=1}^{n}w_{j}
  </annotation>
 </semantics>
</math>

 using only 

<math display="inline" id="Count-distinct_problem:46">
 <semantics>
  <mi>m</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>m</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m
  </annotation>
 </semantics>
</math>

 storage units, where 

<math display="inline" id="Count-distinct_problem:47">
 <semantics>
  <mrow>
   <mi>m</mi>
   <mo>≪</mo>
   <mi>n</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">much-less-than</csymbol>
    <ci>m</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m\ll n
  </annotation>
 </semantics>
</math>

.
</dd>
</dl>

<p>An example of an instance for the weighted problem is

<math display="block" id="Count-distinct_problem:48">
 <semantics>
  <mrow>
   <mrow>
    <mi>a</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>3</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>b</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>4</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>a</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>3</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>c</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>2</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>d</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>3</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>b</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>4</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mi>d</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mn>3</mn>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <times></times>
     <ci>a</ci>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <times></times>
     <ci>b</ci>
     <cn type="integer">4</cn>
    </apply>
    <apply>
     <times></times>
     <ci>a</ci>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <times></times>
     <ci>c</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <times></times>
     <ci>d</ci>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <times></times>
     <ci>b</ci>
     <cn type="integer">4</cn>
    </apply>
    <apply>
     <times></times>
     <ci>d</ci>
     <cn type="integer">3</cn>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a(3),b(4),a(3),c(2),d(3),b(4),d(3)
  </annotation>
 </semantics>
</math>

. For this instance, 

<math display="inline" id="Count-distinct_problem:49">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>e</mi>
     <mn>1</mn>
    </msub>
    <mo>=</mo>
    <mi>a</mi>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mrow>
     <msub>
      <mi>e</mi>
      <mn>2</mn>
     </msub>
     <mo>=</mo>
     <mi>b</mi>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mrow>
      <msub>
       <mi>e</mi>
       <mn>3</mn>
      </msub>
      <mo>=</mo>
      <mi>c</mi>
     </mrow>
     <mo>,</mo>
     <mrow>
      <msub>
       <mi>e</mi>
       <mn>4</mn>
      </msub>
      <mo>=</mo>
      <mi>d</mi>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>e</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>a</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">formulae-sequence</csymbol>
     <apply>
      <eq></eq>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>e</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>b</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">formulae-sequence</csymbol>
      <apply>
       <eq></eq>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>e</ci>
        <cn type="integer">3</cn>
       </apply>
       <ci>c</ci>
      </apply>
      <apply>
       <eq></eq>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>e</ci>
        <cn type="integer">4</cn>
       </apply>
       <ci>d</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   e_{1}=a,e_{2}=b,e_{3}=c,e_{4}=d
  </annotation>
 </semantics>
</math>

, the weights are 

<math display="inline" id="Count-distinct_problem:50">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>w</mi>
     <mn>1</mn>
    </msub>
    <mo>=</mo>
    <mn>3</mn>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mrow>
     <msub>
      <mi>w</mi>
      <mn>2</mn>
     </msub>
     <mo>=</mo>
     <mn>4</mn>
    </mrow>
    <mo>,</mo>
    <mrow>
     <mrow>
      <msub>
       <mi>w</mi>
       <mn>3</mn>
      </msub>
      <mo>=</mo>
      <mn>2</mn>
     </mrow>
     <mo>,</mo>
     <mrow>
      <msub>
       <mi>w</mi>
       <mn>4</mn>
      </msub>
      <mo>=</mo>
      <mn>3</mn>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <cn type="integer">1</cn>
     </apply>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">formulae-sequence</csymbol>
     <apply>
      <eq></eq>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>w</ci>
       <cn type="integer">2</cn>
      </apply>
      <cn type="integer">4</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">formulae-sequence</csymbol>
      <apply>
       <eq></eq>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>w</ci>
        <cn type="integer">3</cn>
       </apply>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <eq></eq>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>w</ci>
        <cn type="integer">4</cn>
       </apply>
       <cn type="integer">3</cn>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   w_{1}=3,w_{2}=4,w_{3}=2,w_{4}=3
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Count-distinct_problem:51">
 <semantics>
  <mrow>
   <mrow>
    <mo largeop="true" symmetric="true">∑</mo>
    <msub>
     <mi>w</mi>
     <mi>j</mi>
    </msub>
   </mrow>
   <mo>=</mo>
   <mn>12</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <sum></sum>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>w</ci>
      <ci>j</ci>
     </apply>
    </apply>
    <cn type="integer">12</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sum{w_{j}}=12
  </annotation>
 </semantics>
</math>

.</p>

<p>As an application example, 

<math display="inline" id="Count-distinct_problem:52">
 <semantics>
  <mrow>
   <msub>
    <mi>x</mi>
    <mn>1</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>x</mi>
    <mn>2</mn>
   </msub>
   <mo>,</mo>
   <mi mathvariant="normal">…</mi>
   <mo>,</mo>
   <msub>
    <mi>x</mi>
    <mi>s</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <cn type="integer">2</cn>
    </apply>
    <ci>normal-…</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <ci>s</ci>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x_{1},x_{2},\ldots,x_{s}
  </annotation>
 </semantics>
</math>

 could be <a href="Internet_Protocol" title="wikilink">IP</a> packets received by a server. Each packet belongs to one of 

<math display="inline" id="Count-distinct_problem:53">
 <semantics>
  <mi>n</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>n</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n
  </annotation>
 </semantics>
</math>

 IP flows 

<math display="inline" id="Count-distinct_problem:54">
 <semantics>
  <mrow>
   <msub>
    <mi>e</mi>
    <mn>1</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>e</mi>
    <mn>2</mn>
   </msub>
   <mo>,</mo>
   <mi mathvariant="normal">…</mi>
   <mo>,</mo>
   <msub>
    <mi>e</mi>
    <mi>n</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>e</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>e</ci>
     <cn type="integer">2</cn>
    </apply>
    <ci>normal-…</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>e</ci>
     <ci>n</ci>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   e_{1},e_{2},\ldots,e_{n}
  </annotation>
 </semantics>
</math>

. The weight 

<math display="inline" id="Count-distinct_problem:55">
 <semantics>
  <msub>
   <mi>w</mi>
   <mi>j</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>w</ci>
    <ci>j</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   w_{j}
  </annotation>
 </semantics>
</math>

 can be the load imposed by flow 

<math display="inline" id="Count-distinct_problem:56">
 <semantics>
  <msub>
   <mi>e</mi>
   <mi>j</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>e</ci>
    <ci>j</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   e_{j}
  </annotation>
 </semantics>
</math>

 on the server. Thus, 

<math display="inline" id="Count-distinct_problem:57">
 <semantics>
  <mrow>
   <msubsup>
    <mo largeop="true" symmetric="true">∑</mo>
    <mrow>
     <mi>j</mi>
     <mo>=</mo>
     <mn>1</mn>
    </mrow>
    <mi>n</mi>
   </msubsup>
   <msub>
    <mi>w</mi>
    <mi>j</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <eq></eq>
       <ci>j</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <ci>n</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>w</ci>
     <ci>j</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sum_{j=1}^{n}{w_{j}}
  </annotation>
 </semantics>
</math>

 represents the total load imposed on the server by all the flows to which packets 

<math display="inline" id="Count-distinct_problem:58">
 <semantics>
  <mrow>
   <msub>
    <mi>x</mi>
    <mn>1</mn>
   </msub>
   <mo>,</mo>
   <msub>
    <mi>x</mi>
    <mn>2</mn>
   </msub>
   <mo>,</mo>
   <mi mathvariant="normal">…</mi>
   <mo>,</mo>
   <msub>
    <mi>x</mi>
    <mi>s</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <cn type="integer">2</cn>
    </apply>
    <ci>normal-…</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>x</ci>
     <ci>s</ci>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x_{1},x_{2},\ldots,x_{s}
  </annotation>
 </semantics>
</math>

 belong.</p>
<h2 id="solving-the-weighted-count-distinct-problem">Solving the weighted count-distinct problem</h2>

<p>Any extreme order statistics estimator (min/max sketches) for the unweighted problem can be generalized to an estimator for the weighted problem .<a class="footnoteRef" href="#fn12" id="fnref12"><sup>12</sup></a> For example, the weighted estimator proposed by Cohen et al.<a class="footnoteRef" href="#fn13" id="fnref13"><sup>13</sup></a> can be obtained when the continuous max sketches estimator is extended to solve the weighted problem. In particular, the <a class="uri" href="HyperLogLog" title="wikilink">HyperLogLog</a> algorithm <a class="footnoteRef" href="#fn14" id="fnref14"><sup>14</sup></a> can be extended to solve the weighted problem. The extended <a class="uri" href="HyperLogLog" title="wikilink">HyperLogLog</a> algorithm offers the best performance, in terms of statistical accuracy and memory usage, among all the other known algorithms for the weighted problem.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a class="uri" href="HyperLogLog" title="wikilink">HyperLogLog</a></li>
<li><a href="Count–min_sketch" title="wikilink">Count–min sketch</a></li>
<li><a href="Streaming_algorithm" title="wikilink">Streaming algorithm</a></li>
<li><a href="Maximum_likelihood" title="wikilink">Maximum likelihood</a></li>
<li><a href="Minimum-variance_unbiased_estimator" title="wikilink">Minimum-variance unbiased estimator</a></li>
</ul>
<h2 id="references">References</h2>

<p>"</p>

<p><a href="Category:Statistical_algorithms" title="wikilink">Category:Statistical algorithms</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2"><a href="#fnref2">↩</a></li>
<li id="fn3"><a href="#fnref3">↩</a></li>
<li id="fn4"><a href="#fnref4">↩</a></li>
<li id="fn5"><a href="#fnref5">↩</a></li>
<li id="fn6"><a href="#fnref6">↩</a></li>
<li id="fn7"><a href="#fnref7">↩</a></li>
<li id="fn8"><a href="#fnref8">↩</a></li>
<li id="fn9"><a href="#fnref9">↩</a></li>
<li id="fn10"></li>
<li id="fn11"><a href="#fnref11">↩</a></li>
<li id="fn12"><a href="#fnref12">↩</a></li>
<li id="fn13"></li>
<li id="fn14"></li>
</ol>
</section>
</body>
</html>
