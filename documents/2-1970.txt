


Spectrum analyzer




Spectrum analyzer

(Figure)
A spectrum analyzer from 2005

(Figure)
The main PCB from a  spectrum analyser. Showing the stripline PCB filters, and modular block construction.

A spectrum analyzer measures the magnitude of an input signal versus frequency within the full frequency range of the instrument. The primary use is to measure the power of the spectrum of known and unknown signals. The input signal that a spectrum analyzer measures is electrical, however, spectral compositions of other signals, such as acoustic pressure waves and optical light waves, can be considered through the use of an appropriate transducer. Optical spectrum analyzers also exist, which use direct optical techniques such as a monochromator to make measurements.
By analyzing the spectra of electrical signals, dominant frequency, power, distortion, harmonics, bandwidth, and other spectral components of a signal can be observed that are not easily detectable in time domain waveforms. These parameters are useful in the characterization of electronic devices, such as wireless transmitters.
The display of a spectrum analyzer has frequency on the horizontal axis and the amplitude displayed on the vertical axis. To the casual observer, a spectrum analyzer looks like an oscilloscope and, in fact, some lab instruments can function either as an oscilloscope or a spectrum analyzer.
History
 The first spectrum analyzers, in the 1960s, were swept-tuned instruments.1
Following the discovery of the fast Fourier transform (FFT) in 1965, the first FFT-based analyzers were introduced in 1967.2
Today, there are three basic types of analyzer: the swept-tuned spectrum analyzer, the vector signal analyzer, and the real-time spectrum analyzer.3
Types
 Spectrum analyzer types are dictated by the methods used to obtain the spectrum of a signal. There are swept-tuned and FFT based spectrum analyzers:

A swept-tuned spectrum analyzer uses a superheterodyne receiver to down-convert a portion of the input signal spectrum (using a voltage-controlled oscillator and a mixer) to the center frequency of a band-pass filter. With a superheterodyne architecture, the voltage-controlled oscillator is swept through a range of frequencies, enabling the consideration of the full frequency range of the instrument.
A ''FFT '' spectrum analyzer computes the discrete Fourier transform (DFT), a mathematical process that transforms a waveform into the components of its frequency spectrum, of the input signal.

Some spectrum analyzers, such as real-time spectrum analyzers, use a hybrid technique where the incoming signal is first down-converted to a lower frequency using superheterodyne techniques and then analyzed using fast fourier transformation (FFT) techniques.
Form factor
Spectrum analyzers tend to fall into four form factors: benchtop, portable, handheld and networked.
Benchtop
This form factor is useful for applications where the spectrum analyzer can be plugged into AC power, which generally means in a lab environment or production/manufacturing area. Bench top spectrum analyzers have historically offered better performance and specifications than the portable or handheld form factor. Bench top spectrum analyzers normally have multiple fans (with associated vents) to dissipate heat produced by the processor. Due to their architecture, bench top spectrum analyzers typically weigh more than . Some bench top spectrum analyzers offer optional battery packs, allowing them to be used away from AC power. This type of analyzer is often referred to as a "portable" spectrum analyzer..
Portable
This form factor is useful for any applications where the spectrum analyzer needs to be taken outside to make measurements or simply carried while in use. Attributes that contribute to a useful portable spectrum analyzer include:

Optional battery-powered operation to allow the user to move freely outside.
Clearly viewable display to allow the screen to be read in bright sunlight, darkness or dusty conditions..
Light weight (usually less than ).

Handheld
This form factor is useful for any application where the spectrum analyzer needs to be very light and small. Handheld analyzers usually offer a limited capability relative to larger systems. Attributes that contribute to a useful handheld spectrum analyzer include:

Very low power consumption.
Battery-powered operation while in the field to allow the user to move freely outside.
Very small size
Light weight (usually less than ).

Networked
This form factor does not include a display and these devices are designed to enable a new class of geographically-distributed spectrum monitoring and analysis applications. The key attribute is the ability to connect the analyzer to a network and monitor such devices across a network. While many spectrum analyzers have an Ethernet port for control, they typically lack efficient data transfer mechanisms and are too bulky and/or expensive to be deployed in such a distributed manner. Key applications for such devices include RF intrusion detection systems for secure facilities where wireless signaling is prohibited. As well cellular operators are using such analyzers to remotely monitor interference in licensed spectral bands. The distributed nature of such devices enable geo-location of transmitters, spectrum monitoring for dynamic spectrum access and many other such applications.
Key attributes of such devices include:

Network-efficient data transfer
Low power consumption
The ability to synchronize data captures across a network of analyzers
Low cost to enable mass deployment.

Theory of operation
(Figure)
This animation shows how the resolution bandwidth of a swept-tuned spectrum analyzer is affected by the IF bandpass filter. Notice that wider bandwidth filters are unable to resolve the two closely space frequencies and the LO feedthrough causes the appearance of a baseband signal.

Swept-tuned
As discussed above in types, a swept-tuned spectrum analyzer down-converts a portion of the input signal spectrum to the center frequency of a band-pass filter by sweeping the voltage-controlled oscillator through a range of frequencies, enabling the consideration of the full frequency range of the instrument.
The bandwidth of the band-pass filter dictates the resolution bandwidth, which is related to the minimum bandwidth detectable by the instrument. As demonstrated by the animation to the right, the smaller the bandwidth, the more spectral resolution. However, there is a trade-off between how quickly the display can update the full frequency span under consideration and the frequency resolution, which is relevant for distinguishing frequency components that are close together. For a swept-tuned architecture, this relation for sweep time is useful:



Where ST is sweep time in seconds, k is proportionality constant, Span is the frequency range under consideration in hertz, and RBW is the resolution bandwidth in hertz.4 Sweeping too fast, however, causes a drop in displayed amplitude and a shift in the displayed frequency.5
Also, the animation contains both up- and down-converted spectra, which is due to a frequency mixer producing both sum and difference frequencies. The local oscillator feedthrough is due to the imperfect isolation from the IF signal path in the mixer.
For very weak signals, a pre-amplifier is used, although harmonic and intermodulation distortion may lead to the creation of new frequency components that were not present in the original signal.
FFT-based
With an FFT based spectrum analyzer, the frequency resolution is 
 
 
 
 , the inverse of the time T over which the waveform is measured and Fourier transformed.
With Fourier transform analysis in a digital spectrum analyzer, it is necessary to sample the input signal with a sampling frequency 
 
 
 
  that is at least twice the bandwidth of the signal, due to the Nyquist limit.6 A Fourier transform will then produce a spectrum containing all frequencies from zero to 
 
 
 
 . This can place considerable demands on the required analog-to-digital converter and processing power for the Fourier transform, making FFT based spectrum analyzers limited in frequency range. 
Hybrid superheterodyne-FFT
Since FFT based analyzers are only capable of considering narrow bands, one technique is to combine swept and FFT analysis for consideration of wide and narrow spans. This technique allows for faster sweep time.
This method is made possible by first down converting the signal, then digitizing the intermediate frequency and using superheterodyne or FFT techniques to acquire the spectrum.
One benefit of digitizing the intermediate frequency is the ability to use digital filters, which have a range of advantages over analog filters such as near perfect shape factors and improved filter settling time. Also, for consideration of narrow spans, the FFT can be used to increase sweep time without distorting the displayed spectrum.
Realtime FFT
 
A realtime spectrum analyser does not have any such blind time—up to some maximum span, often called the "realtime bandwidth". The analyser is able to sample the incoming RF spectrum in the time domain and convert the information to the frequency domain using the FFT process. FFT's are processed in parallel, gapless and overlapped so there are no gaps in the calculated RF spectrum and no information is missed.
Online realtime and offline realtime
In a sense, any spectrum analyzer that has vector signal analyzer capability is a realtime analyzer. It samples data fast enough to satisfy Nyquist Sampling theorem and stores the data in memory for later processing. This kind of analyser is only realtime for the amount of data / capture time it can store in memory and still produces gaps in the spectrum and results during processing time.
FFT overlapping
Minimizing distortion of information is important in all spectrum analyzers. The FFT process applies windowing techniques to improve the output spectrum due to producing less side lobes. The effect of windowing may also reduce the level of a signal where it is captured on the boundary between one FFT and the next. For this reason FFT's in a Realtime spectrum analyzer are overlapped. Overlapping rate is approximately 80%. An analyzer that utilises a 1024-point FFT process will re-use approximately 819 samples from the previous FFT process.7
Minimum signal detection time
This is related to the sampling rate of the analyser and the FFT rate. It is also important for the realtime spectrum analyzer to give good level accuracy.
Example: for an analyser with  of realtime bandwidth (the maximum RF span that can be processed in realtime) approximately  (complex) are needed. If the spectrum analyzer produces  an FFT calculation is produced every  For a  FFT a full spectrum is produced  approximately every  This also gives us our overlap rate of 80% 
Persistence
Realtime spectrum analyzers are able to produce much more information for users to examine the frequency spectrum in more detail. A normal swept spectrum analyzer would produce max peak, min peak displays for example but a realtime spectrum analyzer is able to plot all calculated FFT's over a given period of time with the added colour-coding which represents how often a signal appears. For example, this image shows the difference between how a spectrum is displayed in a normal swept spectrum view and using a "Persistence" view on a realtime spectrum analyzer.
Hidden signals
Realtime spectrum analyzers are able to see signals hidden behind other signals. This is possible because no information is missed and the display to the user is the output of FFT calculations. An example of this can be seen on the right.
Typical functionality
Center frequency and span
In a typical spectrum analyzer there are options to set the start, stop, and center frequency. The frequency halfway between the stop and start frequencies on a spectrum analyzer display is known as the center frequency. This is the frequency that is in the middle of the display’s frequency axis. Span specifies the range between the start and stop frequencies. These two parameters allow for adjustment of the display within the frequency range of the instrument to enhance visibility of the spectrum measured.
Resolution bandwidth
As discussed in the operation section, the resolution bandwidth filter or RBW filter is the bandpass filter in the IF path. It's the bandwidth of the RF chain before the detector (power measurement device).8 It determines the RF noise floor and how close two signals can be and still be resolved by the analyzer into two separate peaks.9 Adjusting the bandwidth of this filter allows for the discrimination of signals with closely spaced frequency components, while also changing the measured noise floor. Decreasing the bandwidth of an RBW filter decreases the measured noise floor and vice versa. This is due to higher RBW filters passing more frequency components through to the envelope detector than lower bandwidth RBW filters, therefore a higher RBW causes a higher measured noise floor.
Video bandwidth
The video bandwidth filter or VBW filter is the low-pass filter directly after the envelope detector. It's the bandwidth of the signal chain after the detector. Averaging or peak detection then refers to how the digital storage portion of the device records samples—it takes several samples per time step and stores only one sample, either the average of the samples or the highest one.10 The video bandwidth determines the capability to discriminate between two different power levels.11 This is because a narrower VBW will remove noise in the detector output.12 This filter is used to “smooth” the display by removing noise from the envelope. Similar to the RBW, the VBW affects the sweep time of the display if the VBW is less than the RBW. If VBW is less than RBW, this relation for sweep time is useful:



Here tsweep is the sweep time, k is a dimensionless proportionality constant, f2 − f1 is the frequency range of the sweep, RBW is the resolution bandwidth, and VBW is the video bandwidth.13
Detector
With the advent of digitally based displays, some modern spectrum analyzers use analog-to-digital converters to sample spectrum amplitude after the VBW filter. Since displays have a discrete number of points, the frequency span measured is also digitised. Detectors are used in an attempt to adequately map the correct signal power to the appropriate frequency point on the display. There are in general three types of detectors: sample, peak, and average

Sample detection – sample detection simply uses the midpoint of a given interval as the display point value. While this method does represent random noise well, it does not always capture all sinusoidal signals.
Peak detection – peak detection uses the maximum measured point within a given interval as the display point value. This insures that the maximum sinusoid is measured within the interval; however, smaller sinusoids within the interval may not be measured. Also, peak detection does not give a good representation of random noise.
Average detection – average detection uses all of the data points within the interval to consider the display point value. This is done by power (rms) averaging, voltage averaging, or log-power averaging.

Displayed average noise level
The Displayed Average Noise Level (DANL) is just what it says it is—the average noise level displayed on the analyzer. This can either be with a specific resolution bandwidth (e.g. -120 dBm @1 kHz RBW), or normalized to 1 Hz (usually in dBm/Hz) e.g. -170 dBm(Hz)14
Radio-frequency uses
 Spectrum analyzers are widely used to measure the frequency response, noise and distortion characteristics of all kinds of radio-frequency (RF) circuitry, by comparing the input and output spectra.
In telecommunications, spectrum analyzers are used to determine occupied bandwidth and track interference sources. For example, cell planners use this equipment to determine interference sources in the GSM frequency bands and UMTS frequency bands.
In EMC testing, a spectrum analyzer is used for basic precompliance testing; however, it can not be used for full testing and certification. Instead, an EMI receiver is used.
A spectrum analyzer is used to determine whether a wireless transmitter is working according to federally defined standards for purity of emissions. Output signals at frequencies other than the intended communications frequency appear as vertical lines (pips) on the display. A spectrum analyzer is also used to determine, by direct observation, the bandwidth of a digital or analog signal.
A spectrum analyzer interface is a device that connects to a wireless receiver or a personal computer to allow visual detection and analysis of electromagnetic signals over a defined band of frequencies. This is called panoramic reception and it is used to determine the frequencies of sources of interference to wireless networking equipment, such as Wi-Fi and wireless routers.
Spectrum analyzers can also be used to assess RF shielding. RF shielding is of particular importance for the siting of a magnetic resonance imaging machine since stray RF fields would result in artifacts in an MR image.15
Audio-frequency uses
Spectrum analysis can be used at audio frequencies to analyse the harmonics of an audio signal. A typical application is to measure the distortion of a nominally sinewave signal; a very-low-distortion sinewave is used as the input to equipment under test, and a spectrum analyser can examine the output, which will have added distortion products, and determine the percentage distortion at each harmonic of the fundamental. Such analysers were at one time described as "wave analysers". Analysis can be carried out by a general-purpose digital computer with a sound card selected for suitable performance16 and appropriate software. Instead of using a low-distortion sinewave, the input can be subtracted from the output, attenuated and phase-corrected, to give only the added distortion and noise, which can be analysed.17
An alternative technique, total harmonic distortion measurement, cancels out the fundamental with a notch filter and measures the total remaining signal, which is total harmonic distortion plus noise; it does not give the harmonic-by-harmonic detail of an analyser.
Optical spectrum analyzer
An optical spectrum analyzer uses reflective and/or refractive techniques to separate out the wavelengths of light. An electro-optical detector is used to measure the intensity of the light, which is then normally displayed on a screen in a similar manner to a radio- or audio-frequency spectrum analyzer.
The input to an optical spectrum analyzer may be simply via an aperture in the instrument's case, an optical fiber or an optical connector to which a fiber-optic cable can be attached.
Different techniques exist for separating out the wavelengths. One method is to use a monochromator, for example a Czerny-Turner design, with an optical detector placed at the output slit. As the grating in the monochromator moves, bands of different frequencies (colors) are 'seen' by the detector, and the resulting signal can then be plotted on a display. More precise measurements (down to MHz in the optical spectrum) can be made with a scanning Fabry–Pérot interferometer along with analog or digital control electronics, which sweep the resonant frequency of an optically resonant cavity using a voltage ramp to piezoelectric motor that varies the distance between two highly reflective mirrors. A sensitive photodiode embedded in the cavity provides an intensity signal, which is plotted against the ramp voltage to produce a visual representation of the optical power spectrum.18
The frequency response of optical spectrum analyzers tends to be relatively limited, e.g.  (near-infrared), depending on the intended purpose, although (somewhat) wider-bandwidth general purpose instruments are available.
See also

Electrical measurements
Electromagnetic spectrum
Measuring receiver
Radio frequency sweep
Spectral leakage
Spectral music
Radio spectrum scope
Spectrogram
Spectrometer

References
Footnotes
External links

Sri Welaratna, "1", Sound and Vibration (January 1997, 30th anniversary issue). A historical review of hardware spectrum-analyzer devices.
Spectrum Analyzer Tutorial Covers various types of spectrum analyser, specifications and measurements.
Spectrum Analyzer online Demo

"
Category:Electronic test equipment Category:Laboratory equipment Category:Radio technology Category:Signal processing Category:Spectroscopy Category:Scattering



Take A Peek Inside Today's Spectrum Analyzers; Bob Hiebert, 2005, accessed 10 April 2013.
The ‘Real’ History of Real-Time Spectrum Analyzers; Joe Deery, 2007, accessed 10 April 2013.

Agilent Spectrum Analysis Basics, p. 23, August 2, 2006, accessed July 7, 2011.
Agilent Spectrum Analysis Basics, p. 22, Figure 2–14, August 2, 2006, accessed July 7, 2011.
[http://www.home.agilent.com/agilent/editorial.jspx?cc=US&lc;;=eng&ckey;=1775376&nid;=-536900125.0.00&id;=1775376&pselect;=SR.GENERAL How do I know what is the best sampling rate to use for my measurement?]
Dr. Florian Ramian - Implementation of Real-Time Spectrum Analysis, p. 6, January, 2011, accessed August 9, 2011.
[http://www.piclist.com/techref/postbot.asp?by=thread&id;;=%5BEE%5D+TV+Tuner+Based+Spectrum+Analyzer&w;=body&tgt;=post&at;=20120524233824apiclist.com - [EE] TV Tuner Based Spectrum Analyzer], 2012-05-25




Agilent Spectrum Analysis Basics, p. 36, August 2, 2006, accessed July 13, 2011.
http://www.home.agilent.com/upload/cmc_upload/All/5952-0292EN.pdf Page 50
http://www.aapm.org/pubs/reports/RPT_100.pdf
ClariSonus Research Report #001, PC Sound Card Evaluation,John Atwood, 2006. Detailed tests of various sound cards for use as D/A and A/D converters for sound testing software on a PC
Renardson audio designs: Distortion measurement
Final Report http://mason.gmu.edu/~jdilles/capstone/




