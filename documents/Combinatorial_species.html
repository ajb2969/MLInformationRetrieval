<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="515">Combinatorial species</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Combinatorial species</h1>
<hr/>

<p>In <a href="combinatorics" title="wikilink">combinatorial</a> <a class="uri" href="mathematics" title="wikilink">mathematics</a>, the theory of <strong>combinatorial species</strong> is an abstract, systematic method for analysing discrete structures in terms of <a href="generating_function" title="wikilink">generating functions</a>. Examples of discrete structures are (<a href="wiktionary:finite" title="wikilink">finite</a>) <a href="Graph_(mathematics)" title="wikilink">graphs</a>, <a href="permutation" title="wikilink">permutations</a>, <a href="Tree_(graph_theory)" title="wikilink">trees</a>, and so on; each of these has an associated generating function which counts how many structures there are of a certain size. One goal of species theory is to be able to analyse complicated structures by describing them in terms of transformations and combinations of simpler structures. These operations correspond to equivalent manipulations of generating functions, so producing such functions for complicated structures is much easier than with other methods. The theory was introduced by <a href="André_Joyal" title="wikilink">André Joyal</a>.</p>

<p>The power of the theory comes from its level of abstraction. The "description format" of a structure (such as <a href="adjacency_list" title="wikilink">adjacency list</a> versus <a href="adjacency_matrix" title="wikilink">adjacency matrix</a> for graphs) is irrelevant, because species are purely algebraic. <a href="Category_theory" title="wikilink">Category theory</a> provides a useful language for the concepts that arise here, but it is not necessary to understand categories before being able to work with species.</p>
<h2 id="definition-of-species">Definition of species</h2>
<figure><b>(Figure)</b>
<figcaption>Schematic illustration of a combinatorial species structure on five elements.</figcaption>
</figure>

<p>Any structure — an instance of a particular species — is associated with some <a href="Set_(mathematics)" title="wikilink">set</a>, and there are often many possible structures for the same set. For example, it is possible to construct several different graphs whose node labels are drawn from the same given set. At the same time, any set could be used to build the structures. The difference between one species and another is that they build a different set of structures out of the same base set.</p>

<p>This leads to the formal definition of a <em>combinatorial species</em>. Let 

<math display="inline" id="Combinatorial_species:0">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ℬ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ℬ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{B}
  </annotation>
 </semantics>
</math>

 be the category of finite sets and <a href="bijection" title="wikilink">bijections</a> (the collection of all finite sets, and invertible functions between them). A species is a <a class="uri" href="functor" title="wikilink">functor</a></p>

<p>

<math display="block" id="Combinatorial_species:1">
 <semantics>
  <mrow>
   <mrow>
    <mi>F</mi>
    <mo>:</mo>
    <mrow>
     <mi class="ltx_font_mathcaligraphic">ℬ</mi>
     <mo>→</mo>
     <mi class="ltx_font_mathcaligraphic">ℬ</mi>
    </mrow>
   </mrow>
   <mo>;</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>F</ci>
    <apply>
     <ci>normal-→</ci>
     <ci>ℬ</ci>
     <ci>ℬ</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F\colon\mathcal{B}\to\mathcal{B};\,
  </annotation>
 </semantics>
</math>

</p>

<p>given a set <em>A</em>, it yields the set <em>F</em>[<em>A</em>] of <em>F</em>-structures on <em>A</em>. A functor also operates on bijections. If φ is a bijection between sets <em>A</em> and <em>B</em>, then <em>F</em>[φ] is a bijection between the sets of <em>F</em>-structures <em>F</em>[<em>A</em>] and <em>F</em>[<em>B</em>], called <em>transport of F-structures along φ</em>.</p>

<p>For example, the "species of permutations" maps each finite set <em>A</em> to the set of all permutations of <em>A</em>, and each bijection from <em>A</em> to another set <em>B</em> naturally induces a bijection from the set of all permutations of <em>A</em> to the set of all permutations of <em>B</em>. Similarly, the "species of partitions" can be defined by assigning to each finite set the set of all its <a href="partition_of_a_set" title="wikilink">partitions</a>, and the "power set species" assigns to each finite set its <a href="power_set" title="wikilink">power set</a>.</p>

<p>There is a standard way of illustrating an instance of any structure, regardless of its nature. The diagram on the right shows a structure on a set of five elements: arcs connect the structure (red) to the elements (blue) from which it is built.</p>

<p>The choice of 

<math display="inline" id="Combinatorial_species:2">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ℬ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ℬ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{B}
  </annotation>
 </semantics>
</math>

 as the category on which species operate is important. Because a bijection can only exist between two sets when they have the same size, the number of elements in <em>F</em>[<em>A</em>] depends only on the size of <em>A</em>. (This follows from the formal definition of a functor.) Restriction to finite sets means that |<em>F</em>[<em>A</em>]| is always finite, so it is possible to do arithmetic with such quantities. In particular, the <em>exponential generating series</em> <em>F</em>(<em>x</em>) of a species <em>F</em> can be defined:</p>

<p>

<math display="block" id="Combinatorial_species:3">
 <semantics>
  <mrow>
   <mrow>
    <mi>F</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <munder>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mrow>
      <mi>n</mi>
      <mo>≥</mo>
      <mn>0</mn>
     </mrow>
    </munder>
    <mrow>
     <msub>
      <mi>f</mi>
      <mi>n</mi>
     </msub>
     <mfrac>
      <msup>
       <mi>x</mi>
       <mi>n</mi>
      </msup>
      <mrow>
       <mi>n</mi>
       <mo lspace="0pt" rspace="3.5pt">!</mo>
      </mrow>
     </mfrac>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>F</ci>
     <ci>x</ci>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <geq></geq>
       <ci>n</ci>
       <cn type="integer">0</cn>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>f</ci>
       <ci>n</ci>
      </apply>
      <apply>
       <divide></divide>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>x</ci>
        <ci>n</ci>
       </apply>
       <apply>
        <factorial></factorial>
        <ci>n</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F(x)=\sum_{n\geq 0}f_{n}\frac{x^{n}}{n!}
  </annotation>
 </semantics>
</math>

 where 

<math display="inline" id="Combinatorial_species:4">
 <semantics>
  <msub>
   <mi>f</mi>
   <mi>n</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>f</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{n}
  </annotation>
 </semantics>
</math>

 is the size of <em>F</em>[<em>A</em>] for any set <em>A</em> having <em>n</em> elements.</p>

<p>Some examples:</p>
<ul>
<li>The species of sets (traditionally called <em>E</em>, from the French "<em>ensemble</em>", meaning "set") is the functor which maps <em>A</em> to {<em>A</em>}. Then 

<math display="inline" id="Combinatorial_species:5">
 <semantics>
  <mrow>
   <msub>
    <mi>f</mi>
    <mi>n</mi>
   </msub>
   <mo>=</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <ci>n</ci>
    </apply>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{n}=1
  </annotation>
 </semantics>
</math>

, so 

<math display="inline" id="Combinatorial_species:6">
 <semantics>
  <mrow>
   <mrow>
    <mi>E</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <msup>
    <mi>e</mi>
    <mi>x</mi>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>E</ci>
     <ci>x</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>e</ci>
     <ci>x</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   E(x)=e^{x}
  </annotation>
 </semantics>
</math>

.</li>
<li>The species <em>S</em> of permutations, described above, has 

<math display="inline" id="Combinatorial_species:7">
 <semantics>
  <mrow>
   <msub>
    <mi>f</mi>
    <mi>n</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mi>n</mi>
    <mo lspace="0pt" rspace="3.5pt">!</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <ci>n</ci>
    </apply>
    <apply>
     <factorial></factorial>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{n}=n!
  </annotation>
 </semantics>
</math>

. 

<math display="inline" id="Combinatorial_species:8">
 <semantics>
  <mrow>
   <mrow>
    <mi>S</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mn>1</mn>
    <mo>/</mo>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mn>1</mn>
      <mo>-</mo>
      <mi>x</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>S</ci>
     <ci>x</ci>
    </apply>
    <apply>
     <divide></divide>
     <cn type="integer">1</cn>
     <apply>
      <minus></minus>
      <cn type="integer">1</cn>
      <ci>x</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S(x)=1/(1-x)
  </annotation>
 </semantics>
</math>

.</li>
<li>The species <em>T</em><sub>2</sub> of pairs (2-<a href="tuple" title="wikilink">tuples</a>) is the functor taking a set <em>A</em> to <em>A</em><sup>2</sup>. Then 

<math display="inline" id="Combinatorial_species:9">
 <semantics>
  <mrow>
   <msub>
    <mi>f</mi>
    <mi>n</mi>
   </msub>
   <mo>=</mo>
   <msup>
    <mi>n</mi>
    <mn>2</mn>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>f</ci>
     <ci>n</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>n</ci>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f_{n}=n^{2}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Combinatorial_species:10">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>T</mi>
     <mn>2</mn>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>x</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>x</mi>
      <mo>+</mo>
      <mn>1</mn>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <msup>
     <mi>e</mi>
     <mi>x</mi>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>T</ci>
      <cn type="integer">2</cn>
     </apply>
     <ci>x</ci>
    </apply>
    <apply>
     <times></times>
     <ci>x</ci>
     <apply>
      <plus></plus>
      <ci>x</ci>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>e</ci>
      <ci>x</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   T_{2}(x)=x(x+1)e^{x}
  </annotation>
 </semantics>
</math>

.</li>
</ul>
<h2 id="calculus-of-species">Calculus of species</h2>

<p>Arithmetic on generating functions corresponds to certain "natural" operations on species. The basic operations are addition, multiplication, composition, and differentiation; it is also necessary to define equality on species. Category theory already has a way of describing when two functors are equivalent: a <a href="natural_isomorphism" title="wikilink">natural isomorphism</a>. In this context, it just means that for each <em>A</em> there is a bijection between <em>F</em>-structures on <em>A</em> and <em>G</em>-structures on <em>A</em>, which is "well-behaved" in its interaction with transport. Species with the same generating function might not be isomorphic, but isomorphic species do always have the same generating function.</p>
<h3 id="basic-operations">Basic operations</h3>

<p><strong>Addition</strong> of species is defined by the <a href="disjoint_union" title="wikilink">disjoint union</a> of sets, and corresponds to a choice between structures. For species <em>F</em> and <em>G</em>, define (<em>F</em> + <em>G</em>)[<em>A</em>] to be the disjoint union (also written "+") of <em>F</em>[<em>A</em>] and <em>G</em>[<em>A</em>]. It follows that (<em>F</em> + <em>G</em>)(<em>x</em>) = <em>F</em>(<em>x</em>) + <em>G</em>(<em>x</em>). As a demonstration, take <em>E</em><sup>+</sup> to be the species of non-empty sets, whose generating function is <em>E</em><sup>+</sup>(<em>x</em>) = <em>e</em><sup><em>x</em></sup> − 1, and <strong>1</strong> the species of the <a href="empty_set" title="wikilink">empty set</a>, whose generating function is <strong>1</strong>(<em>x</em>) = 1. It follows that <em>E</em> = <strong>1</strong> + <em>E</em><sup>+</sup>: in words, "a set is either empty or non-empty". Equations like this can be read as referring to a single structure, as well as to the entire collection of structures.</p>

<p><strong>Multiplying</strong> species is slightly more complicated. It is possible to just take the Cartesian product of sets as the definition, but the combinatorial interpretation of this is not quite right. (See below for the use of this kind of product.) Rather than putting together two unrelated structures on the same set, the multiplication operator uses the idea of splitting the set into two components, constructing an <em>F</em>-structure on one and a <em>G</em>-structure on the other.</p>

<p>

<math display="block" id="Combinatorial_species:11">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>F</mi>
       <mo>⋅</mo>
       <mi>G</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mrow>
      <mo stretchy="false">[</mo>
      <mi>A</mi>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <munder>
      <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
      <mrow>
       <mi>A</mi>
       <mo>=</mo>
       <mrow>
        <mi>B</mi>
        <mo>+</mo>
        <mi>C</mi>
       </mrow>
      </mrow>
     </munder>
     <mrow>
      <mrow>
       <mrow>
        <mi>F</mi>
        <mrow>
         <mo stretchy="false">[</mo>
         <mi>B</mi>
         <mo stretchy="false">]</mo>
        </mrow>
       </mrow>
       <mo>×</mo>
       <mi>G</mi>
      </mrow>
      <mrow>
       <mo stretchy="false">[</mo>
       <mi>C</mi>
       <mo stretchy="false">]</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>normal-⋅</ci>
      <ci>F</ci>
      <ci>G</ci>
     </apply>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <eq></eq>
       <ci>A</ci>
       <apply>
        <plus></plus>
        <ci>B</ci>
        <ci>C</ci>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <times></times>
       <apply>
        <times></times>
        <ci>F</ci>
        <apply>
         <csymbol cd="latexml">delimited-[]</csymbol>
         <ci>B</ci>
        </apply>
       </apply>
       <ci>G</ci>
      </apply>
      <apply>
       <csymbol cd="latexml">delimited-[]</csymbol>
       <ci>C</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (F\cdot G)[A]=\sum_{A=B+C}F[B]\times G[C].
  </annotation>
 </semantics>
</math>

 This is a disjoint union over all possible binary partitions of <em>A</em>. It is straightforward to show that multiplication is <a href="Associativity" title="wikilink">associative</a> and <a href="Commutativity" title="wikilink">commutative</a> (<a href="up_to" title="wikilink">up to</a> <a class="uri" href="isomorphism" title="wikilink">isomorphism</a>), and <a href="Distributivity" title="wikilink">distributive</a> over addition. As for the generating series, (<em>F</em> · <em>G</em>)(<em>x</em>) = <em>F</em>(<em>x</em>)<em>G</em>(<em>x</em>).</p>

<p>The diagram below shows one possible (<em>F</em> · <em>G</em>)-structure on a set with five elements. The <em>F</em>-structure (red) picks up three elements of the base set, and the <em>G</em>-structure (light blue) takes the rest. Other structures will have <em>F</em> and <em>G</em> splitting the set in a different way. The set (<em>F</em> · <em>G</em>)[<em>A</em>], where <em>A</em> is the base set, is the disjoint union of all such structures.</p>
<figure><b>(Figure)</b>
<figcaption>Multiplication of combinatorial species.svg</figcaption>
</figure>

<p><strong>Composition</strong>, also called substitution, is more complicated again. The basic idea is to replace components of <em>F</em> with <em>G</em>-structures, forming (<em>F</em>∘<em>G</em>). As with multiplication, this is done by splitting the input set <em>A</em>; the disjoint subsets are given to <em>G</em> to make <em>G</em>-structures, and the set of subsets is given to <em>F</em>, to make the <em>F</em>-structure linking the <em>G</em>-structures. It is required for <em>G</em> to map the empty set to itself, in order for composition to work. The formal definition is:</p>

<p>

<math display="block" id="Combinatorial_species:12">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>F</mi>
       <mo>∘</mo>
       <mi>G</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mrow>
      <mo stretchy="false">[</mo>
      <mi>A</mi>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <munder>
      <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
      <mrow>
       <mi>π</mi>
       <mo>∈</mo>
       <mrow>
        <mi>P</mi>
        <mrow>
         <mo stretchy="false">[</mo>
         <mi>A</mi>
         <mo stretchy="false">]</mo>
        </mrow>
       </mrow>
      </mrow>
     </munder>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mrow>
        <mrow>
         <mi>F</mi>
         <mrow>
          <mo stretchy="false">[</mo>
          <mi>π</mi>
          <mo stretchy="false">]</mo>
         </mrow>
        </mrow>
        <mo>×</mo>
        <msub>
         <mi mathvariant="normal">Π</mi>
         <mrow>
          <mi>B</mi>
          <mo>∈</mo>
          <mi>π</mi>
         </mrow>
        </msub>
       </mrow>
       <mi>G</mi>
       <mrow>
        <mo stretchy="false">[</mo>
        <mi>B</mi>
        <mo stretchy="false">]</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <compose></compose>
      <ci>F</ci>
      <ci>G</ci>
     </apply>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <in></in>
       <ci>π</ci>
       <apply>
        <times></times>
        <ci>P</ci>
        <apply>
         <csymbol cd="latexml">delimited-[]</csymbol>
         <ci>A</ci>
        </apply>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <times></times>
       <apply>
        <times></times>
        <ci>F</ci>
        <apply>
         <csymbol cd="latexml">delimited-[]</csymbol>
         <ci>π</ci>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>normal-Π</ci>
        <apply>
         <in></in>
         <ci>B</ci>
         <ci>π</ci>
        </apply>
       </apply>
      </apply>
      <ci>G</ci>
      <apply>
       <csymbol cd="latexml">delimited-[]</csymbol>
       <ci>B</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (F\circ G)[A]=\sum_{\pi\in P[A]}(F[\pi]\times\Pi_{B\in\pi}G[B]).
  </annotation>
 </semantics>
</math>

</p>

<p>Here, <em>P</em> is the species of partitions, so <em>P</em>[<em>A</em>] is the set of all partitions of <em>A</em>. This definition says that an element of (<em>F</em>∘<em>G</em>)[<em>A</em>] is made up of an <em>F</em>-structure on some partition of <em>A</em>, and a <em>G</em>-structure on each component of the partition. The generating series is 

<math display="inline" id="Combinatorial_species:13">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>F</mi>
      <mo>∘</mo>
      <mi>G</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>F</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>G</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>x</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <compose></compose>
      <ci>F</ci>
      <ci>G</ci>
     </apply>
     <ci>x</ci>
    </apply>
    <apply>
     <times></times>
     <ci>F</ci>
     <apply>
      <times></times>
      <ci>G</ci>
      <ci>x</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (F\circ G)(x)=F(G(x))
  </annotation>
 </semantics>
</math>

.</p>

<p>One such structure is shown below. Three <em>G</em>-structures (light blue) divide up the five-element base set between them; then, an <em>F</em>-structure (red) is built to connect the <em>G</em>-structures.</p>
<figure><b>(Figure)</b>
<figcaption>Composition (substitution) of combinatorial species.svg</figcaption>
</figure>

<p>These last two operations may be illustrated by the example of trees. First, define <em>X</em> to be the species "singleton" whose generating series is <em>X</em>(<em>x</em>) = <em>x</em>. Then the species <em>Ar</em> of rooted trees (from the French "<em>arborescence</em>") is defined recursively by <em>Ar</em> = <em>X</em> · <em>E</em>(<em>Ar</em>). This equation says that a tree consists of a single root and a set of (sub-)trees. The recursion does <em>not</em> need an explicit base case: it only generates trees in the context of being applied to some finite set. One way to think about this is that the <em>Ar</em> functor is being applied repeatedly to a "supply" of elements from the set — each time, one element is taken by <em>X</em>, and the others distributed by <em>E</em> among the <em>Ar</em> subtrees, until there are no more elements to give to <em>E</em>. This shows that algebraic descriptions of species are quite different from type specifications in programming languages like <a href="Haskell_(programming_language)" title="wikilink">Haskell</a>.</p>

<p>Likewise, the species <em>P</em> can be characterised as <em>P</em> = <em>E</em>(<em>E</em><sup>+</sup>): "a partition is a pairwise disjoint set of nonempty sets (using up all the elements of the input set)". The exponential generating series for <em>P</em> is 

<math display="inline" id="Combinatorial_species:14">
 <semantics>
  <mrow>
   <mrow>
    <mi>P</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <msup>
    <mi>e</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <msup>
       <mi>e</mi>
       <mi>x</mi>
      </msup>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>P</ci>
     <ci>x</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>e</ci>
     <apply>
      <minus></minus>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>e</ci>
       <ci>x</ci>
      </apply>
      <cn type="integer">1</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   P(x)=e^{(e^{x}-1)}
  </annotation>
 </semantics>
</math>

, which is the series for the <a href="Bell_numbers" title="wikilink">Bell numbers</a>.</p>

<p><strong><a href="derivative" title="wikilink">Differentiation</a></strong> of species intuitively corresponds to building "structures with a hole", as shown in the illustration below.</p>
<figure><b>(Figure)</b>
<figcaption>Derivative of combinatorial species.svg</figcaption>
</figure>

<p>Formally,</p>

<p>

<math display="block" id="Combinatorial_species:15">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <msup>
       <mi>F</mi>
       <mo>′</mo>
      </msup>
      <mo stretchy="false">)</mo>
     </mrow>
     <mrow>
      <mo stretchy="false">[</mo>
      <mi>A</mi>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mi>F</mi>
     <mrow>
      <mo stretchy="false">[</mo>
      <mrow>
       <mi>A</mi>
       <mo>⊎</mo>
       <mrow>
        <mo stretchy="false">{</mo>
        <mo>⋆</mo>
        <mo stretchy="false">}</mo>
       </mrow>
      </mrow>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>F</ci>
      <ci>normal-′</ci>
     </apply>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>F</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <ci>normal-⊎</ci>
       <ci>A</ci>
       <set>
        <ci>normal-⋆</ci>
       </set>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (F^{\prime})[A]=F[A\uplus\{\star\}],
  </annotation>
 </semantics>
</math>

</p>

<p>where 

<math display="inline" id="Combinatorial_species:16">
 <semantics>
  <mo>⋆</mo>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-⋆</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \star
  </annotation>
 </semantics>
</math>

 is some distinguished new element not present in 

<math display="inline" id="Combinatorial_species:17">
 <semantics>
  <mi>A</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>A</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A
  </annotation>
 </semantics>
</math>

.</p>

<p>As an example, consider the <a class="uri" href="15-puzzle" title="wikilink">15-puzzle</a>. After fixing almost any square, the new 14-puzzle has the same property : Only half of configuration are reachable. One may write <strong>15-puzzle'=14-puzzle</strong> or, more generally, <strong>Taquin'=Taquin</strong>. To differentiate the associated exponential series, the sequence of coefficients needs to be shifted one place to the "left" (losing the first term). This suggests a definition for species: ''F' <em>[</em>A<em>] = </em>F<em>[</em>A'' + {*}], where {*} is a singleton set and "+" is disjoint union. The more advanced parts of the theory of species use differentiation extensively, to construct and solve <a href="differential_equation" title="wikilink">differential equations</a> on species and series. The idea of adding (or removing) a single part of a structure is a powerful one: it can be used to establish relationships between seemingly unconnected species.</p>

<p>For example, consider a structure of the species <em>L</em> of linear orders—lists of elements of the ground set. Removing an element of a list splits it into two parts (possibly empty); in symbols, this is <em>L</em>' = <em>L</em>·<em>L</em>. The exponential generating function of <em>L</em> is <em>L</em>(<em>x</em>) = 1/(1 − <em>x</em>), and indeed:</p>

<p>

<math display="block" id="Combinatorial_species:18">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mfrac>
      <mi>d</mi>
      <mrow>
       <mi>d</mi>
       <mi>x</mi>
      </mrow>
     </mfrac>
     <msup>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mn>1</mn>
        <mo>-</mo>
        <mi>x</mi>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
      <mrow>
       <mo>-</mo>
       <mn>1</mn>
      </mrow>
     </msup>
    </mrow>
    <mo>=</mo>
    <msup>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mn>1</mn>
       <mo>-</mo>
       <mi>x</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mrow>
      <mo>-</mo>
      <mn>2</mn>
     </mrow>
    </msup>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <divide></divide>
      <ci>d</ci>
      <apply>
       <times></times>
       <ci>d</ci>
       <ci>x</ci>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
       <ci>x</ci>
      </apply>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
      </apply>
     </apply>
    </apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <minus></minus>
      <cn type="integer">1</cn>
      <ci>x</ci>
     </apply>
     <apply>
      <minus></minus>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \frac{d}{dx}{(1-x)}^{-1}={(1-x)}^{-2}.
  </annotation>
 </semantics>
</math>

</p>

<p>The species <em>C</em> of cyclic permutations takes a set <em>A</em> to the set of all cycles on <em>A</em>. Removing a single element from a cycle reduces it to a list: <em>C</em>' = <em>L</em>. We can <a href="Integral" title="wikilink">integrate</a> the generating function of <em>L</em> to produce that for <em>C</em>.</p>

<p>

<math display="block" id="Combinatorial_species:19">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>C</mi>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>x</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <msubsup>
      <mo largeop="true" symmetric="true">∫</mo>
      <mn>0</mn>
      <mi>x</mi>
     </msubsup>
     <mfrac>
      <mrow>
       <mi>d</mi>
       <mi>t</mi>
      </mrow>
      <mrow>
       <mn>1</mn>
       <mo>-</mo>
       <mi>t</mi>
      </mrow>
     </mfrac>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mi>log</mi>
     <mfrac>
      <mn>1</mn>
      <mrow>
       <mn>1</mn>
       <mo>-</mo>
       <mi>x</mi>
      </mrow>
     </mfrac>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <times></times>
      <ci>C</ci>
      <ci>x</ci>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <int></int>
        <cn type="integer">0</cn>
       </apply>
       <ci>x</ci>
      </apply>
      <apply>
       <divide></divide>
       <apply>
        <times></times>
        <ci>d</ci>
        <ci>t</ci>
       </apply>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
        <ci>t</ci>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <log></log>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <apply>
        <minus></minus>
        <cn type="integer">1</cn>
        <ci>x</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   C(x)=\int_{0}^{x}\frac{dt}{1-t}=\log\frac{1}{1-x}.
  </annotation>
 </semantics>
</math>

</p>

<p>A nice example of integration of a species is the completion of a line (coordonatizated by a field) with the infinite point and obtaining a projective line.</p>
<h3 id="a-simple-example---labeling-the-fano-plane">A simple example - labeling the Fano plane</h3>
<figure><b>(Figure)</b>
<figcaption>The <a href="Fano_plane" title="wikilink">Fano plane</a></figcaption>
</figure>

<p>Let temporarily, just for an easier reading</p>
<dl>
<dd><strong>Fano</strong> = X^7/PSL(2,7)a : the species that correspond to the <a href="collineation_group" title="wikilink">collineation group</a> of the <a href="Fano_plane" title="wikilink">Fano plane</a>
</dd>
</dl>

<p>and</p>
<dl>
<dd><strong>Klein</strong> = P<sub>4bic</sub> = the species that correspond to the <a href="Klein_group" title="wikilink">Klein group</a> transitively acting itself.
</dd>
</dl>

<p>then</p>
<dl>
<dd><strong>Fano" = X.Klein</strong>
</dd>
</dl>

<p>meaning : Since two points determine a line, after labeling any two points in the Fano plane another point is settled. The relabeling liberty for the rest of the four remaining points is described by the Klein Group.</p>

<p>By differentiation, one obtains :</p>
<dl>
<dd><strong>Fano"' = X'.Klein + X.Klein' = Klein + X.X.X.X</strong>
</dd>
</dl>

<p>meaning : After labeling three distinct points in the Fano plane, exactly two situation can occur :</p>
<dl>
<dd>- (Either the points are collinear and) the remaining labeling liberty is described by <strong>Klein</strong>
</dd>
<dd>- (Or the points form an oval and) the whole plane is coordinated : <strong>X.X.X.X</strong>
</dd>
</dl>

<p>The corresponding <a href="Cycle_index" title="wikilink">Cycle index</a> is :</p>

<p>

<math display="inline" id="Combinatorial_species:20">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>Z</mi>
     <mi>Fano</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>3</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>4</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>7</mn>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mfrac>
     <mn>1</mn>
     <mn>168</mn>
    </mfrac>
    <mrow>
     <mo stretchy="false">[</mo>
     <mrow>
      <msubsup>
       <mi>x</mi>
       <mn>1</mn>
       <mn>7</mn>
      </msubsup>
      <mo>+</mo>
      <mrow>
       <mn>21</mn>
       <msubsup>
        <mi>x</mi>
        <mn>1</mn>
        <mn>3</mn>
       </msubsup>
       <msubsup>
        <mi>x</mi>
        <mn>2</mn>
        <mn>2</mn>
       </msubsup>
      </mrow>
      <mo>+</mo>
      <mrow>
       <mn>42</mn>
       <msub>
        <mi>x</mi>
        <mn>1</mn>
       </msub>
       <msub>
        <mi>x</mi>
        <mn>2</mn>
       </msub>
       <msub>
        <mi>x</mi>
        <mn>4</mn>
       </msub>
      </mrow>
      <mo>+</mo>
      <mrow>
       <mn>56</mn>
       <msub>
        <mi>x</mi>
        <mn>1</mn>
       </msub>
       <msubsup>
        <mi>x</mi>
        <mn>3</mn>
        <mn>2</mn>
       </msubsup>
      </mrow>
      <mo>+</mo>
      <mrow>
       <mn>48</mn>
       <msub>
        <mi>x</mi>
        <mn>7</mn>
       </msub>
      </mrow>
     </mrow>
     <mo stretchy="false">]</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <ci>Fano</ci>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">3</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">4</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">7</cn>
      </apply>
     </vector>
    </apply>
    <apply>
     <times></times>
     <apply>
      <divide></divide>
      <cn type="integer">1</cn>
      <cn type="integer">168</cn>
     </apply>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <plus></plus>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">1</cn>
        </apply>
        <cn type="integer">7</cn>
       </apply>
       <apply>
        <times></times>
        <cn type="integer">21</cn>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>x</ci>
          <cn type="integer">1</cn>
         </apply>
         <cn type="integer">3</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>x</ci>
          <cn type="integer">2</cn>
         </apply>
         <cn type="integer">2</cn>
        </apply>
       </apply>
       <apply>
        <times></times>
        <cn type="integer">42</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">1</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">2</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">4</cn>
        </apply>
       </apply>
       <apply>
        <times></times>
        <cn type="integer">56</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">1</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>x</ci>
          <cn type="integer">3</cn>
         </apply>
         <cn type="integer">2</cn>
        </apply>
       </apply>
       <apply>
        <times></times>
        <cn type="integer">48</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">7</cn>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z_{\mathrm{Fano}}(x_{1},x_{2},x_{3},x_{4},x_{7})={1\over 168}[x_{1}^{7}+21x_{1%
}^{3}x_{2}^{2}+42x_{1}x_{2}x_{4}+56x_{1}x_{3}^{2}+48x_{7}]
  </annotation>
 </semantics>
</math>

</p>

<p>After two differentiation with respect to x<sub>1</sub> the Klein group shows up:</p>

<p>

<math display="inline" id="Combinatorial_species:21">
 <semantics>
  <mrow>
   <mrow>
    <msubsup>
     <mi>Z</mi>
     <mi>Fano</mi>
     <mi>′′</mi>
    </msubsup>
    <mo>=</mo>
    <msub>
     <mi>x</mi>
     <mn>1</mn>
    </msub>
   </mrow>
   <mo>.</mo>
   <mrow>
    <mrow>
     <mfrac>
      <mn>1</mn>
      <mn>4</mn>
     </mfrac>
     <mrow>
      <mo stretchy="false">[</mo>
      <mrow>
       <msubsup>
        <mi>x</mi>
        <mn>1</mn>
        <mn>4</mn>
       </msubsup>
       <mo>+</mo>
       <mrow>
        <mn>3</mn>
        <msubsup>
         <mi>x</mi>
         <mn>2</mn>
         <mn>2</mn>
        </msubsup>
       </mrow>
      </mrow>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <msub>
      <mi>Z</mi>
      <mi>Klein</mi>
     </msub>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Z</ci>
       <ci>Fano</ci>
      </apply>
      <ci>′′</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <cn type="integer">1</cn>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <cn type="integer">4</cn>
      </apply>
      <apply>
       <csymbol cd="latexml">delimited-[]</csymbol>
       <apply>
        <plus></plus>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>x</ci>
          <cn type="integer">1</cn>
         </apply>
         <cn type="integer">4</cn>
        </apply>
        <apply>
         <times></times>
         <cn type="integer">3</cn>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>x</ci>
           <cn type="integer">2</cn>
          </apply>
          <cn type="integer">2</cn>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Z</ci>
       <ci>Klein</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z_{\mathrm{Fano}}^{\prime\prime}=x_{1}.{1\over 4}[x_{1}^{4}+3x_{2}^{2}]=x_{1}Z%
_{\mathrm{Klein}}
  </annotation>
 </semantics>
</math>

</p>

<p>The e.g.f. is</p>

<p>

<math display="block" id="Combinatorial_species:22">
 <semantics>
  <mrow>
   <mrow>
    <mo largeop="true" symmetric="true">∫</mo>
    <mrow>
     <mo largeop="true" symmetric="true">∫</mo>
     <mrow>
      <mi>x</mi>
      <mo>⋅</mo>
      <mn>6</mn>
      <mo>⋅</mo>
      <mfrac>
       <msup>
        <mi>x</mi>
        <mn>4</mn>
       </msup>
       <mrow>
        <mn>4</mn>
        <mo lspace="0pt" rspace="3.5pt">!</mo>
       </mrow>
      </mfrac>
     </mrow>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mn>30</mn>
    <mo>⋅</mo>
    <mfrac>
     <msup>
      <mi>x</mi>
      <mn>7</mn>
     </msup>
     <mrow>
      <mn>7</mn>
      <mo lspace="0pt" rspace="3.5pt">!</mo>
     </mrow>
    </mfrac>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <int></int>
     <apply>
      <int></int>
      <apply>
       <ci>normal-⋅</ci>
       <ci>x</ci>
       <cn type="integer">6</cn>
       <apply>
        <divide></divide>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <ci>x</ci>
         <cn type="integer">4</cn>
        </apply>
        <apply>
         <factorial></factorial>
         <cn type="integer">4</cn>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <ci>normal-⋅</ci>
     <cn type="integer">30</cn>
     <apply>
      <divide></divide>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <cn type="integer">7</cn>
      </apply>
      <apply>
       <factorial></factorial>
       <cn type="integer">7</cn>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \int\int x\cdot 6\cdot{x^{4}\over 4!}=30\cdot{x^{7}\over 7!}
  </annotation>
 </semantics>
</math>

 hence there are 30 ways to label the plane. Here 6 represents the six distinct ways of labeling the affine (Klein) corresponding plane.</p>
<h3 id="further-operations">Further operations</h3>

<p>There are a variety of other manipulations which may be performed on species. These are necessary to express more complicated structures, such as <a href="directed_graph" title="wikilink">directed graphs</a> or <a href="bigraph" title="wikilink">bigraphs</a>.</p>

<p><strong>Pointing</strong> selects a single element in a structure. Given a species <em>F</em>, the corresponding pointed species <em>F</em><sup>•</sup> is defined by <em>F</em><sup>•</sup>[<em>A</em>] = <em>A</em> × <em>F</em>[<em>A</em>]. Thus each <em>F</em><sup>•</sup>-structure is an <em>F</em>-structure with one element distinguished. Pointing is related to <a href="differentiation_(mathematics)" title="wikilink">differentiation</a> by the relation <em>F</em><sup>•</sup> = <em>X</em>·''F' '', so <em>F</em><sup>•</sup>(<em>x</em>) = <em>x</em> ''F' <em>(</em>x''). The species of <a href="pointed_set" title="wikilink">pointed sets</a>, <em>E</em><sup>•</sup>, is particularly important as a building block for many of the more complex constructions.</p>

<p>The <strong>Cartesian product</strong> of two species is a species which can build two structures on the same set at the same time. It is different from the ordinary multiplication operator in that all elements of the base set are shared between the two structures. An (<em>F</em> × <em>G</em>)-structure can be seen as a superposition of an <em>F</em>-structure and a <em>G</em>-structure. Bigraphs could be described as the superposition of a graph and a set of trees: each node of the bigraph is part of a graph, and at the same time part of some tree that describes how nodes are nested. The generating function (<em>F</em> × <em>G</em>)(<em>x</em>) is the Hadamard or coefficient-wise product of <em>F</em>(<em>x</em>) and <em>G</em>(<em>x</em>).</p>

<p>The species <em>E</em><sup>•</sup> × <em>E</em><sup>•</sup> can be seen as making two independent selections from the base set. The two points might coincide, unlike in <em>X</em>·<em>X</em>·<em>E</em>, where they are forced to be different.</p>

<p>As functors, species <em>F</em> and <em>G</em> may be combined by <strong>functorial composition</strong>

<math display="block" id="Combinatorial_species:23">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi>F</mi>
      <mi mathvariant="normal">□</mi>
      <mi>G</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mrow>
     <mo stretchy="false">[</mo>
     <mi>A</mi>
     <mo stretchy="false">]</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>F</mi>
    <mrow>
     <mo stretchy="false">[</mo>
     <mrow>
      <mi>G</mi>
      <mrow>
       <mo stretchy="false">[</mo>
       <mi>A</mi>
       <mo stretchy="false">]</mo>
      </mrow>
     </mrow>
     <mo stretchy="false">]</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <times></times>
      <ci>F</ci>
      <ci>normal-□</ci>
      <ci>G</ci>
     </apply>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <ci>A</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>F</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <times></times>
       <ci>G</ci>
       <apply>
        <csymbol cd="latexml">delimited-[]</csymbol>
        <ci>A</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (F\Box G)[A]=F[G[A]]
  </annotation>
 </semantics>
</math>

 (the box symbol is used, because the circle is already in use for substitution). This constructs an <em>F</em>-structure on the set of all <em>G</em>-structures on the set <em>A</em>. For example, if <em>F</em> is the functor taking a set to its power set, a structure of the composed species is some subset of the <em>G</em>-structures on <em>A</em>. If we now take <em>G</em> to be <em>E</em><sup>•</sup> × <em>E</em><sup>•</sup> from above, we obtain the species of directed graphs, with self-loops permitted. (A directed graph is a set of edges, and edges are pairs of nodes: so a graph is a subset of the set of pairs of elements of the node set <em>A</em>.) Other families of graphs, as well as many other structures, can be defined in this way.</p>
<h2 id="types-and-unlabelled-structures">Types and unlabelled structures</h2>

<p>Instead of counting all the possible structures that can be built on some set, we often want to count only the number of different "shapes" of structure. Consider the set of rooted trees on the set <em>A</em> = {<em>a</em>, <em>b</em>, <em>c</em>}. There are nine of these, which can be grouped into two classes by tree shape. There are:</p>
<ul>
<li>Six trees with three levels:
<ol>
<li><em>a</em> → <em>b</em> → <em>c</em></li>
<li><em>a</em> → <em>c</em> → <em>b</em></li>
<li><em>b</em> → <em>a</em> → <em>c</em></li>
<li><em>b</em> → <em>c</em> → <em>a</em></li>
<li><em>c</em> → <em>a</em> → <em>b</em></li>
<li><em>c</em> → <em>b</em> → <em>a</em></li>
</ol></li>
<li>Three trees with two levels: (not six, because subtrees are not in any order)
<ol>
<li><em>b</em> ← <em>a</em> → <em>c</em></li>
<li><em>a</em> ← <em>b</em> → <em>c</em></li>
<li><em>a</em> ← <em>c</em> → <em>b</em></li>
</ol></li>
</ul>

<p>There is an exact correspondence between trees in the first class and permutations of <em>A</em>. Any of these trees can be constructed from any of the others, by permuting the labels on its nodes. For any two trees <em>s</em> and <em>t</em> in this class, there is some permutation σ in the <a href="symmetric_group" title="wikilink">symmetric group</a> <em>S</em><sub><em>A</em></sub> which <a href="Group_action" title="wikilink">acts on</a> <em>s</em> to give <em>t</em>: <em>Ar</em>[σ](<em>s</em>) = <em>t</em>. The same holds for the second class of trees. This property can be used to define an <a href="equivalence_relation" title="wikilink">equivalence relation</a> on <em>Ar</em>[<em>A</em>], dividing it into the two parts listed above. These equivalence classes are the <em>isomorphism types</em> of <em>Ar</em>-structures of order 3.</p>

<p>Formally, when <em>F</em> is a species, we define <em>T</em>(<em>F</em><sub><em>n</em></sub>) to be the quotient set <em>F</em>[{1, ..., <em>n</em>}]/~ of types of <em>F</em>-structures of order <em>n</em>, where "~" is the relation "<em>s</em> ~ <em>t</em> <a href="if_and_only_if" title="wikilink">if and only if</a> there is some σ in <em>S</em><sub><em>n</em></sub> such that <em>F</em>[σ](<em>s</em>) = <em>t</em>". As with the exponential generating functions, the size of <em>T</em>(<em>F</em><sub><em>n</em></sub>) depends only on the value of <em>n</em> and the definition of <em>F</em>. It is the set of unlabelled <em>F</em>-structures on any set of size <em>n</em>.</p>

<p>The <strong>isomorphism type generating series</strong> of <em>F</em> is:</p>

<p>

<math display="block" id="Combinatorial_species:24">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mover accent="true">
      <mi>F</mi>
      <mo stretchy="false">~</mo>
     </mover>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>x</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <munder>
      <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
      <mrow>
       <mi>n</mi>
       <mo>≥</mo>
       <mn>0</mn>
      </mrow>
     </munder>
     <mrow>
      <mrow>
       <mo stretchy="false">|</mo>
       <mrow>
        <mi>T</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <msub>
          <mi>F</mi>
          <mi>n</mi>
         </msub>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
       <mo stretchy="false">|</mo>
      </mrow>
      <msup>
       <mi>x</mi>
       <mi>n</mi>
      </msup>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>normal-~</ci>
      <ci>F</ci>
     </apply>
     <ci>x</ci>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <geq></geq>
       <ci>n</ci>
       <cn type="integer">0</cn>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <abs></abs>
       <apply>
        <times></times>
        <ci>T</ci>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>F</ci>
         <ci>n</ci>
        </apply>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <ci>n</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tilde{F}(x)=\sum_{n\geq 0}|T(F_{n})|x^{n}.
  </annotation>
 </semantics>
</math>

</p>

<p>Manipulations of these functions are done in essentially the same way as for the exponential generating functions. There are a few differences in how some of the operations translate into operations on type generating series. Addition and multiplication work as expected, but the more complicated operations need some more sophisticated mathematical tools for their proper definitions.</p>

<p>There is a much more general series, called the <strong>cycle index series</strong>, for each species, which contains all the information in the previously-defined series, and more. Any permutation σ of a finite set <em>A</em> with <em>n</em> elements can be decomposed, uniquely, into a product of disjoint cycles. Letting σ<sub><em>i</em></sub> be the number of cycles of length <em>i</em> in the decomposition of σ ∈ <em>S</em><sub><em>n</em></sub>, the <strong>cycle type</strong> of σ is defined to be the sequence (σ<sub>1</sub>, σ<sub>2</sub>, ..., σ<sub><em>n</em></sub>). Now let Fix(σ) be the set of elements fixed by σ — that is, the elements <em>x</em> of <em>A</em> where σ(<em>x</em>) = <em>x</em>. Then the <em>cycle index series</em> of <em>F</em> is:</p>

<p>

<math display="block" id="Combinatorial_species:25">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mi>Z</mi>
      <mi>F</mi>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <msub>
       <mi>x</mi>
       <mn>1</mn>
      </msub>
      <mo>,</mo>
      <msub>
       <mi>x</mi>
       <mn>2</mn>
      </msub>
      <mo>,</mo>
      <mi mathvariant="normal">…</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <munder>
      <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
      <mrow>
       <mi>n</mi>
       <mo>≥</mo>
       <mn>0</mn>
      </mrow>
     </munder>
     <mrow>
      <mfrac>
       <mn>1</mn>
       <mrow>
        <mi>n</mi>
        <mo lspace="0pt" rspace="3.5pt">!</mo>
       </mrow>
      </mfrac>
      <mrow>
       <mo>(</mo>
       <mrow>
        <munder>
         <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
         <mrow>
          <mi>σ</mi>
          <mo>∈</mo>
          <msub>
           <mi>S</mi>
           <mi>n</mi>
          </msub>
         </mrow>
        </munder>
        <mrow>
         <mrow>
          <mo stretchy="false">|</mo>
          <mrow>
           <mi>Fix</mi>
           <mrow>
            <mo stretchy="false">(</mo>
            <mrow>
             <mi>F</mi>
             <mrow>
              <mo stretchy="false">[</mo>
              <mi>σ</mi>
              <mo stretchy="false">]</mo>
             </mrow>
            </mrow>
            <mo stretchy="false">)</mo>
           </mrow>
          </mrow>
          <mo stretchy="false">|</mo>
         </mrow>
         <msubsup>
          <mi>x</mi>
          <mn>1</mn>
          <msub>
           <mi>σ</mi>
           <mn>1</mn>
          </msub>
         </msubsup>
         <msubsup>
          <mi>x</mi>
          <mn>2</mn>
          <msub>
           <mi>σ</mi>
           <mn>2</mn>
          </msub>
         </msubsup>
         <mi mathvariant="normal">⋯</mi>
        </mrow>
       </mrow>
       <mo>)</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <ci>F</ci>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <geq></geq>
       <ci>n</ci>
       <cn type="integer">0</cn>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <apply>
        <factorial></factorial>
        <ci>n</ci>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <in></in>
         <ci>σ</ci>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>S</ci>
          <ci>n</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <times></times>
        <apply>
         <abs></abs>
         <apply>
          <times></times>
          <ci>Fix</ci>
          <apply>
           <times></times>
           <ci>F</ci>
           <apply>
            <csymbol cd="latexml">delimited-[]</csymbol>
            <ci>σ</ci>
           </apply>
          </apply>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>x</ci>
          <cn type="integer">1</cn>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>σ</ci>
          <cn type="integer">1</cn>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">superscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>x</ci>
          <cn type="integer">2</cn>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>σ</ci>
          <cn type="integer">2</cn>
         </apply>
        </apply>
        <ci>normal-⋯</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z_{F}(x_{1},x_{2},\dots)=\sum_{n\geq 0}\frac{1}{n!}\left(\sum_{\sigma\in S_{n}%
}|\mathrm{Fix}(F[\sigma])|x_{1}^{\sigma_{1}}x_{2}^{\sigma_{2}}\cdots\right).
  </annotation>
 </semantics>
</math>

 |Fix(<em>F</em>[σ])| is the number of <em>F</em>-structures on <em>A</em> = {1, ..., <em>n</em>} for which σ is an <a class="uri" href="automorphism" title="wikilink">automorphism</a>.</p>

<p>It follows immediately that</p>

<p>

<math display="block" id="Combinatorial_species:26">
 <semantics>
  <mrow>
   <mrow>
    <mi>F</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>Z</mi>
     <mi>F</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <mn>0</mn>
     <mo>,</mo>
     <mn>0</mn>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo rspace="4.2pt" stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>F</ci>
     <ci>x</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <ci>F</ci>
     </apply>
     <vector>
      <ci>x</ci>
      <cn type="integer">0</cn>
      <cn type="integer">0</cn>
      <ci>normal-…</ci>
     </vector>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F(x)=Z_{F}(x,0,0,\dots)\,
  </annotation>
 </semantics>
</math>

</p>

<p>and</p>

<p>

<math display="block" id="Combinatorial_species:27">
 <semantics>
  <mrow>
   <mrow>
    <mover accent="true">
     <mi>F</mi>
     <mo stretchy="false">~</mo>
    </mover>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>Z</mi>
     <mi>F</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <msup>
      <mi>x</mi>
      <mn>2</mn>
     </msup>
     <mo>,</mo>
     <msup>
      <mi>x</mi>
      <mn>3</mn>
     </msup>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo rspace="4.2pt" stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>normal-~</ci>
      <ci>F</ci>
     </apply>
     <ci>x</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <ci>F</ci>
     </apply>
     <vector>
      <ci>x</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <cn type="integer">3</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tilde{F}(x)=Z_{F}(x,x^{2},x^{3},\dots)\,
  </annotation>
 </semantics>
</math>

</p>

<p>for any species <em>F</em>. The cycle index series follows these rules for combinatorial operations on species <em>F</em> and <em>G</em>:</p>
<ul>
<li>

<math display="inline" id="Combinatorial_species:28">
 <semantics>
  <mrow>
   <msub>
    <mi>Z</mi>
    <mrow>
     <mi>F</mi>
     <mo>+</mo>
     <mi>G</mi>
    </mrow>
   </msub>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>Z</mi>
     <mi>F</mi>
    </msub>
    <mo>+</mo>
    <mpadded width="+1.7pt">
     <msub>
      <mi>Z</mi>
      <mi>G</mi>
     </msub>
    </mpadded>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>Z</ci>
     <apply>
      <plus></plus>
      <ci>F</ci>
      <ci>G</ci>
     </apply>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <ci>F</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <ci>G</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z_{F+G}=Z_{F}+Z_{G}\,
  </annotation>
 </semantics>
</math>

</li>
<li>

<math display="inline" id="Combinatorial_species:29">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>Z</mi>
     <mrow>
      <mi>F</mi>
      <mo>⋅</mo>
      <mi>G</mi>
     </mrow>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>Z</mi>
     <mi>F</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo rspace="4.2pt" stretchy="false">)</mo>
    </mrow>
    <msub>
     <mi>Z</mi>
     <mi>G</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <apply>
       <ci>normal-⋅</ci>
       <ci>F</ci>
       <ci>G</ci>
      </apply>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <ci>F</ci>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <ci>G</ci>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z_{F\cdot G}(x_{1},x_{2},\dots)=Z_{F}(x_{1},x_{2},\dots)\,Z_{G}(x_{1},x_{2},\dots)
  </annotation>
 </semantics>
</math>

</li>
<li>

<math display="inline" id="Combinatorial_species:30">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>Z</mi>
     <mrow>
      <mi>F</mi>
      <mo>∘</mo>
      <mi>G</mi>
     </mrow>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>3</mn>
     </msub>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>Z</mi>
     <mi>F</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <msub>
       <mi>Z</mi>
       <mi>G</mi>
      </msub>
      <mrow>
       <mo stretchy="false">(</mo>
       <msub>
        <mi>x</mi>
        <mn>1</mn>
       </msub>
       <mo>,</mo>
       <msub>
        <mi>x</mi>
        <mn>2</mn>
       </msub>
       <mo>,</mo>
       <msub>
        <mi>x</mi>
        <mn>3</mn>
       </msub>
       <mo>,</mo>
       <mi mathvariant="normal">…</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>,</mo>
     <mrow>
      <msub>
       <mi>Z</mi>
       <mi>G</mi>
      </msub>
      <mrow>
       <mo stretchy="false">(</mo>
       <msub>
        <mi>x</mi>
        <mn>2</mn>
       </msub>
       <mo>,</mo>
       <msub>
        <mi>x</mi>
        <mn>4</mn>
       </msub>
       <mo>,</mo>
       <msub>
        <mi>x</mi>
        <mn>6</mn>
       </msub>
       <mo>,</mo>
       <mi mathvariant="normal">…</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>,</mo>
     <mrow>
      <msub>
       <mi>Z</mi>
       <mi>G</mi>
      </msub>
      <mrow>
       <mo stretchy="false">(</mo>
       <msub>
        <mi>x</mi>
        <mn>3</mn>
       </msub>
       <mo>,</mo>
       <msub>
        <mi>x</mi>
        <mn>6</mn>
       </msub>
       <mo>,</mo>
       <msub>
        <mi>x</mi>
        <mn>9</mn>
       </msub>
       <mo>,</mo>
       <mi mathvariant="normal">…</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <apply>
       <compose></compose>
       <ci>F</ci>
       <ci>G</ci>
      </apply>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">3</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <ci>F</ci>
     </apply>
     <vector>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>Z</ci>
        <ci>G</ci>
       </apply>
       <vector>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">1</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">2</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">3</cn>
        </apply>
        <ci>normal-…</ci>
       </vector>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>Z</ci>
        <ci>G</ci>
       </apply>
       <vector>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">2</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">4</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">6</cn>
        </apply>
        <ci>normal-…</ci>
       </vector>
      </apply>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>Z</ci>
        <ci>G</ci>
       </apply>
       <vector>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">3</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">6</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">9</cn>
        </apply>
        <ci>normal-…</ci>
       </vector>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z_{F\circ G}(x_{1},x_{2},x_{3},\dots)=Z_{F}(Z_{G}(x_{1},x_{2},x_{3},\dots),Z_{%
G}(x_{2},x_{4},x_{6},\dots),Z_{G}(x_{3},x_{6},x_{9},\dots),\dots)
  </annotation>
 </semantics>
</math>

</li>
<li>

<math display="inline" id="Combinatorial_species:31">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>Z</mi>
     <msup>
      <mi>F</mi>
      <mo>′</mo>
     </msup>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mo>(</mo>
     <mrow>
      <mfrac>
       <mo>∂</mo>
       <mrow>
        <mo>∂</mo>
        <msub>
         <mi>x</mi>
         <mn>1</mn>
        </msub>
       </mrow>
      </mfrac>
      <msub>
       <mi>Z</mi>
       <mi>F</mi>
      </msub>
     </mrow>
     <mo>)</mo>
    </mrow>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>F</ci>
       <ci>normal-′</ci>
      </apply>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
    <apply>
     <times></times>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <partialdiff></partialdiff>
       <apply>
        <partialdiff></partialdiff>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Z</ci>
       <ci>F</ci>
      </apply>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z_{F^{\prime}}(x_{1},x_{2},\dots)=\left(\frac{\partial}{\partial x_{1}}Z_{F}%
\right)(x_{1},x_{2},\dots)
  </annotation>
 </semantics>
</math>

</li>
<li>

<math display="inline" id="Combinatorial_species:32">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>Z</mi>
     <msup>
      <mi>F</mi>
      <mo>∙</mo>
     </msup>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>x</mi>
     <mn>1</mn>
    </msub>
    <msub>
     <mi>Z</mi>
     <msup>
      <mi>F</mi>
      <mo>′</mo>
     </msup>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>x</mi>
      <mn>1</mn>
     </msub>
     <mo>,</mo>
     <msub>
      <mi>x</mi>
      <mn>2</mn>
     </msub>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>F</ci>
       <ci>normal-∙</ci>
      </apply>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>F</ci>
       <ci>normal-′</ci>
      </apply>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z_{F^{\bullet}}(x_{1},x_{2},\dots)=x_{1}Z_{F^{\prime}}(x_{1},x_{2},\dots)
  </annotation>
 </semantics>
</math>

</li>
<li>

<math display="inline" id="Combinatorial_species:33">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mi>Z</mi>
      <mrow>
       <mi>F</mi>
       <mo>×</mo>
       <mi>G</mi>
      </mrow>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <msub>
       <mi>x</mi>
       <mn>1</mn>
      </msub>
      <mo>,</mo>
      <msub>
       <mi>x</mi>
       <mn>2</mn>
      </msub>
      <mo>,</mo>
      <mi mathvariant="normal">…</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mrow>
      <mrow>
       <msub>
        <mi>Z</mi>
        <mi>F</mi>
       </msub>
       <mrow>
        <mo stretchy="false">(</mo>
        <msub>
         <mi>x</mi>
         <mn>1</mn>
        </msub>
        <mo>,</mo>
        <msub>
         <mi>x</mi>
         <mn>2</mn>
        </msub>
        <mo>,</mo>
        <mi mathvariant="normal">…</mi>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
      <mo>×</mo>
      <msub>
       <mi>Z</mi>
       <mi>G</mi>
      </msub>
     </mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <msub>
       <mi>x</mi>
       <mn>1</mn>
      </msub>
      <mo>,</mo>
      <msub>
       <mi>x</mi>
       <mn>2</mn>
      </msub>
      <mo>,</mo>
      <mi mathvariant="normal">…</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <apply>
       <times></times>
       <ci>F</ci>
       <ci>G</ci>
      </apply>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
    <apply>
     <times></times>
     <apply>
      <times></times>
      <apply>
       <times></times>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>Z</ci>
        <ci>F</ci>
       </apply>
       <vector>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">1</cn>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">2</cn>
        </apply>
        <ci>normal-…</ci>
       </vector>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Z</ci>
       <ci>G</ci>
      </apply>
     </apply>
     <vector>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Z_{F\times G}(x_{1},x_{2},\dots)=Z_{F}(x_{1},x_{2},\dots)\times Z_{G}(x_{1},x_%
{2},\dots).\,
  </annotation>
 </semantics>
</math>

</li>
</ul>

<p>Then the rules for type generating series can be given in terms of these:</p>
<ul>
<li>

<math display="inline" id="Combinatorial_species:34">
 <semantics>
  <mrow>
   <mrow>
    <mover accent="true">
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mi>F</mi>
       <mo>∘</mo>
       <mi>G</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mo stretchy="false">~</mo>
    </mover>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>Z</mi>
     <mi>F</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mover accent="true">
       <mi>G</mi>
       <mo stretchy="false">~</mo>
      </mover>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>x</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>,</mo>
     <mrow>
      <mover accent="true">
       <mi>G</mi>
       <mo stretchy="false">~</mo>
      </mover>
      <mrow>
       <mo stretchy="false">(</mo>
       <msup>
        <mi>x</mi>
        <mn>2</mn>
       </msup>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>,</mo>
     <mrow>
      <mover accent="true">
       <mi>G</mi>
       <mo stretchy="false">~</mo>
      </mover>
      <mrow>
       <mo stretchy="false">(</mo>
       <msup>
        <mi>x</mi>
        <mn>3</mn>
       </msup>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>normal-~</ci>
      <apply>
       <compose></compose>
       <ci>F</ci>
       <ci>G</ci>
      </apply>
     </apply>
     <ci>x</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>Z</ci>
      <ci>F</ci>
     </apply>
     <vector>
      <apply>
       <times></times>
       <apply>
        <ci>normal-~</ci>
        <ci>G</ci>
       </apply>
       <ci>x</ci>
      </apply>
      <apply>
       <times></times>
       <apply>
        <ci>normal-~</ci>
        <ci>G</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>x</ci>
        <cn type="integer">2</cn>
       </apply>
      </apply>
      <apply>
       <times></times>
       <apply>
        <ci>normal-~</ci>
        <ci>G</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <ci>x</ci>
        <cn type="integer">3</cn>
       </apply>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tilde{(F\circ G)}(x)=Z_{F}(\tilde{G}(x),\tilde{G}(x^{2}),\tilde{G}(x^{3}),\dots)
  </annotation>
 </semantics>
</math>

</li>
<li>

<math display="inline" id="Combinatorial_species:35">
 <semantics>
  <mrow>
   <mrow>
    <mover accent="true">
     <msup>
      <mi>F</mi>
      <mo>′</mo>
     </msup>
     <mo stretchy="false">~</mo>
    </mover>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mo>(</mo>
     <mrow>
      <mfrac>
       <mo>∂</mo>
       <mrow>
        <mo>∂</mo>
        <msub>
         <mi>x</mi>
         <mn>1</mn>
        </msub>
       </mrow>
      </mfrac>
      <msub>
       <mi>Z</mi>
       <mi>F</mi>
      </msub>
     </mrow>
     <mo>)</mo>
    </mrow>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <msup>
      <mi>x</mi>
      <mn>2</mn>
     </msup>
     <mo>,</mo>
     <msup>
      <mi>x</mi>
      <mn>3</mn>
     </msup>
     <mo>,</mo>
     <mi mathvariant="normal">…</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>normal-~</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>F</ci>
       <ci>normal-′</ci>
      </apply>
     </apply>
     <ci>x</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <times></times>
      <apply>
       <divide></divide>
       <partialdiff></partialdiff>
       <apply>
        <partialdiff></partialdiff>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>x</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Z</ci>
       <ci>F</ci>
      </apply>
     </apply>
     <vector>
      <ci>x</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <cn type="integer">3</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tilde{F^{\prime}}(x)=\left(\frac{\partial}{\partial x_{1}}Z_{F}\right)(x,x^{2%
},x^{3},\dots)
  </annotation>
 </semantics>
</math>

</li>
<li>

<math display="inline" id="Combinatorial_species:36">
 <semantics>
  <mrow>
   <mrow>
    <mover accent="true">
     <msup>
      <mi>F</mi>
      <mo>∙</mo>
     </msup>
     <mo stretchy="false">~</mo>
    </mover>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>x</mi>
    <mover accent="true">
     <msup>
      <mi>F</mi>
      <mo>′</mo>
     </msup>
     <mo stretchy="false">~</mo>
    </mover>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>normal-~</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>F</ci>
       <ci>normal-∙</ci>
      </apply>
     </apply>
     <ci>x</ci>
    </apply>
    <apply>
     <times></times>
     <ci>x</ci>
     <apply>
      <ci>normal-~</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>F</ci>
       <ci>normal-′</ci>
      </apply>
     </apply>
     <ci>x</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tilde{F^{\bullet}}(x)=x\tilde{F^{\prime}}(x)
  </annotation>
 </semantics>
</math>

</li>
<li>

<math display="inline" id="Combinatorial_species:37">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mover accent="true">
      <mrow>
       <mi>F</mi>
       <mo>×</mo>
       <mi>G</mi>
      </mrow>
      <mo stretchy="false">~</mo>
     </mover>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>x</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <msub>
        <mi>Z</mi>
        <mi>F</mi>
       </msub>
       <mo>×</mo>
       <msub>
        <mi>Z</mi>
        <mi>G</mi>
       </msub>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>x</mi>
      <mo>,</mo>
      <msup>
       <mi>x</mi>
       <mn>2</mn>
      </msup>
      <mo>,</mo>
      <msup>
       <mi>x</mi>
       <mn>3</mn>
      </msup>
      <mo>,</mo>
      <mi mathvariant="normal">…</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <ci>normal-~</ci>
      <apply>
       <times></times>
       <ci>F</ci>
       <ci>G</ci>
      </apply>
     </apply>
     <ci>x</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Z</ci>
       <ci>F</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>Z</ci>
       <ci>G</ci>
      </apply>
     </apply>
     <vector>
      <ci>x</ci>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <cn type="integer">3</cn>
      </apply>
      <ci>normal-…</ci>
     </vector>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \tilde{F\times G}(x)=(Z_{F}\times Z_{G})(x,x^{2},x^{3},\dots).
  </annotation>
 </semantics>
</math>

</li>
</ul>
<h2 id="class-of-all-species">Class of all species</h2>

<p>There are many ways of thinking about the class of all combinatorial species. Since a species is a functor, it makes sense to say that the <em>category of species</em> is a <a href="functor_category" title="wikilink">functor category</a> whose objects are species and whose arrows are <a href="natural_transformation" title="wikilink">natural transformations</a>. This idea can be extended to a <a class="uri" href="bicategory" title="wikilink">bicategory</a> of certain categories, functors, and natural transformations, to be able to include species over categories other than 

<math display="inline" id="Combinatorial_species:38">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ℬ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ℬ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{B}
  </annotation>
 </semantics>
</math>

. The unary and binary operations defined above can be specified in categorical terms as <a href="Universal_property" title="wikilink">universal constructions</a>, much like the corresponding operations for other algebraic systems.</p>

<p>Though the categorical approach brings powerful proof techniques, its level of abstraction means that concrete combinatorial results can be difficult to produce. Instead, the class of species can be described as a <a class="uri" href="semiring" title="wikilink">semiring</a> — an algebraic object with two <a href="monoid" title="wikilink">monoidal</a> operations — in order to focus on combinatorial constructions. The two monoids are addition and multiplication of species. It is easy to show that these are associative, yielding a double <a class="uri" href="semigroup" title="wikilink">semigroup</a> structure; and then the identities are the species <strong>0</strong> and <strong>1</strong> respectively. Here, <strong>0</strong> is the <em>empty species</em>, taking every set to the empty set (so that no structures can be built on any set), and <strong>1</strong> is the empty set species, which is equal to <strong>0</strong> except that it takes 

<math display="inline" id="Combinatorial_species:39">
 <semantics>
  <mi mathvariant="normal">∅</mi>
  <annotation-xml encoding="MathML-Content">
   <emptyset></emptyset>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \varnothing
  </annotation>
 </semantics>
</math>

 to 

<math display="inline" id="Combinatorial_species:40">
 <semantics>
  <mrow>
   <mo rspace="4.2pt" stretchy="false">{</mo>
   <mpadded width="+1.7pt">
    <mi mathvariant="normal">∅</mi>
   </mpadded>
   <mo stretchy="false">}</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <set>
    <emptyset></emptyset>
   </set>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \{\,\varnothing\,\}
  </annotation>
 </semantics>
</math>

 (it constructs the empty set whenever possible). The two monoids interact in the way required of a semiring: addition is commutative, multiplication distributes over addition, and <strong>0</strong> multiplied by anything yields <strong>0</strong>.</p>

<p>The <a href="natural_number" title="wikilink">natural numbers</a> can be seen as a subsemiring of the semiring of species, if we identify the natural number <em>n</em> with the <em>n</em>-fold sum <strong>1</strong> + ... + <strong>1</strong> = <em>n</em> <strong>1</strong>. This embedding of natural number arithmetic into species theory suggests that other kinds of arithmetic, logic, and computation might also be present. There is also a clear connection between the category-theoretic formulation of species as a functor category, and results relating certain such categories to <a href="Topos" title="wikilink">topoi</a> and <a href="Cartesian_closed_category" title="wikilink">Cartesian closed categories</a> — connecting species theory with the <a href="lambda_calculus" title="wikilink">lambda calculus</a> and related systems.</p>

<p>Given that natural number species can be added, we immediately have a limited form of subtraction: just as the natural number system admits subtraction for certain pairs of numbers, subtraction can be defined for the corresponding species. If <em>n</em> and <em>m</em> are natural numbers with <em>n</em> larger than <em>m</em>, we can say that <em>n</em> <strong>1</strong> − <em>m</em> <strong>1</strong> is the species (<em>n</em> − <em>m</em>) <strong>1</strong>. (If the two numbers are the same, the result is <strong>0</strong> — the identity for addition.) In the world of species, this makes sense because <em>m</em> <strong>1</strong> is a subspecies of <em>n</em> <strong>1</strong>; likewise, knowing that <em>E</em> = <strong>1</strong> + <em>E</em><sup>+</sup>, we could say that <em>E</em><sup>+</sup> = <em>E</em> − <strong>1</strong>.</p>

<p>Going further, subtraction can be defined for <em>all</em> species so that the correct algebraic laws apply. Virtual species are an extension to the species concept that allow inverses to exist for addition, as well as having many other useful properties. If <strong>S</strong> is the semiring of species, then the ring <strong>V</strong> of virtual species is (<strong>S</strong> × <strong>S</strong>) / <strong>~</strong>, where "<strong>~</strong>" is the equivalence relation</p>
<dl>
<dd>(<em>F</em>, <em>G</em>) <strong>~</strong> (<em>H</em>, <em>K</em>) if and only if <em>F</em> + <em>K</em> is isomorphic to <em>G</em> + <em>H</em>.
</dd>
</dl>

<p>The equivalence class of (<em>F</em>, <em>G</em>) is written "<em>F</em> − <em>G</em>". A species <em>F</em> of <strong>S</strong> appears as <em>F</em> − <strong>0</strong> in <strong>V</strong>, and its additive inverse is <strong>0</strong> − <em>F</em>.</p>

<p>Addition of virtual species is by component:</p>
<dl>
<dd>(<em>F</em> − <em>G</em>) + (<em>H</em> − <em>K</em>) = (<em>F</em> + <em>H</em>) − (<em>G</em> + <em>K</em>).
</dd>
</dl>

<p>In particular, the sum of <em>F</em> − <strong>0</strong> and <strong>0</strong> − <em>F</em> is the virtual species <em>F</em> − <em>F</em>, which is the same as <strong>0</strong> − <strong>0</strong>: this is the zero of <strong>V</strong>. Multiplication is defined as</p>
<dl>
<dd>(<em>F</em> − <em>G</em>)·(<em>H</em> − <em>K</em>) = (<em>F</em>·<em>H</em> + <em>G</em>·<em>K</em>) − (<em>F</em>·<em>K</em> + <em>G</em>·<em>H</em>)
</dd>
</dl>

<p>and its unit is <strong>1</strong> − <strong>0</strong>. Together, these make <strong>V</strong> into a commutative ring, which as an algebraic structure is much easier to deal with than a semiring. Other operations carry over from species to virtual species in a very natural way, as do the associated power series. "Completing" the class of species like this also means that certain differential equations insoluble over <strong>S</strong> do have solutions in <strong>V</strong>.</p>
<h2 id="generalizations">Generalizations</h2>

<p>Species need not be functors from 

<math display="inline" id="Combinatorial_species:41">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ℬ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ℬ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{B}
  </annotation>
 </semantics>
</math>

 to 

<math display="inline" id="Combinatorial_species:42">
 <semantics>
  <mi class="ltx_font_mathcaligraphic">ℬ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>ℬ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{B}
  </annotation>
 </semantics>
</math>

: other categories can replace these, to obtain species of a different nature.</p>
<ul>
<li>A species <em>in k sorts</em> is a functor 

<math display="inline" id="Combinatorial_species:43">
 <semantics>
  <mrow>
   <msup>
    <mi class="ltx_font_mathcaligraphic">ℬ</mi>
    <mi>k</mi>
   </msup>
   <mo>→</mo>
   <mi class="ltx_font_mathcaligraphic">ℬ</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-→</ci>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>ℬ</ci>
     <ci>k</ci>
    </apply>
    <ci>ℬ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{B}^{k}\rightarrow\mathcal{B}
  </annotation>
 </semantics>
</math>

. Here, the structures produced can have elements drawn from distinct sources.</li>
<li>A functor to 

<math display="inline" id="Combinatorial_species:44">
 <semantics>
  <msub>
   <mi class="ltx_font_mathcaligraphic">ℬ</mi>
   <mi>R</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>ℬ</ci>
    <ci>R</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{B}_{R}
  </annotation>
 </semantics>
</math>

, the category of <em>R</em>-weighted sets for <em>R</em> a <a href="Ring_(mathematics)" title="wikilink">ring</a> of power series, is a <em>weighted species</em>.</li>
<li>A <em><a href="tensor" title="wikilink">tensorial</a> species</em> is a functor into the category of finite-dimensional <a href="vector_space" title="wikilink">vector spaces</a> over the <a href="complex_number" title="wikilink">complex numbers</a>.</li>
</ul>
<h2 id="software">Software</h2>

<p>Operations with species are supported by <a href="Sage_(mathematics_software)" title="wikilink">Sage</a><a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> and, using a special package, also by <a href="Haskell_(programming_language)" title="wikilink">Haskell</a>.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a><a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a></p>
<h2 id="notes">Notes</h2>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Container_(type_theory)" title="wikilink">Container (type theory)</a></li>
</ul>
<h2 id="references">References</h2>
<ul>
<li>André Joyal, <em>Une théorie combinatoire des séries formelles</em>, Advances in Mathematics 42:1-82 (1981).</li>
<li>François Bergeron, Gilbert Labelle, Pierre Leroux, <em>Théorie des espèces et combinatoire des structures arborescentes</em>, LaCIM, Montréal (1994). English version: <a href="http://bergeron.math.uqam.ca/Species/especes.html"><em>Combinatorial Species and Tree-like Structures</em></a>, Cambridge University Press (1998).</li>
<li>François Bergeron, <em>Species and Variations on the Theme of Species</em>, invited talk at <a href="http://www.itu.dk/research/theory/ctcs2004/">Category Theory and Computer Science '04</a>, Copenhagen (2004). <a href="http://bergeron.math.uqam.ca/Especes_trans.pdf">Slides (pdf)</a>.</li>
<li>Marcelo Aguiar, Swapneel Mahajan, <em>Monoidal functors, species and Hopf algebras</em>, CRM Monograph Series Volume 29. A co-publication of the AMS and Centre de Recherches Mathématiques. Expected publication date is November 19, 2010. <a href="http://www.math.tamu.edu/~maguiar/a.pdf">pdf</a></li>
<li>Federico G. Lastaria, <a href="http://math.math.unipa.it/~grim/ELastaria221-230.PDF">An invitation to Combinatorial Species</a>.</li>
<li>Yves Chiricota, "Classification des espèces moléculaires de degré 6 et 7", Ann. Sci. Math. Québec 17 (1993), no. 1, 1 l-37.</li>
</ul>
<h2 id="external-links">External links</h2>
<ul>
<li></li>
</ul>

<p>"</p>

<p><a href="Category:Enumerative_combinatorics" title="wikilink">Category:Enumerative combinatorics</a> <a href="Category:Algebraic_combinatorics" title="wikilink">Category:Algebraic combinatorics</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">Sage documentation on <a href="http://doc.sagemath.org/html/en/reference/combinat/sage/combinat/species/species.html">combinatorial species</a>.<a href="#fnref1">↩</a></li>
<li id="fn2">Haskell package <a href="http://hackage.haskell.org/package/species">species</a>.<a href="#fnref2">↩</a></li>
<li id="fn3"><a href="#fnref3">↩</a></li>
</ol>
</section>
</body>
</html>
