   Non-local means      Non-local means   Non-local means is an algorithm in image processing for image denoising . Unlike "local mean" filters, which take the mean value of a group of pixels surrounding a target pixel to smooth the image, non-local means filtering takes a mean of all pixels in the image, weighted by how similar these pixels are to the target pixel. This results in much greater post-filtering clarity, and less loss of detail in the image compared with local mean algorithms. 1  If compared with other well-known denoising techniques, such as the Gaussian smoothing model, the anisotropic diffusion model, the total variation denoising , the neighborhood filters and an elegant variant, the Wiener local empirical filter , the translation invariant wavelet thresholding, the non-local means method noise looks more like white noise . 2 Recently non-local means has been extended to other image processing applications such as deinterlacing 3 and view interpolation. 4  Definition  Suppose   Ω   normal-Ω   \Omega   is the area of an image, and   p   p   p   and   q   q   q   are two points within the image. Then, the algorithm is: 5        u   (  p  )    =    1   C   (  p  )       ∫  Ω    v   (  q  )   f   (  p  ,  q  )   d  q      .        u  p       1    C  p      subscript   normal-Ω     v  q  f   p  q   d  q       u(p)={1\over C(p)}\int_{\Omega}v(q)f(p,q)dq.     where    u   (  p  )       u  p    u(p)   is the filtered value of the image at point   p   p   p   ,    v   (  q  )       v  q    v(q)   is the unfiltered value of the image at point   q   q   q   ,    f   (  p  ,  q  )       f   p  q     f(p,q)   is the weighting function, and the integral is evaluated over     ∀  q   ∈  Ω       for-all  q   normal-Ω    \forall q\in\Omega   .      C   (  p  )       C  p    C(p)   is a normalizing factor, given by:        C   (  p  )    =    ∫  Ω    f   (  p  ,  q  )   d  q     .        C  p     subscript   normal-Ω     f   p  q   d  q      C(p)=\int_{\Omega}f(p,q)dq.     Common weighting functions  The purpose of the weighting function,    f   (  p  ,  q  )       f   p  q     f(p,q)   , is to determine how closely related the image at the point   p   p   p   is to the image at the point   q   q   q   . It can take many forms.  Gaussian  The Gaussian weighting function sets up a normal distribution with a mean,    μ  =   B   (  p  )        μ    B  p     \mu=B(p)   and a variable standard deviation: 6       f   (  p  ,  q  )    =   e   -     |    B   (  q  )    -   B   (  p  )     |   2    h  2            f   p  q     superscript  e       superscript        B  q     B  p     2    superscript  h  2        f(p,q)=e^{-{{\left|B(q)-B(p)\right|^{2}}\over h^{2}}}     where   h   h   h   is the filtering parameter (i.e., standard deviation) and    B   (  p  )       B  p    B(p)   is the local mean value of the image point values surrounding   p   p   p     Discrete algorithm  For an image,   Ω   normal-Ω   \Omega   , with discrete pixels, a discrete algorithm is required.       u   (  p  )    =    1   C   (  p  )       ∑   q  ∈  Ω     v   (  q  )   f   (  p  ,  q  )            u  p       1    C  p      subscript     q  normal-Ω      v  q  f   p  q        u(p)={1\over C(p)}\sum_{q\in\Omega}v(q)f(p,q)     where    C   (  p  )       C  p    C(p)   is given by:       C   (  p  )    =    ∑   q  ∈  Ω     f   (  p  ,  q  )           C  p     subscript     q  normal-Ω      f   p  q       C(p)=\sum_{q\in\Omega}f(p,q)     Then, for a Gaussian weighting function,       f   (  p  ,  q  )    =   e   -     |    B   (  q  )    -   B   (  p  )     |   2    h  2            f   p  q     superscript  e       superscript        B  q     B  p     2    superscript  h  2        f(p,q)=e^{-{{\left|B(q)-B(p)\right|^{2}}\over h^{2}}}     where    B   (  p  )       B  p    B(p)   is given by:       B   (  p  )    =    1   |   R   (  p  )    |      ∑   i  ∈   R   (  p  )       v   (  i  )            B  p       1      R  p       subscript     i    R  p       v  i       B(p)={1\over|R(p)|}\sum_{i\in R(p)}v(i)     where     R   (  p  )    ⊆  Ω        R  p   normal-Ω    R(p)\subseteq\Omega   and is a square region of pixels surrounding   p   p   p   and    |   R   (  p  )    |        R  p     |R(p)|   is the number of pixels in the region   R   R   R   .  See also   Total variation denoising  Anisotropic diffusion  Signal Processing  Digital Image Processing  Noise reduction   References  External links   Recent trends in denoising tutorial  Non-local image denoising, with code and online demonstration   "  Category:Noise reduction  Category:Image processing  Category:Image noise reduction techniques     ↩  ↩  ↩  ↩  ↩  ↩     