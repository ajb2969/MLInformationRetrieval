   Karpâ€“Lipton theorem      Karpâ€“Lipton theorem   In complexity theory , the Karpâ€“Lipton theorem states that if the boolean satisfiability problem (SAT) can be solved by Boolean circuits with a polynomial number of logic gates, then       Î   2   =    Î£  2         subscript  normal-Î   2    subscript  normal-Î£  2     \Pi_{2}=\Sigma_{2}\,   and therefore     PH  =   Î£  2    .      PH   subscript  normal-Î£  2     \mathrm{PH}=\Sigma_{2}.\,     That is, if we assume that NP , the class of nondeterministic polynomial time problems, can be contained in the non-uniform polynomial time complexity class P/poly , then this assumption implies the collapse of the polynomial hierarchy at its second level. Such a collapse is believed unlikely, so the theorem is generally viewed by complexity theorists as evidence for the nonexistence of polynomial size circuits for SAT or for other NP-complete problems. A proof that such circuits do not exist would imply that P â‰  NP . As P/poly contains all problems solvable in randomized polynomial time ( Adleman's theorem ), the Karpâ€“Lipton theorem is also evidence that the use of randomization does not lead to polynomial time algorithms for NP-complete problems.  The Karpâ€“Lipton theorem is named after Richard M. Karp and Richard J. Lipton , who first proved it in 1980. (Their original proof collapsed PH to    Î£  3     subscript  normal-Î£  3    \Sigma_{3}   , but Michael Sipser improved it to    Î£  2     subscript  normal-Î£  2    \Sigma_{2}   .)  Variants of the theorem state that, under the same assumption, MA = AM , and PH collapses to complexity class. There are stronger conclusions possible if PSPACE , or some other complexity classes are assumed to have polynomial-sized circuits; see P/poly . If NP is assumed to be a subset of BPP (which is a subset of P/poly), then the polynomial hierarchy collapses to BPP . 1 If coNP is assumed to be subset of NP/poly, then the polynomial hierarchy collapses to its third level.  Intuition  Suppose that polynomial sized circuits for SAT not only exist, but also that they could be constructed by a polynomial time algorithm. Then this supposition implies that SAT itself could be solved by a polynomial time algorithm that constructs the circuit and then applies it. That is, efficiently constructible circuits for SAT would lead to a stronger collapse, P = NP.  The assumption of the Karpâ€“Lipton theorem, that these circuits exist, is weaker. But it is still possible for an algorithm in the complexity class    Î£  2     subscript  normal-Î£  2    \Sigma_{2}   to guess a correct circuit for SAT. The complexity class    Î£  2     subscript  normal-Î£  2    \Sigma_{2}   describes problems of the form      âˆƒ   x   âˆ€    y   Ïˆ   (  x  ,  y  )            x   for-all    y  Ïˆ   x  y        \exists x\forall y\;\psi(x,y)   where   Ïˆ   Ïˆ   \psi   is any polynomial-time computable predicate. The existential power of the first quantifier in this predicate can be used to guess a correct circuit for SAT, and the universal power of the second quantifier can be used to verify that the circuit is correct. Once this circuit is guessed and verified, the algorithm in class    Î£  2     subscript  normal-Î£  2    \Sigma_{2}   can use it as a subroutine for solving other problems.  Self-reducibility  To understand the Karpâ€“Lipton proof in more detail, we consider the problem of testing whether a circuit c is a correct circuit for solving SAT instances of a given size, and show that this circuit testing problem belongs to    Î   1     subscript  normal-Î   1    \Pi_{1}   . That is, there exists a polynomial time computable predicate V such that c is a correct circuit if and only if, for all polynomially-bounded z , V ( c , z ) is true.  The circuit c is a correct circuit for SAT if it satisfies two properties:   For every pair ( s , x ) where s is an instance of SAT and x is a solution to the instance, c ( s ) must be true  For every instance s of SAT for which c ( s ) is true, s must be solvable.   The first of these two properties is already in the form of problems in class    Î   1     subscript  normal-Î   1    \Pi_{1}   . To verify the second property, we use the self-reducibility property of SAT.  Self-reducibility describes the phenomenon that, if we can quickly test whether a SAT instance is solvable, we can almost as quickly find an explicit solution to the instance. To find a solution to an instance s , choose one of the Boolean variables x that is input to s , and make two smaller instances s 0 and s 1 where s i denotes the formula formed by replacing x with the constant i . Once these two smaller instances have been constructed, apply the test for solvability to each of them. If one of these two tests returns that the smaller instance is satisfiable, continue solving that instance until a complete solution has been derived.  To use self-reducibility to check the second property of a correct circuit for SAT, we rewrite it as follows:   For every instance s of SAT for which c ( s ) is true, the self-reduction procedure described above finds a valid solution to s .   Thus, we can test in    Î   1     subscript  normal-Î   1    \Pi_{1}   whether c is a valid circuit for solving SAT.  see Random self-reducibility for more information  Proof of Karpâ€“Lipton theorem  The Karpâ€“Lipton theorem can be restated as a result about Boolean formulas with polynomially-bounded quantifiers. Problems in    Î   2     subscript  normal-Î   2    \Pi_{2}   are described by formulas of this type, with the syntax      Ï•  =   âˆ€   x   âˆƒ    y   Ïˆ   (  x  ,  y  )           Ï•   for-all    x      y  Ïˆ   x  y         \phi=\forall x\exists y\;\psi(x,y)   where   Ïˆ   Ïˆ   \psi   is a polynomial-time computable predicate. The Karpâ€“Lipton theorem states that this type of formula can be transformed in polynomial time into an equivalent formula in which the quantifiers appear in the opposite order; such a formula belongs to    Î£  2     subscript  normal-Î£  2    \Sigma_{2}   . Note that the subformula       s   (  x  )    =   âˆƒ    y   Ïˆ   (  x  ,  y  )           s  x       y  Ïˆ   x  y       s(x)=\exists y\;\psi(x,y)   is an instance of SAT. That is, if c is a valid circuit for SAT, then this subformula is equivalent to the unquantified formula c ( s ( x )). Therefore, the full formula for   Ï•   Ï•   \phi   is equivalent (under the assumption that a valid circuit c exists) to the formula       âˆƒ   c   âˆ€    (  x  ,  z  )   V   (  c  ,  z  )       âˆ§   c   (   s   (  x  )    )            c   for-all     x  z   V   c  z         c    s  x      \exists c\forall(x,z)\;V(c,z)\wedge c(s(x))\,   where V is the formula used to verify that c really is a valid circuit using self-reducibility, as described above. This equivalent formula has its quantifiers in the opposite order, as desired. Therefore, the Karpâ€“Lipton assumption allows us to transpose the order of existential and universal quantifiers in formulas of this type, showing that      Î£  2   =   Î   2    .       subscript  normal-Î£  2    subscript  normal-Î   2     \Sigma_{2}=\Pi_{2}.   Repeating the transposition allows formulas with deeper nesting to be simplified to a form in which they have a single existential quantifier followed by a single universal quantifier, showing that      P  H   =   Î£  2    .        P  H    subscript  normal-Î£  2     PH=\Sigma_{2}.     Another proof and S 2 P  Assume    ğ–­ğ–¯  âŠ†   ğ–¯  /  ğ—‰ğ—ˆğ—…ğ—’       ğ–­ğ–¯    ğ–¯  ğ—‰ğ—ˆğ—…ğ—’     \mathsf{NP}\subseteq\mathsf{P/poly}   . Thefore, there exists a family of circuits    C  n     subscript  C  n    C_{n}   that solves satisfability on input of length n . Using self-reducibility, there exists a family of circuits    D  n     subscript  D  n    D_{n}   which outputs a satisfying assignment on true instances.  Suppose L is a    Î   2     subscript  normal-Î   2    \Pi_{2}   set      L  =   {  z  :    âˆ€  x   .   âˆƒ  y   .   Ï•   (  x  ,  y  ,  z  )     }       L   conditional-set  z   formulae-sequence   for-all  x     y     Ï•   x  y  z        L=\{z:\forall x.\exists y.\phi(x,y,z)\}\,     Since     âˆƒ  y   .   Ï•   (  x  ,  y  ,  z  )       formulae-sequence    y     Ï•   x  y  z      \exists y.\phi(x,y,z)   can be considered an instance of SAT (by Cook-Levin theorem ), there exists a circuit    D  n     subscript  D  n    D_{n}   , depending on    n  =   |  z  |       n    z     n=|z|   , such that the formula defining L is equivalent to   Furthermore, the circuit can be guessed with existential quantification:   Obviously () implies (). If (1) is false, then     Â¬   âˆƒ  y    .   Ï•   (  x  ,  y  ,  z  )       formulae-sequence       y      Ï•   x  y  z      \neg\exists y.\phi(x,y,z)   . In this case, no circuit D can output an assignment making    Ï•   (  x  ,   D   (  x  ,  z  )    ,  z  )       Ï•   x    D   x  z    z     \phi(x,D(x,z),z)\;   true.  The proof has shown that a    Î   2     subscript  normal-Î   2    \Pi_{2}   set   L   L   L   is in    Î£  2     subscript  normal-Î£  2    \Sigma_{2}   .  What more, if the    Î   2     subscript  normal-Î   2    \Pi_{2}   formula is true, then the circuit D will work against any x . If the    Î   2     subscript  normal-Î   2    \Pi_{2}   formula is false, then x making the formula (1) false will work against any circuit. This property means a stronger collapse, namely to S complexity class (i.e.     Î   2   âŠ†   ğ–²  2  P   âŠ†   Î£  2          subscript  normal-Î   2    superscript   subscript  ğ–²  2   P         subscript  normal-Î£  2      \Pi_{2}\subseteq\mathsf{S}_{2}^{P}\subseteq\Sigma_{2}   ). It was observed by Sengupta. 2  === AM = MA === A modification 3 of the above proof yields      ğ–­ğ–¯  âŠ†   ğ–¯  /  ğ—‰ğ—ˆğ—…ğ—’   âŸ¹  ğ– ğ–¬  =  ğ–¬ğ–         ğ–­ğ–¯    ğ–¯  ğ—‰ğ—ˆğ—…ğ—’        ğ– ğ–¬       ğ–¬ğ–      \mathsf{NP}\subseteq\mathsf{P/poly}\implies\mathsf{AM}=\mathsf{MA}     (see Arthurâ€“Merlin protocol ).  Suppose that L is in AM , i.e.:      z  âˆˆ  L  âŸ¹   Pr  x    [  âˆƒ  y  .  Ï•   (  x  ,  y  ,  z  )   ]   â‰¥    2  3       fragments  z   L    subscript  Pr  x    fragments  normal-[   y  normal-.  Ï•   fragments  normal-(  x  normal-,  y  normal-,  z  normal-)   normal-]      2  3     z\in L\implies\Pr\nolimits_{x}[\exists y.\phi(x,y,z)]\geq\tfrac{2}{3}         z  âˆ‰  L  âŸ¹   Pr  x    [  âˆƒ  y  .  Ï•   (  x  ,  y  ,  z  )   ]   â‰¤    1  3       fragments  z   L    subscript  Pr  x    fragments  normal-[   y  normal-.  Ï•   fragments  normal-(  x  normal-,  y  normal-,  z  normal-)   normal-]      1  3     z\notin L\implies\Pr\nolimits_{x}[\exists y.\phi(x,y,z)]\leq\tfrac{1}{3}     and as previously rewrite     âˆƒ  y   .   Ï•   (  x  ,  y  ,  z  )       formulae-sequence    y     Ï•   x  y  z      \exists y.\phi(x,y,z)   using the circuit    D  n     subscript  D  n    D_{n}   that outputs a satisfying assignment if it exists:      z  âˆˆ  L  âŸ¹    Pr  x    [   Ï•   (  x  ,    D  n    (  x  ,  z  )    ,  z  )    ]    â‰¥    2  3          z  L         subscript  Pr  x     Ï•   x     subscript  D  n    x  z    z            2  3      z\in L\implies\Pr\nolimits_{x}[\phi(x,D_{n}(x,z),z)]\geq\tfrac{2}{3}         z  âˆ‰  L  âŸ¹    Pr  x    [   Ï•   (  x  ,    D  n    (  x  ,  z  )    ,  z  )    ]    â‰¤    1  3          z  L         subscript  Pr  x     Ï•   x     subscript  D  n    x  z    z            1  3      z\notin L\implies\Pr\nolimits_{x}[\phi(x,D_{n}(x,z),z)]\leq\tfrac{1}{3}     Since    D  n     subscript  D  n    D_{n}   can be guessed:       z  âˆˆ  L  âŸ¹   âˆƒ  D    .     Pr  x    [   Ï•   (  x  ,   D   (  x  ,  z  )    ,  z  )    ]    â‰¥    2  3        formulae-sequence      z  L         D         subscript  Pr  x     Ï•   x    D   x  z    z       2  3      z\in L\implies\exists D.\Pr\nolimits_{x}[\phi(x,D(x,z),z)]\geq\tfrac{2}{3}          z  âˆ‰  L  âŸ¹   âˆ€  D    .     Pr  x    [   Ï•   (  x  ,   D   (  x  ,  z  )    ,  z  )    ]    â‰¤    1  3        formulae-sequence      z  L        for-all  D         subscript  Pr  x     Ï•   x    D   x  z    z       1  3      z\notin L\implies\forall D.\Pr\nolimits_{x}[\phi(x,D(x,z),z)]\leq\tfrac{1}{3}     which proves   L   L   L   is in the smaller class MA .  Application to circuit lower bounds â€“ Kannan's theorem  Kannan's theorem 4 states that for any fixed k there exists a language   L   L   L   in    Î£  2     subscript  normal-Î£  2    \Sigma_{2}   , which is not in SIZE (n k ) (This is a different statement than     Î£  2   âŠˆ   ğ–¯  /  ğ—‰ğ—ˆğ—…ğ—’      not-subset-of-or-equals   subscript  normal-Î£  2     ğ–¯  ğ—‰ğ—ˆğ—…ğ—’     \Sigma_{2}\not\subseteq\mathsf{P/poly}   , which is currently open and states that there exists a single language that is not in SIZE (n k ) for any k ). It is a simple circuit lower bound .  Proof outline:  There exists a language    L  âˆˆ    Î£  4   -   ğ–²ğ–¨ğ–¹ğ–¤   (   n  k   )         L     subscript  normal-Î£  4     ğ–²ğ–¨ğ–¹ğ–¤   superscript  n  k       L\in\Sigma_{4}-\mathsf{SIZE}(n^{k})   (the proof uses diagonalization technique). Consider two cases:   If    ğ–²ğ– ğ–³  âˆ‰   ğ–¯  /  ğ—‰ğ—ˆğ—…ğ—’       ğ–²ğ– ğ–³    ğ–¯  ğ—‰ğ—ˆğ—…ğ—’     \mathsf{SAT}\notin\mathsf{P/poly}   then    ğ–²ğ– ğ–³  âˆ‰   ğ–²ğ–¨ğ–¹ğ–¤   (   n  k   )        ğ–²ğ– ğ–³    ğ–²ğ–¨ğ–¹ğ–¤   superscript  n  k      \mathsf{SAT}\notin\mathsf{SIZE}(n^{k})   and theorem is proved.  If    ğ–²ğ– ğ–³  âˆˆ   ğ–¯  /  ğ—‰ğ—ˆğ—…ğ—’       ğ–²ğ– ğ–³    ğ–¯  ğ—‰ğ—ˆğ—…ğ—’     \mathsf{SAT}\in\mathsf{P/poly}   , then by Karpâ€“Lipton theorem,     Î£  4   =   Î£  2        subscript  normal-Î£  4    subscript  normal-Î£  2     \Sigma_{4}=\Sigma_{2}   and therefore    L  âˆˆ    Î£  2   -   ğ–²ğ–¨ğ–¹ğ–¤   (   n  k   )         L     subscript  normal-Î£  2     ğ–²ğ–¨ğ–¹ğ–¤   superscript  n  k       L\in\Sigma_{2}-\mathsf{SIZE}(n^{k})   .   A stronger version of Karpâ€“Lipton theorem strengthens Kannan's theorem to: for any k , there exists a language    L  âˆˆ    ğ–²  2  P   -   ğ–²ğ–¨ğ–¹ğ–¤   (   n  k   )         L     superscript   subscript  ğ–²  2   P     ğ–²ğ–¨ğ–¹ğ–¤   superscript  n  k       L\in\mathsf{S}_{2}^{P}-\mathsf{SIZE}(n^{k})   .  It is also known that PP is not contained in    ğ–²ğ–¨ğ–¹ğ–¤   (   n  k   )       ğ–²ğ–¨ğ–¹ğ–¤   superscript  n  k     \mathsf{SIZE}(n^{k})   , which was proved by Vinodchandran. 5 Proof: 6   If    ğ–¯ğ–¯  âŠˆ   ğ–¯  /  ğ—‰ğ—ˆğ—…ğ—’      not-subset-of-or-equals  ğ–¯ğ–¯    ğ–¯  ğ—‰ğ—ˆğ—…ğ—’     \mathsf{PP}\not\subseteq\mathsf{P/poly}   then    ğ–¯ğ–¯  âŠˆ   ğ–²ğ–¨ğ–¹ğ–¤   (   n  k   )       not-subset-of-or-equals  ğ–¯ğ–¯    ğ–²ğ–¨ğ–¹ğ–¤   superscript  n  k      \mathsf{PP}\not\subseteq\mathsf{SIZE}(n^{k})   .  Otherwise,     ğ–¯   â™¯  ğ–¯    âŠ†   ğ–¯  /  ğ—‰ğ—ˆğ—…ğ—’        superscript  ğ–¯    normal-â™¯  ğ–¯      ğ–¯  ğ—‰ğ—ˆğ—…ğ—’     \mathsf{P^{\sharp P}}\subseteq\mathsf{P/poly}   . Since          ğ–¯   â™¯  ğ–¯    âŠ‡  ğ–¯ğ–¯  âŠ‡  ğ–¬ğ–        superset-of-or-equals   superscript  ğ–¯    normal-â™¯  ğ–¯    ğ–¯ğ–¯    superset-of-or-equals    ğ–¬ğ–      \mathsf{P^{\sharp P}}\supseteq\mathsf{PP}\supseteq\mathsf{MA}   (by property of MA )       ğ–¯   â™¯  ğ–¯    âŠ‡  ğ–¯ğ–§  âŠ‡   Î£  2   âŠ‡  ğ–¬ğ–        superset-of-or-equals   superscript  ğ–¯    normal-â™¯  ğ–¯    ğ–¯ğ–§    superset-of-or-equals     subscript  normal-Î£  2     superset-of-or-equals    ğ–¬ğ–      \mathsf{P^{\sharp P}}\supseteq\mathsf{PH}\supseteq\Sigma_{2}\supseteq\mathsf{MA}   (by Toda's theorem and property of MA)       ğ–¯   â™¯  ğ–¯    =  ğ–¬ğ–        superscript  ğ–¯    normal-â™¯  ğ–¯    ğ–¬ğ–     \mathsf{P^{\sharp P}}=\mathsf{MA}   (follows from assumption using interactive protocol for permanent, see P/poly )      the containments are equalities and we get    ğ–¯ğ–¯  =   Î£  2   âŠˆ   ğ–²ğ–¨ğ–¹ğ–¤   (   n  k   )          ğ–¯ğ–¯   subscript  normal-Î£  2     not-subset-of-or-equals      ğ–²ğ–¨ğ–¹ğ–¤   superscript  n  k       \mathsf{PP}=\Sigma_{2}\not\subseteq\mathsf{SIZE}(n^{k})   by Kannan's theorem.   References      .     .   "  Category:Theorems in computational complexity theory     S. Zachos , Probabilistic quantifiers and games, 1988 â†©  Jin Yi-Cai.     S  2  P   âŠ†   ğ–¹ğ–¯ğ–¯  ğ–­ğ–¯        superscript   subscript  S  2   P    superscript  ğ–¹ğ–¯ğ–¯  ğ–­ğ–¯     S_{2}^{P}\subseteq\mathsf{ZPP}^{\mathsf{NP}}    1 , section 6 â†©  V. Arvind, J. KÃ¶bler, U. SchÃ¶ning , R. Schuler, If NP has Polynomial-Size Circuits, then MA = AM â†©  â†©  N. V. Vinodchandran, A note on the circuit complexity of PP â†©  S. Aaronson , Oracles Are Subtle But Not Malicious â†©     