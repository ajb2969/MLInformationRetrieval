   Retiming      Retiming   Retiming is the technique of moving the structural location of latches or registers in a digital circuit to improve its performance, area, and/or power characteristics in such a way that preserves its functional behavior at its outputs. Retiming was first described by Charles E. Leiserson and James B. Saxe in 1983. 1  The technique uses a directed graph where the vertices represent asynchronous combinational blocks and the directed edges represent a series of registers or latches (the number of registers or latches can be zero). Each vertex has a value corresponding to the delay through the combinational circuit it represents. After doing this, one can attempt to optimize the circuit by pushing registers from output to input and vice versa - much like bubble pushing . Two operations can be used - deleting a register from each input of a vertex while adding a register to all outputs, and conversely adding a register to each input of vertex and deleting a register from all outputs. In all cases, if the rules are followed, the circuit will have the same functional behavior as it did before retiming.  Formal description  The initial formulation of the retiming problem as described by Leiserson and Saxe is as follows. Given a directed graph     G  :=   (  V  ,  E  )      assign  G   V  E     G:=(V,E)   whose vertices represent logic gates or combinational delay elements in a circuit, assume there is a directed edge    e  :=   (  u  ,  v  )      assign  e   u  v     e:=(u,v)   between two elements that are connected directly or through one or more registers. Let the weight of each edge    w   (  e  )       w  e    w(e)   be the number of registers present along edge   e   e   e   in the initial circuit. Let    d   (  v  )       d  v    d(v)   be the propagation delay through vertex   v   v   v   . The goal in retiming is to compute an integer lag value    r   (  v  )       r  v    r(v)   for each vertex such that the retimed weight      w  r    (  e  )    :=     w   (  e  )    +   r   (  v  )     -   r   (  u  )        assign     subscript  w  r   e         w  e     r  v      r  u      w_{r}(e):=w(e)+r(v)-r(u)   of every edge is non-negative. There is a proof that this preserves the output functionality. 2  Minimizing the clock period with network flow  The most common use of retiming is to minimize the clock period . A simple technique to optimize the clock period is to search for the minimum feasible period (e.g. using binary search ).  The feasibility of a clock period   T   T   T   can be checked in one of several ways. The linear program below is feasible if and only if   T   T   T   is a feasible clock period. Let    W   (  u  ,  v  )       W   u  v     W(u,v)   be the minimum number of registers along any path from   u   u   u   to   v   v   v   (if such a path exists), and    D   (  u  ,  v  )       D   u  v     D(u,v)   is the maximum delay along any path from   u   u   u   to   v   v   v   with W(u,v) registers. The dual of this program is a minimum cost circulation problem , which can be solved efficiently as a network problem. The limitations of this approach arise from the enumeration and size of the   W   W   W   and   D   D   D   matrices.      Given        w   (  e  )    ,   W   (  u  ,  v  )    ,   D   (  u  ,  v  )         w  e     W   u  v      D   u  v      w(e),W(u,v),D(u,v)   and a target clock period   T   T   T        Find        r   (  v  )    :   V  →  ℤ      normal-:    r  v    normal-→  V  ℤ     r(v):V\to\mathbb{Z}        Such that           r   (  u  )    -   r   (  v  )          r  u     r  v     r(u)-r(v)              r   (  u  )    -   r   (  v  )          r  u     r  v     r(u)-r(v)        Minimizing the clock period with MILP  Alternatively, feasibility of a clock period   T   T   T   can be expressed as a mixed-integer linear program (MILP). A solution will exist and a valid lag function    r   (  v  )       r  v    r(v)   will be returned if and only if the period is feasible.      Given        w   (  e  )    ,   d   (  v  )         w  e     d  v     w(e),d(v)   and a target clock period   T   T   T        Find        r   (  v  )    :   V  →  ℤ      normal-:    r  v    normal-→  V  ℤ     r(v):V\to\mathbb{Z}   and     R   (  v  )    :   V  →  ℛ      normal-:    R  v    normal-→  V  ℛ     R(v):V\to\mathcal{R}        Such that           r   (  v  )    -   R   (  V  )          r  v     R  V     r(v)-R(V)              R   (  v  )    -   r   (  v  )          R  v     r  v     R(v)-r(v)              r   (  u  )    -   r   (  v  )          r  u     r  v     r(u)-r(v)              R   (  u  )    -   R   (  v  )          R  u     R  v     R(u)-R(v)        Other formulations and extensions  Alternate formulations allow the minimization of the register count and the minimization of the register count under a delay constraint. The initial paper includes extensions that allow the consideration of fan-out sharing and a more general delay model. Subsequent work has addressed the inclusion of register delays, 3 load-dependent delay models, 4 and hold constraints.     http://citeseer.ist.psu.edu/context/96547/0 ↩  C. E. Leiserson, J. B. Saxe, "Retiming Synchronous Circuitry," Algorithmica, Vol. 6, No. 1, pp. 5-35, 1991. ↩  K. N. Lalgudi, M. C. Papaefthymiou, , IEEE Transactions on Computer-Aided Design of Integrated Circuits and Systems , vol.16, no.12, pp.1393-1408, Dec. 1997. ↩      