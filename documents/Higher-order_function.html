<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1387">Higher-order function</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Higher-order function</h1>
<style>
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
<style>
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</body></html>
<body>
<hr/>

<p>In <a class="uri" href="mathematics" title="wikilink">mathematics</a> and <a href="computer_science" title="wikilink">computer science</a>, a <strong>higher-order function</strong> (also <strong>functional form</strong>, <strong>functional</strong> or <strong>functor</strong>) is a <a href="function_(mathematics)" title="wikilink">function</a> that does at least one of the following:<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>
<ul>
<li>takes one or more functions as an input</li>
<li>outputs a function</li>
</ul>

<p>All other functions are <em>first-order functions</em>. In mathematics higher-order functions are also known as <em><a href="operator_(mathematics)" title="wikilink">operators</a></em> or <em><a href="functional_(mathematics)" title="wikilink">functionals</a></em>. The <a class="uri" href="derivative" title="wikilink">derivative</a> in <a class="uri" href="calculus" title="wikilink">calculus</a> is a common example, since it maps a function to another function.</p>

<p>In the <a href="lambda_calculus" title="wikilink">untyped lambda calculus</a>, all functions are higher-order; in a <a href="typed_lambda_calculus" title="wikilink">typed lambda calculus</a>, from which most <a href="functional_programming" title="wikilink">functional programming</a> languages are derived, higher-order functions are values with types of the form 

<math display="inline" id="Higher-order_function:0">
 <semantics>
  <mrow>
   <mrow>
    <mo stretchy="false">(</mo>
    <msub>
     <mi>τ</mi>
     <mn>1</mn>
    </msub>
    <mo>→</mo>
    <msub>
     <mi>τ</mi>
     <mn>2</mn>
    </msub>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>→</mo>
   <msub>
    <mi>τ</mi>
    <mn>3</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-(</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>τ</ci>
      <cn type="integer">1</cn>
     </apply>
     <ci>normal-→</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>τ</ci>
      <cn type="integer">2</cn>
     </apply>
     <ci>normal-)</ci>
    </cerror>
    <ci>normal-→</ci>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>τ</ci>
     <cn type="integer">3</cn>
    </apply>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (\tau_{1}\to\tau_{2})\to\tau_{3}
  </annotation>
 </semantics>
</math>

.</p>
<h2 id="general-examples">General examples</h2>

<p>The <code>[[map (higher-order function)|map]]</code> function, found in many functional programming languages, is one example of a higher-order function. It takes as arguments a function <em>f</em> and a list of elements, and as the result, returns a new list with <em>f</em> applied to each element from the list. Another very common kind of higher-order function in those languages which support them are sorting functions which take a comparison function as a parameter, allowing the programmer to separate the sorting algorithm from the comparisons of the items being sorted. The <a href="C_(programming_language)" title="wikilink">C</a> standard <a href="function_(computer_science)" title="wikilink">function</a> <code>qsort</code> is an example of this.</p>

<p>Other examples of higher-order functions include <a href="fold_(higher-order_function)" title="wikilink">fold</a>, <a href="function_composition_(computer_science)" title="wikilink">function composition</a>, <a href="integral" title="wikilink">integration</a>, and the constant-function function λ<em>x</em>.λ<em>y</em>.<em>x</em>.</p>
<h2 id="support-in-programming-languages">Support in programming languages</h2>
<h3 id="direct-support">Direct support</h3>

<p><em>The examples are not intended to compare and contrast programming languages, but to serve as examples of higher-order function syntax</em></p>

<p>In the following examples, the higher-order function <code>twice</code> takes a function and some value, and applies the function to this value twice.</p>

<p><a href="Scala_language" title="wikilink">Scala</a>:</p>
<div class="sourceCode"><pre class="sourceCode Scala"><code class="sourceCode scala"><span class="kw">def</span> twice[A](f: A =&gt; A, x: A) = <span class="fu">f</span>(<span class="fu">f</span>(x))

<span class="kw">def</span> <span class="fu">f</span>(a: Int) = a + <span class="dv">3</span>

<span class="fu">println</span>(<span class="fu">twice</span>(f, <span class="dv">7</span>)) <span class="co">// 13</span></code></pre></div>

<p><a href="Python_language" title="wikilink">Python</a>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> twice(function, x):
    <span class="cf">return</span> function(function(x))

<span class="kw">def</span> f(x):
    <span class="cf">return</span> x <span class="op">+</span> <span class="dv">3</span>

<span class="bu">print</span>(twice(f, <span class="dv">7</span>)) <span class="co"># 13</span></code></pre></div>

<p><a href="F_Sharp_(programming_language)" title="wikilink">F#</a>:</p>
<div class="sourceCode"><pre class="sourceCode fsharp"><code class="sourceCode fsharp"><span class="kw">let</span> twice f = f &gt;&gt; f

<span class="kw">let</span> f = (+) <span class="dv">3</span>

twice f <span class="dv">7</span> |&gt; printf <span class="st">"%A"</span> //<span class="co"> 13</span></code></pre></div>

<p><a href="Haskell_language" title="wikilink">Haskell</a>:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">twice function <span class="fu">=</span> function <span class="fu">.</span> function

f <span class="fu">=</span> (subtract <span class="dv">3</span>)

main <span class="fu">=</span> print (twice f <span class="dv">7</span>) <span class="co">-- 1</span></code></pre></div>

<p><a class="uri" href="JavaScript" title="wikilink">JavaScript</a>:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">function</span> <span class="at">twice</span>(f<span class="op">,</span> x)<span class="op">{</span>
    <span class="cf">return</span> <span class="at">f</span>(<span class="at">f</span>(x))<span class="op">;</span>
<span class="op">}</span>

<span class="kw">function</span> <span class="at">f</span>(x)<span class="op">{</span>
    <span class="cf">return</span> x<span class="op">*</span><span class="dv">3</span><span class="op">;</span>
<span class="op">}</span>

<span class="at">twice</span>(f<span class="op">,</span> <span class="dv">7</span>)<span class="op">;</span> <span class="co">// 63</span></code></pre></div>

<p><a href="Perl_language" title="wikilink">Perl</a>:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">sub </span><span class="fu">twice</span> {
    <span class="kw">my</span> (<span class="dt">$f</span>, <span class="dt">$x</span>) = <span class="dt">@_</span>;
    <span class="kw">return</span> <span class="dt">$f</span>-&gt;(<span class="dt">$f</span>-&gt;(<span class="dt">$x</span>));
}

<span class="kw">sub </span><span class="fu">f</span> {
    <span class="kw">my</span> <span class="dt">$x</span> = <span class="fu">shift</span>;
    <span class="kw">return</span> <span class="dt">$x</span> + <span class="dv">3</span>;
}

say twice(\&amp;f;, <span class="dv">7</span>);    <span class="co"># 13</span></code></pre></div>

<p><a href="Gosu_(programming_language)" title="wikilink">Gosu</a>:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">function</span> <span class="at">twice</span>(<span class="at">f</span>(v<span class="op">:</span>int)<span class="op">:</span>int<span class="op">,</span> v<span class="op">:</span> int)<span class="op">:</span> int <span class="op">{</span>
  <span class="cf">return</span> <span class="at">f</span>(<span class="at">f</span>(v))
<span class="op">}</span>

<span class="at">print</span>(<span class="at">twice</span>(\x <span class="op">-&gt;</span> x<span class="op">+</span>x<span class="op">,</span> <span class="dv">7</span>)) <span class="co">// 28</span></code></pre></div>

<p><a href="Ruby_language" title="wikilink">Ruby</a>:</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="kw">def</span> twice(f, x)
  f.call(f.call(x))
<span class="kw">end</span>

f1 = -&gt;(x){ x / <span class="dv">3</span> }

print twice(f1, <span class="dv">9</span>) <span class="co"># 1</span></code></pre></div>

<p><a class="uri" href="Matlab" title="wikilink">Matlab</a>:</p>
<div class="sourceCode"><pre class="sourceCode matlab"><code class="sourceCode matlab">f=@(x)(x-<span class="fl">3</span>);
twice=@(f,x)(f(f(x)));

disp(twice(f,<span class="fl">7</span>))  <span class="co">%1</span></code></pre></div>

<p><a class="uri" href="Clojure" title="wikilink">Clojure</a>:</p>
<div class="sourceCode"><pre class="sourceCode clojure"><code class="sourceCode clojure">(<span class="kw">defn</span><span class="fu"> twice </span>[function x]
  (function(function x)))

(twice #(<span class="kw">+</span> % <span class="dv">3</span>) <span class="dv">7</span>) <span class="co">;13</span></code></pre></div>

<p>In Clojure, "#" starts a lambda expression, and "%" refers to the next function argument.</p>

<p><a href="Scheme_(programming_language)" title="wikilink">Scheme</a>:</p>
<div class="sourceCode"><pre class="sourceCode scheme"><code class="sourceCode scheme">(<span class="kw">define</span><span class="fu"> </span>(add x y) (<span class="kw">+</span> x y))
(<span class="kw">define</span><span class="fu"> </span>(f x)
  (<span class="kw">lambda</span> (y) (<span class="kw">+</span> x y)))
(<span class="kw">display</span> ((f <span class="dv">3</span>) <span class="dv">7</span>))
(<span class="kw">display</span> (add <span class="dv">3</span> <span class="dv">7</span>))</code></pre></div>

<p>In this Scheme example, the higher-order function <code>(f x)</code> is used to implement <a class="uri" href="currying" title="wikilink">currying</a>. It takes a single argument and returns a function. The evaluation of the expression <code>((f 3) 7)</code> first returns a function after evaluating <code>(f 3)</code>. The returned function is <code>(lambda (y) (+ 3 y))</code>. Then, it evaluates the returned function with 7 as the argument, returning 10. This is equivalent to the expression <code>(add 3 7)</code>, since <code>(f x)</code> is equivalent to the curried form of <code>(add x y)</code>.</p>

<p><a href="Erlang_(programming_language)" title="wikilink">Erlang</a>:</p>
<div class="sourceCode"><pre class="sourceCode erlang"><code class="sourceCode erlang"><span class="fu">or_else([],</span> <span class="dt">_</span><span class="fu">)</span> <span class="kw">-&gt;</span> <span class="ch">false</span><span class="fu">;</span>
<span class="fu">or_else([</span><span class="dt">F</span> <span class="fu">|</span> <span class="dt">Fs</span><span class="fu">],</span> <span class="dt">X</span><span class="fu">)</span> <span class="kw">-&gt;</span> <span class="fu">or_else(</span><span class="dt">Fs</span><span class="fu">,</span> <span class="dt">X</span><span class="fu">,</span> <span class="dt">F</span><span class="fu">(</span><span class="dt">X</span><span class="fu">)).</span>

<span class="fu">or_else(</span><span class="dt">Fs</span><span class="fu">,</span> <span class="dt">X</span><span class="fu">,</span> <span class="ch">false</span><span class="fu">)</span> <span class="kw">-&gt;</span> <span class="fu">or_else(</span><span class="dt">Fs</span><span class="fu">,</span> <span class="dt">X</span><span class="fu">);</span>
<span class="fu">or_else(</span><span class="dt">Fs</span><span class="fu">,</span> <span class="dt">_</span><span class="fu">,</span> <span class="fu">{</span><span class="ch">false</span><span class="fu">,</span> <span class="dt">Y</span><span class="fu">})</span> <span class="kw">-&gt;</span> <span class="fu">or_else(</span><span class="dt">Fs</span><span class="fu">,</span> <span class="dt">Y</span><span class="fu">);</span>
<span class="fu">or_else(</span><span class="dt">_</span><span class="fu">,</span> <span class="dt">_</span><span class="fu">,</span> <span class="dt">R</span><span class="fu">)</span> <span class="kw">-&gt;</span> <span class="dt">R</span><span class="fu">.</span>

<span class="fu">or_else([</span><span class="kw">fun</span> <span class="fu">erlang:is_integer</span><span class="kw">/</span><span class="dv">1</span><span class="fu">,</span> <span class="kw">fun</span> <span class="fu">erlang:is_atom</span><span class="kw">/</span><span class="dv">1</span><span class="fu">,</span> <span class="kw">fun</span> <span class="fu">erlang:is_list</span><span class="kw">/</span><span class="dv">1</span><span class="fu">],</span><span class="fl">3.23</span><span class="fu">).</span></code></pre></div>

<p>In this Erlang example, the higher-order function <code>or_else</code>/2 takes a list of functions (<code>Fs</code>) and argument (<code>X</code>). It evaluates the function <code>F</code> with the argument <code>X</code> as argument. If the function <code>F</code> returns false then the next function in <code>Fs</code> will be evaluated. If the function <code>F</code> returns <code>{false,Y}</code> then the next function in <code>Fs</code> with argument <code>Y</code> will be evaluated. If the function <code>F</code> returns <code>R</code> the higher-order function <code>or_else</code>/2 will return <code>R</code>. Note that <code>X</code>, <code>Y</code>, and <code>R</code> can be functions. The example returns <code>false</code>.</p>

<p><a class="uri" href="JavaScript" title="wikilink">JavaScript</a>:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">function</span> <span class="at">ArrayForEach</span>(array<span class="op">,</span> func) <span class="op">{</span>
    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">array</span>.<span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) <span class="op">{</span>
        <span class="cf">if</span> (i <span class="kw">in</span> array) <span class="op">{</span>
            <span class="at">func</span>(array[i])<span class="op">;</span>
        <span class="op">}</span>
    <span class="op">}</span>
<span class="op">}</span>

<span class="kw">function</span> <span class="at">log</span>(msg) <span class="op">{</span>
    <span class="va">console</span>.<span class="at">log</span>(msg)<span class="op">;</span>
<span class="op">}</span>

<span class="at">ArrayForEach</span>([<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">5</span>]<span class="op">,</span> log)<span class="op">;</span></code></pre></div>

<p>In this JavaScript example, the higher-order function <code>ArrayForEach</code> takes an array and a method in as arguments and calls the method on every element in the array. Although the method may or may not return a value, there is not mapping involved since mapping requires saving returned values to a list.</p>

<p>However, this could also be implemented using the <code>map</code> function, which in Javascript can accept functions with no return value.</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">function</span> <span class="at">log</span>(msg) <span class="op">{</span>
    <span class="va">console</span>.<span class="at">log</span>(msg)<span class="op">;</span>
<span class="op">}</span>

[<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">5</span>].<span class="at">map</span>(log)<span class="op">;</span></code></pre></div>
<h3 id="alternatives">Alternatives</h3>
<h4 id="function-pointers">Function Pointers</h4>

<p><a href="Function_pointer" title="wikilink">Function pointers</a> in languages such as <a href="C_(programming_language)" title="wikilink">C</a> and <a class="uri" href="C++" title="wikilink">C++</a> allow programmers to pass around references to functions. The following C code computes an approximation of the integral of an arbitrary function:</p>
<div class="sourceCode"><pre class="sourceCode c"><code class="sourceCode c"><span class="ot">#include <stdio.h></stdio.h></span>

<span class="dt">double</span> square(<span class="dt">double</span> x)
{
    <span class="kw">return</span> x * x;
}

<span class="dt">double</span> cube(<span class="dt">double</span> x)
{
    <span class="kw">return</span> x * x * x;
}

<span class="co">/* Compute the integral of f() within the interval [a,b] */</span>
<span class="dt">double</span> integral(<span class="dt">double</span> f(<span class="dt">double</span> x), <span class="dt">double</span> a, <span class="dt">double</span> b, <span class="dt">int</span> n)
{
    <span class="dt">int</span> i;
    <span class="dt">double</span> sum = <span class="dv">0</span>;
    <span class="dt">double</span> dt = (b - a) / n;
    <span class="kw">for</span> (i = <span class="dv">0</span>;  i &lt; n;  ++i) {
        sum += f(a + (i + <span class="fl">0.5</span>) * dt);
    }
    <span class="kw">return</span> sum * dt;
}

<span class="dt">int</span> main()
{
    printf(<span class="st">"%g</span><span class="ch">\n</span><span class="st">"</span>, integral(square, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">100</span>));
    printf(<span class="st">"%g</span><span class="ch">\n</span><span class="st">"</span>, integral(cube, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">100</span>));
    <span class="kw">return</span> <span class="dv">0</span>;
}
</code></pre></div></body>

<p>The <a class="uri" href="qsort" title="wikilink">qsort</a> function from the C standard library uses a function pointer to emulate the behavior of a higher-order function.</p>
<h4 id="macros">Macros</h4>

<p><a href="Macro_(computer_science)" title="wikilink">Macros</a> can also be used to achieve some of the effects of higher order functions. However, macros cannot easily avoid the problem of variable capture; they may also result in large amounts of duplicated code, which can be more difficult for a compiler to optimize. Macros are generally not strongly typed, although they may produce strongly typed code.</p>
<h4 id="dynamic-code-evaluation">Dynamic Code Evaluation</h4>

<p>In other <a href="imperative_programming" title="wikilink">imperative programming</a> languages it is possible to achieve some of the same algorithmic results as are obtained through use of higher-order functions by dynamically executing code (sometimes called "Eval" or "Execute" operations) in the scope of evaluation. There can be significant drawbacks to this approach:</p>
<ul>
<li>The argument code to be executed is usually not <a href="type_system#Static_typing" title="wikilink">statically typed</a>; these languages generally rely on <a href="type_system#Dynamic_typing" title="wikilink">dynamic typing</a> to determine the well-formedness and safety of the code to be executed.</li>
<li>The argument is usually provided as a string, the value of which may not be known until run-time. This string must either be compiled during program execution (using <a href="just-in-time_compilation" title="wikilink">just-in-time compilation</a>) or evaluated by <a href="interpreter_(computing)" title="wikilink">interpretation</a>, causing some added overhead at run-time, and usually generating less efficient code.</li>
</ul>
<h4 id="objects">Objects</h4>

<p>In <a href="object-oriented_programming" title="wikilink">object-oriented programming</a> languages that do not support higher-order functions, <a href="object_(computer_science)" title="wikilink">objects</a> can be an effective substitute. An object's <a href="method_(computer_science)" title="wikilink">methods</a> act in essence like functions, and a method may accept objects as parameters and produce objects as return values. Objects often carry added run-time overhead compared to pure functions, however, and added <a href="boilerplate_code" title="wikilink">boilerplate code</a> for defining and instantiating an object and its method(s). Languages that permit <a href="stack-based_memory_allocation" title="wikilink">stack</a>-based (versus <a href="dynamic_memory_allocation" title="wikilink">heap</a>-based) objects or <a class="uri" href="structs" title="wikilink">structs</a> can provide more flexibility with this method.</p>

<p>An example of using a simple stack based record in <a href="Free_Pascal" title="wikilink">Free Pascal</a> with a function that returns a function:</p>
<div class="sourceCode"><pre class="sourceCode pascal"><code class="sourceCode pascal"><span class="kw">program</span> example;

<span class="kw">type</span> 
  int = <span class="dt">integer</span>;
  Txy = <span class="kw">record</span> x, y: int; <span class="kw">end</span>;
  Tf = <span class="kw">function</span> (xy: Txy): int;
     
<span class="kw">function</span> f(xy: Txy): int; 
<span class="kw">begin</span> 
  Result := xy.y + xy.x; 
<span class="kw">end</span>;

<span class="kw">function</span> g(func: Tf): Tf; 
<span class="kw">begin</span> 
  result := func; 
<span class="kw">end</span>;

<span class="kw">var</span> 
  a: Tf;
  xy: Txy = (x: <span class="dv">3</span>; y: <span class="dv">7</span>);

<span class="kw">begin</span>  
  a := g(@f);      <span class="co">// return a function to "a"</span>
  writeln(a(xy)); <span class="co">// prints 10</span>
<span class="kw">end</span>.</code></pre></div>

<p>The function <code>a()</code> takes a <code>Txy</code> record as input and returns the integer value of the sum of the record's <code>x</code> and <code>y</code> fields (3 + 7).</p>
<h4 id="defunctionalization">Defunctionalization</h4>

<p><a class="uri" href="Defunctionalization" title="wikilink">Defunctionalization</a> can be used to implement higher-order functions in languages that lack <a href="first_class_function" title="wikilink">first-class functions</a>:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="co">// Defunctionalized function data structures</span>
<span class="kw">template</span>&lt;<span class="kw">typename</span> t=<span class="st">""</span>&gt; <span class="kw">struct</span> Add { T value; };
<span class="kw">template</span>&lt;<span class="kw">typename</span> t=<span class="st">""</span>&gt; <span class="kw">struct</span> DivBy { T value; };
<span class="kw">template</span>&lt;<span class="kw">typename</span> f,=<span class="st">""</span> g=<span class="st">""</span> <span class="kw">typename</span>=<span class="st">""</span>&gt; <span class="kw">struct</span> Composition { F f; G g; };

<span class="co">// Defunctionalized function application implementations</span>
<span class="kw">template</span>&lt;<span class="kw">typename</span> f,=<span class="st">""</span> g,=<span class="st">""</span> <span class="kw">typename</span>=<span class="st">""</span> x=<span class="st">""</span>&gt;
<span class="kw">auto</span> apply(Composition<f, class="st" g="&lt;span">""</f,></code></pre></div>&gt; f, X arg) {
    <span class="kw">return</span> apply(f.f, apply(f.g, arg));
}

<span class="kw">template</span>&lt;<span class="kw">typename</span> t,=<span class="st">""</span> <span class="kw">typename</span>=<span class="st">""</span> x=<span class="st">""</span>&gt;
<span class="kw">auto</span> apply(Add<t> f, X arg) {
    <span class="kw">return</span> arg  + f.value;
}

<span class="kw">template</span>&lt;<span class="kw">typename</span> t,=<span class="st">""</span> <span class="kw">typename</span>=<span class="st">""</span> x=<span class="st">""</span>&gt;
<span class="kw">auto</span> apply(DivBy<t> f, X arg) {
    <span class="kw">return</span> arg / f.value;
}

<span class="co">// Higher-order compose function</span>
<span class="kw">template</span>&lt;<span class="kw">typename</span> f,=<span class="st">""</span> g=<span class="st">""</span> <span class="kw">typename</span>=<span class="st">""</span>&gt;
Composition<f, class="st" g="&lt;span">""</f,></t></t>&gt; compose(F f, G g) {
    <span class="kw">return</span> Composition<f, class="st" g="&lt;span">""</f,>&gt; {f, g};
}

<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">const</span> <span class="dt">char</span>* argv[]) {
    <span class="kw">auto</span> f = compose(DivBy&lt;<span class="dt">float</span>&gt;{ <span class="fl">2.</span><span class="er">0f</span> }, Add&lt;<span class="dt">int</span>&gt;{ <span class="dv">5</span> });
    apply(f, <span class="dv">3</span>); <span class="co">// 4.0f</span>
    apply(f, <span class="dv">9</span>); <span class="co">// 7.0f</span>
<span class="kw">return</span> <span class="dv">0</span>;
}
<!--<span class="dt"-->int&gt;<!--<span class="dt"-->float&gt;<!--<span class="kw"-->typename&gt;<!--<span class="kw"-->typename&gt;<!--<span class="kw"-->typename&gt;<!--<span class="kw"-->typename&gt;<!--<span class="kw"-->typename&gt;<!--<span class="kw"-->typename&gt;<!--<span class="kw"-->typename&gt;

<p>In this case, different types are used to trigger different functions through the use of <a href="function_overloading" title="wikilink">overloading</a>. The overloaded function in this example has the signature <code>auto apply</code>.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="First-class_function" title="wikilink">First-class function</a></li>
<li><a href="Combinatory_logic" title="wikilink">Combinatory logic</a></li>
<li><a href="Function-level_programming" title="wikilink">Function-level programming</a></li>
<li><a href="Functional_programming" title="wikilink">Functional programming</a></li>
<li><a href="Kappa_calculus" title="wikilink">Kappa calculus</a> - a formalism for functions which <em>excludes</em> higher-order functions</li>
<li><a href="Strategy_pattern" title="wikilink">Strategy pattern</a></li>
<li><a href="Higher_order_message" title="wikilink">Higher order messages</a></li>
</ul>
<h2 id="references">References</h2>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://ergodicity.iamganesh.com/2006/08/07/higher-order-functions/">Higher-order functions and variational calculus</a></li>
<li><a href="http://boost.org/doc/html/lambda.html">Boost Lambda Library for C++</a></li>
<li><a href="http://hop.perl.plover.com/book/">Higher Order Perl</a></li>
</ul>

<p>"</p>

<p><a href="Category:Functional_programming" title="wikilink">Category:Functional programming</a> <a href="Category:Lambda_calculus" title="wikilink">Category:Lambda calculus</a> <a href="Category:Higher-order_functions" title="wikilink"> </a> <a class="uri" href="Category:Subroutines" title="wikilink">Category:Subroutines</a> <a href="Category:Articles_with_example_Python_code" title="wikilink">Category:Articles with example Python code</a> <a href="Category:Articles_with_example_Haskell_code" title="wikilink">Category:Articles with example Haskell code</a> <a href="Category:Articles_with_example_Scheme_code" title="wikilink">Category:Articles with example Scheme code</a> <a href="Category:Articles_with_example_Erlang_code" title="wikilink">Category:Articles with example Erlang code</a> <a href="Category:Articles_with_example_JavaScript_code" title="wikilink">Category:Articles with example JavaScript code</a> <a href="Category:Articles_with_example_C_code" title="wikilink">Category:Articles with example C code</a> <a href="Category:Articles_with_example_Pascal_code" title="wikilink">Category:Articles with example Pascal code</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
</ol>
</section>


