   Circulation problem      Circulation problem   The circulation problem and its variants are a generalisation of network flow problems, with the added constraint of a lower bound on edge flows, and with flow conservation also being required for the source and sink (i.e. there are no special nodes). In variants of the problem, you have multiple commodities flowing through the network, and a cost on the flow.  Definition  Given flow network    G   (  V  ,  E  )       G   V  E     G(V,E)   with:      l   (  v  ,  w  )       l   v  w     l(v,w)   , lower bound on flow from node   v   v   v   to node   w   w   w   ,      u   (  v  ,  w  )       u   v  w     u(v,w)   , upper bound on flow from node   v   v   v   to node   w   w   w   ,      c   (  v  ,  w  )       c   v  w     c(v,w)   , cost of a unit of flow on    (  v  ,  w  )     v  w    (v,w)     and the constraints:       l   (  v  ,  w  )    ≤   f   (  v  ,  w  )    ≤   u   (  v  ,  w  )            l   v  w      f   v  w           u   v  w       l(v,w)\leq f(v,w)\leq u(v,w)   ,        ∑   w  ∈  V     f   (  u  ,  w  )     =  0        subscript     w  V      f   u  w     0    \sum_{w\in V}f(u,w)=0   (flow cannot appear or disappear in nodes).  Finding a flow assignment satisfying the constraints gives a solution to the given circulation problem.  In the minimum cost variant of the problem, minimize        ∑    (  v  ,  w  )   ∈  E       c   (  v  ,  w  )    ⋅  f    (  v  ,  w  )     .      subscript      v  w   E       normal-⋅    c   v  w    f    v  w      \sum_{(v,w)\in E}c(v,w)\cdot f(v,w).     Multi-commodity circulation  In a multi-commodity circulation problem, you also need to keep track of the flow of the individual commodities:              f   i    (  v  ,  w  )        subscript  f  i    v  w     \,f_{i}(v,w)      The flow of commodity   i   i   i   from   v   v   v   to   w   w   w   .           f    (  v  ,  w  )    =    ∑  i     f  i    (  v  ,  w  )           f   v  w      subscript   i      subscript  f  i    v  w       \,f(v,w)=\sum_{i}f_{i}(v,w)      The total flow.       There is also a lower bound on each flow of commodity.               l   i    (  v  ,  w  )    ≤    f  i    (  v  ,  w  )           subscript  l  i    v  w       subscript  f  i    v  w      \,l_{i}(v,w)\leq f_{i}(v,w)          The conservation constraint must be upheld individually for the commodities:        ∑   w  ∈  V      f  i    (  u  ,  w  )     =  0.        subscript     w  V       subscript  f  i    u  w     0.    \ \sum_{w\in V}f_{i}(u,w)=0.     Solution  For the circulation problem, many polynomial algorithms have been developed (e.g., Edmonds and Karp , 1972; Tarjan 1987-1988). Tardos found the first strongly polynomial algorithm. 1  For the case of multiple commodities, the problem is NP-complete for integer flows. 2 For fractional flows, it is solvable in polynomial time , as one can formulate the problem as a linear program .  Related problems  Below are given some problems, and how to solve them with the general circulation setup given above.   Minimum cost multi-commodity circulation problem - Using all constraints given above.  Minimum cost circulation problem - Use a single commodity  Multi-commodity circulation - Solve without optimising cost.  Simple circulation - Just use one commodity, and no cost.  Multi-commodity flow - If     K  i    (   s  i   ,   t  i   ,   d  i   )        subscript  K  i     subscript  s  i    subscript  t  i    subscript  d  i      K_{i}(s_{i},t_{i},d_{i})   denotes a demand of    d  i     subscript  d  i    d_{i}   for commodity   i   i   i   from    s  i     subscript  s  i    s_{i}   to    t  i     subscript  t  i    t_{i}   , create an edge    (   t  i   ,   s  i   )      subscript  t  i    subscript  s  i     (t_{i},s_{i})   with      l  i    (   t  i   ,   s  i   )    =   c   (   t  i   ,   s  i   )    =   d  i            subscript  l  i     subscript  t  i    subscript  s  i       c    subscript  t  i    subscript  s  i           subscript  d  i      l_{i}(t_{i},s_{i})=c(t_{i},s_{i})=d_{i}   for all commodities   i   i   i   . Let      l  i    (  u  ,  v  )    =  0         subscript  l  i    u  v    0    l_{i}(u,v)=0   for all other edges.  Minimum cost multi-commodity flow problem - As above, but minimize the cost.  Minimum cost flow problem - As above, with 1 commodity.  Maximum flow problem - Set all costs to 0, and add an edge from the sink   t   t   t   to the source   s   s   s   with     l   (  t  ,  s  )    =  0        l   t  s    0    l(t,s)=0   ,     u   (  t  ,  s  )    =         u   t  s    absent    u(t,s)=   ∞ and     c   (  t  ,  s  )    =   -  1         c   t  s      1     c(t,s)=-1   .  Minimum cost maximum flow problem - First find the maximum flow amount   m   m   m   . Then solve with     l   (  t  ,  s  )    =   u   (  t  ,  s  )    =  m          l   t  s      u   t  s         m     l(t,s)=u(t,s)=m   and     c   (  t  ,  s  )    =  0        c   t  s    0    c(t,s)=0   .  Single-source shortest path - Let     l   (  u  ,  v  )    =  0        l   u  v    0    l(u,v)=0   and     c   (  u  ,  v  )    =  1        c   u  v    1    c(u,v)=1   for all edges in the graph, and add an edge    (  t  ,  s  )     t  s    (t,s)   with     l   (  t  ,  s  )    =   c   (  t  ,  s  )    =  1          l   t  s      c   t  s         1     l(t,s)=c(t,s)=1   and     a   (  t  ,  s  )    =  0        a   t  s    0    a(t,s)=0   .  All-pairs shortest path - Let all capacities be unlimited, and find a flow of 1 for     v   (   v  -  1   )    /  2        v    v  1    2    v(v-1)/2   commodities, one for each pair of nodes.   References    "  Category:Network flow  Category:Mathematical problems     ↩  ↩     