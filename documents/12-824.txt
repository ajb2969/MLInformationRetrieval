   Focus recovery based on the linear canonical transform      Focus recovery based on the linear canonical transform   Focus recovery from a defocused image is an ill-posed problem since it loses the component of high frequency. Most of the methods for focus recovery are based on depth estimation theory. 1 The Linear canonical transform (LCT) gives a scalable kernel to fit many well-known optical effects. Using LCTs to approximate an optical system for imaging and inverting this system, theoretically permits recovery of a defocused image.  Depth of field and perceptual focus  (Figure)  Effective DOF interval.|frame|The object is put at the different positions whereas causes to effective focus.   In photography, depth of field (DOF) means an effective focal length. It is usually used for stressing an object and deemphasizing the background (and/or the foreground). The important measure related to DOF is the lens aperture . Decreasing the diameter of aperture increases focus and lowers resolution and vice versa.  The Huygens‚ÄìFresnel principle and DOF  The Huygens‚ÄìFresnel principle describes diffraction of wave propagation between two fields. It belongs to Fourier optics rather than geometric optics .The disturbance of diffraction depends on two circumstance parameters, the size of aperture and the interfield distance.  Consider a source field and a destination field, field 1 and field 0, respectively. P 1 (x 1 ,y 1 ) is the position in the source field, P 0 (x 0 ,y 0 ) is the position in the destination field. The Huygens‚ÄìFresnel principle gives the diffraction formula for two fields U(x 0 ,y 0 ), U(x 1 ,y 1 ) as following:       ùïå   (   x  0   ,   y  0   )    =    1   j  Œª     ‚à´   ‚à´   ùïå   (   x  1   ,   y  1   )     e   j  k   r  01      r  01     cos   Œ∏  d   x  1   d   y  1               ùïå    subscript  x  0    subscript  y  0         1    j  Œª          ùïå    subscript  x  1    subscript  y  1       superscript  e    j  k   subscript  r  01      subscript  r  01        Œ∏  d   subscript  x  1   d   subscript  y  1           \mathbb{U}(x_{0},y_{0})=\frac{1}{j\lambda}\int\!\int\mathbb{U}(x_{1},y_{1})%
 \frac{e^{jkr_{01}}}{r_{01}}\cos\theta dx_{1}dy_{1}     where Œ∏ denotes the angle between    r  01     subscript  r  01    r_{01}   and   z   z   z   . Replace cosŒ∏ by     r  01   z       subscript  r  01   z    \frac{r_{01}}{z}   and    r  01     subscript  r  01    r_{01}   by      [     (    x  0   -   x  1    )   2   +    (    y  0   -   y  1    )   2   +   z  2    ]    1  /  2      superscript   delimited-[]     superscript     subscript  x  0    subscript  x  1    2    superscript     subscript  y  0    subscript  y  1    2    superscript  z  2       1  2     [(x_{0}-x_{1})^{2}+(y_{0}-y_{1})^{2}+z^{2}]^{1/2}     we get       ùïå   (   x  0   ,   y  0   )    =    1   j  Œª  z     ‚à´   ‚à´   ùïå   (   x  1   ,   y  1   )     exp   (   j  k  z    [   1  +    (     x  0   -   x  1    z   )   2   +    (     y  0   -   y  1    z   )   2    ]    1  /  2     )     1  +    (     x  0   -   x  1    z   )   2   +    (     y  0   -   y  1    z   )   2     d   x  1   d   y  1             ùïå    subscript  x  0    subscript  y  0         1    j  Œª  z          ùïå    subscript  x  1    subscript  y  1          j  k  z   superscript   delimited-[]    1   superscript       subscript  x  0    subscript  x  1    z   2    superscript       subscript  y  0    subscript  y  1    z   2       1  2        1   superscript       subscript  x  0    subscript  x  1    z   2    superscript       subscript  y  0    subscript  y  1    z   2     d   subscript  x  1   d   subscript  y  1         \mathbb{U}(x_{0},y_{0})=\frac{1}{j\lambda z}\int\!\int\mathbb{U}(x_{1},y_{1})%
 \frac{\exp(jkz[1+(\frac{x_{0}-x_{1}}{z})^{2}+(\frac{y_{0}-y_{1}}{z})^{2}]^{1/2%
 })}{1+(\frac{x_{0}-x_{1}}{z})^{2}+(\frac{y_{0}-y_{1}}{z})^{2}}dx_{1}dy_{1}     The further distance z or the smaller aperture (x 1 ,y 1 ) causes a greater diffraction. A larger DOF can lead to a more effective focused wave distribution. This seems to be a conflict. Here are the notations:    Diffraction   In a real imaging environment, the depths of objects comparing to the aperture are usually not enough to lead to serious diffraction.  However, a long enough depth of the object can truly blurs the image.   Effective Focus   Small aperture, small blurring radius, few wave information.  Loses details in comparing to a large aperture.     In conclusion, diffraction explains a micro behavior whereas DOF shows a macro behavior. Both of them are related to aperture size.  Linear canonical transform  As the meaning of "canonical", the linear canonical transform (LCT) is a scalable transform that connects to lots of important kernels such as the Fresnel transform, Fraunhofer transform and the fractional Fourier transform . It can be easily controlled by its four parameters, a , b , c , d (3 degrees of freedom). The definition:        L  M    (   f   (  u  )    )    =   ‚à´    L  M    (  u  ,   u  ‚Ä≤   )   f   (   u  ‚Ä≤   )   d   u  ‚Ä≤            subscript  L  M     f  u         subscript  L  M    u   superscript  u  normal-‚Ä≤    f   superscript  u  normal-‚Ä≤   d   superscript  u  normal-‚Ä≤       L_{M}(f(u))=\int L_{M}(u,u^{\prime})f(u^{\prime})du^{\prime}     where        L  M    (  u  ,   u  ‚Ä≤   )    =   {          1  b      e   -    j  œÄ   /  4      e   [     j  œÄ   (    d  b    u  2    )    -   2   1  b   u   u  ‚Ä≤     +    a  b    u   ‚Ä≤  2      ]     ,       if  b   ‚â†  0          d    e    j  2   c  d   u  2     Œ¥   (    u  ‚Ä≤   -   d  u    )    ,       if  b   =  0              subscript  L  M    u   superscript  u  normal-‚Ä≤      cases        1  b     superscript  e        j  œÄ   4      superscript  e   delimited-[]        j  œÄ      d  b    superscript  u  2       2    1  b   u   superscript  u  normal-‚Ä≤         a  b    superscript  u   normal-‚Ä≤  2             if  b   0       d    superscript  e      j  2   c  d   superscript  u  2     Œ¥     superscript  u  normal-‚Ä≤     d  u         if  b   0      L_{M}(u,u^{\prime})=\begin{cases}\sqrt{\frac{1}{b}}e^{-j\pi/4}e^{[j\pi(\frac{d%
 }{b}u^{2})-2\frac{1}{b}uu^{\prime}+\frac{a}{b}u^{\prime 2}]},&\mbox{if }b\neq 0%
 \\
 \sqrt{d}e^{\frac{j}{2}cdu^{2}}\delta(u^{\prime}-du),&\mbox{if }b=0\end{cases}     Consider a general imaging system with object distance z 0 , focal length of the thin lens  f and an imaging distance z 1 . The effect of the propagation in freespace acts as nearly a chirp  convolution , that is, the formula of diffraction. Besides, the effect of the propagation in thin lens acts as a chirp multiplication. The parameters are all simplified as paraxial approximations while meeting the freespace propagation. It does not consider aperture size.  From the properties of the LCT, it is possible to obtain those 4 parameters for this optical system as:      [      1  -     z  1   f          Œª   z  0    -     Œª   z  0    z  1    f     +   Œª   z  1          -    1   Œª  f         1  -     z  0   f        ]        1     subscript  z  1   f          Œª   subscript  z  0        Œª   subscript  z  0    subscript  z  1    f      Œª   subscript  z  1           1    Œª  f       1     subscript  z  0   f       \begin{bmatrix}1-\frac{z_{1}}{f}&\lambda z_{0}-\frac{\lambda z_{0}z_{1}}{f}+%
 \lambda z_{1}\\
 -\frac{1}{\lambda f}&1-\frac{z_{0}}{f}\end{bmatrix}     Once the values of z 1 , z 0 and f are known, the LCT can simulate any optical system.  Notes  References   M. Haldun Ozaktas, Zeev Zalevsky and M. Alper Kutay, The fractional Fourier transform with applications in optics and signal processing , JOHN WILEY & SONS, LTD, New York, 2001.  M. Sorel and J. Flusser, "Space-variant restoration of images degraded by camera motion blur", IEEE Transactions on Image Processing , vol. 17, pp.¬†105‚Äì116, Feb. 2008.  Jos. Schneider Optische Werke GmbH, "The way a zoom lens works" , Feb. 2008. [Accessed: Mar. 9 2008].  B. Barshan, M. Alper Kutay and H. M. Ozaktas, "Optimal filtering with linear ca-nonical transformations", Optics Communications , vol. 135, pp.¬†32‚Äì36, Feb. 1997.   "  Category:Optics  Category:Image processing     Most depth recovery methods are simply based on camera focus and defocus. Among those approaches, they usually fall in a depth discontinuity problem. ‚Ü©     