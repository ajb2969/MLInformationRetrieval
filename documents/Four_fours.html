<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1238">Four fours</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Four fours</h1>
<hr/>

<p><strong>Four fours</strong> is a <a href="mathematical_puzzle" title="wikilink">mathematical puzzle</a>. The goal of four fours is to find the simplest <a href="mathematical_expression" title="wikilink">mathematical expression</a> for every <a href="Natural_number" title="wikilink">whole number</a> from 0 to some maximum, using only common mathematical symbols and the digit <a href="4_(number)" title="wikilink">four</a> (no other digit is allowed). Most versions of four fours require that each expression have exactly four fours, but some variations require that each expression have the minimum number of fours.</p>
<h2 id="rules">Rules</h2>

<p>There are many variations of four fours; their primary difference is which mathematical symbols are allowed. Essentially all variations at least allow <a class="uri" href="addition" title="wikilink">addition</a> ("+"), <a class="uri" href="subtraction" title="wikilink">subtraction</a> ("−"), <a class="uri" href="multiplication" title="wikilink">multiplication</a> ("×"), <a href="division_(mathematics)" title="wikilink">division</a> ("÷"), and <a href="bracket" title="wikilink">parentheses</a>, as well as concatenation (e.g., "44" is allowed). Most also allow the <a class="uri" href="factorial" title="wikilink">factorial</a> ("!"), <a class="uri" href="exponentiation" title="wikilink">exponentiation</a> (e.g. "44<sup>4</sup>"), the decimal point ("."), the <a href="square_function" title="wikilink">square function</a>("sqr"), the cube function, the <a href="square_root" title="wikilink">square root</a> ("√") operation, and the <a href="cube_root" title="wikilink">cube root</a> operation, although sometimes square root is specifically excluded on the grounds that there is an implied "2" for the second root. Other operations allowed by some variations include <a class="uri" href="subfactorial" title="wikilink">subfactorial</a>, ("!" before the number: !4 equals 9), overline (an infinitely repeated digit), an arbitrary root power, the <a href="gamma_function" title="wikilink">gamma function</a> (Γ(), where Γ(<em>x</em>) = (<em>x</em> − 1)!), and percent ("%"). Thus 4/4% = 100 and Γ(4)=6. A common use of the overline in this problem is for this value:</p>

<p>

<math display="block" id="Four_fours:0">
 <semantics>
  <mrow>
   <mo>.</mo>
   <mover accent="true">
    <mn>4</mn>
    <mo>¯</mo>
   </mover>
   <mo>=</mo>
   <mn>.4444...</mn>
   <mo>=</mo>
   <mn>4</mn>
   <mo>/</mo>
   <mn>9</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <ci>normal-.</ci>
    <apply>
     <ci>normal-¯</ci>
     <cn type="integer">4</cn>
    </apply>
    <eq></eq>
    <cn type="float">.4444...</cn>
    <eq></eq>
    <cn type="integer">4</cn>
    <divide></divide>
    <cn type="integer">9</cn>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   .\overline{4}=.4444...=4/9
  </annotation>
 </semantics>
</math>

</p>

<p>Typically the "<a href="Logarithm" title="wikilink">log</a>" operators are not allowed, since there is a way to trivially create any number using them. Paul Bourke credits Ben Rudiak-Gould with this description of how natural logarithms (ln()) can be used to represent any positive integer <em>n</em> as:</p>

<p>

<math display="block" id="Four_fours:1">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>=</mo>
   <mrow>
    <mo>-</mo>
    <mrow>
     <msqrt>
      <mn>4</mn>
     </msqrt>
     <mfrac>
      <mrow>
       <mi>ln</mi>
       <mrow>
        <mo>[</mo>
        <mrow>
         <mrow>
          <mo>(</mo>
          <mrow>
           <mi>ln</mi>
           <munder>
            <munder accentunder="true">
             <msqrt>
              <msqrt>
               <mrow>
                <mi mathvariant="normal">⋯</mi>
                <msqrt>
                 <mn>4</mn>
                </msqrt>
               </mrow>
              </msqrt>
             </msqrt>
             <mo movablelimits="false">⏟</mo>
            </munder>
            <mi>n</mi>
           </munder>
          </mrow>
          <mo>)</mo>
         </mrow>
         <mo>/</mo>
         <mrow>
          <mi>ln</mi>
          <mn>4</mn>
         </mrow>
        </mrow>
        <mo>]</mo>
       </mrow>
      </mrow>
      <mrow>
       <mi>ln</mi>
       <mn>4</mn>
      </mrow>
     </mfrac>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>n</ci>
    <apply>
     <minus></minus>
     <apply>
      <times></times>
      <apply>
       <root></root>
       <cn type="integer">4</cn>
      </apply>
      <apply>
       <divide></divide>
       <apply>
        <ln></ln>
        <apply>
         <divide></divide>
         <apply>
          <ln></ln>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <apply>
            <ci>normal-⏟</ci>
            <apply>
             <root></root>
             <apply>
              <root></root>
              <apply>
               <times></times>
               <ci>normal-⋯</ci>
               <apply>
                <root></root>
                <cn type="integer">4</cn>
               </apply>
              </apply>
             </apply>
            </apply>
           </apply>
           <ci>n</ci>
          </apply>
         </apply>
         <apply>
          <ln></ln>
          <cn type="integer">4</cn>
         </apply>
        </apply>
       </apply>
       <apply>
        <ln></ln>
        <cn type="integer">4</cn>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n=-\sqrt{4}\frac{\ln\left[\left(\ln\underbrace{\sqrt{\sqrt{\cdots\sqrt{4}}}}_{%
n}\right)/\ln 4\right]}{\ln{4}}
  </annotation>
 </semantics>
</math>

</p>

<p>Additional variants (usually no longer called "four fours") replace the set of digits ("4, 4, 4, 4") with some other set of digits, say of the birthyear of someone. For example, a variant using "1975" would require each expression to use one 1, one 9, one 7, and one 5.</p>

<p>You can try playing a basic version of this game online in this implementation <a href="http://www.p2sis.com/educationgames/four-fours/maths-four-fours-game.html">Online Four Fours Game 0 to 9</a></p>
<h2 id="solutions">Solutions</h2>

<p>Here is a set of four fours solutions for the numbers 0 through 20, using typical rules. Some alternate solutions are listed here, although there are actually many more correct solutions. The entries in blue are those that use four integers 4 (rather than four digits 4) and the <a href="Elementary_arithmetic" title="wikilink">basic arithmetic operations</a>. Numbers without blue entries have no solution under these constraints. Additionally, solutions that repeat operators are marked in italics.</p>

<p><code> 0  </code><code> </code><code> </code><code>     44 − 44</code><br/>
<code> 1  </code><code> </code><code> </code><code>     44 ÷ 44</code><br/>
<code> 2  </code><code> </code><code> </code><code>    (44 + 4) ÷ 4!</code><br/>
<code> 3  </code><code> </code><br/>
<code> 4  </code><code> </code><code> </code><code>    </code><em><code>−44</code> <code>+</code> <code>4!</code> <code>+</code> <code>4!</code></em><br/>
<code> 5  </code><code> </code><code> </code><code>    (44 − 4!)÷ 4</code><br/>
<code> 6  </code><code>  </code><em></em><code>  </code><code>    4.4 + 4  ×.4</code><br/>
<code> 7  </code><code> </code><code> </code><code>     44 ÷ 4  − 4</code><br/>
<code> 8  </code><code> </code><code> </code><code>    4.4 −.4  + 4</code><br/>
<code> 9  </code><code>  </code><em></em><code>  </code><code>     44 ÷ 4  −√4</code><br/>
<code>10  </code><code> </code><code> </code><code>    (44 − 4) ÷ 4</code><br/>
<code>11  </code><code>  4 squared - [(4 squared + 4) divided by 4]  </code><code> √4 × (4! - √4) ÷ 4</code></p>

<p><code>12  </code><code> </code><code> </code><code>    (44 + 4) ÷ 4</code><br/>
<code>13  </code><code> (4 −.4)÷.4 + 4  </code><code>     44 ÷ 4  +√4</code><br/>
<code>14  </code><code>  </code><em><code>4</code> <code>×(4</code> <code>−.4)−.4</code></em><br/>
<code>15  </code><code> </code><code> </code><code>     44 ÷ 4  + 4</code><br/>
<code>16  </code><code> </code><code> </code><code>    (44 − 4) ×.4</code><br/>
<code>17  </code><code> </code><code> </code><code>    (44 + 4!)÷ 4</code><br/>
<code>18  </code><code>  4 × 4 + 4 −√4  </code><code>    (44 ÷√4) − 4</code><br/>
<code>19  </code><code>  </code><em><code>4!−</code> <code>4</code> <code>−(4</code> <code>÷</code> <code>4)</code></em><code> </code><code>     (4 + 4 −.4) ÷.4</code><br/>
<code>20  </code><code> </code><code> </code><code>    (44 − 4) ÷√4</code><br/>
<code>21  </code><code>  (4.4 + 4) / .4 </code><code>    4 × 4 + 4 + (4 ÷ 4)</code><br/>
<code>22  </code><code>  Γ(4)+((4*4)/4)</code></p>

<p>There are also many other ways to find the answer for all of these.</p>

<p>Note that numbers with values less than one are not usually written with a leading zero. For example, "0.4" is usually written as ".4". This is because "0" is a digit, and in this puzzle only the digit "4" can be used.</p>

<p>A given number will generally have few possible solutions; any solution that meets the rules is acceptable. Some variations prefer the "fewest" number of operations, or prefer some operations to others. Others simply prefer "interesting" solutions, i.e., a surprising way to reach the goal.</p>

<p>Certain numbers, such as 113, are particularly difficult to solve under typical rules. For 113, Wheeler suggests 

<math display="inline" id="Four_fours:2">
 <semantics>
  <mrow>
   <mrow>
    <mi mathvariant="normal">Γ</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mi mathvariant="normal">Γ</mi>
      <mrow>
       <mo stretchy="false">(</mo>
       <mn>4</mn>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>-</mo>
   <mfrac>
    <mrow>
     <mrow>
      <mn>4</mn>
      <mo lspace="0pt" rspace="3.5pt">!</mo>
     </mrow>
     <mo>+</mo>
     <mn>4</mn>
    </mrow>
    <mn>4</mn>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <minus></minus>
    <apply>
     <times></times>
     <ci>normal-Γ</ci>
     <apply>
      <times></times>
      <ci>normal-Γ</ci>
      <cn type="integer">4</cn>
     </apply>
    </apply>
    <apply>
     <divide></divide>
     <apply>
      <plus></plus>
      <apply>
       <factorial></factorial>
       <cn type="integer">4</cn>
      </apply>
      <cn type="integer">4</cn>
     </apply>
     <cn type="integer">4</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Gamma(\Gamma(4))-\frac{4!+4}{4}
  </annotation>
 </semantics>
</math>

.</p>

<p>The use of <a class="uri" href="percent" title="wikilink">percent</a> ("%") admits solutions for a much greater proportion of numbers; for example, 113 = (√4 + (√4 + 4!)%) ÷ (√4)%.</p>

<p>The first printed occurrence of this activity is in "Mathematical Recreations and Essays" by <a href="W._W._Rouse_Ball" title="wikilink">W. W. Rouse Ball</a> published in 1892. In this book it is described as a "traditional recreation".</p>

<p>In his discussion of the problem Ball calls it "An arithmetical amusement, said to have been first propounded in 1881, ...." . This date aligns with the appearance of the problem in Knowledge, An Illustrated Magazine of Science, (Dec 30, 1881) edited by <a href="Richard_A._Proctor" title="wikilink">Richard A. Proctor</a>, the English astronomer who is remembered for one of the earliest maps of Mars. <a href="http://pballew.net/four-fours.jpg">1</a></p>
<h2 id="algorithmics-of-the-problem">Algorithmics of the problem</h2>

<p>This problem and its generalizations (like the five fives and the six sixes problem, both shown below) may be solved by a simple algorithm. The basic ingredients are <a href="hash_table" title="wikilink">hash tables</a> that map rationals to strings. In these tables, the keys are the numbers being represented by some admissible combination of operators and the chosen digit <em>d</em>, e.g. four, and the values are strings that contain the actual formula. There is one table for each number <em>n</em> of occurrences of <em>d</em>. For example, when <em>d=4</em>, the hash table for two occurrences of <em>d</em> would contain the key-value pair <em>8</em> and <strong>4+4</strong>, and the one for three occurrences, the key-value pair <em>2</em> and <strong>(4+4)/4</strong> (strings shown in bold).</p>

<p>The task is then reduced to recursively computing these hash tables for increasing <em>n</em>, starting from <em>n=1</em> and continuing up to e.g. <em>n=4.</em> The tables for <em>n=1</em> and <em>n=2</em> are special, because they contain primitive entries that are not the combination of other, smaller formulas, and hence they must be initialized properly, like so (for <em>n=1</em>)</p>

<p><code>       T[4]    := "4";</code><br/>
<code>       T[4/10] := ".4";</code><br/>
<code>       T[4/9]  := ".4...";</code></p>

<p>and</p>

<p><code>        T[44] := "44";.</code></p>

<p>(for <em>n=2</em>). Now there are two ways in which new entries may arise, either as a combination of existing ones through a binary operator, or by applying the factorial or square root operators (which does not use additional instances of <em>d</em>). The first case is treated by iterating over all pairs of subexpressions that use a total of <em>n</em> instances of <em>d</em>. For example, when <em>n=4</em>, we would check pairs <em>(a,b)</em> with <em>a</em> containing one instance of <em>d</em> and <em>b</em> three, and with <em>a</em> containing two instances of <em>d</em> and <em>b</em> two as well. We would then enter <em>a+b, a-b, b-a, a*b, a/b, b/a)</em> into the hash table, including parenthesis, for <em>n=4</em>. Here the sets <em>A</em> and <em>B</em> that contain <em>a</em> and <em>b</em> are calculated recursively, with <em>n=1</em> and <em>n=2</em> being the base case. <a class="uri" href="Memoization" title="wikilink">Memoization</a> is used to ensure that every hash table is only computed once.</p>

<p>The second case (factorials and roots) is treated with the help of an auxiliary function, which is invoked every time a value <em>v</em> is recorded. This function computes nested factorials and roots of <em>v</em> up to some maximum depth, restricted to rationals.</p>

<p>The last phase of the algorithm consists in iterating over the keys of the table for the desired value of <em>n</em> and extracting and sorting those keys that are integers. This algorithm was used to calculate the five fives and six sixes examples shown below. The more compact formula (in the sense of number of characters in the corresponding value) was chosen every time a key occurred more than once.</p>
<h2 id="excerpt-from-the-solution-to-the-five-fives-problem">Excerpt from the solution to the five fives problem</h2>

<p><code>139 = (((5+(5/5))!/5)-5)</code><br/>
<code>140 = (.5*(5+(5*55)))</code><br/>
<code>141 = ((5)!+((5+(5+.5))/.5))</code><br/>
<code>142 = ((5)!+((55/.5)/5))</code><br/>
<code>143 = ((((5+(5/5)))!-5)/5)</code><br/>
<code>144 = ((((55/5)-5))!/5)</code><br/>
<code>145 = ((5*(5+(5*5)))-5)</code><br/>
<code>146 = ((5)!+((5/5)+(5*5)))</code><br/>
<code>147 = ((5)!+((.5*55)-.5))</code><br/>
<code>148 = ((5)!+(.5+(.5*55)))</code><br/>
<code>149 = (5+(((5+(5/5)))!+5))</code></p>
<h2 id="excerpt-from-the-solution-to-the-six-sixes-problem">Excerpt from the solution to the six sixes problem</h2>

<p>In the table below, the notation .6... represents the value 6/9 or 2/3 (<a href="recurring_decimal" title="wikilink">recurring decimal</a> 6).</p>

<p><code>241 = ((.6+((6+6)*(6+6)))/.6)</code><br/>
<code>242 = ((6*(6+(6*6)))-(6/.6))</code><br/>
<code>243 = (6+((6*(.6*66))-.6))</code><br/>
<code>244 = (.6...*(6+(6*(66-6))))</code><br/>
<code>245 = ((((6)!+((6)!+66))/6)-6)</code><br/>
<code>246 = (66+(6*((6*6)-6)))</code><br/>
<code>247 = (66+((6+((6)!/.6...))/6))</code><br/>
<code>248 = (6*(6+(6*(6-(.6.../6)))))</code><br/>
<code>249 = (.6+(6*(6+((6*6)-.6))))</code><br/>
<code>250 = (((6*(6*6))-66)/.6)</code><br/>
<code>251 = ((6*(6+(6*6)))-(6/6))</code></p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Krypto_(game)" title="wikilink">Krypto (game)</a></li>
</ul>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://astronomy.swin.edu.au/~pbourke/fun/4444">Bourke, Paul. <em>Four Fours Problem</em>.</a></li>
<li><a href="http://mathforum.org/ruth/four4s.puzzle.html">Carver, Ruth. <em>Four Fours Puzzle</em> at MathForum.org</a></li>
<li><a href="http://www.eyegate.com/showgal.php?id=7">4444 (Four Fours) Eyegate Gallery</a></li>
<li><a href="https://github.com/saibaba/four4s">Generating solutions from 1 to 50 in python and other interesting notes</a></li>
<li><a href="http://www.p2sis.com/educationgames/four-fours/maths-four-fours-game.html">Online Implementation of the Four Fours Game</a></li>
</ul>

<p>"</p>

<p><a href="Category:Mathematical_games" title="wikilink">Category:Mathematical games</a></p>
</body>
</html>
