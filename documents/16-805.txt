   Moduli stack of principal bundles      Moduli stack of principal bundles   In algebraic geometry, given a smooth  projective curve  X over a finite field    ğ…  q     subscript  ğ…  q    \mathbf{F}_{q}   and a smooth affine  group scheme  G over it, the moduli stack of principal bundles over X , denoted by     Bun  G    (  X  )       subscript  Bun  G   X    \operatorname{Bun}_{G}(X)   , is an algebraic stack given by: 1 for any    ğ…  q     subscript  ğ…  q    \mathbf{F}_{q}   -algebra R ,         Bun  G    (  X  )     (  R  )    =          subscript  Bun  G   X   R   absent    \operatorname{Bun}_{G}(X)(R)=   the category of principal G -bundles over the relative curve    X   Ã—   ğ…  q     Spec  R       subscript    subscript  ğ…  q    X   Spec  R     X\times_{\mathbf{F}_{q}}\operatorname{Spec}R   . In particular, the category of    ğ…  q     subscript  ğ…  q    \mathbf{F}_{q}   -points of     Bun  G    (  X  )       subscript  Bun  G   X    \operatorname{Bun}_{G}(X)   , that is,      Bun  G    (  X  )     (   ğ…  q   )        subscript  Bun  G   X    subscript  ğ…  q     \operatorname{Bun}_{G}(X)(\mathbf{F}_{q})   , is the category of G -bundles over X .  Similarly,     Bun  G    (  X  )       subscript  Bun  G   X    \operatorname{Bun}_{G}(X)   can also be defined when the curve X is over the field of complex numbers. Roughly, in the complex case, one can define     Bun  G    (  X  )       subscript  Bun  G   X    \operatorname{Bun}_{G}(X)   as the quotient stack of the space of holomorphic connections on X by the gauge group . Replacing the quotient stack (which is not a topological space) by a homotopy quotient (which is a topological space) gives the homotopy type of     Bun  G    (  X  )       subscript  Bun  G   X    \operatorname{Bun}_{G}(X)   .  In the finite field case, it is not common to define the homotopy type of     Bun  G    (  X  )       subscript  Bun  G   X    \operatorname{Bun}_{G}(X)   . But one can still define a ( smooth ) cohomology and homology of     Bun  G    (  X  )       subscript  Bun  G   X    \operatorname{Bun}_{G}(X)    .  Basic properties  It is known that     Bun  G    (  X  )       subscript  Bun  G   X    \operatorname{Bun}_{G}(X)   is a smooth stack of dimension     (    g   (  X  )    -  1   )    dim  G           g  X   1    dimension  G     (g(X)-1)\dim G   where    g   (  X  )       g  X    g(X)   is the genus of X . It is not of finite type but of locally of finite type; one thus usually uses a stratification by open substacks of finite type (cf. the Harderâ€“Narasimhan stratification .) If G is a split reductive group, then the set of connected components     Ï€  0    (    Bun  G    (  X  )    )        subscript  Ï€  0     subscript  Bun  G   X     \pi_{0}(\operatorname{Bun}_{G}(X))   is in a natural bijection with the fundamental group     Ï€  1    (  G  )        subscript  Ï€  1   G    \pi_{1}(G)   . 2  The Atiyahâ€“Bott formula  Behrend's trace formula  This is a (conjectural) version of the Lefschetz trace formula for     Bun  G    (  X  )       subscript  Bun  G   X    \operatorname{Bun}_{G}(X)   when X is over a finite field, introduced by Behrend in 1993. 3 It states: 4 if G is a smooth affine group scheme with semisimple connected generic fiber , then       #     Bun  G    (  X  )     (   ğ…  q   )     =    q   dim    Bun  G    (  X  )       tr   (   Ï•   -  1    |    H  *    (    Bun  G    (  X  )    ;   â„¤  l   )    )           normal-#     subscript  Bun  G   X    subscript  ğ…  q        superscript  q   dimension    subscript  Bun  G   X      tr   superscript  Ï•    1       superscript  H       subscript  Bun  G   X    subscript  â„¤  l         \#\operatorname{Bun}_{G}(X)(\mathbf{F}_{q})=q^{\dim\operatorname{Bun}_{G}(X)}%
 \operatorname{tr}(\phi^{-1}|H^{*}(\operatorname{Bun}_{G}(X);\mathbb{Z}_{l}))   where (see also Behrend's trace formula for the details)   l is a prime number that is not p and the ring    â„¤  l     subscript  â„¤  l    \mathbb{Z}_{l}   of l-adic integers is viewed as a subring of   â„‚   â„‚   \mathbb{C}   .     Ï•   Ï•   \phi   is the geometric Frobenius .       #     Bun  G    (  X  )     (   ğ…  q   )     =    âˆ‘  P    1   #   Aut   (  P  )             normal-#     subscript  Bun  G   X    subscript  ğ…  q       subscript   P     1    normal-#   Aut  P        \#\operatorname{Bun}_{G}(X)(\mathbf{F}_{q})=\sum_{P}{1\over\#\operatorname{Aut%
 }(P)}   , the sum running over all isomorphism classes of G-bundles on X and convergent.       tr   (   Ï•   -  1    |   V  *   )    =    âˆ‘   i  =  0   âˆ      (   -  1   )   i    tr   (   Ï•   -  1    |   V  i   )           tr   superscript  Ï•    1     subscript  V       superscript   subscript     i  0         superscript    1   i    tr   superscript  Ï•    1     subscript  V  i        \operatorname{tr}(\phi^{-1}|V_{*})=\sum_{i=0}^{\infty}(-1)^{i}\operatorname{tr%
 }(\phi^{-1}|V_{i})   for a graded vector space     V  *     subscript  V     V_{*}   , provided the series on the right absolutely converges.   A priori, neither left nor right side in the formula converges. Thus, the formula states that the two sides converge to finite numbers and that those numbers coincide.  Notes  References   J. Heinloth, Lectures on the moduli stack of vector bundles on a curve , 2009 preliminary version  J. Heinloth, A.H.W. Schmitt, The Cohomology Ring of Moduli Stacks of Principal Bundles over Curves, 2010 preprint, available at http://www.uni-essen.de/~hm0002/ .  Gaitsgory, D; Lurie, J.; Weil's Conjecture for Function Fields. 2014, 1   Further reading   http://mathoverflow.net/questions/87171/tamagawa-number-for-functional-fields  C. Sorger, Lectures on moduli of principal G-bundles over algebraic curves   See also   Geometric Langlands conjectures  Ran space   "  Category:Algebraic geometry     http://www.math.harvard.edu/~lurie/283notes/Lecture2-FunctionFields.pdf â†©  â†©  http://www.math.ubc.ca/~behrend/thesis.pdf â†©  â†©     