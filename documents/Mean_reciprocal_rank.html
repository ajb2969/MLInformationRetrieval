<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1388">Mean reciprocal rank</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Mean reciprocal rank</h1>
<hr/>

<p><strong>Mean reciprocal rank</strong> is a <a class="uri" href="statistic" title="wikilink">statistic</a> measure for evaluating any process that produces a list of possible responses to a sample of queries, ordered by probability of correctness. The reciprocal rank of a query response is the <a href="multiplicative_inverse" title="wikilink">multiplicative inverse</a> of the rank of the first correct answer. The mean reciprocal rank is the average of the reciprocal ranks of results for a sample of queries Q:<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>

<p>

<math display="block" id="Mean_reciprocal_rank:0">
 <semantics>
  <mrow>
   <mrow>
    <mtext>MRR</mtext>
    <mo>=</mo>
    <mrow>
     <mfrac>
      <mn>1</mn>
      <mrow>
       <mo stretchy="false">|</mo>
       <mi>Q</mi>
       <mo stretchy="false">|</mo>
      </mrow>
     </mfrac>
     <mrow>
      <munderover>
       <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
       <mrow>
        <mi>i</mi>
        <mo>=</mo>
        <mn>1</mn>
       </mrow>
       <mrow>
        <mo stretchy="false">|</mo>
        <mi>Q</mi>
        <mo stretchy="false">|</mo>
       </mrow>
      </munderover>
      <mfrac>
       <mn>1</mn>
       <msub>
        <mtext>rank</mtext>
        <mi>i</mi>
       </msub>
      </mfrac>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <mtext>MRR</mtext>
    <apply>
     <times></times>
     <apply>
      <divide></divide>
      <cn type="integer">1</cn>
      <apply>
       <abs></abs>
       <ci>Q</ci>
      </apply>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>i</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <apply>
        <abs></abs>
        <ci>Q</ci>
       </apply>
      </apply>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <mtext>rank</mtext>
        <ci>i</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \text{MRR}=\frac{1}{|Q|}\sum_{i=1}^{|Q|}\frac{1}{\text{rank}_{i}}.\!
  </annotation>
 </semantics>
</math>

</p>

<p>The reciprocal value of the mean reciprocal rank corresponds to the <a href="harmonic_mean" title="wikilink">harmonic mean</a> of the ranks.</p>
<h2 id="example">Example</h2>

<p>For example, suppose we have the following three sample queries for a system that tries to translate English words to their plurals. In each case, the system makes three guesses, with the first one being the one it thinks is most likely correct:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">
<p>Query</p></th>
<th style="text-align: left;">
<p>Results</p></th>
<th style="text-align: left;">
<p>Correct response</p></th>
<th style="text-align: left;">
<p>Rank</p></th>
<th style="text-align: left;">
<p>Reciprocal rank</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p>cat</p></td>
<td style="text-align: left;">
<p>catten, cati, <strong>cats</strong></p></td>
<td style="text-align: left;">
<p>cats</p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>1/3</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>torus</p></td>
<td style="text-align: left;">
<p>torii, <strong>tori</strong>, toruses</p></td>
<td style="text-align: left;">
<p>tori</p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>1/2</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>virus</p></td>
<td style="text-align: left;">
<p><strong>viruses</strong>, virii, viri</p></td>
<td style="text-align: left;">
<p>viruses</p></td>
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>1</p></td>
</tr>
</tbody>
</table>

<p>Given those three samples, we could calculate the mean reciprocal rank as (1/3 + 1/2 + 1)/3 = 11/18 or about 0.61.</p>

<p>This basic definition does not specify what to do if...</p>
<ol>
<li>none of the proposed results are correct (use reciprocal rank 0), or if</li>
<li>there are multiple correct answers in the list. Consider using <a href="Information_retrieval#Mean_average_precision" title="wikilink">mean average precision (MAP)</a>.</li>
</ol>

<p>See also <a href="Information_retrieval" title="wikilink">Information retrieval</a> and <a href="Question_answering" title="wikilink">Question answering</a>.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></p>
<h2 id="references">References</h2>

<p>"</p>

<p><a href="Category:Summary_statistics" title="wikilink">Category:Summary statistics</a> <a href="Category:Information_retrieval_evaluation" title="wikilink">Category:Information retrieval evaluation</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2"><a href="#fnref2">↩</a></li>
</ol>
</section>
</body>
</html>
