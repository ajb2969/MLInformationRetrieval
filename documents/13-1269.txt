   Histogram matching      Histogram matching    Histogram matching is a method in image processing of color adjustment of two images using the image  histograms .  It is possible to use histogram matching to balance detector responses as a relative detector calibration technique. It can be used to normalize two images, when the images were acquired at the same local illumination (such as shadows) over the same location, but by different sensors, atmospheric conditions or global illumination.  The algorithm  Given two images, the reference and the adjusted images, we compute their histograms. Following, we calculate the cumulative distribution functions of the two images' histograms -     F  1    (  )        subscript  F  1      F_{1}()\,   for the reference image and     F  2    (  )        subscript  F  2      F_{2}()\,   for the target image. Then for each gray level     G  1   ∈   [  0  ,  255  ]        subscript  G  1    0  255     G_{1}\in[0,255]   , we find the gray level     G  2      subscript  G  2    G_{2}\,   for which      F  1    (   G  1   )    =    F  2    (   G  2   )           subscript  F  1    subscript  G  1       subscript  F  2    subscript  G  2      F_{1}(G_{1})=F_{2}(G_{2})\,   , and this is the result of histogram matching function     M   (   G  1   )    =    G  2          M   subscript  G  1     subscript  G  2     M(G_{1})=G_{2}\,   . Finally, we apply the function    M   (  )       M     M()\,   on each pixel of the reference image.  Multiple Histograms Matching  The Histogram matching Algorithm can be extended to find a monotonic mapping between two sets of histograms. Given two sets of histograms    P  =    {   p  i   }    i  =  1   k       P   superscript   subscript    subscript  p  i      i  1    k     P=\{p_{i}\}_{i=1}^{k}   and    Q  =    {   q  i   }    i  =  1   k       Q   superscript   subscript    subscript  q  i      i  1    k     Q=\{q_{i}\}_{i=1}^{k}   , the optimal monotonic color mapping   M   M   M   is calculated to minimize the distance between the two sets simultaneously, namely    m  i    n  M      ∑  k    d   (   M   (   p  k   )    ,   q  k   )         m  i   subscript  n  M     subscript   k     d     M   subscript  p  k     subscript  q  k        min_{M}\ \sum_{k}d(M(p_{k}),q_{k})   where    d   (  .  ,  .  )      fragments  d   fragments  normal-(  normal-.  normal-,  normal-.  normal-)     d(.,.)   is a distance metric between two histograms. The optimal solution is calculated using dynamic programming  1  References  See also   Histogram equalization  Image histogram  Color mapping   "  Category:Image processing         