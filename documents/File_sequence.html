<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1990">File sequence</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>File sequence</h1>
<hr/>

<p>In <a class="uri" href="computing" title="wikilink">computing</a>, as well as in non-computing contexts, a <strong>file sequence</strong> is a <a href="well-order" title="wikilink">well-ordered</a>, (finite) collection of <a href="Computer_file" title="wikilink">files</a>, usually related to each other in some way.</p>

<p>In computing, file sequences should ideally obey some kind of <a href="locality_of_reference" title="wikilink">locality of reference</a> principle, so that not only all the files belonging to the same sequence ought to be locally referenced to each other, but they also obey that as much as is their proximity with respect to the <a href="relation_(mathematics)" title="wikilink">ordering relation</a>. <em>Explicit</em> file sequences are, in fact, sequences whose filenames all end with a numeric or alphanumeric tag in the end (excluding <a href="file_extension" title="wikilink">file extension</a>).</p>

<p>The aforementioned locality of reference usually pertains either to the data, the metadata (e.g. their filenames or <a href="common_filesystem_features#Access_date" title="wikilink">last-access dates</a>), or the physical proximity within the storage media they reside in. In the latter acception it is better to speak about <strong>file contiguity</strong> (see below).</p>
<h2 id="identification">Identification</h2>

<p>Every <a class="uri" href="GUI" title="wikilink">GUI</a> program shows contents of <a href="Directory_(file_systems)" title="wikilink">folders</a> by usually ordering its files according to some criteria, mostly related to the files' <a class="uri" href="metadata" title="wikilink">metadata</a>, like the filename. The criterion is, by default, the alphanumeric ordering of filenames, although some operating systems do that in "smarter" ways than others: for example <code>file1.ext</code> should ideally be placed before <code>file10.ext</code>, like <a href="GNOME_Files" title="wikilink">GNOME Files</a> and <a class="uri" href="Thunar" title="wikilink">Thunar</a> do, whereas, alphanumerically, it comes after (more on that later). Other criteria exist, like ordering files by their <a href="file_format" title="wikilink">file type</a> (or by their extension) and, if the same type, by either filename or last-access date, and so on.</p>

<p>For this reason, when a file sequence has a more strong locality of reference, particularly when it is related to their actual contents, it is better to highlight this fact by letting their <a class="uri" href="well-ordering" title="wikilink">well-ordering</a> induce an alphanumeric ordering of the filenames too. That is the case of <em>explicit</em> file sequences.</p>
<h3 id="explicit-file-sequences">Explicit file sequences</h3>

<p>Explicit file sequences have the same filename (including <a href="file_extension" title="wikilink">file extensions</a> in order to confirm their contents' locality of reference) except for the final part (excluding the extension), which is a sequence of either numeric, alphanumeric or purely alphabetical characters to force a specific ordering; such sequences should also be ideally located all within the same directory.</p>

<p>In this sense any files sharing the same filename (and possibly extension), only differing by the sequence number at the end of the filename, automatically belong to the same file sequence, at least when they are located in the same folder. It is also part of many naming conventions that number-indexed file sequences (in any <a href="number_base" title="wikilink">number base</a>) containing as many files as to span at most a fixed number of digits, make use of "<a href="trailing_zero" title="wikilink">trailing zeroes</a>" in their filenames so that:</p>
<ul>
<li>all the files in the sequence share exactly the same number of characters in their complete filenames;</li>
<li>non-smart alphanumeric orderings, like those of operating systems' <a href="GUI" title="wikilink">GUIs</a>, do not erroneously permute them within the sequence.</li>
</ul>

<p>To better explain the latter point, consider that, strictly speaking, <code>file1.ext</code> (1st file in the sequence) comes alphanumerically <em>after</em> <code>file100.ext</code>, which is actually the hundredth. By renaming the first file to <code>file001.ext</code> with two trailing zeroes, the problem is universally solved.</p>

<p>Examples of explicit file sequences include: <code>file00000.ext</code>, <code>file00001.ext</code>, <code>file00002.ext</code>, 

<math display="inline" id="File_sequence:0">
 <semantics>
  <mi mathvariant="normal">…</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-…</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   ...
  </annotation>
 </semantics>
</math>

, <code>file02979.ext</code> (five trailing zeroes), and another with a <a class="uri" href="hexadecimal" title="wikilink">hexadecimal</a> ordering of 256 files <code>tag_00.ext</code>, <code>tag_01.ext</code>, 

<math display="inline" id="File_sequence:1">
 <semantics>
  <mi mathvariant="normal">…</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-…</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   ...
  </annotation>
 </semantics>
</math>

, <code>tag_09.ext</code>, <code>tag_0A.ext</code>, ..., <code>tag_0F.ext</code>, <code>tag_10.ext</code>, ..., <code>tag_0F.ext</code>, ..., <code>tag_FF.ext</code> (with just one trailing zero).</p>

<p>Software and programming conventions usually represent a file sequence as a single virtual file object, whose name is comprehensively written in <a href="C_(programming_language)" title="wikilink">C</a>-like formatted-string notation to represent where the sequence number is located in the filename and what is its formatting. For the two examples above, that would be <code>filename%05d.ext</code> and <code>tag_%02H.ext</code>, respectively, whereas for the former one, the same convention without <a href="trailing_zero" title="wikilink">trailing zeroes</a> would be <code>filename%5d.ext</code>. Note, however, that such notation is usually not valid at operating system and <a href="command-line_interface" title="wikilink">command-line interface</a> levels, because the '<code>%</code>' character is neither a valid <a href="regular_expression" title="wikilink">regular expression</a> nor a universally <em>legal</em> filename character: that notation just stands as a <a href="Printf_format_string" title="wikilink">placeholder</a> for the virtual file-like representing the whole explicit file sequence.</p>

<p>Notable software packages acknowledging explicit file sequences as single filesystem objects, rather typical in the Audio/Video post-production industry (see below), are found among products by <a class="uri" href="Autodesk" title="wikilink">Autodesk</a>, <a class="uri" href="Quantel" title="wikilink">Quantel</a>, <a href="Da_Vinci_Systems" title="wikilink">daVinci</a>, <a href="Digitale_Videosysteme" title="wikilink">DVS</a>, as well as <a href="Adobe_After_Effects" title="wikilink">Adobe After Effects</a>.</p>
<h2 id="file-scattering">File scattering</h2>

<p>A file sequence located within a <a href="mass_storage" title="wikilink">mass storage</a> device is said to be <em>contiguous</em> if:</p>
<ul>
<li>every file in the sequence is unfragmented, i.e. each file is stored in one contiguous and ordered piece of storage space (ideally in one or multiple, but contiguous, <a class="uri" href="extents" title="wikilink">extents</a>);</li>
<li>consecutive files in the sequence occupy contiguous portions of storage space (<a class="uri" href="extents" title="wikilink">extents</a>, yet consistently with their file ordering).</li>
</ul>

<p>File contiguity is a more practical requirement for file sequences than just their <a href="locality_of_reference" title="wikilink">locality of reference</a>, because it is related to the storage medium hosting the whole sequence than to the sequence itself (or its <a class="uri" href="metadata" title="wikilink">metadata</a>). At the same time, it is a "high-level" feature, because it is not related to the physical and technical details of mass storage itself: particularly, file contiguity is realized in different ways according to the storage device's architecture and actual <a class="uri" href="filesystem" title="wikilink">filesystem</a> structure. At "low level", each file in a contiguous sequence must be placed in contiguous blocks, in spite of reserved areas or special metadata required by the filesystem (like <a class="uri" href="inodes" title="wikilink">inodes</a> or inter-sector headers) actually interleaving them.</p>

<p>File contiguity is, in most practical applications, "invisible" at operating-system or user levels, since all the files in a sequence are always available to applications in the same way, regardless of their physical location on the storage device (due to operating systems hiding the filesystem internals to higher-level services). Indeed, file contiguity may be related to I/O performance when the sequence is to be read or written in the shortest time possible. In some contexts (like <a href="optical_disk_burning" title="wikilink">optical disk burning</a> - also cfr. below), data in a file sequence must be accessed in the same order as the file sequence itself; in other contexts, a "random" access to the sequence may be required. In both cases, most professional filesystems provide faster access strategies to contiguous files than non-contiguous ones. Data <a class="uri" href="pre-allocation" title="wikilink">pre-allocation</a> is crucial for write access, whereas burst read speeds are achievable only for contiguous data.</p>

<p>When a file sequence is not contiguous, it is said to be <em>scattered</em>, since its files are stored in sparse locations on the storage device. <strong>File scattering</strong> is the process of allocating (or re-allocating) a file sequence as being (or becoming) uncontiguous. That is often associated with <a href="file_system_fragmentation" title="wikilink">file fragmentation</a> too, where each file is also stored in several, non-contiguous blocks; mechanisms contributing to the former are usually a common cause to the latter too. The act of reducing file scattering by means of allocating (in the first place) or moving (for already-stored data) files in the same sequence near together on the storage medium is called (file) <strong>file <em>de</em>scattering</strong>. A few <a class="uri" href="defragmentation" title="wikilink">defragmentation</a> strategies and dedicated software are able to both defragment single files and descatter file sequences.</p>
<h2 id="multimedia-file-sequences">Multimedia file sequences</h2>

<p>There are many contexts which explicit file sequences are particularly important in: incremental backups, periodic logs and multimedia files captured or created with a chronological <a href="locality_of_reference" title="wikilink">locality of reference</a>. In the latter case, explicit file numbering is extremely important in order to provide both software and end users a way to discern the consequentiality of the contents stored therein. For example, digital cameras and similar devices save all the picture files in the same folder (until it either reaches its maximum file-number capacity, or a new event like midnight-coming or device-switching takes place) with a final number sequence: it would be very unpractical to choose a filename for each taken shot on the very shooting time, so the camera firmware/software picks one which is perfectly identifiable by its sequence number. With the aid of other <a class="uri" href="metadata" title="wikilink">metadata</a> (and usually of specialized PC software), users can later on discern the multimedia contents and re-organize them, if needed.</p>
<h3 id="the-digital-intermediate-example">The Digital Intermediate example</h3>

<p>A typical example where explicit file sequences, as well as their contiguity, becomes crucial is in the <a href="digital_intermediate" title="wikilink">digital intermediate</a> (DI) workflow for motion picture and video industries. In such contexts, video data need to maintain the highest quality and be ready for visualization (usually real-time if not even better). Usually video data are acquired from either a digital video camera or a <a href="motion_picture_film_scanner" title="wikilink">motion picture film scanner</a> and stored into file sequences (as much as a common photographic camera does) and need to be post-produced in several steps, including at least editing, conforming and colour-correction. That requires:</p>
<ul>
<li>Uncompressed data, because any <a href="lossy_compression" title="wikilink">lossy compression</a>, which is common in most finalized products, introduces unacceptable quality losses.</li>
<li>Uncompressed data (again), because decompression times may degrade playing/visualization performance by hardware and software.</li>
<li>Frame-per-file data management, because common post-production operations imply the shortest seek-times ever; "fast-forwarding" or "rewinding" to a specific (key) frame is much faster if done at <a class="uri" href="filesystem" title="wikilink">filesystem</a> level rather than within a huge, possibly <a href="defragmentation" title="wikilink">fragmented</a> video file; every frame is then stored in a single file as a still digital picture.</li>
<li>Unambiguous frames' ordering, for obvious reasons, which is best accomplished grouping all the files together with explicit file numbering.</li>
<li>File contiguity, because many filesystem architectures employ higher I/O speeds if transferring data on contiguous areas of the storage, whereas random allocation might prevent real-time or better loading performances.</li>
</ul>

<p>Consider that a single frame in a <a href="digital_intermediate" title="wikilink">DI</a> project is currently from 9MB to 48MB large (depending upon <a href="Display_resolution" title="wikilink">resolution</a> and <a href="color_depth" title="wikilink">colour-depth</a>), whereas video <a href="refresh_rate" title="wikilink">refresh rate</a> is commonly 24 or 25 frames per second (if not faster); any storage required for real-time playing such contents thus needs a minimum overall <a class="uri" href="throughput" title="wikilink">throughput</a> of 220MB/s to 1.2GB/s, respectively. With those numbers, all the above requirements (particularly file contiguity, given nowadays storage performances) become strictly mandatory.</p>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://rsgalloway.github.com/pyseq/">PySeq</a> PySeq is an open source python module that finds groups of items that follow a naming convention containing a numerical sequence index (e.g. fileA.001.png, fileA.002.png, fileA.003.png...) and serializes them into a compressed sequence string representing the entire sequence (e.g. fileA.1-3.png).</li>
</ul>
<ul>
<li><a href="http://github.com/andreberg/checkfileseq">checkfileseq</a> checkfileseq is an open source python script (usable via <a href="Command-line_interface" title="wikilink">CLI</a>) that scans a directory structure recursively for files missing in a file sequence and prints a report upon completion. It supports a wide array of filename patterns and can be customized to gain additional pattern logic.</li>
</ul>

<p>"</p>

<p><a href="Category:Computer_files" title="wikilink">Category:Computer files</a></p>
</body>
</html>
