   Divisor (algebraic geometry)      Divisor (algebraic geometry)   In algebraic geometry , divisors are a generalization of codimension one subvarieties of algebraic varieties ; two different generalizations are in common use, Cartier divisors and Weil divisors (named for Pierre Cartier and AndrÃ© Weil ). Both are ultimately derived from the notion of divisibility in the integers and algebraic number fields .  Cartier divisors and Weil divisors are parallel notions. Weil divisors are codimension one objects, while Cartier divisors are locally described by a single equation. On non-singular varieties, these two are identical, but when the variety has singular points , the two can differ. An example of a surface on which the two concepts differ is a cone , i.e. a singular quadric . At the (unique) singular point, the vertex of the cone, a single line drawn on the cone is a Weil divisor, but is not a Cartier divisor (since it is not locally principal).  The divisor appellation is part of the history of the subject, going back to the Dedekind â€“ Weber work which in effect showed the relevance of Dedekind domains to the case of algebraic curves . 1 In that case the free abelian group on the points of the curve is closely related to the fractional ideal theory.  An algebraic cycle is a higher-dimensional generalization of a divisor; by definition, a Weil divisor is a cycle of codimension one.  Divisors in a Riemann surface  A Riemann surface is a 1-dimensional complex manifold, so its codimension 1 submanifolds are 0-dimensional. The divisors of a Riemann surface are the elements of the free abelian group over the points of the surface.  Equivalently, a divisor is a finite linear combination of points of the surface with integer coefficients. The degree of a divisor is the sum of its coefficients.  We define the divisor of a meromorphic function  f as       (  f  )   :=    âˆ‘    z  Î½   âˆˆ   R   (  f  )        s  Î½    z  Î½        assign  f    subscript      subscript  z  Î½     R  f        subscript  s  Î½    subscript  z  Î½       (f):=\sum_{z_{\nu}\in R(f)}s_{\nu}z_{\nu}     where R ( f ) is the set of all zeroes and poles of f , and s Î½ is given by       s  Î½   :=   {     a      if    z  Î½   is a zero of order  a        -  a        if    z  Î½   is a pole of order  a   .           assign   subscript  s  Î½    cases    a    if   subscript  z  Î½   is a zero of order  a       a     if   subscript  z  Î½   is a pole of order  a        s_{\nu}:=\left\{\begin{array}[]{rl}a&\ \text{if }z_{\nu}\text{ is a zero of %
 order }a\\
 -a&\ \text{if }z_{\nu}\text{ is a pole of order }a.\end{array}\right.     A divisor that is the divisor of a meromorphic function is called principal . On a compact Riemann surface, a meromorphic function has as many poles as zeroes, and therefore on such surfaces the degree of a principal divisor is 0. Since the divisor of a product is the sum of the divisors, the set of principal divisors is a subgroup of the group of divisors. Two divisors that differ by a principal divisor are called linearly equivalent .  We define the divisor of a meromorphic 1-form similarly. Since the space of meromorphic 1-forms is a 1-dimensional vector space over the field of meromorphic functions, any two meromorphic 1-forms yield linearly equivalent divisors. The equivalence class of these divisors is called the canonical divisor (usually denoted K ).  The Riemannâ€“Roch theorem is an important relation between the divisors of a Riemann surface and its topology.  Weil divisor  Definition  Let X be an algebraic variety over a field. 2 A Weil divisor on X is a finite linear combination with integral coefficients of irreducible closed subsets Z of X of codimension one:       âˆ‘  Z     n  Z    [  Z  ]        subscript   Z      subscript  n  Z    delimited-[]  Z      \sum_{Z}n_{Z}[Z]   where the only finitely many n Z are nonzero. For example, a divisor on an algebraic curve is a formal sum of its closed points. The degree of a divisor is the sum of its coefficients. An effective Weil divisor is one in which all the coefficients of the formal sum are non-negative. One writes D â‰¥ D' if the difference D - D' is effective.  If Z âŠ‚ X is an irreducible closed subset of codimension one, then the local ring O Î· at the generic point of Z comes with the order-of-vanishing function ord Z ; namely,      ord  Z    (  f  )    =    length   ğ’ª  Î·     (     ğ’ª  Î·   /  f    ğ’ª  Î·    )          subscript  ord  Z   f     subscript  length   subscript  ğ’ª  Î·         subscript  ğ’ª  Î·   f    subscript  ğ’ª  Î·       \operatorname{ord}_{Z}(f)=\operatorname{length}_{\mathcal{O}_{\eta}}({\mathcal%
 {O}_{\eta}}/f{\mathcal{O}_{\eta}})   if f is regular at the generic point of Z . This is an algebraic fact. If A is a one-dimensional Noetherian local ring, then for any non-zerodivisor f ,     A  /  f   A        A  f   A    A/fA   is an Artinian A -module (the support has dimension zero) and thus the length       ord   (  f  )    =    length  A    (    A  /  f   A   )         ord  f     subscript  length  A       A  f   A      \operatorname{ord}(f)=\operatorname{length}_{A}(A/fA)   is a finite number. For any non-zerodivisor    f  /  g      f  g    f/g   in the total ring of fractions  Q ( A ) of A , one then puts ord( f / g ) = ord( f ) - ord( g ). One can show it is well-defined and that    ord  :     Q   (  A  )    -   {  0  }    â†’  â„¤      normal-:  ord   normal-â†’      Q  A    0    â„¤     \operatorname{ord}:Q(A)-\{0\}\to\mathbb{Z}   is a group homomorphism. Finally, if A is a discrete valuation ring , then this ord is the valuation defined by fixing a generator of the maximal ideal. If f is a nonzero rational function on X , one then puts:       (  f  )   =    âˆ‘  Z      ord  Z    (  f  )     [  Z  ]         f    subscript   Z      subscript  ord  Z   f   Z      (f)=\sum_{Z}\operatorname{ord}_{Z}(f)[Z]   This is called the principal (Weil) divisor generated by f . For it to be a divisor, it needs to be a finite sum; this can be seen from the geometric interpretation of the construction. If Z is a closed subscheme (need not be reduced) of X of codimension one, then Z determines an effective (Weil) divisor:       [  Z  ]   =    âˆ‘    V  i   âŠ‚  Z       length   ğ’ª  Z     (   ğ’ª   Z  ,   Î·  i     )     [   V  i   ]          delimited-[]  Z     subscript      subscript  V  i   Z       subscript  length   subscript  ğ’ª  Z     subscript  ğ’ª   Z   subscript  Î·  i       subscript  V  i       [Z]=\sum_{V_{i}\subset Z}\operatorname{length}_{\mathcal{O}_{Z}}({\mathcal{O}_%
 {Z,\eta_{i}}})[V_{i}]   where    V  i     subscript  V  i    V_{i}   are the irreducible closed subsets of Z of codimension zero and    Î·  i     subscript  Î·  i    \eta_{i}   is the generic point of    V  i     subscript  V  i    V_{i}   in Z ; in other words, [ Z ] counts irreducible components of Z with the multiplicities (the construction actually works for any closed subscheme Z and in general [ Z ] is called the fundamental cycle of Z .) In particular, if Z is the zero-locus of a regular function f , then ( f ) = [ Z ]. If    f  =   g  /  h       f    g  h     f=g/h   is a fraction of regular functions (and a rational function is locally of such a fraction), then     (  f  )   =    (  g  )   -   (  h  )        f    g  h     (f)=(g)-(h)   , so    (  f  )    f   (f)   is defined by counting zeros of f with positive multiplicity and poles of f with negative multiplicity.  If D is a Weil divisor on X and if X is normal, then the sheaf O ( D ) on X is defined by: 3 for any open subset U of X ,       Î“   (  U  ,   O   (  D  )    )    =   {   f  âˆˆ   k   (  X  )     |   f  =    0  or   (  f  )    +  D   â‰¥   0  on  U    }         normal-Î“   U    O  D      conditional-set    f    k  X        f      0  or  f   D          0  on  U        \Gamma(U,O(D))=\{f\in k(X)|f=0\text{ or }(f)+D\geq 0\text{ on }U\}   where k ( X ) is the field of rational functions on X . If D is principal, given by, say, a rational function g , then O ( D ) is isomorphic to the structure sheaf O X of X via    f  â†¦   f  g      maps-to  f    f  g     f\mapsto fg   . Conversely, if O ( D ) is free, then D is principal. It follows that D is locally principal if and only if O ( D ) is locally free of rank one; i.e., an invertible sheaf .  If X is locally factorial; i.e., local rings are unique factorization domains , which is the case for example when X is smooth , then D is locally principal and so O ( D ) is invertible. In general, however, a Weil divisor need not be locally principal (which amounts to being Cartier). The standard example is the following: 4 Let X be the quadric cone      z  2   =   x  y        superscript  z  2     x  y     z^{2}=xy   , and D the line y = z = 0, a ruling of the cone ; D is not principal near the origin.  In general, when X is normal, the sheaf O ( D ) is a reflexive sheaf and any reflexive sheaf of the form O ( D ) is called a divisorial sheaf (for the non-normal case, see the " reflexive sheaf " article.)  Divisor class group  Let Div( X ) be the abelian group of Weil divisors on X . Since principal divisors form a subgroup, one can form the quotient group:       Cl   (  X  )    =    Div   (  X  )    /   {   (  f  )   |   f  âˆˆ   k    (  X  )   *     }         Cl  X      Div  X    conditional-set  f    f    k   superscript  X          \operatorname{Cl}(X)=\operatorname{Div}(X)/\{(f)|f\in k(X)^{*}\}   called the divisor class group of X . Two divisors are said to be linearly equivalent if they belong to the same divisor class.  Let Z be a closed subset of X . If Z is irreducible of codimension one, then there is an exact sequence       â„¤   â†’   1  â†¦   [  Z  ]       Cl   (  X  )     â†’   j  *      Cl   (   X  -  Z   )     â†’  0     normal-â†’    â„¤    maps-to  1   delimited-[]  Z    normal-â†’     Cl  X     superscript  j    normal-â†’     Cl    X  Z     0    \mathbb{Z}\overset{1\mapsto[Z]}{\to}\operatorname{Cl}(X)\overset{j^{*}}{\to}%
 \operatorname{Cl}(X-Z)\to 0   where    j  *     superscript  j     j^{*}   is the restriction map along the inclusion    j  :    X  -  Z   â†ª  X      normal-:  j   normal-â†ª    X  Z   X     j:X-Z\hookrightarrow X   . If Z has codimension â‰¥ 2, then    Cl   (  X  )       j  *    âˆ¼  â†’  Cl   (  X  -  Z  )      fragments  Cl   fragments  normal-(  X  normal-)     superscript  j     absent  absent    similar-to  normal-â†’  Cl   fragments  normal-(  X   Z  normal-)     \operatorname{Cl}(X)\overset{j^{*}}{\underset{}{}}{\sim}\to\operatorname{Cl}(X%
 -Z)   is an isomorphism. (These facts are special cases of the excision exact sequence for Chow groups . That is,        A  k    (  Z  )    â†’    A  k    (  X  )    â†’    A  k    (   X  -  Z   )    â†’  0       normal-â†’     subscript  A  k   Z      subscript  A  k   X     normal-â†’       subscript  A  k     X  Z      normal-â†’    0     A_{k}(Z)\to A_{k}(X)\to A_{k}(X-Z)\to 0   where    A  k     subscript  A  k    A_{k}   is the k -th Chow group. The sequence can be extended further to the left using Bloch's higher Chow groups .)  Example : Take X = P n to be a projective space and H to be the coordinate hyperplane in it, say, x 0 = 0. Then      â„¤  â†’     Cl   (   ğ  n   )     â†’   j  *      Cl   (    ğ  n   -  H   )     â†’  0       normal-â†’  â„¤      Cl   superscript  ğ  n      superscript  j    normal-â†’     Cl     superscript  ğ  n   H       normal-â†’    0     \mathbb{Z}\to\operatorname{Cl}(\mathbf{P}^{n})\overset{j^{*}}{\to}%
 \operatorname{Cl}(\mathbf{P}^{n}-H)\to 0   Here, the last term     Cl   (    ğ  n   -  H   )    =   Cl   (   ğ€  n   )    =  0         Cl     superscript  ğ  n   H     Cl   superscript  ğ€  n         0     \operatorname{Cl}(\mathbf{P}^{n}-H)=\operatorname{Cl}(\mathbf{A}^{n})=0   since the coordinate ring of the affine space    ğ€  n     superscript  ğ€  n    \mathbf{A}^{n}   is a polynomial ring, which is a unique factorization domain and has trivial divisor class group. With a bit more work, one indeed gets     Cl   (   ğ  n   )    â‰ƒ  â„¤     similar-to-or-equals   Cl   superscript  ğ  n    â„¤    \operatorname{Cl}(\mathbf{P}^{n})\simeq\mathbb{Z}   .  If s is a nonzero section of some line bundle on X , then we let    (  s  )    s   (s)   be the divisor defined by the zero-locus of s with multiplicities; it is called the divisor cut out by s . As for rational functions, this construction generalizes to rational sections s by defining    (  s  )    s   (s)   to be:        (  s  )   =    âˆ‘    V  i   âŠ‚  X       ord   V  i     (  s  )     [   V  i   ]      ,      s    subscript      subscript  V  i   X       subscript  ord   subscript  V  i    s    subscript  V  i       (s)=\sum_{V_{i}\subset X}\operatorname{ord}_{V_{i}}(s)[V_{i}],   where     ord   V  i     (  s  )       subscript  ord   subscript  V  i    s    \operatorname{ord}_{V_{i}}(s)   is the order of vanishing of s along V i , which is defined by identifying s with a rational function by means of local trivialization. (This is well-defined; the transition functions locally have no zero and poles. Equivalently, changing the trivialization does not change the local ring    ğ’ª   X  ,   Î·  i       subscript  ğ’ª   X   subscript  Î·  i      \mathcal{O}_{X,\eta_{i}}   at the generic point.)  Any line bundle admits a nonzero rational section (by local triviality) and, moreover, different choices differ by a nonzero rational function. Thus, there is a well-defined group homomorphism:       Pic   (  X  )    â†’   Cl   (  X  )       normal-â†’   Pic  X    Cl  X     \operatorname{Pic}(X)\to\operatorname{Cl}(X)   where Pic( X ) is the Picard group of X and tensor product corresponds to addition. It is injective if X is normal. The image consists of classes of locally principal Weil divisors. In particular, X is locally factorial if and only if the map is an isomorphism; the inverse being    D  â†¦   ğ’ª   (  D  )       maps-to  D    ğ’ª  D     D\mapsto\mathcal{O}(D)   (continuing the previous example one gets: Pic( P n ) = Cl( P n ) = Z .)  Let X be a normal variety over a perfect field. The smooth points (or the regular points) form an open dense subset    X  reg     subscript  X  reg    X_{\text{reg}}   . Writing j for the inclusion     X  reg   â†ª  X     normal-â†ª   subscript  X  reg   X    X_{\text{reg}}\hookrightarrow X   , we have the restriction homomorphism:        j  *   :      Cl   (  X  )     â†’  âˆ¼     Cl   (   X  reg   )     =   Pic   (   X  reg   )      ,     normal-:   superscript  j          Cl  X    similar-to  normal-â†’     Cl   subscript  X  reg      Pic   subscript  X  reg       j^{*}:\operatorname{Cl}(X)\overset{\sim}{\to}\operatorname{Cl}(X_{\text{reg}})%
 =\operatorname{Pic}(X_{\text{reg}}),   which is an isomorphism since    X  -   X  reg       X   subscript  X  reg     X-X_{\text{reg}}   has codimension â‰¥ 2 as X is normal. For example, one can use this isomorphism to define the canonical divisor     K  X     subscript  K  X    K_{X}   on X to be the one (up to linear equivalence) corresponding to the sheaf of differential forms of top degree; in symbols,     ğ’ª   (    j  *    K  X    )    =   Î©   X  reg    dim  X          ğ’ª     superscript  j     subscript  K  X      subscript   superscript  normal-Î©   dimension  X     subscript  X  reg      \mathcal{O}(j^{*}K_{X})=\Omega^{\dim X}_{X_{\text{reg}}}   .  Cartier divisor  A Cartier divisor in an algebraic variety X (see the paragraph below for the scheme case) can be represented by an open cover by affine subsets    U  i     subscript  U  i    {U_{i}}   of X , and a collection of rational functions     f  i     subscript  f  i    f_{i}   defined on    U  i     subscript  U  i    U_{i}   . The functions must be compatible in this sense: on the intersection of two sets in the cover, the quotient of the corresponding rational functions should be regular and invertible. A Cartier divisor is said to be effective if these    f  i     subscript  f  i    f_{i}   can be chosen to be regular functions , and in this case the Cartier divisor defines an associated subvariety of codimension 1 by forming the ideal sheaf generated locally by the    f  i     subscript  f  i    f_{i}   .  The notion can also be described with the abstract function field instead of rational functions: in this setup X can be any scheme. For each affine open subset U , define M â€²( U ) to be the total quotient ring of O X ( U ). Because the affine open subsets form a basis for the topology on X , this defines a presheaf on X . (This is not the same as taking the total quotient ring of O X ( U ) for arbitrary U , since that does not define a presheaf. 5 ) The sheaf M X of rational functions on X is the sheaf associated to the presheaf M â€², and the quotient sheaf is the sheaf of local Cartier divisors.  A Cartier divisor is a global section of the quotient sheaf M X * / O X * . We have the exact sequence    1  â†’   ğ’ª  X  *   â†’   M  X  *   â†’    M  X  *   /   ğ’ª  X  *    â†’  1       normal-â†’  1   subscript   superscript  ğ’ª    X     normal-â†’     subscript   superscript  M    X     normal-â†’       subscript   superscript  M    X    subscript   superscript  ğ’ª    X      normal-â†’    1     1\to\mathcal{O}^{*}_{X}\to M^{*}_{X}\to M^{*}_{X}/\mathcal{O}^{*}_{X}\to 1   , so, applying the global section functor    Î“   (  X  ,  âˆ™  )       normal-Î“   X  normal-âˆ™     \Gamma(X,\bullet)   gives the exact sequence    1  â†’   Î“   (  X  ,   O  X  *   )    â†’   Î“   (  X  ,   M  X  *   )    â†’   Î“   (  X  ,    M  X  *   /   ğ’ª  X  *    )    â†’    H  1    (  X  ,   ğ’ª  X  *   )         normal-â†’  1    normal-Î“   X   subscript   superscript  O    X       normal-â†’      normal-Î“   X   subscript   superscript  M    X       normal-â†’      normal-Î“   X     subscript   superscript  M    X    subscript   superscript  ğ’ª    X        normal-â†’       superscript  H  1    X   subscript   superscript  ğ’ª    X        1\to\Gamma(X,O^{*}_{X})\to\Gamma(X,M^{*}_{X})\to\Gamma(X,M^{*}_{X}/\mathcal{O}%
 ^{*}_{X})\to H^{1}(X,\mathcal{O}^{*}_{X})   .  A Cartier divisor is said to be principal if it is in the range of the morphism     Î“   (  X  ,   M  X  *   )    â†’   Î“   (  X  ,    M  X  *   /   ğ’ª  X  *    )       normal-â†’    normal-Î“   X   subscript   superscript  M    X       normal-Î“   X     subscript   superscript  M    X    subscript   superscript  ğ’ª    X        \Gamma(X,M^{*}_{X})\to\Gamma(X,M^{*}_{X}/\mathcal{O}^{*}_{X})   , that is, if it is the class of a global rational function.  Cartier divisors in nonrigid sheaves  Of course the notion of Cartier divisors exists in any sheaf (any ringed space ). But if the sheaf is not rigid enough, the notion tends to lose some of its interest. For example in a fine sheaf (e.g. the sheaf of real-valued continuous, or smooth, functions on an open subset of a euclidean space , or locally homeomorphic, or diffeomorphic, to such a set, such as a topological manifold ), any local section is a divisor of 0, so that the total quotient sheaves are zero, so that the sheaf contains no non-trivial Cartier divisor.  From Cartier divisors to Weil divisor  There is a natural homomorphism from the group of Cartier divisors to that of Weil divisors, which is an isomorphism for integral separated Noetherian schemes provided that all local rings are unique factorization domains.  From Cartier divisors to line bundles  The notion of transition map associates naturally to every Cartier divisor D a line bundle (strictly, invertible sheaf ) commonly denoted by     ğ’ª  X    (  D  )        subscript  ğ’ª  X   D    \mathcal{O}_{X}(D)   or sometimes also    â„’   (  D  )       â„’  D    \mathcal{L}(D)   .  The line bundle    â„’   (  D  )       â„’  D    \mathcal{L}(D)   associated to the Cartier divisor D is the sub-bundle of the sheaf M X of rational fractions described above whose stalk at    x  âˆˆ  X      x  X    x\in X   is given by     D  x   âˆˆ   Î“   (  x  ,    M  X  *   /   ğ’ª  X  *    )         subscript  D  x     normal-Î“   x     subscript   superscript  M    X    subscript   superscript  ğ’ª    X        D_{x}\in\Gamma(x,M^{*}_{X}/\mathcal{O}^{*}_{X})   viewed as a line on the stalk at x of    ğ’ª  X     subscript  ğ’ª  X    \mathcal{O}_{X}   in the stalk at x of    M  X     subscript  M  X    M_{X}   . The subsheaf thus described is tautologically locally freely monogenous over the structure sheaf    ğ’ª  X     subscript  ğ’ª  X    \mathcal{O}_{X}   .  The mapping    D  â†¦   â„’   (  D  )       maps-to  D    â„’  D     D\mapsto\mathcal{L}(D)   is a group homomorphism: the sum of divisors corresponds to the tensor product of line bundles, and isomorphism of bundles corresponds precisely to linear equivalence of Cartier divisors. The group of divisors classes modulo linear equivalence therefore injects into the Picard group . The mapping is not surjective for all compact complex manifolds, but surjectivity does hold for all smooth projective varieties. The latter is true because, by the Kodaira embedding theorem, the tensor product of any line bundle with a sufficiently high power of any positive line bundle becomes ample; thus, on any such manifold, any line bundle is the formal difference between two ample line bundles, and any ample line bundle may be viewed as an effective divisor.  Global sections of line bundles and linear systems  Recall that the local equations of a Cartier divisor   D   D   D   in a variety   X   X   X   give rise to transition maps for a line bundle    â„’   (  D  )       â„’  D    \mathcal{L}(D)   , and linear equivalences induce isomorphism of line bundles.  Loosely speaking, a Cartier divisor D is said to be effective if it is the zero locus of a global section of its associated line bundle    â„’   (  D  )       â„’  D    \mathcal{L}(D)   . In terms of the definition above, this means that its local equations coincide with the equations of the vanishing locus of a global section.  From the divisor linear equivalence/line bundle isomorphism principle, a Cartier divisor is linearly equivalent to an effective divisor if, and only if, its associated line bundle    â„’   (  D  )       â„’  D    \mathcal{L}(D)   has non-zero global sections. Two collinear non-zero global sections have the same vanishing locus, and hence the projective space    â„™  Î“   (  X  ,   â„’   (  D  )    )       â„™  normal-Î“   X    â„’  D      \mathbb{P}\Gamma(X,\mathcal{L}(D))   over k identifies with the set of effective divisors linearly equivalent to   D   D   D   .  If   X   X   X   is a projective (or proper ) variety over a field   k   k   k   , then    Î“   (  X  ,   â„’   (  D  )    )       normal-Î“   X    â„’  D      \Gamma(X,\mathcal{L}(D))   is a finite-dimensional   k   k   k   -vector space, and the associated projective space over   k   k   k   is called the complete linear system of   D   D   D   . Its linear subspaces are called linear systems of divisors . The Riemann-Roch theorem for algebraic curves is a fundamental identity involving the dimension of complete linear systems in the setup of projective curves.  â„š-divisors  Let X be a normal variety. A (Weil)   â„š   â„š   \mathbb{Q}   -divisor is a finite formal linear combination of irreducible subvarieties of codimension one of X with rational coefficients. (An   â„   â„   \mathbb{R}   -divisor is defined similarly.) A   â„š   â„š   \mathbb{Q}   -divisor is called effective if the coefficients are nonnegative. A   â„š   â„š   \mathbb{Q}   -divisor is called   â„š   â„š   \mathbb{Q}   -Cartier if some integral multiple of it is a Cartier divisor. If X is smooth, then any   â„š   â„š   \mathbb{Q}   -divisor is   â„š   â„š   \mathbb{Q}   -Cartier.  If    D  =   âˆ‘    a  j    Z  j         D       subscript  a  j    subscript  Z  j       D=\sum a_{j}Z_{j}   is a   â„š   â„š   \mathbb{Q}   -divisor, then its integer part is the divisor      âˆ‘    [   a  j   ]    Z  j           delimited-[]   subscript  a  j     subscript  Z  j      \sum[a_{j}]Z_{j}   where    [   a  j   ]     delimited-[]   subscript  a  j     [a_{j}]   are the integer parts of    a  j     subscript  a  j    a_{j}   . O ( D ) is then defined as O of the integer part of D .  See also: multiplier ideal . For some examples, see http://mathoverflow.net/questions/55526/example-of-a-variety-with-k-x-mathbb-q-cartier-but-not-cartier/  Relative Cartier divisors  An effective Cartier divisor in a scheme X over a ring R is a closed subscheme D of X that (1) is flat over R and (2) the ideal sheaf    I   (  D  )       I  D    I(D)   of D is locally free of rank one (i.e., invertible sheaf). Equivalently, a closed subscheme D of X is an effective Cartier divisor if there is an open affine cover     U  i   =   Spec   A  i         subscript  U  i    Spec   subscript  A  i      U_{i}=\operatorname{Spec}A_{i}   of X and nonzerodivisors     f  i   âˆˆ   A  i        subscript  f  i    subscript  A  i     f_{i}\in A_{i}   such that the intersection    D  âˆ©   U  i       D   subscript  U  i     D\cap U_{i}   is given by the equation     f  i   =  0       subscript  f  i   0    f_{i}=0   (called local equations) and its ideal sheaf       I   (  D  )    |    U  i    =    A  /   f  i    A        evaluated-at    I  D    subscript  U  i        A   subscript  f  i    A     I(D)|_{U_{i}}=A/f_{i}A   is flat over R and such that they are compatible.   If D and ''D' '' are effective Cartier divisors, then the sum    D  +   D  â€²       D   superscript  D  normal-â€²     D+D^{\prime}   is the effective Cartier divisor defined locally as     f  g   =  0        f  g   0    fg=0   if f , g give local equations for D and ''D' ''.  If D is an effective Cartier divisor and    R  â†’   R  â€²      normal-â†’  R   superscript  R  normal-â€²     R\to R^{\prime}   is a ring homomorphism, then    D   Ã—  R    R  â€²       subscript   R   D   superscript  R  normal-â€²     D\times_{R}R^{\prime}   is an effective Cartier divisor in    X   Ã—  R    R  â€²       subscript   R   X   superscript  R  normal-â€²     X\times_{R}R^{\prime}   .  If D is an effective Cartier divisor and    f  :    X  â€²   â†’  X      normal-:  f   normal-â†’   superscript  X  normal-â€²   X     f:X^{\prime}\to X   a flat morphism over R , then     D  â€²   =   D   Ã—  X    X  â€²         superscript  D  normal-â€²     subscript   X   D   superscript  X  normal-â€²      D^{\prime}=D\times_{X}X^{\prime}   is an effective Cartier divisor in ''X' '' with the ideal sheaf     I   (   D  â€²   )    =    f  *    (   I   (  D  )    )          I   superscript  D  normal-â€²       superscript  f      I  D      I(D^{\prime})=f^{*}(I(D))   .   Taking    I    (  D  )    -  1     âŠ—   ğ’ª  X    -     fragments  I   superscript   fragments  normal-(  D  normal-)     1     subscript  tensor-product   subscript  ğ’ª  X       I(D)^{-1}\otimes_{\mathcal{O}_{X}}-   of    0  â†’   I   (  D  )    â†’   ğ’ª  X   â†’   ğ’ª  D   â†’  0       normal-â†’  0    I  D     normal-â†’     subscript  ğ’ª  X     normal-â†’     subscript  ğ’ª  D     normal-â†’    0     0\to I(D)\to\mathcal{O}_{X}\to\mathcal{O}_{D}\to 0   gives the exact sequence      0  â†’   ğ’ª  X   â†’   I    (  D  )    -  1     â†’    I    (  D  )    -  1     âŠ—   ğ’ª  D    â†’  0       normal-â†’  0   subscript  ğ’ª  X     normal-â†’      I   superscript  D    1       normal-â†’     tensor-product    I   superscript  D    1      subscript  ğ’ª  D      normal-â†’    0     0\to\mathcal{O}_{X}\to I(D)^{-1}\to I(D)^{-1}\otimes\mathcal{O}_{D}\to 0   . This allows one to see global sections of    ğ’ª  X     subscript  ğ’ª  X    \mathcal{O}_{X}   as global sections of    I    (  D  )    -  1        I   superscript  D    1      I(D)^{-1}   . In particular, the constant 1 on X can be thought of as a section of    I    (  D  )    -  1        I   superscript  D    1      I(D)^{-1}   and D is then the zero locus of this section. Conversely, if   L   L   L   is a line bundle on X and s a global section of it that is a nonzerodivisor on    ğ’ª  X     subscript  ğ’ª  X    \mathcal{O}_{X}   and if    L  /   ğ’ª  X       L   subscript  ğ’ª  X     L/\mathcal{O}_{X}   is flat over R , then    s  =  0      s  0    s=0   defines an effective Cartier divisor whose ideal sheaf is isomorphic to the inverse of L .  From now on suppose X is a smooth curve (still over R ). Let D be an effective Cartier divisor in X and assume it is proper over R (which is immediate if X is proper.) Then    Î“   (  D  ,   ğ’ª  D   )       normal-Î“   D   subscript  ğ’ª  D      \Gamma(D,\mathcal{O}_{D})   is a locally free R -module of finite rank. This rank is called the degree of D and is denoted by    deg  D     deg  D    \operatorname{deg}D   . It is a locally constant function on    Spec  R     Spec  R    \operatorname{Spec}R   . If D and ''D' '' are proper effective Cartier divisors, then    D  +   D  â€²       D   superscript  D  normal-â€²     D+D^{\prime}   is proper over R and     deg   (   D  +   D  â€²    )    =    deg   (  D  )    +   deg   (   D  â€²   )          deg    D   superscript  D  normal-â€²        deg  D    deg   superscript  D  normal-â€²       \operatorname{deg}(D+D^{\prime})=\operatorname{deg}(D)+\operatorname{deg}(D^{%
 \prime})   . Let    f  :    X  â€²   â†’  X      normal-:  f   normal-â†’   superscript  X  normal-â€²   X     f:X^{\prime}\to X   be a finite flat morphism. Then     deg   (    f  *   D   )    =    deg   (  f  )     deg   (  D  )          deg     superscript  f    D       deg  f    deg  D      \operatorname{deg}(f^{*}D)=\operatorname{deg}(f)\operatorname{deg}(D)   . 6 On the other hand, a base change does not change degree     deg   (   D   Ã—  R    R  â€²    )    =   deg   (  D  )         deg    subscript   R   D   superscript  R  normal-â€²      deg  D     \operatorname{deg}(D\times_{R}R^{\prime})=\operatorname{deg}(D)   . 7  A closed subscheme D of X is finite, flat and of finite presentation if and only if it is an effective Cartier divisor that is proper over R . 8  See also   ample divisor  Arakelov divisor  nef divisor  Theta-divisor  Multiplier ideal (algebraic geometry)  divisorial sheaf   Notes    References    Section II.6 of      "  Category:Geometry of divisors     Section VI.6 of . â†©  More generally, one can take X to be a Noetherian integral scheme over a field. â†©  Vakil, Math 216: Foundations of algebraic geometry , Defintion 14.2.2. â†©  â†©  Kleiman, p. 203 â†©  â†©  â†©  â†©     