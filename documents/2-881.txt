


Function composition




Function composition

In mathematics, function composition is the pointwise application of one function to the result of another to produce a third function. For instance, the functions $f : X → Y$ and $g : Y → Z$ can be composed to yield a function which maps $x$ in $X$ to $g ( f ( x ))$ in $Z$. Intuitively, if $z$ is a function of $y$, and $y$ is a function of $x$, then $z$ is a function of $x$. The resulting composite function is denoted $g ∘ f : X → Z$, defined by $( g ∘ f )( x ) = g ( f ( x ))$ for all $x$ in $X$.1 The notation $g ∘ f$ is read as "$g$ circle $f$ ", or "$g$ round $f$ ", or "$g$ composed with $f$ ", "$g$ after $f$ ", "$g$ following $f$ ", or "$g$ of $f$", or "$g$ on $f$ ". Intuitively, composing two functions is a chaining process in which the output of the first function becomes the input of the second function.
The composition of functions is just a particularization of the composition of relations, so all properties of the latter operation also transfer to the composition of functions.2 The composition of function has some additional properties however.
Examples
thumb|upright=1.5|$g ∘ f$, the composition of $f$ and $g$. For example, $( g ∘ f )(c) = #$.

Composition of functions on a finite set: If , and , then .
Composition of functions on an infinite set: If $f : ℝ → ℝ$ (where $ℝ$ is the set of all real numbers) is given by $ f ( x ) = 2 x + 4$ and $g : ℝ → ℝ$ is given by , then:


, and
 
.
 


If an airplane's elevation at time $t$ is given by the function $h ( t )$, and the oxygen concentration at elevation $x$ is given by the function $c ( x )$, then $( c ∘ h )( t )$ describes the oxygen concentration around the plane at time $t$.

Properties
The composition of functions is always associative—a property inherited from the composition of relations.3 That is, if $f$, $g$, and $h$ are three functions with suitably chosen domains and codomains, then $ f ∘ ( g ∘ h ) = ( f ∘ g ) ∘ h$, where the parentheses serve to indicate that composition is to be performed first for the parenthesized functions. Since there is no distinction between the choices of placement of parentheses, they may be left off without causing any ambiguity.
In a strict sense, the composition $ g ∘ f$ can be built only if $f$'s codomain equals $g$'s domain; in a wider sense it is sufficient that the former is a subset of the latter.4 Moreover, it is often convenient to tacitly restrict $f$'s domain such that $f$ produces only values in $g$'s domain; for example, the composition $ g ∘ f$ of the functions $f : ℝ → (−∞,+9 $ defined by  and $g : 0,+∞) ) → ℝ$ defined by $ g ( x ) = √ \overline{x}$ can be defined on the interval $−3,+3 3$.
thumb|upright=1|Compositions of two real functions, absolute value and a cubic function, in different orders show a non-commutativity of the composition. The functions $g$ and $f$ are said to commute with each other if $ g ∘ f = f ∘ g$. In general, composition of functions will not be commutative. Commutativity is a special property, attained only by particular functions, and often in special circumstances. For example, $ | x | + 3 = | x + 3 |$ only when $x ≥ 0$. The picture shows another example.
The composition of one-to-one functions is always one-to-one. Similarly, the composition of two onto functions is always onto. It follows that composition of two bijections is also a bijection. The inverse function of a composition (assumed invertible) has the property that .5
Derivatives of compositions involving differentiable functions can be found using the chain rule. Higher derivatives of such functions are given by Faà di Bruno's formula.
Composition monoids
Suppose one has two (or more) functions $f : X → X ,$ $g : X → X$ having the same domain and codomain; these are often called transformations. Then one can form chains of transformations composed together, such as $f ∘ f ∘ g ∘ f$. Such chains have the algebraic structure of a monoid, called a transformation monoid or (much more seldom) composition monoid. In general, transformation monoids can have remarkably complicated structure. One particular notable example is the de Rham curve. The set of all functions $f : X → X$ is called the full transformation semigroup6 or symmetric semigroup7 on $X$. (One can actually define two semigroups depending how one defines the semigroup operation as the left or right composition of functions.8)
thumb|upright=1.2|The similarity that transforms triangle EFA into triangle ATB is the composition of a homothety $H$  and a rotation $R$, of which the common centre is S.  For example, the image of A  under the rotation $R$ is U,  which may be written    means that the mapping $H$ transforms  . If the transformation are bijective (and thus invertible), then the set of all possible combinations of these functions forms a transformation group; and one says that the group is generated by these functions. A fundamental result in group theory, Cayley's theorem, essentially says that any group is in fact just a group of permutations (up to isomorphism).9
The set of all bijective functions $f : X → X$ (called permutations) forms a group with respect to the composition operator. This is the symmetric group, also sometimes called the composition group.
In the symmetric semigroup (of all transformations) one also finds a weaker, non-unique notion of inverse (called a pseudoinverse) because the symmetric semigroup is a regular semigroup.10
Functional powers
If $Y ⊆ X$, then $f : X → Y$ may compose with itself; this is sometimes denoted as . That is:








More generally, for any natural number $n ≥ 2$, the $n$th functional power can be defined inductively by . Repeated composition of such a function with itself is called iterated function.

By convention,  is defined as the identity map on $f$'s domain, .
If even $ Y = X$ and $f : X → X$ admits an inverse function , negative functional powers  are defined for $n > 0$ as the opposite power of the inverse function: .

Note: If $f$ takes its values in a ring (in particular for real or complex-valued $f$), there is a risk of confusion, as  could also stand for the $n$-fold product of $f$, e.g. . For trigonometric functions, usually the latter is meant, at least for positive exponents. For example, in trigonometry, this superscript notation represents standard exponentiation when used with trigonometric functions: . However, for negative exponents (especially −1), it nevertheless usually refers to the inverse function, e.g., .
In some cases, when, for a given function $f$, the equation $ g ∘ g = f$ has a unique solution $g$, that function can be defined as the functional square root of $f$, then written as .
More generally, when  has a unique solution for some natural number $n > 0$, then  can be defined as .
Under additional restrictions, this idea can be generalized so that the iteration count becomes a continuous parameter; in this case, such a system is called a flow, specified through solutions of Schröder's equation. Iterated functions and flows occur naturally in the study of fractals and dynamical systems.
Alternative notations
Many mathematicians, particularly in group theory, omit the composition symbol, writing $gf$ for $g ∘ f$.11
In the mid-20th century, some mathematicians decided that writing "$g ∘ f$" to mean "first apply $f$, then apply $g$" was too confusing and decided to change notations. They write "$xf$" for "$f ( x )$" and "$( xf ) g$" for "$g ( f ( x ))$".12 This can be more natural and seem simpler than writing functions on the left in some areas – in linear algebra, for instance, when $x$ is a row vector and $f$ and $g$ denote matrices and the composition is by matrix multiplication. This alternative notation is called postfix notation. The order is important because matrix multiplication is non-commutative. Successive transformations applying and composing to the right agrees with the left-to-right reading sequence.
Mathematicians who use postfix notation may write "$fg$", meaning first apply $f$ and then apply $g$, in keeping with the order the symbols occur in postfix notation, thus making the notation "$fg$" ambiguous. Computer scientists may write "$f ; g$" for this,13 thereby disambiguating the order of composition. To distinguish the left composition operator from a text semicolon, in the Z notation the ⨾ character is used for left relation composition.14 Since all functions are binary relations, it is correct to use the [fat] semicolon for function composition as well (see the article on composition of relations for further details on this notation).
Composition operator
Given a function $g$, the composition operator  is defined as that operator which maps functions to functions as


$C_g f = f \circ g.$




Composition operators are studied in the field of operator theory.
In programming languages
Function composition appears in one form or another in numerous programming languages.
Multivariate functions
Partial composition is possible for multivariate functions. The function resulting when some argument  of the function $f$ is replaced by the function $g$ is called a composition of $f$ and $g$ in some computer engineering contexts, and is denoted xi = g}}
$$f|_{x_i = g} = f (x_1, \ldots, x_{i-1}, g(x_1, x_2, \ldots, x_n), x_{i+1}, \ldots, x_n).$$
When $g$ is a simple constant $b$, composition degenerates into a (partial) valuation, whose result is also known as restriction or co-factor.15
$$f|_{x_i = b} = f (x_1, \ldots, x_{i-1}, b, x_{i+1}, \ldots, x_n).$$
In general, the composition of multivariate functions may involve several other functions as arguments, as in the definition of primitive recursive function. Given $f$, a $n$-ary function, and $n$ $m$-ary functions , the composition of $f$ with , is the $m$-ary function
$$h(x_1,\ldots,x_m) = f(g_1(x_1,\ldots,x_m),\ldots,g_n(x_1,\ldots,x_m))$$.
This is sometimes called the generalized composite of f with .16 The partial composition in only one argument mentioned previously can be instantiated from this more general scheme by setting all argument functions except one to be suitably chosen projection functions. Note also that  can be seen as a single vector/tuple-valued function in this generalized scheme, in which case this is precisely the standard definition of function composition.17
A set of finitary operations on some base set X is called a clone if it contains all projections and is closed under generalized composition. Note that a clone generally contains operations of various arities.18 The notion of commutation also finds an interesting generalization in the multivariate case; a function f of arity n is said to commute with a function g of arity m if f is a homomorphism preserving g, and vice versa i.e.:19
$$f(g(a_{11},\ldots,a_{1m}),\ldots,g(a_{n1},\ldots,a_{nm})) = g(f(a_{11},\ldots,a_{n1}),\ldots,g(a_{1m},\ldots,a_{mn}))$$.
A unary operation always commutes with itself, but this is not necessarily the case for a binary (or higher arity) operation. A binary (or higher arity) operation that commutes with itself is called medial or entropic.20
Generalizations
Composition can be generalized to arbitrary binary relations. If $R ⊆ X × Y$ and $S ⊆ Y × Z$ are two binary relations, then their composition $S ∘ R$ is the relation defined as . Considering a function as a special case of a binary relation (namely functional relations), function composition satisfies the definition for relation composition.
The composition is defined in the same way for partial functions and Cayley's theorem has its analogue called Wagner-Preston theorem.21
The category of sets with functions as morphisms is the prototypical category. The axioms of a category are in fact inspired from the properties (and also the definition) of function composition.22 The structures given by composition are axiomatized and generalized in category theory with the concept of morphism as the category-theoretical replacement of functions. The order inversion in the formula  applies for groups in general and for the inverse relation; each of these is a dagger category.
Typography
The composition symbol $∘$ is encoded as ; see the Degree symbol article for similar-appearing Unicode characters. In TeX, it is written \circ.
See also

Combinatory logic
Function composition (computer science)
Functional decomposition
Iterated function
Flow (mathematics)
Higher-order function
Cobweb plot – a graphical technique for functional composition
Lambda calculus
Functional square root
Composition ring, a formal axiomatization of the composition operation
Function of random variable, distribution of a function of a random variable

Notes
References


External links


"Composition of Functions" by Bruce Atwood, the Wolfram Demonstrations Project, 2007.

"
Category:Functions and mappings Category:Basic concepts in set theory Category:Binary operations



Some authors use $f ∘ g : X → Z$, defined by $( f ∘ g )( x ) = g ( f ( x ))$ instead.


The strict sense is used e.g. in category theory, where a subset relation has to be modelled explicitly by an inclusion function.








 This is the updated and free version of book originally published by Prentice Hall in 1990 as ISBN 978-0-13-120486-7.
ISO/IEC 13568:2002(E), p. 23






S. Lipscomb, "Symmetric Inverse Semigroups", AMS Mathematical Surveys and Monographs (1997), ISBN 0-8218-0627-0, p. xv





