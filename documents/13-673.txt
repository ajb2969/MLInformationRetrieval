   Doob decomposition theorem      Doob decomposition theorem   In the theory of stochastic processes in discrete time , a part of the mathematical theory of probability , the Doob decomposition theorem gives a unique decomposition of every adapted and integrable stochastic process as the sum of a martingale and a predictable process (or "drift") starting at zero. The theorem was proved by and is named for Joseph L. Doob . 1  The analogous theorem in the continuous-time case is the Doob‚ÄìMeyer decomposition theorem .  Statement of the theorem  Let be a probability space ,  {0, 1, 2, . . . , N }}} with or ‚Ñï 0 }} a finite or an infinite index set, a filtration of , and ( X n ) n ‚àà I }} an adapted stochastic process with X n {{!}}]  for all . Then there exists a martingale ( M n ) n ‚àà I }} and an integrable predictable process ( A n ) n ‚àà I }} starting with 0}} such that  M n + A n }} for every . Here predictable means that is - measurable for every }. This decomposition is almost surely unique. 2 3 4  Corollary  A real-valued stochastic process is a submartingale if and only if it has a Doob decomposition into a martingale and an integrable predictable process that is almost surely increasing . 5 It is a supermartingale , if and only if is almost surely decreasing .  Remark  The theorem is valid word by word also for stochastic processes taking values in the -dimensional Euclidean space  or the complex vector space  . This follows from the one-dimensional version by considering the components individually.  Proofs  Proof of the theorem  Existence  Using conditional expectations , define the processes and , for every , explicitly by  and  where the sums for 0}} are empty and defined as zero. Here adds up the expected increments of , and adds up the surprises, i.e., the part of every that is not known one time step before. Due to these definitions, (if ) and are -measurable because the process is adapted, A n {{!}}]  and M n {{!}}]  because the process is integrable, and the decomposition  M n + A n }} is valid for every . The martingale property      ùîº   [   M  n   -    M   n  -  1     |   ‚Ñ±   n  -  1    ]   =  0     fragments  E   fragments  normal-[   subscript  M  n     subscript  M    n  1    normal-|   subscript  ‚Ñ±    n  1    normal-]    0    \mathbb{E}[M_{n}-M_{n-1}\,|\,\mathcal{F}_{n-1}]=0   a.s.  also follows from the above definition ( ), for every }.  Uniqueness  To prove uniqueness, let  M {{'}} + A {{'}}}} be an additional decomposition. Then the process  M ‚àí M {{'}} {{=}} A {{'}} ‚àí A }} is a martingale, implying that      ùîº   [    Y  n    |   ‚Ñ±   n  -  1    ]   =   Y   n  -  1       fragments  E   fragments  normal-[   subscript  Y  n   normal-|   subscript  ‚Ñ±    n  1    normal-]     subscript  Y    n  1      \mathbb{E}[Y_{n}\,|\,\mathcal{F}_{n-1}]=Y_{n-1}   a.s.,  and also predictable, implying that      ùîº   [    Y  n    |   ‚Ñ±   n  -  1    ]   =   Y  n      fragments  E   fragments  normal-[   subscript  Y  n   normal-|   subscript  ‚Ñ±    n  1    normal-]     subscript  Y  n     \mathbb{E}[Y_{n}\,|\,\mathcal{F}_{n-1}]=Y_{n}   a.s.  for any }. Since  A {{'}} 0 ‚àí A 0 {{=}} 0}} by the convention about the starting point of the predictable processes, this implies iteratively that 0}} almost surely for all , hence the decomposition is almost surely unique.  Proof of the corollary  If is a submartingale, then      ùîº   [    X  k    |   ‚Ñ±   k  -  1    ]   ‚â•   X   k  -  1       fragments  E   fragments  normal-[   subscript  X  k   normal-|   subscript  ‚Ñ±    k  1    normal-]     subscript  X    k  1      \mathbb{E}[X_{k}\,|\,\mathcal{F}_{k-1}]\geq X_{k-1}   a.s.  for all }, which is equivalent to saying that every term in definition ( ) of is almost surely positive, hence is almost surely increasing. The equivalence for supermartingales is proved similarly.  Example  Let ( X n ) n ‚àà‚Ñï 0 }} be a sequence in independent, integrable, real-valued random variables. They are adapted to the filtration generated by the sequence, i.e.  œÉ ( X 0 , . . . , X n )}} for all . By ( ) and ( ), the Doob decomposition is given by         A  n   =    ‚àë   k  =  1   n    (    ùîº   [   X  k   ]    -   X   k  -  1     )     ,   n  ‚àà   ‚Ñï  0     ,     formulae-sequence     subscript  A  n     superscript   subscript     k  1    n       ùîº   delimited-[]   subscript  X  k      subscript  X    k  1         n   subscript  ‚Ñï  0      A_{n}=\sum_{k=1}^{n}\bigl(\mathbb{E}[X_{k}]-X_{k-1}\bigr),\quad n\in\mathbb{N}%
 _{0},     and         M  n   =    X  0   +    ‚àë   k  =  1   n    (    X  k   -   ùîº   [   X  k   ]     )      ,   n  ‚àà   ‚Ñï  0     .     formulae-sequence     subscript  M  n      subscript  X  0     superscript   subscript     k  1    n      subscript  X  k     ùîº   delimited-[]   subscript  X  k           n   subscript  ‚Ñï  0      M_{n}=X_{0}+\sum_{k=1}^{n}\bigl(X_{k}-\mathbb{E}[X_{k}]\bigr),\quad n\in%
 \mathbb{N}_{0}.     If the random variables of the original sequence have mean zero, this simplifies to       A  n   =   -    ‚àë   k  =  0    n  -  1     X  k          subscript  A  n       superscript   subscript     k  0      n  1     subscript  X  k       A_{n}=-\sum_{k=0}^{n-1}X_{k}   and       M  n   =    ‚àë   k  =  0   n    X  k     ,   n  ‚àà   ‚Ñï  0     ,     formulae-sequence     subscript  M  n     superscript   subscript     k  0    n    subscript  X  k       n   subscript  ‚Ñï  0      M_{n}=\sum_{k=0}^{n}X_{k},\quad n\in\mathbb{N}_{0},     hence both processes are (possibly time-inhomogenious) random walks . If the sequence ( X n ) n ‚àà‚Ñï 0 }} consists of symmetric random variables taking the values and , then is bounded, but the martingale and the predictable process are unbounded simple random walks (and not uniformly integrable ), and Doob's optional stopping theorem might not be applicable to the martingale unless the stopping time has a finite expectation.  Application  In mathematical finance , the Doob decomposition theorem can be used to determine the largest optimal exercise time of an American option . 6 7 Let ( X 0 , X 1 , . . . , X N )}} denote the non-negative, discounted payoffs of an American option in a -period financial market model, adapted to a filtration , and let denote an equivalent  martingale measure . Let ( U 0 , U 1 , . . . , U N )}} denote the Snell envelope of with respect to . The Snell envelope is the smallest -supermartingale dominating 8 and in a complete financial market it represents the minimal amount of capital necessary to hedge the American option up to maturity. 9 Let  M + A }} denote the Doob decomposition with respect to of the Snell envelope into a martingale ( M 0 , M 1 , . . . , M N )}} and a decreasing predictable process ( A 0 , A 1 , . . . , A N )}} with 0}} . Then the largest stopping time to exercise the American option in an optimal way 10 11 is       œÑ  max   :=   {     N       if   A  N    =  0   ,        min   {   n  ‚àà   {  0  ,  ‚Ä¶  ,   N  -  1   }    ‚à£    A   n  +  1    <  0   }        if   A  N    <  0.          assign   subscript  œÑ  max    cases  N      if   subscript  A  N    0       n   0  normal-‚Ä¶    N  1        subscript  A    n  1    0        if   subscript  A  N    0.      \tau_{\text{max}}:=\begin{cases}N&\text{if }A_{N}=0,\\
 \min\{n\in\{0,\dots,N-1\}\mid A_{n+1}<0\}&\text{if }A_{N}<0.\end{cases}     Since is predictable, the event  n } {{=}} { A n  {{=}} 0, A n +1 for every }, hence is indeed a stopping time. It gives the last moment before the discounted value of the American option will drop in expectation; up to time the discounted value process is a martingale with respect to .  Generalization  The Doob decomposition theorem can be generalized from probability spaces to œÉ-finite measure spaces . 12  Citations   References            "  Category:Stochastic processes  Category:Probability theorems  Category:Martingale theory  Category:Articles containing proofs     , see ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©  ‚Ü©     