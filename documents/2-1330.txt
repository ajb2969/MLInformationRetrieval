   Permutation matrix      Permutation matrix   In mathematics , in matrix theory , a permutation matrix is a square binary matrix that has exactly one entry of 1 in each row and each column and 0s elsewhere. Each such matrix represents a specific permutation of m elements and, when used to multiply another matrix, can produce that permutation in the rows or columns of the other matrix.  Definition  Given a permutation π of m elements,      π  :    {  1  ,  …  ,  m  }   →   {  1  ,  …  ,  m  }       normal-:  π   normal-→   1  normal-…  m    1  normal-…  m      \pi:\{1,\ldots,m\}\to\{1,\ldots,m\}   given in two-line form by       (     1    2    ⋯    m       π   (  1  )       π   (  2  )      ⋯     π   (  m  )       )   ,      1  2  normal-⋯  m      π  1     π  2   normal-⋯    π  m      \begin{pmatrix}1&2&\cdots&m\\
 \pi(1)&\pi(2)&\cdots&\pi(m)\end{pmatrix},   its permutation matrix is the m × m matrix P π whose entries are all 0 except that in row i , the entry π( i ) equals 1. We may write        P  π   =   [      𝐞   π   (  1  )          𝐞   π   (  2  )         ⋮       𝐞   π   (  m  )        ]    ,       subscript  P  π      subscript  𝐞    π  1       subscript  𝐞    π  2      normal-⋮     subscript  𝐞    π  m        P_{\pi}=\begin{bmatrix}\mathbf{e}_{\pi(1)}\\
 \mathbf{e}_{\pi(2)}\\
 \vdots\\
 \mathbf{e}_{\pi(m)}\end{bmatrix},   where    𝐞  j     subscript  𝐞  j    \mathbf{e}_{j}   denotes a row vector of length m with 1 in the j th position and 0 in every other position. 1  Properties  Given two permutations π and σ of m elements and the corresponding permutation matrices P π and P σ        P  σ    P  π    =   P    π   ∘  σ           subscript  P  σ    subscript  P  π     subscript  P    π  σ      P_{\sigma}P_{\pi}=P_{\pi\,\circ\,\sigma}   This somewhat unfortunate rule is a consequence of the definitions of multiplication of permutations (composition of bijections) and of matrices, and of the choice of using the vectors    𝐞   π   (  i  )       subscript  𝐞    π  i     \mathbf{e}_{\pi(i)}   as rows of the permutation matrix; if one had used columns instead then the product above would have been equal to    P    σ   ∘  π      subscript  P    σ  π     P_{\sigma\,\circ\,\pi}   with the permutations in their original order.  As permutation matrices are orthogonal matrices (i.e.,      P  π    P  π  T    =  I         subscript  P  π    superscript   subscript  P  π   T    I    P_{\pi}P_{\pi}^{T}=I   ), the inverse matrix exists and can be written as        P  π   -  1    =   P   π   -  1     =   P  π  T    .         superscript   subscript  P  π     1     subscript  P   superscript  π    1           superscript   subscript  P  π   T      P_{\pi}^{-1}=P_{\pi^{-1}}=P_{\pi}^{T}.     Multiplying    P  π     subscript  P  π    P_{\pi}   times a column vector  g will permute the rows of the vector:         P  π   𝐠   =    [      𝐞   π   (  1  )          𝐞   π   (  2  )         ⋮       𝐞   π   (  n  )        ]    [      g  1        g  2       ⋮       g  n      ]    =   [      g   π   (  1  )          g   π   (  2  )         ⋮       g   π   (  n  )        ]    .           subscript  P  π   𝐠        subscript  𝐞    π  1       subscript  𝐞    π  2      normal-⋮     subscript  𝐞    π  n         subscript  g  1      subscript  g  2     normal-⋮     subscript  g  n              subscript  g    π  1       subscript  g    π  2      normal-⋮     subscript  g    π  n         P_{\pi}\mathbf{g}=\begin{bmatrix}\mathbf{e}_{\pi(1)}\\
 \mathbf{e}_{\pi(2)}\\
 \vdots\\
 \mathbf{e}_{\pi(n)}\end{bmatrix}\par
 \begin{bmatrix}g_{1}\\
 g_{2}\\
 \vdots\\
 g_{n}\end{bmatrix}=\begin{bmatrix}g_{\pi(1)}\\
 g_{\pi(2)}\\
 \vdots\\
 g_{\pi(n)}\end{bmatrix}.     Now applying    P  σ     subscript  P  σ    P_{\sigma}   after applying    P  π     subscript  P  π    P_{\pi}   gives the same result as applying    P   π  ∘  σ      subscript  P    π  σ     P_{\pi\circ\sigma}   directly, in accordance with the above multiplication rule: call      P  π   𝐠   =   𝐠  ′          subscript  P  π   𝐠    superscript  𝐠  normal-′     P_{\pi}\mathbf{g}=\mathbf{g}^{\prime}   , in other words       g  i  ′   =    g   π   (  i  )           subscript   superscript  g  normal-′   i    subscript  g    π  i      g^{\prime}_{i}=g_{\pi(i)}\,   for all i , then         P  σ    (    P  π    (  𝐠  )    )    =    P  σ    (   𝐠  ′   )    =   [      g   σ   (  1  )    ′        g   σ   (  2  )    ′       ⋮       g   σ   (  n  )    ′      ]   =   [      g   π   (   σ   (  1  )    )          g   π   (   σ   (  2  )    )         ⋮       g   π   (   σ   (  n  )    )        ]    .           subscript  P  σ      subscript  P  π   𝐠       subscript  P  σ    superscript  𝐠  normal-′            subscript   superscript  g  normal-′     σ  1       subscript   superscript  g  normal-′     σ  2      normal-⋮     subscript   superscript  g  normal-′     σ  n              subscript  g    π    σ  1        subscript  g    π    σ  2       normal-⋮     subscript  g    π    σ  n          P_{\sigma}(P_{\pi}(\mathbf{g}))=P_{\sigma}(\mathbf{g}^{\prime})=\begin{bmatrix%
 }g^{\prime}_{\sigma(1)}\\
 g^{\prime}_{\sigma(2)}\\
 \vdots\\
 g^{\prime}_{\sigma(n)}\end{bmatrix}=\begin{bmatrix}g_{\pi(\sigma(1))}\\
 g_{\pi(\sigma(2))}\\
 \vdots\\
 g_{\pi(\sigma(n))}\end{bmatrix}.     Multiplying a row vector  h times    P  π     subscript  P  π    P_{\pi}   will permute the columns of the vector by the inverse of    P  π     subscript  P  π    P_{\pi}   :       𝐡   P  π    =    [        h  1      h  2     …    h  n       ]    [      𝐞   π   (  1  )          𝐞   π   (  2  )         ⋮       𝐞   π   (  n  )        ]    =   [        h    π   -  1     (  1  )        h    π   -  1     (  2  )       …    h    π   -  1     (  n  )         ]           𝐡   subscript  P  π           subscript  h  1    subscript  h  2   normal-…   subscript  h  n         subscript  𝐞    π  1       subscript  𝐞    π  2      normal-⋮     subscript  𝐞    π  n                 subscript  h     superscript  π    1    1     subscript  h     superscript  π    1    2    normal-…   subscript  h     superscript  π    1    n          \mathbf{h}P_{\pi}=\begin{bmatrix}h_{1}\;h_{2}\;\dots\;h_{n}\end{bmatrix}\par
 %
 \begin{bmatrix}\mathbf{e}_{\pi(1)}\\
 \mathbf{e}_{\pi(2)}\\
 \vdots\\
 \mathbf{e}_{\pi(n)}\end{bmatrix}=\begin{bmatrix}h_{\pi^{-1}(1)}\;h_{\pi^{-1}(2%
 )}\;\dots\;h_{\pi^{-1}(n)}\end{bmatrix}     Again it can be checked that      (   𝐡   P  σ    )    P  π    =   𝐡   P   π  ∘  σ             𝐡   subscript  P  σ     subscript  P  π      𝐡   subscript  P    π  σ       (\mathbf{h}P_{\sigma})P_{\pi}=\mathbf{h}P_{\pi\circ\sigma}   .  Notes  Let S n denote the symmetric group , or group of permutations, on {1,2,..., n }. Since there are n ! permutations, there are n ! permutation matrices. By the formulas above, the n × n permutation matrices form a group under matrix multiplication with the identity matrix as the identity element .  If (1) denotes the identity permutation, then P (1) is the identity matrix .  One can view the permutation matrix of a permutation σ as the permutation σ of the columns of the identity matrix I , or as the permutation σ −1 of the rows of I .  A permutation matrix is a doubly stochastic matrix . The Birkhoff–von Neumann theorem says that every doubly stochastic real matrix is a convex combination of permutation matrices of the same order and the permutation matrices are precisely the extreme points of the set of doubly stochastic matrices. That is, the Birkhoff polytope , the set of doubly stochastic matrices, is the convex hull of the set of permutation matrices. 2  The product PM , premultiplying a matrix M by a permutation matrix P , permutes the rows of M ; row i moves to row π( i ). Likewise, MP permutes the columns of M .  The map S n → A ⊂ GL( n , Z 2 ) is a faithful representation . Thus, |A| = n !.  The trace of a permutation matrix is the number of fixed points of the permutation. If the permutation has fixed points, so it can be written in cycle form as π = ( a 1 )( a 2 )...( a k )σ where σ has no fixed points, then e ''a'' 1 , e ''a'' 2 ,..., e a k are eigenvectors of the permutation matrix.  From group theory we know that any permutation may be written as a product of transpositions . Therefore, any permutation matrix P factors as a product of row-interchanging elementary matrices , each having determinant −1. Thus the determinant of a permutation matrix P is just the signature of the corresponding permutation.  Examples  Permutation of rows and columns  When a permutation matrix P is multiplied with a matrix M from the left PM it will permute the rows of M (here the elements of a column vector), when P is multiplied with M from the right MP it will permute the columns of M (here the elements of a row vector):     (Figure)  P * (1,2,3,4) T = (4,1,3,2) T   (Figure)  (1,2,3,4) * P = (2,4,3,1)      Permutations of rows and columns are for example reflections (see below) and cyclic permutations (see cyclic permutation matrix ).      reflections         (Figure)  (1,2,3,4) * P T = (4,1,3,2)   (Figure)  P T * (1,2,3,4) T = (2,4,3,1) T      These arrangements of matrices are reflections of those directly above. This follows from the rule      (  𝐀𝐁  )   T   =    𝐁  T     𝐀  T          superscript  𝐀𝐁  normal-T      superscript  𝐁  normal-T    superscript  𝐀  normal-T      \left(\mathbf{AB}\right)^{\mathrm{T}}=\mathbf{B}^{\mathrm{T}}\mathbf{A}^{%
 \mathrm{T}}\,   (Compare: Transpose )     Permutation of rows  The permutation matrix P π corresponding to the permutation     π  =   (     1    2    3    4    5      1    4    2    5    3     )    ,      π    1  2  3  4  5    1  4  2  5  3      \pi=\begin{pmatrix}1&2&3&4&5\\
 1&4&2&5&3\end{pmatrix},   is        P  π   =   [      𝐞   π   (  1  )          𝐞   π   (  2  )          𝐞   π   (  3  )          𝐞   π   (  4  )          𝐞   π   (  5  )        ]   =   [      𝐞  1        𝐞  4        𝐞  2        𝐞  5        𝐞  3      ]   =   [     1    0    0    0    0      0    0    0    1    0      0    1    0    0    0      0    0    0    0    1      0    0    1    0    0     ]    .         subscript  P  π      subscript  𝐞    π  1       subscript  𝐞    π  2       subscript  𝐞    π  3       subscript  𝐞    π  4       subscript  𝐞    π  5              subscript  𝐞  1      subscript  𝐞  4      subscript  𝐞  2      subscript  𝐞  5      subscript  𝐞  3            1  0  0  0  0    0  0  0  1  0    0  1  0  0  0    0  0  0  0  1    0  0  1  0  0       P_{\pi}=\begin{bmatrix}\mathbf{e}_{\pi(1)}\\
 \mathbf{e}_{\pi(2)}\\
 \mathbf{e}_{\pi(3)}\\
 \mathbf{e}_{\pi(4)}\\
 \mathbf{e}_{\pi(5)}\end{bmatrix}=\begin{bmatrix}\mathbf{e}_{1}\\
 \mathbf{e}_{4}\\
 \mathbf{e}_{2}\\
 \mathbf{e}_{5}\\
 \mathbf{e}_{3}\end{bmatrix}=\begin{bmatrix}1&0&0&0&0\\
 0&0&0&1&0\\
 0&1&0&0&0\\
 0&0&0&0&1\\
 0&0&1&0&0\end{bmatrix}.     Given a vector g ,         P  π   𝐠   =    [      𝐞   π   (  1  )          𝐞   π   (  2  )          𝐞   π   (  3  )          𝐞   π   (  4  )          𝐞   π   (  5  )        ]    [      g  1        g  2        g  3        g  4        g  5      ]    =   [      g  1        g  4        g  2        g  5        g  3      ]    .           subscript  P  π   𝐠        subscript  𝐞    π  1       subscript  𝐞    π  2       subscript  𝐞    π  3       subscript  𝐞    π  4       subscript  𝐞    π  5         subscript  g  1      subscript  g  2      subscript  g  3      subscript  g  4      subscript  g  5              subscript  g  1      subscript  g  4      subscript  g  2      subscript  g  5      subscript  g  3        P_{\pi}\mathbf{g}=\begin{bmatrix}\mathbf{e}_{\pi(1)}\\
 \mathbf{e}_{\pi(2)}\\
 \mathbf{e}_{\pi(3)}\\
 \mathbf{e}_{\pi(4)}\\
 \mathbf{e}_{\pi(5)}\end{bmatrix}\par
 \begin{bmatrix}g_{1}\\
 g_{2}\\
 g_{3}\\
 g_{4}\\
 g_{5}\end{bmatrix}=\begin{bmatrix}g_{1}\\
 g_{4}\\
 g_{2}\\
 g_{5}\\
 g_{3}\end{bmatrix}.     Explanation  A permutation matrix will always be in the form      [      𝐞   a  1         𝐞   a  2        ⋮       𝐞   a  j       ]       subscript  𝐞   subscript  a  1       subscript  𝐞   subscript  a  2      normal-⋮     subscript  𝐞   subscript  a  j       \begin{bmatrix}\mathbf{e}_{a_{1}}\\
 \mathbf{e}_{a_{2}}\\
 \vdots\\
 \mathbf{e}_{a_{j}}\\
 \end{bmatrix}   where e a i represents the i th basis vector (as a row) for R j , and where      [     1    2    …    j       a  1      a  2     …     a  j      ]      1  2  normal-…  j     subscript  a  1    subscript  a  2   normal-…   subscript  a  j      \begin{bmatrix}1&2&\ldots&j\\
 a_{1}&a_{2}&\ldots&a_{j}\end{bmatrix}   is the permutation form of the permutation matrix.  Now, in performing matrix multiplication, one essentially forms the dot product of each row of the first matrix with each column of the second. In this instance, we will be forming the dot product of each row of this matrix with the vector of elements we want to permute. That is, for example, v = ( g 0 ,..., g 5 ) T ,   e a i · v = g a i    So, the product of the permutation matrix with the vector v above, will be a vector in the form ( g a 1 , g a 2 , ..., g a j ), and that this then is a permutation of v since we have said that the permutation form is       (     1    2    …    j       a  1      a  2     …     a  j      )   .      1  2  normal-…  j     subscript  a  1    subscript  a  2   normal-…   subscript  a  j      \begin{pmatrix}1&2&\ldots&j\\
 a_{1}&a_{2}&\ldots&a_{j}\end{pmatrix}.   So, permutation matrices do indeed permute the order of elements in vectors multiplied with them.  See also   Alternating sign matrix  Generalized permutation matrix   References     "  Category:Matrices  Category:Permutations  Category:Sparse matrices     Brualdi (2006) p.2 ↩  Brualdi (2006) p.19 ↩     