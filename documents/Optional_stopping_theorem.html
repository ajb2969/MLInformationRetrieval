<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="575">Optional stopping theorem</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Optional stopping theorem</h1>
<hr/>

<p>In <a href="probability_theory" title="wikilink">probability theory</a>, <strong>optional stopping theorem</strong> (or <strong>Doob's optional sampling theorem</strong>) says that, under certain conditions, the <a href="expected_value" title="wikilink">expected value</a> of a <a href="martingale_(probability_theory)" title="wikilink">martingale</a> at a <a href="stopping_time" title="wikilink">stopping time</a> is equal to the expected value of its initial value. Since martingales can be used to model the wealth of a gambler participating in a fair game, the optional stopping theorem says that on the average nothing can be gained by stopping to play the game based on the information obtainable so far (i.e., by not looking into the future). Of course, certain conditions are necessary for this result to hold true, in particular <a href="Martingale_(betting_system)" title="wikilink">doubling strategies</a> have to be excluded.</p>

<p>The optional stopping theorem is an important tool of <a href="mathematical_finance" title="wikilink">mathematical finance</a> in the context of the <a href="fundamental_theorem_of_asset_pricing" title="wikilink">fundamental theorem of asset pricing</a>.</p>
<h2 id="statement-of-theorem">Statement of theorem</h2>

<p>A discrete-time version of the theorem is given below:</p>

<p>Let <mtpl> (<em>X<sub>t</sub></em>)<sub><em>t</em>‚àà‚Ñï<sub>0</sub></sub>}}</mtpl> be a discrete-time <a href="Martingale_(probability_theory)" title="wikilink">martingale</a> and 

<math display="inline" id="Optional_stopping_theorem:0">
 <semantics>
  <mi>œÑ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>œÑ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   œÑ
  </annotation>
 </semantics>
</math>

 a <a href="stopping_time" title="wikilink">stopping time</a> with values in }, both with respect to a <a href="Filtration_(mathematics)#Measure_theory" title="wikilink">filtration</a> <mtpl></mtpl>. Assume that one of the following three conditions holds:</p>
<dl>
<dd>(<mtpl><eqref>a<eqref></eqref></eqref></mtpl>) The stopping time 

<math display="inline" id="Optional_stopping_theorem:1">
 <semantics>
  <mi>œÑ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>œÑ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   œÑ
  </annotation>
 </semantics>
</math>

 is <a href="almost_surely" title="wikilink">almost surely</a> bounded, i.e., there exists a <a href="mathematical_constant" title="wikilink">constant</a> 

<math display="inline" id="Optional_stopping_theorem:2">
 <semantics>
  <mrow>
   <mi>c</mi>
   <mi mathvariant="normal">‚àà</mi>
   <mi mathvariant="normal">‚Ñï</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>c</ci>
    <ci>normal-‚àà</ci>
    <ci>normal-‚Ñï</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   c‚àà‚Ñï
  </annotation>
 </semantics>
</math>

 such that 

<math display="inline" id="Optional_stopping_theorem:3">
 <semantics>
  <mrow>
   <mi>œÑ</mi>
   <mi mathvariant="normal">‚â§</mi>
   <mi>c</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>œÑ</ci>
    <ci>normal-‚â§</ci>
    <ci>c</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   œÑ‚â§c
  </annotation>
 </semantics>
</math>

 a.s.
</dd>
<dd>(<mtpl><eqref>b<eqref></eqref></eqref></mtpl>) The stopping time 

<math display="inline" id="Optional_stopping_theorem:4">
 <semantics>
  <mi>œÑ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>œÑ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   œÑ
  </annotation>
 </semantics>
</math>

 has finite expectation and the conditional expectations of the absolute value of the martingale increments are almost surely bounded, more precisely, 

<math display="inline" id="Optional_stopping_theorem:5">
 <semantics>
  <mrow>
   <mrow>
    <mi>ùîº</mi>
    <mrow>
     <mo stretchy="false">[</mo>
     <mi>œÑ</mi>
     <mo stretchy="false">]</mo>
    </mrow>
   </mrow>
   <mo><</mo>
   <mi mathvariant="normal">‚àû</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <lt></lt>
    <apply>
     <times></times>
     <ci>ùîº</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <ci>œÑ</ci>
     </apply>
    </apply>
    <infinity></infinity>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[\tau]<\infty
  </annotation>
 </semantics>
</math>

 and there exists a constant 

<math display="inline" id="Optional_stopping_theorem:6">
 <semantics>
  <mi>c</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>c</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   c
  </annotation>
 </semantics>
</math>

 such that 

<math display="inline" id="Optional_stopping_theorem:7">
 <semantics>
  <mrow>
   <mi>ùîº</mi>
   <mrow>
    <mo maxsize="120%" minsize="120%">[</mo>
    <mo stretchy="false">|</mo>
    <msub>
     <mi>X</mi>
     <mrow>
      <mi>t</mi>
      <mo>+</mo>
      <mn>1</mn>
     </mrow>
    </msub>
    <mo>-</mo>
    <msub>
     <mi>X</mi>
     <mi>t</mi>
    </msub>
    <mo rspace="4.2pt" stretchy="false">|</mo>
    <mo mathsize="120%" rspace="4.2pt" stretchy="false">|</mo>
    <msub>
     <mi class="ltx_font_mathcaligraphic">‚Ñ±</mi>
     <mi>t</mi>
    </msub>
    <mo maxsize="120%" minsize="120%">]</mo>
   </mrow>
   <mo>‚â§</mo>
   <mi>c</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <cerror>
    <csymbol cd="ambiguous">fragments</csymbol>
    <csymbol cd="unknown">E</csymbol>
    <cerror>
     <csymbol cd="ambiguous">fragments</csymbol>
     <ci>normal-[</ci>
     <ci>normal-|</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <apply>
       <plus></plus>
       <ci>t</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <minus></minus>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>X</ci>
      <ci>t</ci>
     </apply>
     <ci>normal-|</ci>
     <ci>normal-|</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñ±</ci>
      <ci>t</ci>
     </apply>
     <ci>normal-]</ci>
    </cerror>
    <leq></leq>
    <csymbol cd="unknown">c</csymbol>
   </cerror>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}\bigl[|X_{t+1}-X_{t}|\,\big|\,{\mathcal{F}}_{t}\bigr]\leq c
  </annotation>
 </semantics>
</math>

 almost surely on the event } for all <mtpl></mtpl>.
</dd>
<dd>(<mtpl><eqref>c<eqref></eqref></eqref></mtpl>) There exists a constant 

<math display="inline" id="Optional_stopping_theorem:8">
 <semantics>
  <mi>c</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>c</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   c
  </annotation>
 </semantics>
</math>

 such that <mtpl><em>X</em><sub><em>t</em>‚àß<em>œÑ</em></sub>{{!}} ‚â§ <em>c</em>}}</mtpl> a.s. for all <mtpl></mtpl>.
</dd>
</dl>

<p>Then <mtpl></mtpl> is an almost surely well defined random variable and 

<math display="inline" id="Optional_stopping_theorem:9">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>ùîº</mi>
     <mrow>
      <mo stretchy="false">[</mo>
      <msub>
       <mi>X</mi>
       <mi>œÑ</mi>
      </msub>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mi>ùîº</mi>
     <mrow>
      <mo stretchy="false">[</mo>
      <msub>
       <mi>X</mi>
       <mn>0</mn>
      </msub>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>ùîº</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <ci>œÑ</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>ùîº</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <cn type="integer">0</cn>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[X_{\tau}]=\mathbb{E}[X_{0}].
  </annotation>
 </semantics>
</math>

</p>

<p>Similarly, if the stochastic process 

<math display="inline" id="Optional_stopping_theorem:10">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 is a <a class="uri" href="submartingale" title="wikilink">submartingale</a> or a <a class="uri" href="supermartingale" title="wikilink">supermartingale</a> and one of the above conditions holds, then</p>

<p>

<math display="block" id="Optional_stopping_theorem:11">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>ùîº</mi>
     <mrow>
      <mo stretchy="false">[</mo>
      <msub>
       <mi>X</mi>
       <mi>œÑ</mi>
      </msub>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
    <mo>‚â•</mo>
    <mrow>
     <mi>ùîº</mi>
     <mrow>
      <mo stretchy="false">[</mo>
      <msub>
       <mi>X</mi>
       <mn>0</mn>
      </msub>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <geq></geq>
    <apply>
     <times></times>
     <ci>ùîº</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <ci>œÑ</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>ùîº</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <cn type="integer">0</cn>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[X_{\tau}]\geq\mathbb{E}[X_{0}],
  </annotation>
 </semantics>
</math>

 for a submartingale, and</p>

<p>

<math display="block" id="Optional_stopping_theorem:12">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>ùîº</mi>
     <mrow>
      <mo stretchy="false">[</mo>
      <msub>
       <mi>X</mi>
       <mi>œÑ</mi>
      </msub>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
    <mo>‚â§</mo>
    <mrow>
     <mi>ùîº</mi>
     <mrow>
      <mo stretchy="false">[</mo>
      <msub>
       <mi>X</mi>
       <mn>0</mn>
      </msub>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <leq></leq>
    <apply>
     <times></times>
     <ci>ùîº</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <ci>œÑ</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>ùîº</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <cn type="integer">0</cn>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[X_{\tau}]\leq\mathbb{E}[X_{0}],
  </annotation>
 </semantics>
</math>

 for a supermartingale.</p>
<h3 id="remark">Remark</h3>

<p>Under condition¬†() it is possible that 

<math display="inline" id="Optional_stopping_theorem:13">
 <semantics>
  <mrow>
   <mi>œÑ</mi>
   <mo>=</mo>
   <mi mathvariant="normal">‚àû</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>œÑ</ci>
    <ci>normal-‚àû</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   œÑ=‚àû
  </annotation>
 </semantics>
</math>

 happens with positive probability. On this event <mtpl></mtpl> is defined as the almost surely existing pointwise limit of 

<math display="inline" id="Optional_stopping_theorem:14">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

, see the proof below for details.</p>
<h2 id="applications">Applications</h2>
<ul>
<li>The optional stopping theorem can be used to prove the impossibility of successful betting strategies for a gambler with a finite lifetime (which gives condition¬†()) and a house limit on bets (condition¬†()). Suppose that the gambler can wager up to <em>c</em> dollars on a fair coin flip at times 1, 2, 3, etc., winning his wager if the coin comes up heads and losing it if the coin comes up tails. Suppose further that he can quit whenever he likes, but cannot predict the outcome of gambles that haven't happened yet. Then the gambler's fortune over time is a martingale, and the time 

<math display="inline" id="Optional_stopping_theorem:15">
 <semantics>
  <mi>œÑ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>œÑ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   œÑ
  </annotation>
 </semantics>
</math>

 at which he decides to quit (or goes broke and is forced to quit) is a stopping time. So the theorem says that <mtpl> E[<em>X</em><sub>0</sub>]}}</mtpl>. In other words, the gambler leaves with the same amount of money <em>on average</em> as when he started. (The same result holds if the gambler, instead of having a house limit on individual bets, has a finite limit on his line of credit or how far in debt he may go, though this is easier to show with another version of the theorem.)<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></li>
</ul>
<ul>
<li>Suppose a <a href="random_walk" title="wikilink">random walk</a> starting at 

<math display="inline" id="Optional_stopping_theorem:16">
 <semantics>
  <mrow>
   <mi>a</mi>
   <mi mathvariant="normal">‚â•</mi>
   <mn>0</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>a</ci>
    <ci>normal-‚â•</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a‚â•0
  </annotation>
 </semantics>
</math>

 that goes up or down by one with equal probability on each step. Suppose further that the walk stops if it reaches 

<math display="inline" id="Optional_stopping_theorem:17">
 <semantics>
  <mn>0</mn>
  <annotation-xml encoding="MathML-Content">
   <cn type="integer">0</cn>
  </annotation-xml>
 </semantics>
</math>

 or 

<math display="inline" id="Optional_stopping_theorem:18">
 <semantics>
  <mrow>
   <mi>m</mi>
   <mi mathvariant="normal">‚â•</mi>
   <mi>a</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>m</ci>
    <ci>normal-‚â•</ci>
    <ci>a</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m‚â•a
  </annotation>
 </semantics>
</math>

; the time at which this first occurs is a stopping time. If it is known that the expected time at which the walk ends is finite (say, from <a href="Markov_chain" title="wikilink">Markov chain</a> theory), the optional stopping theorem predicts that the expected stop position is equal to the initial position 

<math display="inline" id="Optional_stopping_theorem:19">
 <semantics>
  <mi>a</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>a</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a
  </annotation>
 </semantics>
</math>

. Solving 

<math display="inline" id="Optional_stopping_theorem:20">
 <semantics>
  <mrow>
   <mi>a</mi>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mi>p</mi>
     <mi>m</mi>
    </mrow>
    <mo>+</mo>
    <mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mn>1</mn>
       <mi mathvariant="normal">‚Äì</mi>
       <mi>p</mi>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mn>0</mn>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>a</ci>
    <apply>
     <plus></plus>
     <apply>
      <times></times>
      <ci>p</ci>
      <ci>m</ci>
     </apply>
     <apply>
      <times></times>
      <apply>
       <times></times>
       <cn type="integer">1</cn>
       <ci>normal-‚Äì</ci>
       <ci>p</ci>
      </apply>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a=pm+(1‚Äìp)0
  </annotation>
 </semantics>
</math>

 for the probability 

<math display="inline" id="Optional_stopping_theorem:21">
 <semantics>
  <mi>p</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>p</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p
  </annotation>
 </semantics>
</math>

 that the walk reaches 

<math display="inline" id="Optional_stopping_theorem:22">
 <semantics>
  <mi>m</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>m</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m
  </annotation>
 </semantics>
</math>

 before 

<math display="inline" id="Optional_stopping_theorem:23">
 <semantics>
  <mn>0</mn>
  <annotation-xml encoding="MathML-Content">
   <cn type="integer">0</cn>
  </annotation-xml>
 </semantics>
</math>

 gives 

<math display="inline" id="Optional_stopping_theorem:24">
 <semantics>
  <mrow>
   <mi>p</mi>
   <mo>=</mo>
   <mrow>
    <mi>a</mi>
    <mo>/</mo>
    <mi>m</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>p</ci>
    <apply>
     <divide></divide>
     <ci>a</ci>
     <ci>m</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   p=a/m
  </annotation>
 </semantics>
</math>

.</li>
</ul>
<ul>
<li>Now consider a random walk 

<math display="inline" id="Optional_stopping_theorem:25">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 that starts at 

<math display="inline" id="Optional_stopping_theorem:26">
 <semantics>
  <mn>0</mn>
  <annotation-xml encoding="MathML-Content">
   <cn type="integer">0</cn>
  </annotation-xml>
 </semantics>
</math>

 and stops if it reaches 

<math display="inline" id="Optional_stopping_theorem:27">
 <semantics>
  <mrow>
   <mi mathvariant="normal">‚Äì</mi>
   <mi>m</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>normal-‚Äì</ci>
    <ci>m</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   ‚Äìm
  </annotation>
 </semantics>
</math>

 or 

<math display="inline" id="Optional_stopping_theorem:28">
 <semantics>
  <mrow>
   <mo>+</mo>
   <mi>m</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <plus></plus>
    <ci>m</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   +m
  </annotation>
 </semantics>
</math>

, and use the <mtpl> <em>X</em><sub><em>n</em></sub><sup>2</sup> ‚Äì <em>n</em>}}</mtpl> martingale from the <a href="Martingale_(probability_theory)#Examples_of_martingales" title="wikilink">examples section</a>. If 

<math display="inline" id="Optional_stopping_theorem:29">
 <semantics>
  <mi>œÑ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>œÑ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   œÑ
  </annotation>
 </semantics>
</math>

 is the time at which 

<math display="inline" id="Optional_stopping_theorem:30">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 first reaches 

<math display="inline" id="Optional_stopping_theorem:31">
 <semantics>
  <mrow>
   <mi mathvariant="normal">¬±</mi>
   <mi>m</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>normal-¬±</ci>
    <ci>m</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   ¬±m
  </annotation>
 </semantics>
</math>

, then <mtpl> E[<em>Y</em><sub>0</sub>] {{=}} E[<em>Y<sub>œÑ</sub></em>] {{=}} <em>m</em><sup>2</sup> ‚Äì E[œÑ]}}</mtpl>. This gives <mtpl> <em>m</em><sup>2</sup>}}</mtpl>.</li>
</ul>
<ul>
<li>Care must be taken, however, to ensure that one of the conditions of the theorem hold. For example, suppose the last example had instead used a 'one-sided' stopping time, so that stopping only occurred at 

<math display="inline" id="Optional_stopping_theorem:32">
 <semantics>
  <mrow>
   <mo>+</mo>
   <mi>m</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <plus></plus>
    <ci>m</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   +m
  </annotation>
 </semantics>
</math>

, not at 

<math display="inline" id="Optional_stopping_theorem:33">
 <semantics>
  <mrow>
   <mi mathvariant="normal">‚àí</mi>
   <mi>m</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>normal-‚àí</ci>
    <ci>m</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   ‚àím
  </annotation>
 </semantics>
</math>

. The value of 

<math display="inline" id="Optional_stopping_theorem:34">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 at this stopping time would therefore be 

<math display="inline" id="Optional_stopping_theorem:35">
 <semantics>
  <mi>m</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>m</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m
  </annotation>
 </semantics>
</math>

. Therefore, the expectation value <mtpl></mtpl> must also be 

<math display="inline" id="Optional_stopping_theorem:36">
 <semantics>
  <mi>m</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>m</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m
  </annotation>
 </semantics>
</math>

, seemingly in violation of the theorem which would give <mtpl> 0}}</mtpl>. The failure of the optional stopping theorem shows that all three conditions fail.</li>
</ul>
<h2 id="proof">Proof</h2>

<p>Let <mtpl></mtpl> denote the <a href="stopped_process" title="wikilink">stopped process</a>, it is also a martingale (or a submartingale or supermartingale, respectively). Under condition¬†() or¬†(), the random variable <mtpl></mtpl> is well defined. Under condition¬†() the stopped process <mtpl></mtpl> is bounded, hence by Doob's <a href="martingale_convergence_theorem" title="wikilink">martingale convergence theorem</a> it converges a.s. pointwise to a random variable which we call <mtpl></mtpl>.</p>

<p>If condition¬†() holds, then the stopped process <mtpl></mtpl> is bounded by the constant random variable 

<math display="inline" id="Optional_stopping_theorem:37">
 <semantics>
  <mrow>
   <mi>M</mi>
   <mo>:=</mo>
   <mi>c</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">assign</csymbol>
    <ci>M</ci>
    <ci>c</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   M:=c
  </annotation>
 </semantics>
</math>

. Otherwise, writing the stopped process as</p>

<p>

<math display="block" id="Optional_stopping_theorem:38">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msubsup>
      <mi>X</mi>
      <mi>t</mi>
      <mi>œÑ</mi>
     </msubsup>
     <mo>=</mo>
     <mrow>
      <msub>
       <mi>X</mi>
       <mn>0</mn>
      </msub>
      <mo>+</mo>
      <mrow>
       <munderover>
        <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
        <mrow>
         <mi>s</mi>
         <mo>=</mo>
         <mn>0</mn>
        </mrow>
        <mrow>
         <mrow>
          <mi>œÑ</mi>
          <mi mathvariant="italic">and</mi>
          <mi>t</mi>
         </mrow>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </munderover>
       <mrow>
        <mo stretchy="false">(</mo>
        <mrow>
         <msub>
          <mi>X</mi>
          <mrow>
           <mi>s</mi>
           <mo>+</mo>
           <mn>1</mn>
          </mrow>
         </msub>
         <mo>-</mo>
         <msub>
          <mi>X</mi>
          <mi>s</mi>
         </msub>
        </mrow>
        <mo stretchy="false">)</mo>
       </mrow>
      </mrow>
     </mrow>
    </mrow>
    <mo rspace="12.5pt">,</mo>
    <mrow>
     <mi>t</mi>
     <mo>‚àà</mo>
     <msub>
      <mi>‚Ñï</mi>
      <mn>0</mn>
     </msub>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <ci>t</ci>
      </apply>
      <ci>œÑ</ci>
     </apply>
     <apply>
      <plus></plus>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <cn type="integer">0</cn>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <sum></sum>
         <apply>
          <eq></eq>
          <ci>s</ci>
          <cn type="integer">0</cn>
         </apply>
        </apply>
        <apply>
         <minus></minus>
         <apply>
          <times></times>
          <ci>œÑ</ci>
          <ci>italic- and</ci>
          <ci>t</ci>
         </apply>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <apply>
        <minus></minus>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>X</ci>
         <apply>
          <plus></plus>
          <ci>s</ci>
          <cn type="integer">1</cn>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>X</ci>
         <ci>s</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <in></in>
     <ci>t</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñï</ci>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X_{t}^{\tau}=X_{0}+\sum_{s=0}^{\tau\and t-1}(X_{s+1}-X_{s}),\quad t\in{\mathbb%
{N}}_{0},
  </annotation>
 </semantics>
</math>

</p>

<p>gives <mtpl><em>X</em><sub><em>t</em></sub><sup><em>œÑ</em></sup>{{!}} ‚â§ <em>M</em>}}</mtpl> for all <mtpl></mtpl>, where</p>

<p>

<math display="block" id="Optional_stopping_theorem:39">
 <semantics>
  <mrow>
   <mi>M</mi>
   <mo>:=</mo>
   <mrow>
    <mrow>
     <mo stretchy="false">|</mo>
     <msub>
      <mi>X</mi>
      <mn>0</mn>
     </msub>
     <mo stretchy="false">|</mo>
    </mrow>
    <mo>+</mo>
    <mrow>
     <munderover>
      <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
      <mrow>
       <mi>s</mi>
       <mo>=</mo>
       <mn>0</mn>
      </mrow>
      <mrow>
       <mi>œÑ</mi>
       <mo>-</mo>
       <mn>1</mn>
      </mrow>
     </munderover>
     <mrow>
      <mo stretchy="false">|</mo>
      <mrow>
       <msub>
        <mi>X</mi>
        <mrow>
         <mi>s</mi>
         <mo>+</mo>
         <mn>1</mn>
        </mrow>
       </msub>
       <mo>-</mo>
       <msub>
        <mi>X</mi>
        <mi>s</mi>
       </msub>
      </mrow>
      <mo stretchy="false">|</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mo stretchy="false">|</mo>
     <msub>
      <mi>X</mi>
      <mn>0</mn>
     </msub>
     <mo stretchy="false">|</mo>
    </mrow>
    <mo>+</mo>
    <mrow>
     <munderover>
      <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
      <mrow>
       <mi>s</mi>
       <mo>=</mo>
       <mn>0</mn>
      </mrow>
      <mi mathvariant="normal">‚àû</mi>
     </munderover>
     <mrow>
      <mrow>
       <mo stretchy="false">|</mo>
       <mrow>
        <msub>
         <mi>X</mi>
         <mrow>
          <mi>s</mi>
          <mo>+</mo>
          <mn>1</mn>
         </mrow>
        </msub>
        <mo>-</mo>
        <msub>
         <mi>X</mi>
         <mi>s</mi>
        </msub>
       </mrow>
       <mo stretchy="false">|</mo>
      </mrow>
      <mo>‚ãÖ</mo>
      <msub>
       <mn>ùüè</mn>
       <mrow>
        <mo stretchy="false">{</mo>
        <mi>œÑ</mi>
        <mo>></mo>
        <mi>s</mi>
        <mo stretchy="false">}</mo>
       </mrow>
      </msub>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <csymbol cd="latexml">assign</csymbol>
     <ci>M</ci>
     <apply>
      <plus></plus>
      <apply>
       <abs></abs>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>X</ci>
        <cn type="integer">0</cn>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <sum></sum>
         <apply>
          <eq></eq>
          <ci>s</ci>
          <cn type="integer">0</cn>
         </apply>
        </apply>
        <apply>
         <minus></minus>
         <ci>œÑ</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
       <apply>
        <abs></abs>
        <apply>
         <minus></minus>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>X</ci>
          <apply>
           <plus></plus>
           <ci>s</ci>
           <cn type="integer">1</cn>
          </apply>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <ci>X</ci>
          <ci>s</ci>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <plus></plus>
      <apply>
       <abs></abs>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>X</ci>
        <cn type="integer">0</cn>
       </apply>
      </apply>
      <apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <sum></sum>
         <apply>
          <eq></eq>
          <ci>s</ci>
          <cn type="integer">0</cn>
         </apply>
        </apply>
        <infinity></infinity>
       </apply>
       <apply>
        <ci>normal-‚ãÖ</ci>
        <apply>
         <abs></abs>
         <apply>
          <minus></minus>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>X</ci>
           <apply>
            <plus></plus>
            <ci>s</ci>
            <cn type="integer">1</cn>
           </apply>
          </apply>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>X</ci>
           <ci>s</ci>
          </apply>
         </apply>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <cn type="integer">1</cn>
         <cerror>
          <csymbol cd="ambiguous">fragments</csymbol>
          <ci>normal-{</ci>
          <csymbol cd="unknown">œÑ</csymbol>
          <gt></gt>
          <csymbol cd="unknown">s</csymbol>
          <ci>normal-}</ci>
         </cerror>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   M:=|X_{0}|+\sum_{s=0}^{\tau-1}|X_{s+1}-X_{s}|=|X_{0}|+\sum_{s=0}^{\infty}|X_{s%
+1}-X_{s}|\cdot\mathbf{1}_{\{\tau>s\}}
  </annotation>
 </semantics>
</math>

.</p>

<p>By the <a href="monotone_convergence_theorem" title="wikilink">monotone convergence theorem</a></p>

<p>

<math display="block" id="Optional_stopping_theorem:40">
 <semantics>
  <mrow>
   <mrow>
    <mi>ùîº</mi>
    <mrow>
     <mo stretchy="false">[</mo>
     <mi>M</mi>
     <mo stretchy="false">]</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mi>ùîº</mi>
     <mrow>
      <mo stretchy="false">[</mo>
      <mrow>
       <mo stretchy="false">|</mo>
       <msub>
        <mi>X</mi>
        <mn>0</mn>
       </msub>
       <mo stretchy="false">|</mo>
      </mrow>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
    <mo>+</mo>
    <mrow>
     <munderover>
      <mo largeop="true" movablelimits="false" symmetric="true">‚àë</mo>
      <mrow>
       <mi>s</mi>
       <mo>=</mo>
       <mn>0</mn>
      </mrow>
      <mi mathvariant="normal">‚àû</mi>
     </munderover>
     <mrow>
      <mi>ùîº</mi>
      <mrow>
       <mo maxsize="120%" minsize="120%">[</mo>
       <mrow>
        <mrow>
         <mo stretchy="false">|</mo>
         <mrow>
          <msub>
           <mi>X</mi>
           <mrow>
            <mi>s</mi>
            <mo>+</mo>
            <mn>1</mn>
           </mrow>
          </msub>
          <mo>-</mo>
          <msub>
           <mi>X</mi>
           <mi>s</mi>
          </msub>
         </mrow>
         <mo stretchy="false">|</mo>
        </mrow>
        <mo>‚ãÖ</mo>
        <msub>
         <mn>ùüè</mn>
         <mrow>
          <mo stretchy="false">{</mo>
          <mi>œÑ</mi>
          <mo>></mo>
          <mi>s</mi>
          <mo stretchy="false">}</mo>
         </mrow>
        </msub>
       </mrow>
       <mo maxsize="120%" minsize="120%">]</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>ùîº</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <ci>M</ci>
     </apply>
    </apply>
    <apply>
     <plus></plus>
     <apply>
      <times></times>
      <ci>ùîº</ci>
      <apply>
       <csymbol cd="latexml">delimited-[]</csymbol>
       <apply>
        <abs></abs>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>X</ci>
         <cn type="integer">0</cn>
        </apply>
       </apply>
      </apply>
     </apply>
     <apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <sum></sum>
        <apply>
         <eq></eq>
         <ci>s</ci>
         <cn type="integer">0</cn>
        </apply>
       </apply>
       <infinity></infinity>
      </apply>
      <apply>
       <times></times>
       <ci>ùîº</ci>
       <apply>
        <csymbol cd="latexml">delimited-[]</csymbol>
        <apply>
         <ci>normal-‚ãÖ</ci>
         <apply>
          <abs></abs>
          <apply>
           <minus></minus>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>X</ci>
            <apply>
             <plus></plus>
             <ci>s</ci>
             <cn type="integer">1</cn>
            </apply>
           </apply>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>X</ci>
            <ci>s</ci>
           </apply>
          </apply>
         </apply>
         <apply>
          <csymbol cd="ambiguous">subscript</csymbol>
          <cn type="integer">1</cn>
          <cerror>
           <csymbol cd="ambiguous">fragments</csymbol>
           <ci>normal-{</ci>
           <csymbol cd="unknown">œÑ</csymbol>
           <gt></gt>
           <csymbol cd="unknown">s</csymbol>
           <ci>normal-}</ci>
          </cerror>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[M]=\mathbb{E}[|X_{0}|]+\sum_{s=0}^{\infty}\mathbb{E}\bigl[|X_{s+1}-%
X_{s}|\cdot\mathbf{1}_{\{\tau>s\}}\bigr]
  </annotation>
 </semantics>
</math>

.</p>

<p>If condition¬†() holds, then this series only has a finite number of non-zero terms, hence 

<math display="inline" id="Optional_stopping_theorem:41">
 <semantics>
  <mi>M</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>M</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   M
  </annotation>
 </semantics>
</math>

 is integrable.</p>

<p>If condition¬†() holds, then we continue by inserting a <a href="conditional_expectation" title="wikilink">conditional expectation</a> and using that the event } is known at time 

<math display="inline" id="Optional_stopping_theorem:42">
 <semantics>
  <mi>s</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>s</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   s
  </annotation>
 </semantics>
</math>

 (note that 

<math display="inline" id="Optional_stopping_theorem:43">
 <semantics>
  <mi>œÑ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>œÑ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   œÑ
  </annotation>
 </semantics>
</math>

 is assumed to be a stopping time with respect to the filtration), hence</p>

<p>

<math display="inline" id="Optional_stopping_theorem:44">
 <semantics>
  <mrow>
   <mi>ùîº</mi>
   <mrow>
    <mo stretchy="false">[</mo>
    <mi>M</mi>
    <mo stretchy="false">]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>ùîº</ci>
    <apply>
     <csymbol cd="latexml">delimited-[]</csymbol>
     <ci>M</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \displaystyle\mathbb{E}[M]
  </annotation>
 </semantics>
</math>


</p>

<p>where a <a href="Expected_value#Discrete_distribution_taking_only_non-negative_integer_values" title="wikilink">representation of the expected value of non-negative integer-valued random variables</a> is used for the last equality.</p>

<p>Therefore, under any one of the three conditions in the theorem, the stopped process is dominated by an integrable random variable 

<math display="inline" id="Optional_stopping_theorem:45">
 <semantics>
  <mi>M</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>M</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   M
  </annotation>
 </semantics>
</math>

. Since the stopped process <mtpl></mtpl> converges almost surely to <mtpl></mtpl>‚Äâ, the <a href="dominated_convergence_theorem" title="wikilink">dominated convergence theorem</a> implies</p>

<p>

<math display="block" id="Optional_stopping_theorem:46">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>ùîº</mi>
     <mrow>
      <mo stretchy="false">[</mo>
      <msub>
       <mi>X</mi>
       <mi>œÑ</mi>
      </msub>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <munder>
      <mo movablelimits="false">lim</mo>
      <mrow>
       <mi>t</mi>
       <mo>‚Üí</mo>
       <mi mathvariant="normal">‚àû</mi>
      </mrow>
     </munder>
     <mrow>
      <mi>ùîº</mi>
      <mrow>
       <mo stretchy="false">[</mo>
       <msubsup>
        <mi>X</mi>
        <mi>t</mi>
        <mi>œÑ</mi>
       </msubsup>
       <mo stretchy="false">]</mo>
      </mrow>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>ùîº</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <ci>œÑ</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <limit></limit>
      <apply>
       <ci>normal-‚Üí</ci>
       <ci>t</ci>
       <infinity></infinity>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>ùîº</ci>
      <apply>
       <csymbol cd="latexml">delimited-[]</csymbol>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>X</ci>
         <ci>t</ci>
        </apply>
        <ci>œÑ</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[X_{\tau}]=\lim_{t\to\infty}\mathbb{E}[X_{t}^{\tau}].
  </annotation>
 </semantics>
</math>

</p>

<p>By the martingale property of the stopped process,</p>

<p>

<math display="block" id="Optional_stopping_theorem:47">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mrow>
      <mi>ùîº</mi>
      <mrow>
       <mo stretchy="false">[</mo>
       <msubsup>
        <mi>X</mi>
        <mi>t</mi>
        <mi>œÑ</mi>
       </msubsup>
       <mo stretchy="false">]</mo>
      </mrow>
     </mrow>
     <mo>=</mo>
     <mrow>
      <mi>ùîº</mi>
      <mrow>
       <mo stretchy="false">[</mo>
       <msub>
        <mi>X</mi>
        <mn>0</mn>
       </msub>
       <mo stretchy="false">]</mo>
      </mrow>
     </mrow>
    </mrow>
    <mo rspace="12.5pt">,</mo>
    <mrow>
     <mi>t</mi>
     <mo>‚àà</mo>
     <msub>
      <mi>‚Ñï</mi>
      <mn>0</mn>
     </msub>
    </mrow>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">formulae-sequence</csymbol>
    <apply>
     <eq></eq>
     <apply>
      <times></times>
      <ci>ùîº</ci>
      <apply>
       <csymbol cd="latexml">delimited-[]</csymbol>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>X</ci>
         <ci>t</ci>
        </apply>
        <ci>œÑ</ci>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>ùîº</ci>
      <apply>
       <csymbol cd="latexml">delimited-[]</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>X</ci>
        <cn type="integer">0</cn>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <in></in>
     <ci>t</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>‚Ñï</ci>
      <cn type="integer">0</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[X_{t}^{\tau}]=\mathbb{E}[X_{0}],\quad t\in{\mathbb{N}}_{0},
  </annotation>
 </semantics>
</math>

</p>

<p>hence</p>

<p>

<math display="block" id="Optional_stopping_theorem:48">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mi>ùîº</mi>
     <mrow>
      <mo stretchy="false">[</mo>
      <msub>
       <mi>X</mi>
       <mi>œÑ</mi>
      </msub>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <mi>ùîº</mi>
     <mrow>
      <mo stretchy="false">[</mo>
      <msub>
       <mi>X</mi>
       <mn>0</mn>
      </msub>
      <mo stretchy="false">]</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>ùîº</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <ci>œÑ</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <ci>ùîº</ci>
     <apply>
      <csymbol cd="latexml">delimited-[]</csymbol>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>X</ci>
       <cn type="integer">0</cn>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbb{E}[X_{\tau}]=\mathbb{E}[X_{0}].
  </annotation>
 </semantics>
</math>

</p>

<p>Similarly, if 

<math display="inline" id="Optional_stopping_theorem:49">
 <semantics>
  <mi>X</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>X</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   X
  </annotation>
 </semantics>
</math>

 is a submartingale or supermartingale, respectively, change the equality in the last two formulas to the appropriate inequality.</p>
<h2 id="references">References</h2>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://math.nyu.edu/~sheff/martingalenote.pdf">Doob's Optional Stopping Theorem</a></li>
</ul>

<p>"</p>

<p><a href="Category:Probability_theorems" title="wikilink">Category:Probability theorems</a> <a href="Category:Statistical_theorems" title="wikilink">Category:Statistical theorems</a> <a href="Category:Articles_containing_proofs" title="wikilink">Category:Articles containing proofs</a> <a href="Category:Martingale_theory" title="wikilink">Category:Martingale theory</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a class="uri" href="http://www.scribd.com/doc/28125042/Unit-Betting-System">http://www.scribd.com/doc/28125042/Unit-Betting-System</a><a href="#fnref1">‚Ü©</a></li>
</ol>
</section>
</body>
</html>
