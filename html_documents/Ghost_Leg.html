<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1173">Ghost Leg</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Ghost Leg</h1>
<hr/>

<p> <strong>Ghost Leg</strong> (), known in Japan as <strong><mtpl></mtpl></strong> or in Korea as <strong>Sadalitagi</strong> (사다리타기, literally "ladder climbing"), is a method of lottery designed to create random pairings between two sets of any number of things, as long as the number of elements in each set is the same. This is often used to distribute things among people, where the number of things distributed is the same as the number of people. For instance, chores or prizes could be assigned fairly and randomly this way.</p>

<p>It consists of vertical lines with horizontal lines connecting two adjacent vertical lines scattered randomly along their length; the horizontal lines are called "legs". The number of vertical lines equals the number of people playing, and at the bottom of each line there is an item - a thing that will be paired with a player. The general rule for playing this game is: choose a line on the top, and follow this line downwards. When a horizontal line is encountered, follow it to get to another vertical line and continue downwards. Repeat this procedure until reaching the end of the vertical line. Then the player is given the thing written at the bottom of the line.</p>

<p>If the elements written above the Ghost Leg are treated as a <a class="uri" href="sequence" title="wikilink">sequence</a>, and after the Ghost Leg is used, the same elements are written at the bottom, then the starting <a class="uri" href="sequence" title="wikilink">sequence</a> has been transformed to another <a class="uri" href="permutation" title="wikilink">permutation</a>. Hence, Ghost Leg can be treated as a kind of permuting operator.</p>
<h2 id="process">Process</h2>

<p>As an example, consider assigning roles in a play to actors.</p>
<ol>
<li>To start with, the two sets are enumerated horizontally across a board. The actors' names would go on top, and the roles on the bottom. Then, vertical lines are drawn connecting each actor with the role directly below it.</li>
<li>The names of the actors and/or roles are then concealed so that people do not know which actor is on which line, or which role is on which line.</li>
<li>Next, each actor adds a leg to the board. Each leg must connect two adjacent vertical lines, and must not touch any other horizontal line.</li>
<li>Once this is done, a path is traced from top of each vertical line to the bottom. As you follow the line down, if you come across a leg, you must follow it to the adjacent vertical line on the left or right, then resume tracing down. You continue until you reach the bottom of a vertical line, and the top item you started from is now paired with the bottom item you ended on.</li>
</ol>

<p>Another process involves creating the ladder beforehand, then concealing it. Then people take turns choosing a path to start from at the top. If no part of the amidakuji is concealed, then it is possible to fix the system so that you are guaranteed to get a certain pairing, thus defeating the idea of random chance.</p>
<h2 id="mathematics">Mathematics</h2>

<p>Part of the appeal for this game is that, unlike random chance games like <a href="rock,_paper,_scissors" title="wikilink">rock, paper, scissors</a>, amidakuji will always create a 1:1 correspondence, and can handle arbitrary numbers of pairings (although pairing sets with only two items each would be fairly boring). It is guaranteed that two items at the top will never have the same corresponding item at the bottom, nor will any item on the bottom ever lack a corresponding item at the top.</p>

<p>It also works regardless of how many horizontal lines are added. Each person could add one, two, three, or any number of lines, and the 1:1 correspondence would remain.</p>

<p>One way of realizing how this works is to consider the analogy of coins in cups. You have <em>n</em> coins in <em>n</em> cups, representing the items at the bottom of the amidakuji. Then, each leg that is added represents swapping the position of two adjacent cups. Thus, it is obvious that in the end there will still be <em>n</em> cups, and each cup will have one coin, regardless of how many swaps you perform.</p>
<h2 id="properties">Properties</h2>
<h3 id="permutation">Permutation</h3>

<p>A Ghost Leg transforms an input sequence into an output sequence with the same number of elements with (possibly) different order. Thus, it can be regarded a permutation of <em>n</em> symbols, where <em>n</em> is the number of vertical lines in the Ghost Leg.,<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> hence it can be represented by the corresponding <a href="permutation_matrix" title="wikilink">permutation matrix</a>.</p>
<h3 id="periodicity">Periodicity</h3>

<p>Applying a Ghost Leg a finite number of times to an input sequence eventually generates an output sequence identical to the original input sequence.</p>

<p>i.e. If <strong>M</strong> is a matrix representing a particular Ghost Leg, then <strong>M</strong><sup><em>n</em></sup>=<strong>I</strong> for some finite <em>n</em>.</p>
<h3 id="reversibility">Reversibility</h3>

<p>For any Ghost Leg with matrix representation <strong>M</strong>, there exists a Ghost Leg with representation <strong>M</strong><sup>−1</sup>, such that <strong>M</strong> <strong>M</strong><sup>−1</sup>=<strong>I</strong></p>
<h3 id="oddeven-property-of-permutation">Odd/Even property of permutation</h3>

<p>As each leg exchanges the two neighboring elements at its ends, the number of legs indicates the <a href="Parity_of_a_permutation" title="wikilink">odd/even permutation</a> property of the Ghost Leg. An odd number of legs is represents an odd permutation, and an even number of legs gives an even permutation.</p>
<h3 id="infinite-ghost-legs-with-same-permutation">Infinite Ghost Legs with same permutation</h3>

<p>It is possible to express every permutation as a Ghost Leg, but the expression is not one-to-one, i.e. a particular permutation does not correspond to a unique Ghost Leg. An infinite number of Ghost Legs represents the same permutation.</p>
<h2 id="prime">Prime</h2>

<p>As there are an infinite number of Ghost Legs representing a particular permutation, it is obvious those Ghost Legs have a kind of equivalence. Among those equivalent Ghost Legs, the one(ones) which have smallest number of legs are called Prime.</p>
<h3 id="bubble-sort-and-highest-simplicity">Bubble sort and highest simplicity</h3>

<p>A Ghost Leg can be constructed arbitrarily, but such a Ghost Leg is not necessarily prime. It can be proven that only those Ghost Legs constructed by <a href="bubble_sort" title="wikilink">bubble sort</a> contains the least number of legs, and hence is prime. This is equivalent to saying that bubble sort performs the minimum number of adjacent exchanges to sort a sequence.</p>
<h3 id="maximum-number-of-legs-of-prime">Maximum number of legs of prime</h3>

<p>For a permutation with <em>n</em> elements, the maximum number of neighbor exchanging = 

<math display="inline" id="Ghost_Leg:0">
<semantics>
<mfrac>
<mrow>
<mi>n</mi>
<mrow>
<mo stretchy="false">(</mo>
<mrow>
<mi>n</mi>
<mo>-</mo>
<mn>1</mn>
</mrow>
<mo stretchy="false">)</mo>
</mrow>
</mrow>
<mn>2</mn>
</mfrac>
<annotation-xml encoding="MathML-Content">
<apply>
<divide></divide>
<apply>
<times></times>
<ci>n</ci>
<apply>
<minus></minus>
<ci>n</ci>
<cn type="integer">1</cn>
</apply>
</apply>
<cn type="integer">2</cn>
</apply>
</annotation-xml>
<annotation encoding="application/x-tex">
   \frac{n(n-1)}{2}
  </annotation>
</semantics>
</math>
</p>

<p>In the same way, the maximum number of legs in a prime with <em>n</em> tracks = 

<math display="inline" id="Ghost_Leg:1">
<semantics>
<mfrac>
<mrow>
<mi>n</mi>
<mrow>
<mo stretchy="false">(</mo>
<mrow>
<mi>n</mi>
<mo>-</mo>
<mn>1</mn>
</mrow>
<mo stretchy="false">)</mo>
</mrow>
</mrow>
<mn>2</mn>
</mfrac>
<annotation-xml encoding="MathML-Content">
<apply>
<divide></divide>
<apply>
<times></times>
<ci>n</ci>
<apply>
<minus></minus>
<ci>n</ci>
<cn type="integer">1</cn>
</apply>
</apply>
<cn type="integer">2</cn>
</apply>
</annotation-xml>
<annotation encoding="application/x-tex">
   \frac{n(n-1)}{2}
  </annotation>
</semantics>
</math>
</p>
<h3 id="bubblization">Bubblization</h3>

<p>For an arbitrary Ghost Leg, it is possible to transform it into prime by a procedure called <strong>bubblization</strong>. When bubblization operates, the following two identities are repeatedly applied in order to move and eliminate "useless" legs.</p>
<ol>
<li> ⇒ </li>
<li> ⇒ </li>
</ol>

<p>When the two identities cannot be applied any more, the ghost leg is proved to be exactly the same as the Ghost Leg constructed by <a href="bubble_sort" title="wikilink">bubble sort</a>, thus bubblization can reduce Ghost Legs to primes.</p>
<h2 id="randomness">Randomness</h2>

<p>Since, as mentioned above, an odd number of legs produces an <a href="Parity_of_a_permutation" title="wikilink">odd permutation</a> and an even number of legs produces an even permutation, a given number of legs can produce a maximum of half the total possible permutations (less than half if the number of legs is small relative to the number of tracks, reaching half as the number of legs increases beyond a certain critical number).</p>

<p>If the legs are drawn randomly (for reasonable definitions of "drawn randomly"), the evenness of the distribution of permutations increases with the number of legs. If the number of legs is small relative to number of tracks, the probabilities of different attainable permutations may vary greatly; for large numbers of legs the probabilities of different attainable permutations approach equality.</p>
<h2 id="games">Games</h2>

<p>An early <a href="Sega_Master_System" title="wikilink">Sega Master System</a> game called <em><a href="Psycho_Fox" title="wikilink">Psycho Fox</a></em> uses the mechanics of an Amidakuji board as a means to bet a bag of coins on a chance at a prize at the top of the screen. Later <a href="Sega_Genesis" title="wikilink">Sega Genesis</a> games based on the same game concept <a class="uri" href="DecapAttack" title="wikilink">DecapAttack</a> and its Japanese predecessor "Magical Hat no Buttobi Tabo! Daibōken" follow the same game mechanics, including the Amidakuji bonus levels.</p>

<p><a class="uri" href="Konami" title="wikilink">Konami</a> produced an arcade game named <em><a class="uri" href="Amidar" title="wikilink">Amidar</a></em> which uses an Amidakuji board and rules as a setting for a <em><a class="uri" href="Pac-Man" title="wikilink">Pac-Man</a></em>/<em><a class="uri" href="Qix" title="wikilink">Qix</a></em>-like game.</p>

<p><em><a href="New_Super_Mario_Bros." title="wikilink">New Super Mario Bros.</a></em> and <em><a href="Wario:_Master_of_Disguise" title="wikilink">Wario: Master of Disguise</a></em> feature an Amidakuji-style minigame in which the player uses the <a href="Nintendo_DS" title="wikilink">stylus</a> to trace lines that will lead the character down the right path.</p>

<p>In <em><a href="Mario_Party" title="wikilink">Mario Party</a></em> there is a mini game where one of the four players pours money into an Amidakuji made out of pipes. The goal is to try to choose the path leading to the character controlled by the player.</p>

<p>The BoSpider in <em><a href="Mega_Man_X_(video_game)" title="wikilink">Mega Man X</a></em> and <em><a href="Mega_Man_X_(video_game)#Mega_Man_Maverick_Hunter_X" title="wikilink">Maverick Hunter X</a></em> descends onto the player via an Amidakuji path.</p>

<p>In <em><a href="WarioWare,_Inc.:_Mega_Microgames!" title="wikilink">WarioWare, Inc.: Mega Microgames!</a></em>, the microgame "Noodle Cup" features Amidakuji-style gameplay.</p>

<p>Azalea Gym in <a href="Pokémon_HeartGold_and_SoulSilver" title="wikilink"><em>Pokémon HeartGold</em> and <em>SoulSilver</em></a> was redesigned with an Amidakuji-based system of carts to cross. The correct choices lead to the gym leader; the wrong ones lead to other trainers to fight.</p>
<h2 id="notes">Notes</h2>
<h2 id="external-links">External links</h2>
<ul>
<li><a class="uri" href="http://www.webcitation.org/query?url=http://www.geocities.com/Athens/Acropolis/7247/amidakuji.html&amp;date">http://www.webcitation.org/query?url=http://www.geocities.com/Athens/Acropolis/7247/amidakuji.html&amp;date;</a>;=2009-10-25+05:45:20</li>
<li><a href="http://www2.edc.org/makingmath/studentWork/amidaKuji/AmidaKujiByDavidSenft.pdf">Ladders: A Research Paper by David Senft</a> (PDF)</li>
<li>Man-Kit Ho, Hoi-Kwan Lau, Ting-Fai Man, Shek Yeung (2012). "Ghost Leg", <em>Hang Lung Mathematics Awards Collection of Winning Papers, 2004</em>. International Press. ISBN 978-1-57146-254-1.</li>
</ul>

<p>"</p>

<p><a href="Category:Mathematical_games" title="wikilink">Category:Mathematical games</a> <a class="uri" href="Category:Permutations" title="wikilink">Category:Permutations</a> <a href="Category:Japanese_games" title="wikilink">Category:Japanese games</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">Ho 2012, p.31<a href="#fnref1">↩</a></li>
</ol>
</section>
</body>
</html>
