<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1340">Continuation</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Continuation</h1>
<style>
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
<style>
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</body></html>
<body>
<hr/>

<p>In <a href="computer_science" title="wikilink">computer science</a> and <a href="computer_programming" title="wikilink">computer programming</a>, a <strong>continuation</strong> is an <a href="Abstraction_(computer_science)" title="wikilink">abstract representation</a> of the <a href="Control_flow" title="wikilink">control state</a> of a <a href="computer_program" title="wikilink">computer program</a>. A continuation <a href="Reification_(computer_science)" title="wikilink">reifies</a> the program control state, i.e. the continuation is a data structure that represents the computational process at a given point in the process's execution; the created data structure can be accessed by the programming language, instead of being hidden in the <a href="Run-time_system" title="wikilink">runtime environment</a>. Continuations are useful for encoding other control mechanisms in programming languages such as <a href="Exception_handling" title="wikilink">exceptions</a>, <a href="Generator_(computer_science)" title="wikilink">generators</a>, <a href="coroutine" title="wikilink">coroutines</a>, and so on.</p>

<p>The "<strong>current continuation</strong>" or "continuation of the computation step" is the continuation that, from the perspective of running code, would be derived from the current point in a program's execution. The term <em>continuations</em> can also be used to refer to <strong>first-class continuations</strong>, which are constructs that give a <a href="programming_language" title="wikilink">programming language</a> the ability to save the execution state at any point and return to that point at a later point in the program, possibly multiple times.</p>
<h2 id="history">History</h2>

<p>The earliest description of continuations was made by <a href="Adriaan_van_Wijngaarden" title="wikilink">Adriaan van Wijngaarden</a> in September 1964. Wijngaarden spoke at the IFIP Working Conference on Formal Language Description Languages held in Baden bei Wien, Austria. As part of a formulation for an <a href="Algol_60" title="wikilink">Algol 60</a> preprocessor, he called for a transformation of proper procedures into continuation-passing style.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>

<p><a href="Christopher_Strachey" title="wikilink">Christopher Strachey</a>, <a href="Christopher_P._Wadsworth" title="wikilink">Christopher P. Wadsworth</a> and <a href="John_C._Reynolds" title="wikilink">John C. Reynolds</a> brought the term <em>continuation</em> into prominence in their work in the field of <a href="denotational_semantics" title="wikilink">denotational semantics</a> that makes extensive use of continuations to allow sequential programs to be analysed in terms of <a href="functional_programming" title="wikilink">functional programming</a> semantics.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></p>

<p><a href="Steve_Russell" title="wikilink">Steve Russell</a><a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> invented the continuation in his second <a href="Lisp_(programming_language)" title="wikilink">Lisp</a> implementation for the <a href="IBM_704" title="wikilink">IBM 704</a>, though he did not name it.<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></p>

<p>A complete history of the discovery of continuations is given by .</p>
<h2 id="first-class-continuations">First-class continuations</h2>

<p>First-class continuations are a language's ability to completely control the execution order of instructions. They can be used to jump to a function that produced the call to the current function, or to a function that has previously exited. One can think of a first-class continuation as saving the <em>execution</em> state of the program. It is important to note that true first-class continuations do not save program data – unlike a <a href="process_image" title="wikilink">process image</a> – only the execution context. This is illustrated by the "continuation sandwich" description:</p>
<blockquote>

<p><em>Say you're in the kitchen in front of the refrigerator, thinking about a sandwich. You take a continuation right there and stick it in your pocket. Then you get some turkey and bread out of the refrigerator and make yourself a sandwich, which is now sitting on the counter. You invoke the continuation in your pocket, and you find yourself standing in front of the refrigerator again, thinking about a sandwich. But fortunately, there's a sandwich on the counter, and all the materials used to make it are gone. So you eat it. :-)</em><a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a></p>
</blockquote>

<p>In this description, the sandwich is part of the program <em>data</em> (e.g., an object on the heap), and rather than calling a "make sandwich" routine and then returning, the person called a "make sandwich with current continuation" routine, which creates the sandwich and then continues where execution left off.</p>

<p><a href="Scheme_(programming_language)" title="wikilink">Scheme</a> was the first full production system, providing first "catch"<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a> and then <a href="call-with-current-continuation" title="wikilink">call/cc</a>. Bruce Duba introduced call/cc into <a href="Standard_ML" title="wikilink">SML</a>.</p>

<p>Continuations are also used in models of computation including <a href="denotational_semantics" title="wikilink">denotational semantics</a>, the <a href="Actor_model" title="wikilink">Actor model</a>, <a href="process_calculi" title="wikilink">process calculi</a>, and <a href="lambda_calculus" title="wikilink">lambda calculus</a>. These models rely on programmers or semantics engineers to write mathematical functions in the so-called <a href="continuation-passing_style" title="wikilink">continuation-passing style</a>. This means that each function consumes a function that represents the rest of the computation relative to this function call. To return a value, the function calls this "continuation function" with a return value; to abort the computation it returns a value.</p>

<p>Functional programmers who write their programs in <a href="continuation-passing_style" title="wikilink">continuation-passing style</a> gain the expressive power to manipulate the flow of control in arbitrary ways. The cost is that they must maintain the invariants of control and continuations by hand, which is a highly complex undertaking.</p>
<h3 id="uses">Uses</h3>

<p>Continuations simplify and clarify the implementation of several common <a href="software_design_pattern" title="wikilink">design patterns</a>, including <a href="coroutine" title="wikilink">coroutines</a>/<a href="green_thread" title="wikilink">green threads</a> and <a href="exception_handling" title="wikilink">exception handling</a>, by providing the basic, low-level primitive which unifies these seemingly unconnected patterns. Continuations can provide elegant solutions to some difficult high-level problems, like programming a web server that supports multiple pages, accessed by the use of the forward and back buttons and by following links. The <a class="uri" href="Smalltalk" title="wikilink">Smalltalk</a> <a href="Seaside_(software)" title="wikilink">Seaside</a> web framework uses continuations to great effect, allowing one to program the web server in procedural style, by switching continuations when switching pages.</p>

<p>More complex constructs for which <em>"continuations provide an elegant description"</em><a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a> also exist. For example, in <a href="C_(programming_language)" title="wikilink">C</a>, <a class="uri" href="longjmp" title="wikilink">longjmp</a> can be used to jump from the middle of one <a href="Function_(computer_science)" title="wikilink">function</a> to another, provided the second function lies deeper in the stack (if it is waiting for the first function to return, possibly among others). Other more complex examples include <a href="coroutine" title="wikilink">coroutines</a> in <a href="Simula" title="wikilink">Simula 67</a>, <a href="Lua_(programming_language)" title="wikilink">Lua</a>, and <a class="uri" href="Perl" title="wikilink">Perl</a>; tasklets in <a href="Stackless_Python" title="wikilink">Stackless Python</a>; <a href="Generator_(computer_science)" title="wikilink">generators</a> in <a href="Icon_(programming_language)#Generators" title="wikilink">Icon</a> and <a href="Python_(programming_language)" title="wikilink">Python</a>; continuations in <a href="Scala_(programming_language)" title="wikilink">Scala</a> (starting in 2.8); <a href="Fiber_(computer_science)" title="wikilink">fibers</a> in <a href="Ruby_(programming_language)" title="wikilink">Ruby</a> (starting in 1.9.1); the <a class="uri" href="backtracking" title="wikilink">backtracking</a> mechanism in <a class="uri" href="Prolog" title="wikilink">Prolog</a>; <a href="Monad_(functional_programming)" title="wikilink">monads</a> in <a href="functional_programming" title="wikilink">functional programming</a>; and <a href="Thread_(computer_science)" title="wikilink">threads</a>.</p>
<h3 id="examples">Examples</h3>

<p>The <a href="Scheme_(programming_language)" title="wikilink">Scheme</a> programming language includes the control operator <a class="uri" href="call-with-current-continuation" title="wikilink">call-with-current-continuation</a> (abbreviated as: call/cc) with which a Scheme program can manipulate the flow of control:</p>
<div class="sourceCode"><pre class="sourceCode scheme"><code class="sourceCode scheme"> (<span class="kw">define</span><span class="fu"> the-continuation </span><span class="dv">#f</span>)

 (<span class="kw">define</span><span class="fu"> </span>(test)
   (<span class="kw">let</span> ((i <span class="dv">0</span>))
     <span class="co">; call/cc calls its first function argument, passing</span>
     <span class="co">; a continuation variable representing this point in</span>
     <span class="co">; the program as the argument to that function.</span>
     <span class="co">;</span>
     <span class="co">; In this case, the function argument assigns that</span>
     <span class="co">; continuation to the variable the-continuation.</span>
     <span class="co">;</span>
     (<span class="kw">call/cc</span> (<span class="kw">lambda</span> (k) (set! the-continuation k)))
     <span class="co">;</span>
     <span class="co">; The next time the-continuation is called, we start here.</span>
     (set! i (<span class="kw">+</span> i <span class="dv">1</span>))
     i))</code></pre></div>

<p>Defines a function <code>test</code> that sets <code>the-continuation</code> to the future execution state of itself:</p>
<div class="sourceCode"><pre class="sourceCode scheme"><code class="sourceCode scheme"> <span class="kw">&gt;</span> (test)
 <span class="dv">1</span>
 <span class="kw">&gt;</span> (the-continuation)
 <span class="dv">2</span>
 <span class="kw">&gt;</span> (the-continuation)
 <span class="dv">3</span>
 <span class="kw">&gt;</span> <span class="co">; stores the current continuation (which will print 4 next) away</span>
 <span class="kw">&gt;</span> (<span class="kw">define</span><span class="fu"> another-continuation </span>the-continuation)
 <span class="kw">&gt;</span> (test) <span class="co">; resets the-continuation</span>
 <span class="dv">1</span>
 <span class="kw">&gt;</span> (the-continuation)
 <span class="dv">2</span>
 <span class="kw">&gt;</span> (another-continuation) <span class="co">; uses the previously stored continuation</span>
 <span class="dv">4</span></code></pre></div>

<p>For a gentler introduction to this mechanism, see <a class="uri" href="call-with-current-continuation" title="wikilink">call-with-current-continuation</a>.</p>
<h4 id="coroutines">Coroutines</h4>

<p>This example shows a possible usage of continuations to implement <a class="uri" href="coroutines" title="wikilink">coroutines</a> as separate threads.<a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a></p>
<div class="sourceCode"><pre class="sourceCode scheme"><code class="sourceCode scheme"> <span class="co">;;; A naive queue for thread scheduling.</span>
 <span class="co">;;; It holds a list of continuations "waiting to run".</span>

   (<span class="kw">define</span><span class="fu"> *queue* </span>'())

   (<span class="kw">define</span><span class="fu"> </span>(empty-queue?)
     (<span class="kw">null?</span> *queue*))

   (<span class="kw">define</span><span class="fu"> </span>(enqueue x)
     (set! *queue* (<span class="kw">append</span> *queue* (<span class="kw">list</span> x))))

   (<span class="kw">define</span><span class="fu"> </span>(dequeue)
     (<span class="kw">let</span> ((x (<span class="kw">car</span> *queue*)))
       (set! *queue* (<span class="kw">cdr</span> *queue*))
       x))

   <span class="co">;;; This starts a new thread running (proc).</span>

   (<span class="kw">define</span><span class="fu"> </span>(fork proc)
     (<span class="kw">call/cc</span>
      (<span class="kw">lambda</span> (k)
        (enqueue k)
        (proc))))

   <span class="co">;;; This yields the processor to another thread, if there is one.</span>

   (<span class="kw">define</span><span class="fu"> </span>(yield)
     (<span class="kw">call/cc</span>
      (<span class="kw">lambda</span> (k)
        (enqueue k)
        ((dequeue)))))

   <span class="co">;;; This terminates the current thread, or the entire program</span>
   <span class="co">;;; if there are no other threads left.</span>

   (<span class="kw">define</span><span class="fu"> </span>(thread-exit)
     (<span class="kw">if</span> (empty-queue?)
         (exit)
         ((dequeue))))</code></pre></div>

<p>The functions defined above allow for defining and executing threads through <a href="Computer_multitasking#Cooperative_multitasking" title="wikilink">cooperative multitasking</a>, i.e. threads that yield control to the next one in a queue:</p>
<div class="sourceCode"><pre class="sourceCode scheme"><code class="sourceCode scheme">   <span class="co">;;; The body of some typical Scheme thread that does stuff:</span>

   (<span class="kw">define</span><span class="fu"> </span>(do-stuff-n-print str)
     (<span class="kw">lambda</span> ()
       (<span class="kw">let</span> loop ((n <span class="dv">0</span>))
         (format <span class="dv">#t</span> <span class="st">"~A ~A\n"</span> str n)
         (yield)
         (loop (<span class="dv">1</span>+ n)))))

   <span class="co">;;; Create two threads, and start them running.</span>
   (fork (do-stuff-n-print <span class="st">"This is AAA"</span>))
   (fork (do-stuff-n-print <span class="st">"Hello from BBB"</span>))
   (thread-exit)</code></pre></div>

<p>The previous code will produce this output:</p>

<p><code> This is AAA 0</code><br/>
<code> Hello from BBB 0</code><br/>
<code> This is AAA 1</code><br/>
<code> Hello from BBB 1</code><br/>
<code> This is AAA 2</code><br/>
<code> Hello from BBB 2</code><br/>
<code> ...</code></p>
<h3 id="implementation">Implementation</h3>

<p>A program must allocate space in memory for the variables its functions use. Most programming languages use a <a href="call_stack" title="wikilink">call stack</a> for storing the variables needed because it allows for fast and simple allocating and automatic deallocation of memory. Other programming languages use a <a href="Dynamic_memory_allocation" title="wikilink">heap</a> for this, which allows for flexibility at a higher cost for allocating and deallocating memory. Both of these implementations have benefits and drawbacks in the context of continuations.<a class="footnoteRef" href="#fn9" id="fnref9"><sup>9</sup></a></p>
<h3 id="programming-language-support">Programming language support</h3>

<p>Many programming languages exhibit first-class continuations under various names; specifically:</p>
<ul>
<li><a href="Common_Lisp" title="wikilink">Common Lisp</a>: <a href="http://common-lisp.net/project/cl-cont/">cl-cont</a>. One can also use custom macros</li>
<li><a href="C_Sharp_(programming_language)" title="wikilink">C#</a> / <a class="uri" href="VB.NET" title="wikilink">VB.NET</a>: <code>async</code> and <code>await</code>: “sign up the rest of method as the continuation, and then return to your caller immediately; the task will invoke the continuation when it completes.” <a href="http://msdn.microsoft.com/en-us/vstudio/gg316360">Asynchronous Programming for C#</a></li>
<li><a href="Java_(programming_language)" title="wikilink">Java</a>: <a href="http://lightwolf.sourceforge.net/index.html">Lightwolf</a></li>
<li><a href="Rhino_(JavaScript_engine)" title="wikilink">JavaScript Rhino</a> : <code>Continuation</code></li>
<li><a href="Factor_(programming_language)" title="wikilink">Factor</a>: <code>callcc0</code> and <code>callcc1</code></li>
<li><a href="Haskell_(programming_language)" title="wikilink">Haskell</a>: The Continuation Monad in <code>[http://hackage.haskell.org/packages/archive/mtl/2.0.1.0/doc/html/Control-Monad-Cont.html Control.Monad.Cont]</code></li>
<li><a class="uri" href="Haxe" title="wikilink">Haxe</a>: <a href="https://github.com/Atry/haxe-continuation">haxe-continuation</a></li>
<li><a href="Icon_(programming_language)" title="wikilink">Icon</a>, <a href="Unicon_(programming_language)" title="wikilink">Unicon</a> : <code>create, suspend, @</code> operator: coexpressions</li>
<li><a href="Parrot_virtual_machine" title="wikilink">Parrot</a>: <code>Continuation</code> PMC; uses <a href="continuation-passing_style" title="wikilink">continuation-passing style</a> for all control flow</li>
<li><a class="uri" href="Perl" title="wikilink">Perl</a>: <a href="https://metacpan.org/module/Coro">Coro</a> and <a href="https://metacpan.org/module/Continuity">Continuity</a></li>
<li><a href="Pico_(programming_language)" title="wikilink">Pico</a>: <code>call(exp())</code> and <code>continue(aContinuation, anyValue)</code></li>
<li><a href="Python_(programming_language)" title="wikilink">Python</a>: <a class="uri" href="Pypy" title="wikilink">Pypy</a>'s <code>[http://pypy.readthedocs.org/en/latest/stackless.html _continuation.continulet]</code></li>
<li><a href="Racket_(programming_language)" title="wikilink">Racket</a>: <code>[[call-with-current-continuation]]</code> (commonly shortened to <code>call/cc</code>)</li>
<li><a href="Ruby_(programming_language)" title="wikilink">Ruby</a>: <code>callcc</code></li>
<li><a href="Scala_(programming_language)" title="wikilink">Scala</a>: <code>scala.util.continuations</code> provides <code>shift</code>/<code>reset</code></li>
<li><a href="Scheme_(programming_language)" title="wikilink">Scheme</a>: <code>[[call-with-current-continuation]]</code> (commonly shortened to <code>call/cc</code>)</li>
<li><a class="uri" href="Smalltalk" title="wikilink">Smalltalk</a>: <code>Continuation currentDo:</code>, in most modern Smalltalk environments continuations can be implemented without additional VM support.</li>
<li><a href="Standard_ML_of_New_Jersey" title="wikilink">Standard ML of New Jersey</a>: <code>SMLofNJ.Cont.callcc</code></li>
<li><a class="uri" href="Unlambda" title="wikilink">Unlambda</a>: <code>c</code>, the flow control operation for call with current continuation</li>
</ul>

<p>In any language which supports <a href="closure_(computer_science)" title="wikilink">closures</a> and <a href="tail_recursion" title="wikilink">proper tail calls</a>, it is possible to write programs in <a href="continuation-passing_style" title="wikilink">continuation-passing style</a> and manually implement call/cc. (In <a href="continuation-passing_style" title="wikilink">continuation-passing style</a>, call/cc becomes a simple function that can be written with <a href="lambda_calculus" title="wikilink">lambda</a>.) This is a particularly common strategy in <a href="Haskell_(programming_language)" title="wikilink">Haskell</a>, where it is easy to construct a "continuation-passing <a href="Monad_(functional_programming)" title="wikilink">monad</a>" (for example, the <code>Cont</code> monad and <code>ContT</code> monad transformer in the <code>mtl</code> library). The support for <a href="tail_recursion" title="wikilink">proper tail calls</a> is needed because in <a href="continuation-passing_style" title="wikilink">continuation-passing style</a> no function ever returns; <em>all</em> calls are tail calls.</p>
<h2 id="in-web-development">In Web development</h2>

<p>One area that has seen practical use of continuations is in <a href="Web_programming" title="wikilink">Web programming</a>.<a class="footnoteRef" href="#fn10" id="fnref10"><sup>10</sup></a><a class="footnoteRef" href="#fn11" id="fnref11"><sup>11</sup></a> The use of continuations shields the programmer from the <a href="stateless_server" title="wikilink">stateless</a> nature of the <a class="uri" href="HTTP" title="wikilink">HTTP</a> protocol. In the traditional model of web programming, the lack of state is reflected in the program's structure, leading to code constructed around a model that lends itself very poorly to expressing computational problems. Thus continuations enable code that has the useful properties associated with <a href="inversion_of_control" title="wikilink">inversion of control</a>, while avoiding its problems. <cite><a href="http://pagesperso-systeme.lip6.fr/Christian.Queinnec/PDF/www.pdf">Inverting back the inversion of control or, Continuations versus page-centric programming</a></cite> is a paper that provides a good introduction to continuations applied to web programming.</p>

<p>Some of the more popular continuation-aware <a href="Web_server" title="wikilink">Web servers</a> are the <a href="Racket_(programming_language)" title="wikilink">Racket</a> <a href="http://docs.racket-lang.org/web-server/">Web Server</a>, the <a href="http://common-lisp.net/project/ucw">UnCommon Web Framework</a> and <a href="http://common-lisp.net/project/cl-weblocks/">Weblocks Web framework</a> for <a href="Common_Lisp" title="wikilink">Common Lisp</a>, the <a href="Seaside_(software)" title="wikilink">Seaside framework</a> for <a class="uri" href="Smalltalk" title="wikilink">Smalltalk</a>, <a href="Ocsigen" title="wikilink">Ocsigen/Eliom</a> for <a class="uri" href="OCaml" title="wikilink">OCaml</a>, <a href="https://metacpan.org/module/Continuity">Continuity</a> for <a class="uri" href="Perl" title="wikilink">Perl</a>, <a href="https://github.com/mneumann/wee">Wee</a> for <a href="Ruby_(programming_language)" title="wikilink">Ruby</a>, <a href="http://www.talesframework.org/">Tales Framework</a> for <a href="Fantom_(programming_language)" title="wikilink">Fantom</a> and the <a href="http://www.nagare.org/">Nagare framework</a> for <a href="Python_(programming_language)" title="wikilink">Python</a>, <a href="http://webtoolkit.eu/wt">Wt</a> for <a class="uri" href="C++" title="wikilink">C++</a>, <a href="https://github.com/agocorona/MFlow">MFlow</a> for <a href="Haskell_(programming_language)" title="wikilink">Haskell</a>. The <a href="Apache_Cocoon" title="wikilink">Apache Cocoon</a> <a href="Web_application_framework" title="wikilink">Web application framework</a> also provides continuations (see the <a href="http://cocoon.apache.org/2.1/userdocs/flow/continuations.html">Cocoon manual</a>).</p>
<h2 id="kinds">Kinds</h2>

<p>Support for continuations varies widely. A programming language supports <em>re-invocable</em> continuations if a continuation may be invoked repeatedly (even after it has already returned). Re-invocable continuations were introduced by <a href="Peter_J._Landin" title="wikilink">Peter J. Landin</a> using his <strong>J</strong> (for Jump) operator that could transfer the flow of control back into the middle of a procedure invocation. Re-invocable continuations have also been called "re-entrant" in the <a href="Racket_(programming_language)" title="wikilink">Racket</a> language. However this use of the term "re-entrant" can be easily confused with its use in discussions of <a href="Thread_(computer_science)" title="wikilink">multithreading</a>.</p>

<p>A more limited kind is the <em>escape continuation</em> that may be used to escape the current context to a surrounding one. Many languages which do not explicitly support continuations support <a href="exception_handling" title="wikilink">exception handling</a>, which is equivalent to escape continuations and can be used for the same purposes. C's <code>[[setjmp/longjmp]]</code> are also equivalent: they can only be used to unwind the stack. Escape continuations can also be used to implement <a href="tail_call_elimination" title="wikilink">tail call elimination</a>.</p>

<p>One generalization of continuations are <a href="delimited_continuation" title="wikilink">delimited continuations</a>. Continuation operators like <code>call/cc</code> capture the <em>entire</em> remaining computation at a given point in the program and provide no way of delimiting this capture. Delimited continuation operators address this by providing two separate control mechanisms: a <em>prompt</em> that delimits a continuation operation and a <em>reification</em> operator such as <code>shift</code> or <code>control</code>. Continuations captured using delimited operators thus only represent a slice of the program context.</p>
<h2 id="disadvantages">Disadvantages</h2>

<p>Continuations are the functional expression of the <a class="uri" href="GOTO" title="wikilink">GOTO</a> statement, and the same caveats apply.<a class="footnoteRef" href="#fn12" id="fnref12"><sup>12</sup></a> While they are a sensible option in some special cases such as web programming, use of continuations can result in code that is difficult to follow. In fact, the <a href="esoteric_programming_language" title="wikilink">esoteric programming language</a> <a class="uri" href="Unlambda" title="wikilink">Unlambda</a> includes <a class="uri" href="call-with-current-continuation" title="wikilink">call-with-current-continuation</a> as one of its features solely because of its resistance to understanding. The external links below illustrate the concept in more detail.</p>
<h2 id="linguistics">Linguistics</h2>

<p>In "Continuations and the nature of quantification", Chris Barker introduced the "continuation hypothesis", that</p>
<blockquote>

<p>some linguistic expressions (in particular, QNPs [quantificational noun phrases]) have denotations that manipulate their own continuations.<a class="footnoteRef" href="#fn13" id="fnref13"><sup>13</sup></a></p>
</blockquote>

<p>Barker argued that this hypothesis could be used to explain phenomena such as <em>duality of NP meaning</em> (e.g., the fact that the QNP "everyone" behaves very differently from the non-quantificational noun phrase "Bob" in contributing towards the meaning of a sentence like "Alice sees [Bob/everyone]"), <em>scope displacement</em> (e.g., that "a raindrop fell on every car" is interpreted typically as 

<math display="inline" id="Continuation:0">
 <semantics>
  <mrow>
   <mrow>
    <mo>∀</mo>
    <mrow>
     <mi>c</mi>
     <mrow>
      <mo>∃</mo>
      <mi>r</mi>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mtext>fell</mtext>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>r</mi>
     <mo>,</mo>
     <mi>c</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <csymbol cd="latexml">for-all</csymbol>
     <apply>
      <times></times>
      <ci>c</ci>
      <apply>
       <exists></exists>
       <ci>r</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <mtext>fell</mtext>
     <interval closure="open">
      <ci>r</ci>
      <ci>c</ci>
     </interval>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \forall c\exists r,\mbox{fell}(r,c)
  </annotation>
 </semantics>
</math>

 rather than as 

<math display="inline" id="Continuation:1">
 <semantics>
  <mrow>
   <mrow>
    <mo>∃</mo>
    <mrow>
     <mi>r</mi>
     <mrow>
      <mo>∀</mo>
      <mi>c</mi>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mtext>fell</mtext>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>r</mi>
     <mo>,</mo>
     <mi>c</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <exists></exists>
     <apply>
      <times></times>
      <ci>r</ci>
      <apply>
       <csymbol cd="latexml">for-all</csymbol>
       <ci>c</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <mtext>fell</mtext>
     <interval closure="open">
      <ci>r</ci>
      <ci>c</ci>
     </interval>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \exists r\forall c,\mbox{fell}(r,c)
  </annotation>
 </semantics>
</math>

), and <em>scope ambiguity</em> (that a sentence like "someone saw everyone" may be ambiguous between 

<math display="inline" id="Continuation:2">
 <semantics>
  <mrow>
   <mrow>
    <mo>∃</mo>
    <mrow>
     <mi>x</mi>
     <mrow>
      <mo>∀</mo>
      <mi>y</mi>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mtext>saw</mtext>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <mi>y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <exists></exists>
     <apply>
      <times></times>
      <ci>x</ci>
      <apply>
       <csymbol cd="latexml">for-all</csymbol>
       <ci>y</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <mtext>saw</mtext>
     <interval closure="open">
      <ci>x</ci>
      <ci>y</ci>
     </interval>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \exists x\forall y,\mbox{saw}(x,y)
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Continuation:3">
 <semantics>
  <mrow>
   <mrow>
    <mo>∀</mo>
    <mrow>
     <mi>y</mi>
     <mrow>
      <mo>∃</mo>
      <mi>x</mi>
     </mrow>
    </mrow>
   </mrow>
   <mo>,</mo>
   <mrow>
    <mtext>saw</mtext>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <mi>y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <list>
    <apply>
     <csymbol cd="latexml">for-all</csymbol>
     <apply>
      <times></times>
      <ci>y</ci>
      <apply>
       <exists></exists>
       <ci>x</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <mtext>saw</mtext>
     <interval closure="open">
      <ci>x</ci>
      <ci>y</ci>
     </interval>
    </apply>
   </list>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \forall y\exists x,\mbox{saw}(x,y)
  </annotation>
 </semantics>
</math>

). He also observed that this idea is in a way just a natural extension of <a href="Montague_grammar" title="wikilink">Richard Montague's approach</a> in "The Proper Treatment of Quantification in Ordinary English" (PTQ), writing that "with the beneﬁt of hindsight, a limited form of continuation-passing is clearly discernible at the core of Montague’s (1973) PTQ treatment of NPs as generalized quantiﬁers".</p>

<p>The extent to which continuations can be used to explain other general phenomena in natural language is a topic of current research.<a class="footnoteRef" href="#fn14" id="fnref14"><sup>14</sup></a></p>
<h2 id="see-also">See also</h2>
<ul>
<li><a class="uri" href="Call-with-current-continuation" title="wikilink">Call-with-current-continuation</a></li>
<li><a href="Closure_(computer_science)" title="wikilink">Closure</a></li>
<li><a class="uri" href="COMEFROM" title="wikilink">COMEFROM</a></li>
<li><a href="Continuation-passing_style" title="wikilink">Continuation-passing style</a></li>
<li><a href="Control_flow" title="wikilink">Control flow</a></li>
<li><a class="uri" href="Coroutine" title="wikilink">Coroutine</a></li>
<li><a href="Delimited_continuation" title="wikilink">Delimited continuation</a></li>
<li><a href="Denotational_semantics" title="wikilink">Denotational semantics</a></li>
<li><a class="uri" href="GOTO" title="wikilink">GOTO</a></li>
<li><a href="Spaghetti_stack" title="wikilink">Spaghetti stack</a></li>
</ul>
<h2 id="references">References</h2>
<h2 id="further-reading">Further reading</h2>
<ul>
<li><a href="Peter_Landin" title="wikilink">Peter Landin</a>. <em>A Generalization of Jumps and Labels</em> Report. UNIVAC Systems Programming Research. August 1965. Reprinted in Higher Order and Symbolic Computation, 11(2):125-143, 1998, with a foreword by Hayo Thielecke.</li>
<li><a href="Drew_McDermott" title="wikilink">Drew McDermott</a> and <a href="Gerry_Sussman" title="wikilink">Gerry Sussman</a>. <em>The Conniver Reference Manual</em> MIT AI Memo 259. May 1972.</li>
<li><a href="Daniel_Bobrow" title="wikilink">Daniel Bobrow</a>: <em>A Model for Control Structures for Artificial Intelligence Programming Languages</em> IJCAI 1973.</li>
<li><a href="Carl_Hewitt" title="wikilink">Carl Hewitt</a>, <a href="Peter_Bishop" title="wikilink">Peter Bishop</a> and <a href="Richard_Steiger" title="wikilink">Richard Steiger</a>. <em>A Universal Modular Actor Formalism for Artificial Intelligence</em> IJCAI 1973.</li>
<li><a href="Christopher_Strachey" title="wikilink">Christopher Strachey</a> and <a href="Christopher_P._Wadsworth" title="wikilink">Christopher P. Wadsworth</a>. <em>Continuations: a Mathematical semantics for handling full jumps</em> Technical Monograph PRG-11. Oxford University Computing Laboratory. January 1974. Reprinted in Higher Order and Symbolic Computation, 13(1/2):135—152, 2000, with a foreword by Christopher P. Wadsworth.</li>
<li><a href="John_C._Reynolds" title="wikilink">John C. Reynolds</a>. <em>Definitional Interpreters for Higher-Order Programming Languages</em> Proceedings of 25th ACM National Conference, pp. 717–740, 1972. Reprinted in Higher-Order and Symbolic Computation 11(4):363-397, 1998, with a foreword.</li>
<li>John C. Reynolds. <em>On the Relation between Direct and Continuation Semantics</em> Proceedings of Second Colloquium on Automata, Languages, and Programming. LNCS Vol. 14, pp. 141–156, 1974.</li>
<li></li>
<li><a href="Gerald_Sussman" title="wikilink">Gerald Sussman</a> and <a href="Guy_Steele" title="wikilink">Guy Steele</a>. <em>SCHEME: An Interpreter for Extended Lambda Calculus</em> AI Memo 349, MIT Artificial Intelligence Laboratory, Cambridge, Massachusetts, December 1975. Reprinted in Higher-Order and Symbolic Computation 11(4):405-439, 1998, with a foreword.</li>
<li><a href="Robert_Hieb" title="wikilink">Robert Hieb</a>, <a href="R._Kent_Dybvig" title="wikilink">R. Kent Dybvig</a>, <a href="Carl_Bruggeman" title="wikilink">Carl Bruggeman</a>. <em>Representing Control in the Presence of First-Class Continuations</em> Proceedings of the ACM SIGPLAN '90 Conference on Programming Language Design and Implementation, pp. 66–77.</li>
<li><a href="Will_Clinger" title="wikilink">Will Clinger</a>, <a href="Anne_Hartheimer" title="wikilink">Anne Hartheimer</a>, <a href="Eric_Ost" title="wikilink">Eric Ost</a>. <em>Implementation Strategies for Continuations</em> Proceedings of the 1988 ACM conference on LISP and Functional Programming, pp. 124–131, 1988. Journal version: Higher-Order and Symbolic Computation, 12(1):7-45, 1999.</li>
</ul>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="Association_for_Computing_Machinery" title="wikilink">ACM</a> <a class="uri" href="SIGPLAN" title="wikilink">SIGPLAN</a> <a href="http://logic.cs.tsukuba.ac.jp/cw2011/">Workshop on Continuations 2011</a> at the <a class="uri" href="ICFP" title="wikilink">ICFP</a>.</li>
<li><a href="http://www.intertwingly.net/blog/2005/04/13/Continuations-for-Curmudgeons">Continuations for Curmudgeons</a> by Sam Ruby</li>
<li><a href="http://www.ccs.neu.edu/home/dorai/t-y-scheme/t-y-scheme-Z-H-15.html#node_chap_13">Teach Yourself Scheme in Fixnum Days</a> by Dorai Sitaram features a nice chapter on continuations.</li>
<li><a href="http://www.stackless.com/spcpaper.htm">Continuations and Stackless Python</a> by Christian Tismer</li>
<li><a href="http://www.cs.bham.ac.uk/~hxt/cw04/cw04-program.html">On-line proceedings of the Fourth ACM SIGPLAN Workshop on Continuations</a></li>
<li><a href="http://www.brics.dk/~cw97/">On-line proceedings of the Second ACM SIGPLAN Workshop on Continuations</a></li>
<li><a href="http://www.cs.bham.ac.uk/~hxt/research/Logiccolumn8.pdf">Continuation, functions and jumps</a></li>
<li><a href="http://okmij.org/ftp/continuations/"></a><a class="uri" href="http://okmij.org/ftp/continuations/">http://okmij.org/ftp/continuations/</a> by Oleg Kiselyov</li>
<li><a href="http://wiki.apache.org/cocoon/RhinoWithContinuations">Rhino With Continuations</a></li>
<li><a href="http://rifers.org/wiki/display/RIFE/Web+continuations">Continuations in pure Java</a> from the <a class="uri" href="RIFE" title="wikilink">RIFE</a> web application framework</li>
<li><a href="http://rifers.org/theater/debugging_continuations">Debugging continuations in pure Java</a> from the <a class="uri" href="RIFE" title="wikilink">RIFE</a> web application framework</li>
<li><a href="http://mail.python.org/pipermail/python-dev/1999-July/000467.html">Comparison of generators, coroutines, and continuations, source of the above example</a></li>
</ul>

<p>"</p>

<p><a href="Category:Continuations" title="wikilink"> </a> <a href="Category:Control_flow" title="wikilink">Category:Control flow</a> <a href="Category:Articles_with_example_Scheme_code" title="wikilink">Category:Articles with example Scheme code</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2"></li>
<li id="fn3"><a href="http://www-formal.stanford.edu/jmc/history/lisp/node3.html">S.R. Russell noticed that <em>eval</em> could serve as an interpreter for LISP, promptly hand coded it, and we now had a programming language with an interpreter.</a> —John McCarthy, <em>History of LISP</em><a href="#fnref3">↩</a></li>
<li id="fn4"><a href="#fnref4">↩</a></li>
<li id="fn5"><a href="#fnref5">↩</a></li>
<li id="fn6"></li>
<li id="fn7"></li>
<li id="fn8">Haynes, C. T., Friedman, D. P., and Wand, M. 1984. Continuations and coroutines. In Proceedings of the 1984 ACM Symposium on LISP and Functional Programming (Austin, Texas, United States, August 06–08, 1984). LFP '84. ACM, New York, NY, 293-298.<a href="#fnref8">↩</a></li>
<li id="fn9"><a href="#fnref9">↩</a></li>
<li id="fn10"><a href="http://readscheme.org/xml-web/">1</a><a href="#fnref10">↩</a></li>
<li id="fn11"><a href="http://www.double.co.nz/pdf/continuations.pdf">2</a><a href="#fnref11">↩</a></li>
<li id="fn12"><a href="#fnref12">↩</a></li>
<li id="fn13">Chris Barker, <a href="http://www.semanticsarchive.net/Archive/902ad5f7/barker.continuations.pdf">Continuations and the nature of quantification</a>, 2002 Natural Language Semantics 10:211-242.<a href="#fnref13">↩</a></li>
<li id="fn14">See for example Chris Barker, <a href="http://www.cs.bham.ac.uk/~hxt/cw04/barker.pdf">Continuations in Natural Language</a> (Continuations Workshop 2004), or Chung-chieh Shan, <a href="http://www.cs.rutgers.edu/~ccshan/brown/paper.pdf">Linguistic Side Effects</a> (in "Direct compositionality,'' ed. Chris Barker and Pauline Jacobson, pp. 132-163, Oxford University Press, 2007).<a href="#fnref14">↩</a></li>
</ol>
</section>
</body>

