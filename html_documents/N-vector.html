<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="463">N-vector</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>N-vector</h1>
<hr/>

<p>''' <em>n</em>-vector''' is a three parameter <a href="mathematical_singularity" title="wikilink">non-singular</a> <a href="horizontal_position_representation" title="wikilink">horizontal position representation</a> well-suited for replacing <a class="uri" href="latitude" title="wikilink">latitude</a> and <a class="uri" href="longitude" title="wikilink">longitude</a> in mathematical calculations and computer algorithms. Geometrically, it is a <a href="unit_vector" title="wikilink">unit vector</a> that is <a href="surface_normal" title="wikilink">normal</a> to the <a href="reference_ellipsoid" title="wikilink">reference ellipsoid</a>. The vector is <a href="Vector_decomposition" title="wikilink">decomposed</a> in an <a href="ECEF" title="wikilink">Earth centered earth fixed</a> <a href="coordinate_system" title="wikilink">coordinate system</a>. It behaves the same at all Earth positions, and it holds the mathematical <a href="Injective_function" title="wikilink">one-to-one</a> property.</p>
<h2 id="general-properties">General properties</h2>

<p>A <a href="normal_vector" title="wikilink">normal vector</a> to a strictly <a href="convex_set" title="wikilink">convex</a> surface can be used to uniquely define a surface position. <em>n</em>-vector is an outward-pointing normal vector with <a href="unit_vector" title="wikilink">unit length</a> used as a position representation. <a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>

<p>For most applications the surface is the <a href="reference_ellipsoid" title="wikilink">reference ellipsoid</a> of the Earth, and thus <em>n</em>-vector is used to represent a horizontal position. Hence, the angle between <em>n</em>-vector and the equatorial plane corresponds to <a href="geodetic_latitude" title="wikilink">geodetic latitude</a>, as shown in the figure.</p>

<p><a href="Image:n_vector_and_geodetic_latitude.png" title="wikilink">thumb | upright=1.7 | alt=Alt |The direction of <em>n</em>-vector corresponds to geodetic latitude</a></p>

<p>A surface position has two <a href="Degrees_of_freedom_(mechanics)" title="wikilink">degrees of freedom</a>, and thus two parameters are sufficient to represent any position on the surface. On the reference ellipsoid, <a class="uri" href="latitude" title="wikilink">latitude</a> and <a class="uri" href="longitude" title="wikilink">longitude</a> are common parameters for this purpose, but as all <em>two-parameter representations</em>, they have <a href="mathematical_singularity" title="wikilink">singularities</a>. This is similar to <a href="Rotation_formalisms_in_three_dimensions" title="wikilink">orientation</a>, which has three degrees of freedom, but all <em>three-parameter representations</em> have singularities.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> In both cases the singularities are avoided by adding an extra parameter, i.e. to use <em>n</em>-vector (three parameters) to <a href="Horizontal_position_representation" title="wikilink">represent horizontal position</a> and a unit <a class="uri" href="quaternion" title="wikilink">quaternion</a> (four parameters) to <a href="Rotation_formalisms_in_three_dimensions" title="wikilink">represent orientation</a>.</p>

<p><em>n</em>-vector is a <a href="Injective_function" title="wikilink">one-to-one</a> representation, meaning that any surface position corresponds to one unique <em>n</em>-vector, and any <em>n</em>-vector corresponds to one unique surface position.</p>

<p>As a <a href="Euclidean_vector" title="wikilink">Euclidean 3D vector</a>, standard 3D <a href="Vector_calculus" title="wikilink">vector algebra</a> can be used for the position calculations, and this makes <em>n</em>-vector well-suited for most horizontal position calculations.</p>
<h2 id="converting-latitudelongitude-to-n-vector">Converting latitude/longitude to <em>n</em>-vector</h2>

<p>Based on the definition of the <a class="uri" href="ECEF" title="wikilink">ECEF</a> coordinate system, it is clear that going from latitude/longitude to <em>n</em>-vector, is achieved by:</p>

<p>

<math display="block" id="N-vector:0">
 <semantics>
  <mrow>
   <msup>
    <mi>ùêß</mi>
    <mi>e</mi>
   </msup>
   <mo>=</mo>
   <mrow>
    <mo>[</mo>
    <mtable displaystyle="true">
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mrow>
         <mi>cos</mi>
         <mrow>
          <mo stretchy="false">(</mo>
          <mi>latitude</mi>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
        <mrow>
         <mi>cos</mi>
         <mrow>
          <mo stretchy="false">(</mo>
          <mi>longitude</mi>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mrow>
         <mi>cos</mi>
         <mrow>
          <mo stretchy="false">(</mo>
          <mi>latitude</mi>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
        <mrow>
         <mi>sin</mi>
         <mrow>
          <mo stretchy="false">(</mo>
          <mi>longitude</mi>
          <mo stretchy="false">)</mo>
         </mrow>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>sin</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>latitude</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
    <mo>]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <ci>ùêß</ci>
     <ci>e</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">delimited-[]</csymbol>
     <matrix>
      <matrixrow>
       <apply>
        <times></times>
        <apply>
         <cos></cos>
         <ci>latitude</ci>
        </apply>
        <apply>
         <cos></cos>
         <ci>longitude</ci>
        </apply>
       </apply>
      </matrixrow>
      <matrixrow>
       <apply>
        <times></times>
        <apply>
         <cos></cos>
         <ci>latitude</ci>
        </apply>
        <apply>
         <sin></sin>
         <ci>longitude</ci>
        </apply>
       </apply>
      </matrixrow>
      <matrixrow>
       <apply>
        <sin></sin>
        <ci>latitude</ci>
       </apply>
      </matrixrow>
     </matrix>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbf{n}^{e}=\left[\begin{matrix}\cos(\mathrm{latitude})\cos(\mathrm{%
longitude})\\
\cos(\mathrm{latitude})\sin(\mathrm{longitude})\\
\sin(\mathrm{latitude})\\
\end{matrix}\right]
  </annotation>
 </semantics>
</math>

</p>

<p>The superscript <em>e</em> means that <em>n</em>-vector is <a href="Vector_decomposition" title="wikilink">decomposed</a> in the coordinate system <em>e</em> (i.e. the first component is the <a href="Scalar_resolute" title="wikilink">scalar projection</a> of <em>n</em>-vector onto the <em>x</em>-axis of <em>e</em>, the second onto the <em>y</em>-axis of <em>e</em> etc.). Note that the equation is exact both for spherical and ellipsoidal Earth model.</p>
<h2 id="converting-n-vector-to-latitudelongitude">Converting <em>n</em>-vector to latitude/longitude</h2>

<p>From the three components of <em>n</em>-vector, 

<math display="inline" id="N-vector:1">
 <semantics>
  <msubsup>
   <mi>n</mi>
   <mi>x</mi>
   <mi>e</mi>
  </msubsup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>n</ci>
     <ci>x</ci>
    </apply>
    <ci>e</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n_{x}^{e}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="N-vector:2">
 <semantics>
  <msubsup>
   <mi>n</mi>
   <mi>y</mi>
   <mi>e</mi>
  </msubsup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>n</ci>
     <ci>y</ci>
    </apply>
    <ci>e</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n_{y}^{e}
  </annotation>
 </semantics>
</math>

, and 

<math display="inline" id="N-vector:3">
 <semantics>
  <msubsup>
   <mi>n</mi>
   <mi>z</mi>
   <mi>e</mi>
  </msubsup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>n</ci>
     <ci>z</ci>
    </apply>
    <ci>e</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n_{z}^{e}
  </annotation>
 </semantics>
</math>


, latitude can be found by using:</p>

<p>

<math display="block" id="N-vector:4">
 <semantics>
  <mrow>
   <mi>latitude</mi>
   <mo>=</mo>
   <mrow>
    <mi>arcsin</mi>
    <mrow>
     <mo>(</mo>
     <msubsup>
      <mi>n</mi>
      <mi>z</mi>
      <mi>e</mi>
     </msubsup>
     <mo>)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>arctan</mi>
    <mrow>
     <mo>(</mo>
     <mfrac>
      <msubsup>
       <mi>n</mi>
       <mi>z</mi>
       <mi>e</mi>
      </msubsup>
      <msqrt>
       <mrow>
        <mmultiscripts>
         <mi>n</mi>
         <mi>x</mi>
         <mi>e</mi>
         <none></none>
         <mn>2</mn>
        </mmultiscripts>
        <mo>+</mo>
        <mmultiscripts>
         <mi>n</mi>
         <mi>y</mi>
         <mi>e</mi>
         <none></none>
         <mn>2</mn>
        </mmultiscripts>
       </mrow>
      </msqrt>
     </mfrac>
     <mo>)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <ci>latitude</ci>
     <apply>
      <arcsin></arcsin>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>n</ci>
        <ci>z</ci>
       </apply>
       <ci>e</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <arctan></arctan>
      <apply>
       <divide></divide>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>n</ci>
         <ci>z</ci>
        </apply>
        <ci>e</ci>
       </apply>
       <apply>
        <root></root>
        <apply>
         <plus></plus>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <apply>
           <csymbol cd="ambiguous">superscript</csymbol>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>n</ci>
            <ci>x</ci>
           </apply>
           <ci>e</ci>
          </apply>
          <cn type="integer">2</cn>
         </apply>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <apply>
           <csymbol cd="ambiguous">superscript</csymbol>
           <apply>
            <csymbol cd="ambiguous">subscript</csymbol>
            <ci>n</ci>
            <ci>y</ci>
           </apply>
           <ci>e</ci>
          </apply>
          <cn type="integer">2</cn>
         </apply>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathrm{latitude}=\arcsin\left(n_{z}^{e}\right)=\arctan\left(\frac{n_{z}^{e}}{%
\sqrt{{n_{x}^{e}}^{2}+{n_{y}^{e}}^{2}}}\right)
  </annotation>
 </semantics>
</math>

</p>

<p>The rightmost expression is best suited for computer program implementation.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a></p>

<p>Longitude is found using:</p>

<p>

<math display="block" id="N-vector:5">
 <semantics>
  <mrow>
   <mi>longitude</mi>
   <mo>=</mo>
   <mrow>
    <mi>arctan</mi>
    <mrow>
     <mo>(</mo>
     <mfrac>
      <msubsup>
       <mi>n</mi>
       <mi>y</mi>
       <mi>e</mi>
      </msubsup>
      <msubsup>
       <mi>n</mi>
       <mi>x</mi>
       <mi>e</mi>
      </msubsup>
     </mfrac>
     <mo>)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>longitude</ci>
    <apply>
     <arctan></arctan>
     <apply>
      <divide></divide>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>n</ci>
        <ci>y</ci>
       </apply>
       <ci>e</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>n</ci>
        <ci>x</ci>
       </apply>
       <ci>e</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathrm{longitude}=\arctan\left(\frac{n_{y}^{e}}{n_{x}^{e}}\right)
  </annotation>
 </semantics>
</math>

</p>

<p>In these expressions 

<math display="inline" id="N-vector:6">
 <semantics>
  <mrow>
   <mi>arctan</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mi>y</mi>
     <mo>/</mo>
     <mi>x</mi>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <arctan></arctan>
    <apply>
     <divide></divide>
     <ci>y</ci>
     <ci>x</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \arctan(y/x)
  </annotation>
 </semantics>
</math>

 should be implemented using a call to <a class="uri" href="atan2" title="wikilink">atan2</a>(<em>y</em>,<em>x</em>). The <a href="Geographical_pole" title="wikilink">Pole</a> <a href="Mathematical_singularity" title="wikilink">singularity</a> of longitude is evident as <a class="uri" href="atan2" title="wikilink">atan2</a>(0,0) is undefined. Note that the equations are exact both for spherical and ellipsoidal Earth model.</p>
<h2 id="example-great-circle-distance">Example: Great circle distance</h2>

<p>Finding the <a href="great_circle_distance" title="wikilink">great circle distance</a> between two horizontal positions (assuming spherical Earth) is usually done by means of latitude and longitude. <a href="great_circle_distance#Formulas" title="wikilink">Three different expressions</a> for this distance are common; the first is based on <a href="Inverse_trigonometric_function" title="wikilink">arccos</a>, the second is based on <a href="Inverse_trigonometric_function" title="wikilink">arcsin</a>, and the final is based on <a href="Inverse_trigonometric_function" title="wikilink">arctan</a>. The expressions, which are successively more complex to avoid <a href="Numerical_stability" title="wikilink">numerical instabilities</a>, are not easy to find, and since they are based on latitude and longitude, the Pole singularities may become a problem. They also contain <a href="Delta_(letter)" title="wikilink">deltas</a> of latitude and longitude, which in general should be used with care near the ¬±<a href="180th_meridian" title="wikilink">180¬∞ meridian</a> and the Poles.</p>

<p>Solving the same problem using <em>n</em>-vector is simpler due to the possibility of using <a href="Vector_calculus" title="wikilink">vector algebra</a>. The arccos expression is achieved from the <a href="dot_product" title="wikilink">dot product</a>, while the <a href="Magnitude_(mathematics)" title="wikilink">magnitude</a> of the <a href="cross_product" title="wikilink">cross product</a> gives the arcsin expression. Combining the two gives the arctan expression:<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></p>

<p>

<math display="inline" id="N-vector:7">
 <semantics>
  <mrow>
   <mrow>
    <mi mathvariant="normal">Œî</mi>
    <mi>œÉ</mi>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>arccos</mi>
    <mrow>
     <mo>(</mo>
     <mrow>
      <msub>
       <mi>ùêß</mi>
       <mi>a</mi>
      </msub>
      <mo>‚ãÖ</mo>
      <msub>
       <mi>ùêß</mi>
       <mi>b</mi>
      </msub>
     </mrow>
     <mo>)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>normal-Œî</ci>
     <ci>œÉ</ci>
    </apply>
    <apply>
     <arccos></arccos>
     <apply>
      <ci>normal-‚ãÖ</ci>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>ùêß</ci>
       <ci>a</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>ùêß</ci>
       <ci>b</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \displaystyle\Delta\sigma=\arccos\left(\mathbf{n}_{a}\cdot\mathbf{n}_{b}\right)
  </annotation>
 </semantics>
</math>


</p>

<p>where 

<math display="inline" id="N-vector:8">
 <semantics>
  <msub>
   <mi>ùêß</mi>
   <mi>a</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>ùêß</ci>
    <ci>a</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbf{n}_{a}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="N-vector:9">
 <semantics>
  <msub>
   <mi>ùêß</mi>
   <mi>b</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>ùêß</ci>
    <ci>b</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathbf{n}_{b}
  </annotation>
 </semantics>
</math>

 are the <em>n</em>-vectors representing the two positions <em>a</em> and <em>b</em>. 

<math display="inline" id="N-vector:10">
 <semantics>
  <mrow>
   <mi mathvariant="normal">Œî</mi>
   <mi>œÉ</mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>normal-Œî</ci>
    <ci>œÉ</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \Delta\sigma
  </annotation>
 </semantics>
</math>

 is the angular difference, and thus the great-circle distance is achieved by multiplying with the Earth radius. This expression also works at the poles and at the ¬±180¬∞ meridian. Note that <em>arctan</em> must be replaced by <em><a class="uri" href="atan2" title="wikilink">atan2</a></em> in computer program implementation.</p>

<p>There are several other examples where the use of vector algebra simplifies standard problems.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> For a general comparison of the various representations, see the <a href="horizontal_position_representation" title="wikilink"> horizontal position representations page</a>.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Horizontal_position_representation" title="wikilink">Horizontal position representation</a></li>
<li><a class="uri" href="Latitude" title="wikilink">Latitude</a></li>
<li><a class="uri" href="Longitude" title="wikilink">Longitude</a></li>
<li><a href="Universal_Transverse_Mercator_coordinate_system" title="wikilink">Universal Transverse Mercator coordinate system</a></li>
<li><a class="uri" href="Quaternion" title="wikilink">Quaternion</a></li>
</ul>
<h2 id="references">References</h2>

<p>"</p>

<p><a class="uri" href="Category:Navigation" title="wikilink">Category:Navigation</a> <a class="uri" href="Category:Geodesy" title="wikilink">Category:Geodesy</a> <a class="uri" href="Category:Geolocation" title="wikilink">Category:Geolocation</a> <a href="Category:Geographic_coordinate_systems" title="wikilink">Category:Geographic coordinate systems</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">‚Ü©</a></li>
<li id="fn2"><a href="#fnref2">‚Ü©</a></li>
<li id="fn3"></li>
<li id="fn4"></li>
<li id="fn5"></li>
</ol>
</section>
</body>
</html>
