<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1105">Thomas write rule</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Thomas write rule</h1>
<hr/>

<p>In <a href="computer_science" title="wikilink">computer science</a>, particularly the field of <a href="database" title="wikilink">databases</a>, the <strong>Thomas Write rule</strong> is a rule in <a href="timestamp-based_concurrency_control" title="wikilink">timestamp-based concurrency control</a>. It can be summarized as <em>ignore outdated writes</em>.</p>

<p>It states that, if a more recent transaction has already written the value of an object, then a less recent transaction does not need perform its own write since it will eventually be overwritten by the more recent one.</p>

<p>The Thomas Write rule is applied in situations where a predefined <strong>logical</strong> order is assigned to transactions when they start. For example a transactions might be assigned a monotonically increasing timestamp when it is created. The rule prevents changes in the order in which the transactions are executed from creating different outputs: The outputs will always be consistent with the predefined logical order.</p>

<p>For example consider a database with 3 variables (A, B, C), and two atomic operations C := A (T1), and C := B (T2). Each transaction involves a read (A or B), and a write (C). The only conflict between these transactions is the write on C. The following is one possible schedule for the operations of these transactions:</p>

<p>

<math display="block" id="Thomas_write_rule:0">
 <semantics>
  <mrow>
   <mrow>
    <mo>[</mo>
    <mtable displaystyle="true">
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi>T</mi>
        <mn>1</mn>
       </msub>
      </mtd>
      <mtd columnalign="center">
       <msub>
        <mi>T</mi>
        <mn>2</mn>
       </msub>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>R</mi>
        <mi>e</mi>
        <mi>a</mi>
        <mi>d</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>A</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>R</mi>
        <mi>e</mi>
        <mi>a</mi>
        <mi>d</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>B</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mrow>
         <mi>W</mi>
         <mi>r</mi>
         <mi>i</mi>
         <mi>t</mi>
         <mi>e</mi>
        </mrow>
        <mo>;</mo>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>C</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>W</mi>
        <mi>r</mi>
        <mi>i</mi>
        <mi>t</mi>
        <mi>e</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>C</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>C</mi>
        <mi>o</mi>
        <mi>m</mi>
        <mi>m</mi>
        <mi>i</mi>
        <mi>t</mi>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>C</mi>
        <mi>o</mi>
        <mi>m</mi>
        <mi>m</mi>
        <mi>i</mi>
        <mi>t</mi>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
    <mo>]</mo>
   </mrow>
   <mo>⟺</mo>
   <mrow>
    <mo>[</mo>
    <mtable displaystyle="true">
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi>T</mi>
        <mn>1</mn>
       </msub>
      </mtd>
      <mtd columnalign="center">
       <msub>
        <mi>T</mi>
        <mn>2</mn>
       </msub>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>R</mi>
        <mi>e</mi>
        <mi>a</mi>
        <mi>d</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>A</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>R</mi>
        <mi>e</mi>
        <mi>a</mi>
        <mi>d</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>B</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>W</mi>
        <mi>r</mi>
        <mi>i</mi>
        <mi>t</mi>
        <mi>e</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>C</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>C</mi>
        <mi>o</mi>
        <mi>m</mi>
        <mi>m</mi>
        <mi>i</mi>
        <mi>t</mi>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>C</mi>
        <mi>o</mi>
        <mi>m</mi>
        <mi>m</mi>
        <mi>i</mi>
        <mi>t</mi>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
    <mo>]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-⟺</ci>
    <matrix>
     <matrixrow>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>T</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>T</ci>
       <cn type="integer">2</cn>
      </apply>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <times></times>
       <ci>R</ci>
       <ci>e</ci>
       <ci>a</ci>
       <ci>d</ci>
       <ci>A</ci>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <times></times>
       <ci>R</ci>
       <ci>e</ci>
       <ci>a</ci>
       <ci>d</ci>
       <ci>B</ci>
      </apply>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <list>
       <apply>
        <times></times>
        <ci>W</ci>
        <ci>r</ci>
        <ci>i</ci>
        <ci>t</ci>
        <ci>e</ci>
       </apply>
       <ci>C</ci>
      </list>
     </matrixrow>
     <matrixrow>
      <apply>
       <times></times>
       <ci>W</ci>
       <ci>r</ci>
       <ci>i</ci>
       <ci>t</ci>
       <ci>e</ci>
       <ci>C</ci>
      </apply>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
     <matrixrow>
      <apply>
       <times></times>
       <ci>C</ci>
       <ci>o</ci>
       <ci>m</ci>
       <ci>m</ci>
       <ci>i</ci>
       <ci>t</ci>
      </apply>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <times></times>
       <ci>C</ci>
       <ci>o</ci>
       <ci>m</ci>
       <ci>m</ci>
       <ci>i</ci>
       <ci>t</ci>
      </apply>
     </matrixrow>
    </matrix>
    <matrix>
     <matrixrow>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>T</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>T</ci>
       <cn type="integer">2</cn>
      </apply>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <times></times>
       <ci>R</ci>
       <ci>e</ci>
       <ci>a</ci>
       <ci>d</ci>
       <ci>A</ci>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <times></times>
       <ci>R</ci>
       <ci>e</ci>
       <ci>a</ci>
       <ci>d</ci>
       <ci>B</ci>
      </apply>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <times></times>
       <ci>W</ci>
       <ci>r</ci>
       <ci>i</ci>
       <ci>t</ci>
       <ci>e</ci>
       <ci>C</ci>
      </apply>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
     <matrixrow>
      <apply>
       <times></times>
       <ci>C</ci>
       <ci>o</ci>
       <ci>m</ci>
       <ci>m</ci>
       <ci>i</ci>
       <ci>t</ci>
      </apply>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <times></times>
       <ci>C</ci>
       <ci>o</ci>
       <ci>m</ci>
       <ci>m</ci>
       <ci>i</ci>
       <ci>t</ci>
      </apply>
     </matrixrow>
    </matrix>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{bmatrix}T_{1}&T_{2}\\
&Read(A)\\
Read(B)&\\
&Write;(C)\\
Write(C)&\\
Commit&\\
&Commit\end{bmatrix}\Longleftrightarrow\begin{bmatrix}T_{1}&T_{2}\\
&Read(A)\\
Read(B)&\\
&Write(C)\\
&\\
Commit&\\
&Commit\\
\end{bmatrix}
  </annotation>
 </semantics>
</math>

</p>

<p>If (when the transactions are created) T1 is assigned a timestamp that precedes T2 (i.e., according to the logical order, T1 comes first), then only T2's write should be visible. If, however, T1's write is executed after T2's write, then we need a way to detect this and discard the write.</p>

<p>One practical approach to this is to label each value with a write timestamp (WTS) that indicates the timestamp of the last transaction to modify the value. Enforcing the Thomas Write rule only requires checking to see if the write timestamp of the object is greater than the time stamp of the transaction performing a write. If so, the write is discarded</p>

<p>In the example above, if we call TS(T) the timestamp of transaction T, and WTS(O) the write timestamp of object O, then T2's write sets WTS(C) to TS(T2). When T1 tries to write C, it sees that TS(T1)  TS(T2)) were to then write to C, it would get TS(T3) &gt; WTS(C), and the write would be allowed.</p>
<h2 id="references">References</h2>

<p>"</p>

<p><a href="Category:Data_management" title="wikilink">Category:Data management</a> <a href="Category:Transaction_processing" title="wikilink">Category:Transaction processing</a></p>
</body>
</html>
