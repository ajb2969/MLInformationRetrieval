<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1228">Faro shuffle</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Faro shuffle</h1>
<style>
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
<style>
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</body></html>
<body>
<hr/>

<p>The <strong>faro shuffle</strong> (American), <strong>weave shuffle</strong> (British), <strong>riffle shuffle</strong> or <strong>dovetail shuffle</strong> is a method of <a class="uri" href="shuffling" title="wikilink">shuffling</a> <a href="playing_card" title="wikilink">playing cards</a>. Mathematicians use "faro shuffle" for a shuffle in which the deck is split into equal halves of 26 cards which are then interwoven perfectly.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>

<p>Magicians use these terms for a particular technique (which Diaconis, Graham and Kantor call "the technique")<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> for achieving this result. A right-handed practitioner holds the cards from above in the right and from below in the left hand. The deck is separated into two preferably equal parts by simply lifting up half the cards with the right thumb slightly and pushing the left hand's packet forward away from the right hand. The two packets are often crossed and tapped against each other to align them. They are then pushed together on the short sides and bent either up or down. The cards will then alternately fall onto each other, ideally alternating one by one from each half, much like a <a class="uri" href="zipper" title="wikilink">zipper</a>. A flourish can be added by springing the packets together by applying pressure and bending them from above.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a></p>

<p>A game of <a href="faro_(card_game)" title="wikilink">faro</a> ends with the cards in two equal piles that the dealer must combine to deal them for the next game. According to the magician <a href="John_Nevil_Maskelyne" title="wikilink">John Maskelyne</a>, the above method was used, and he calls it the "faro dealer's shuffle".<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a> Maskelyne was the first to give clear instructions, but the shuffle was used and associated with faro earlier, as discovered mostly by the mathematician and magician <a href="Persi_Diaconis" title="wikilink">Persi Diaconis</a>.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a></p>

<p>A faro shuffle which leaves the original top card at the top and the original bottom card at the bottom is known as an <a href="out_shuffle" title="wikilink">out-shuffle</a>; one which moves the original top card to second and the original bottom card to second from the bottom is known as an <a href="in_shuffle" title="wikilink">in-shuffle</a>. These names were coined by the magician and computer programmer <a href="Alex_Elmsley" title="wikilink">Alex Elmsley</a>.<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a> A perfect faro shuffle, where the cards are perfectly alternated, is considered one of the most difficult sleights of <a href="card_manipulation" title="wikilink">card manipulation</a>, because it requires the shuffler to cut the deck into two equal stacks and apply just the right pressure when pushing the half decks into each other.</p>

<p>The faro shuffle is a controlled shuffle which does not fully randomize a deck. If one manages to perform eight perfect faro out-shuffles in a row, then the deck of 52 cards will be restored to its original order. If one can do perfect in-shuffles, then 26 shuffles will reverse the order of the deck and 26 more will restore it to its original order.<a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a></p>
<h2 id="computer-science-aspects">Computer-science aspects</h2>

<p>A faro shuffle is not to be confused with a <a href="sorting_algorithm" title="wikilink">sorting algorithm</a>. A perfect faro shuffle cycles the order of the cards into a fixed number of states. For a 52-card deck using perfect faro out-shuffles there are 8 possible states in the cycle. That is, a faro shuffle can only be used to return the deck to its order prior to faro shuffling; it will not sort a randomized deck, nor can it return a randomized deck to new-deck order (unless the randomized initial state of the deck just happens to be one of the permutations of faro-shuffling a new deck).</p>

<p>In-shuffles and out-shuffles are used in computer algorithms, notably in <a href="parallel_computing" title="wikilink">parallel computing</a>.<a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a></p>

<p>Below is a <a href="Python_(programming_language)" title="wikilink">Python 3</a> implementation of a perfect faro out-shuffle:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co">#! /usr/bin/env python</span>
<span class="co"># -*- coding: utf-8 -*-</span>
<span class="kw">class</span> Deck(<span class="bu">object</span>):
    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):
        <span class="va">self</span>.cards <span class="op">=</span> [
            <span class="st">'A♠'</span>, <span class="st">'2♠'</span>, <span class="st">'3♠'</span>, <span class="st">'4♠'</span>, <span class="st">'5♠'</span>, <span class="st">'6♠'</span>, <span class="st">'7♠'</span>, <span class="st">'8♠'</span>, <span class="st">'9♠'</span>, <span class="st">'10♠'</span>, <span class="st">'J♠'</span>,
            <span class="co">'Q♠'</span>, <span class="st">'K♠'</span>, <span class="st">'A♦'</span>, <span class="st">'2♦'</span>, <span class="st">'3♦'</span>, <span class="st">'4♦'</span>, <span class="st">'5♦'</span>, <span class="st">'6♦'</span>, <span class="st">'7♦'</span>, <span class="st">'8♦'</span>, <span class="st">'9♦'</span>,
            <span class="co">'10♦'</span>, <span class="st">'J♦'</span>, <span class="st">'Q♦'</span>, <span class="st">'K♦'</span>, <span class="st">'K♣'</span>, <span class="st">'Q♣'</span>, <span class="st">'J♣'</span>,<span class="st">'10♣'</span>, <span class="st">'9♣'</span>, <span class="st">'8♣'</span>, <span class="st">'7♣'</span>,
            <span class="co">'6♣'</span>, <span class="st">'5♣'</span>, <span class="st">'4♣'</span>, <span class="st">'3♣'</span>, <span class="st">'2♣'</span>, <span class="st">'A♣'</span>, <span class="st">'K♥'</span>, <span class="st">'Q♥'</span>,<span class="st">'J♥'</span>, <span class="st">'10♥'</span>, <span class="st">'9♥'</span>, 
            <span class="co">'8♥'</span>, <span class="st">'7♥'</span>, <span class="st">'6♥'</span>, <span class="st">'5♥'</span>, <span class="st">'4♥'</span>,<span class="st">'3♥'</span>, <span class="st">'2♥'</span>, <span class="st">'A♥'</span>]
    <span class="kw">def</span> <span class="fu">__eq__</span>(<span class="va">self</span>, other):
        <span class="cf">return</span> <span class="va">self</span>.cards <span class="op">==</span> other.cards

    <span class="kw">def</span> faro_shuffle(<span class="va">self</span>):
        <span class="co">'''Shuffles the deck using a perfect faro shuffle.'''</span>
        r <span class="op">=</span> []
        <span class="cf">for</span> (a, b) <span class="op">in</span> <span class="bu">zip</span>(<span class="va">self</span>.cards[<span class="dv">0</span>:<span class="dv">26</span>], <span class="va">self</span>.cards[<span class="dv">26</span>:]):
            r.append(a)
            r.append(b)
        <span class="va">self</span>.cards <span class="op">=</span> r

original_deck <span class="op">=</span> Deck()  <span class="co"># A deck in new-deck-order we will use for comparison.</span>
shuffled_deck <span class="op">=</span> Deck()  <span class="co"># A deck we will repeatedly faro-shuffle.</span>

<span class="cf">for</span> i <span class="op">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">1000</span>):
    shuffled_deck.faro_shuffle()
    <span class="cf">if</span> shuffled_deck <span class="op">==</span> original_deck:
        <span class="bu">print</span>(<span class="st">"Deck is back in new-deck order after </span><span class="sc">%s</span><span class="st"> shuffles."</span> <span class="op">%</span> i)
        <span class="cf">break</span></code></pre></div>

<p>The program shuffles a 52-card deck until it returns to its original order. This happens in exactly 8 iterations (shuffles):</p>

<p><code>
(prompt)&gt; python shuffle.py

The deck is back in new-deck order after 8 shuffles.
</code></p>

<p>Below is a <a href="Perl_(programming_language)" title="wikilink">Perl</a> implementation of a perfect out-faro shuffle:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/perl</span>
<span class="co"># File:  faro_shuffle.pl</span>
<span class="co"># Usage:  perl faro_shuffle.pl</span>
<span class="co"># Purpose:  To discover how many out-faro shuffles are required to</span>
<span class="co">#           revert a deck of 52 cards back to its original order.</span>

<span class="fu">use</span> <span class="kw">strict</span>;
<span class="fu">use</span> <span class="kw">warnings</span>;

<span class="co"># Given an input of 52 elements (cards), returns them</span>
<span class="co"># as if they were shuffled with an out-faro shuffle:</span>
<span class="kw">sub </span><span class="fu">faroShuffle</span>
{
   <span class="co"># Verify that there are exactly 52 inputs:</span>
   <span class="fu">use</span> Carp;
   croak <span class="kw">"</span><span class="st">faroShuffle() requires 52 elements</span><span class="kw">"</span>  <span class="kw">unless</span> <span class="dt">@_</span> == <span class="dv">52</span>;

   <span class="kw">return</span> <span class="fu">map</span> { <span class="dt">@_</span>[<span class="dt">$_</span>, <span class="dt">$_</span><span class="dv">+26</span>] } (<span class="dv">0</span> .. <span class="dv">25</span>);
}

<span class="co"># Define a deck in new-deck order that we will use for comparison:</span>
<span class="kw">my</span> <span class="dt">@originalDeck</span> = <span class="kw">qw(</span>
   AH  2H  3H  4H  5H  6H  7H  8H  9H 10H  JH  QH  KH  
   AC  2C  3C  4C  5C  6C  7C  8C  9C 10C  JC  QC  KC  
   KD  QD  JD 10D  9D  8D  7D  6D  5D  4D  3D  2D  AD  
   KS  QS  JS 10S  9S  8S  7S  6S  5S  4S  3S  2S  AS  
<span class="kw">)</span>;

<span class="co"># Create a deck that we will repeatedly faro-shuffle:</span>
<span class="kw">my</span> <span class="dt">@shuffledDeck</span> = <span class="dt">@originalDeck</span>;

<span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$i</span> (<span class="dv">1</span> .. <span class="dv">1000</span>)
{
   <span class="dt">@shuffledDeck</span> = faroShuffle(<span class="dt">@shuffledDeck</span>);

   <span class="kw">if</span> (<span class="kw">"</span><span class="dt">@shuffledDeck</span><span class="kw">"</span> <span class="kw">eq</span> <span class="kw">"</span><span class="dt">@originalDeck</span><span class="kw">"</span>)
   {
      <span class="fu">print</span> <span class="kw">"</span><span class="st">The deck is back in new-deck order after </span><span class="dt">$i</span><span class="st"> out-faro shuffles.</span><span class="ch">\n</span><span class="kw">"</span>;
      <span class="kw">last</span>;
   }
}

<span class="kw">__END__</span></code></pre></div>

<p>The program shuffles a 52-card deck until it returns to its original order. This happens in exactly 8 iterations (shuffles):</p>

<p><code>
(prompt)&gt; perl faro_shuffle.pl

The deck is back in new-deck order after 8 out-faro shuffles.
</code></p>

<p>Below is a <a href="Perl_6" title="wikilink">Perl 6</a> implementation of a perfect out-faro shuffle:</p>
<pre class="perl6"><code>#!/usr/bin/perl6
# File:  faro_shuffle.p6
# Usage:  perl6 faro_shuffle.p6
# Purpose:  To discover how many out-faros shuffles are required to
#           revert a deck of 52 cards back to its original order.

use v6;

# Define a deck in new-deck order that we will use for comparison:
my @originalDeck = &lt;
   AH  2H  3H  4H  5H  6H  7H  8H  9H 10H  JH  QH  KH  
   AC  2C  3C  4C  5C  6C  7C  8C  9C 10C  JC  QC  KC  
   KD  QD  JD 10D  9D  8D  7D  6D  5D  4D  3D  2D  AD  
   KS  QS  JS 10S  9S  8S  7S  6S  5S  4S  3S  2S  AS  
&gt;;

# Create a deck that we will repeatedly faro-shuffle:
my @deck = @originalDeck;

for 1 .. * -&gt; $i
{
   @deck = @deck[0 .. */2-1] Z @deck[*/2 .. *-1];  # the faro shuffle
   next  unless @deck eqv @originalDeck;  # if no match, repeat

   # We got a match!  Report and break out:
   print "The deck is back in new-deck order after $i out-faro shuffles.\n";
   last;
}

=finish</code></pre>

<p>The program shuffles a 52-card deck until it returns to its original order. This happens in exactly 8 iterations (shuffles):</p>

<p><code>
(prompt)&gt; perl6 faro_shuffle.p6

The deck is back in new-deck order after 8 out-faro shuffles.
</code></p>
<h2 id="group-theory-aspects">Group theory aspects</h2>

<p>In <a class="uri" href="mathematics" title="wikilink">mathematics</a>, a perfect shuffle can be considered an element of the <a href="symmetric_group" title="wikilink">symmetric group</a>.</p>

<p>More generally, in 

<math display="inline" id="Faro_shuffle:0">
 <semantics>
  <msub>
   <mi>S</mi>
   <mrow>
    <mn>2</mn>
    <mi>n</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>S</ci>
    <apply>
     <times></times>
     <cn type="integer">2</cn>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{2n}
  </annotation>
 </semantics>
</math>

, the <strong>perfect shuffle</strong> is the permutation that splits the set into 2 piles and interleaves them:</p>

<p>

<math display="block" id="Faro_shuffle:1">
 <semantics>
  <mrow>
   <mo>(</mo>
   <mtable displaystyle="true">
    <mtr>
     <mtd columnalign="center">
      <mn>1</mn>
     </mtd>
     <mtd columnalign="center">
      <mn>2</mn>
     </mtd>
     <mtd columnalign="center">
      <mn>3</mn>
     </mtd>
     <mtd columnalign="center">
      <mn>4</mn>
     </mtd>
     <mtd columnalign="center">
      <mi mathvariant="normal">⋯</mi>
     </mtd>
    </mtr>
    <mtr>
     <mtd columnalign="center">
      <mn>1</mn>
     </mtd>
     <mtd columnalign="center">
      <mrow>
       <mi>n</mi>
       <mo>+</mo>
       <mn>1</mn>
      </mrow>
     </mtd>
     <mtd columnalign="center">
      <mn>2</mn>
     </mtd>
     <mtd columnalign="center">
      <mrow>
       <mi>n</mi>
       <mo>+</mo>
       <mn>2</mn>
      </mrow>
     </mtd>
     <mtd columnalign="center">
      <mi mathvariant="normal">⋯</mi>
     </mtd>
    </mtr>
   </mtable>
   <mo>)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <cn type="integer">1</cn>
     <cn type="integer">2</cn>
     <cn type="integer">3</cn>
     <cn type="integer">4</cn>
     <ci>normal-⋯</ci>
    </matrixrow>
    <matrixrow>
     <cn type="integer">1</cn>
     <apply>
      <plus></plus>
      <ci>n</ci>
      <cn type="integer">1</cn>
     </apply>
     <cn type="integer">2</cn>
     <apply>
      <plus></plus>
      <ci>n</ci>
      <cn type="integer">2</cn>
     </apply>
     <ci>normal-⋯</ci>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{pmatrix}1&2&3&4&\cdots\\
1&n+1&2&n+2&\cdots\end{pmatrix}
  </annotation>
 </semantics>
</math>

 In other words, it is the map</p>

<p>

<math display="block" id="Faro_shuffle:2">
 <semantics>
  <mrow>
   <mi>k</mi>
   <mo>↦</mo>
   <mrow>
    <mo>{</mo>
    <mtable displaystyle="true">
     <mtr>
      <mtd columnalign="left">
       <mrow>
        <mo>⌈</mo>
        <mstyle displaystyle="false">
         <mfrac>
          <mi>k</mi>
          <mn>2</mn>
         </mfrac>
        </mstyle>
        <mo>⌉</mo>
       </mrow>
      </mtd>
      <mtd columnalign="left">
       <mrow>
        <mpadded width="+5pt">
         <mi>k</mi>
        </mpadded>
        <mtext>odd</mtext>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="left">
       <mrow>
        <mi>n</mi>
        <mo>+</mo>
        <mstyle displaystyle="false">
         <mfrac>
          <mi>k</mi>
          <mn>2</mn>
         </mfrac>
        </mstyle>
       </mrow>
      </mtd>
      <mtd columnalign="left">
       <mrow>
        <mpadded width="+5pt">
         <mi>k</mi>
        </mpadded>
        <mtext>even</mtext>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">maps-to</csymbol>
    <ci>k</ci>
    <apply>
     <csymbol cd="latexml">cases</csymbol>
     <apply>
      <ceiling></ceiling>
      <apply>
       <divide></divide>
       <ci>k</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>k</ci>
      <mtext>odd</mtext>
     </apply>
     <apply>
      <plus></plus>
      <ci>n</ci>
      <apply>
       <divide></divide>
       <ci>k</ci>
       <cn type="integer">2</cn>
      </apply>
     </apply>
     <apply>
      <times></times>
      <ci>k</ci>
      <mtext>even</mtext>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   k\mapsto\begin{cases}\left\lceil\frac{k}{2}\right\rceil&k\ \text{odd}\\
n+\frac{k}{2}&k\ \text{even}\end{cases}
  </annotation>
 </semantics>
</math>

</p>

<p>Analogously, the 

<math display="inline" id="Faro_shuffle:3">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mi>k</mi>
   <mo>,</mo>
   <mi>n</mi>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <interval closure="open">
    <ci>k</ci>
    <ci>n</ci>
   </interval>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (k,n)
  </annotation>
 </semantics>
</math>

-perfect shuffle permutation<a class="footnoteRef" href="#fn9" id="fnref9"><sup>9</sup></a> is the element of 

<math display="inline" id="Faro_shuffle:4">
 <semantics>
  <msub>
   <mi>S</mi>
   <mrow>
    <mi>k</mi>
    <mi>n</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>S</ci>
    <apply>
     <times></times>
     <ci>k</ci>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S_{kn}
  </annotation>
 </semantics>
</math>

 that splits the set into <em>k</em> piles and interleaves them.</p>

<p>The 

<math display="inline" id="Faro_shuffle:5">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mn>2</mn>
   <mo>,</mo>
   <mi>n</mi>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <interval closure="open">
    <cn type="integer">2</cn>
    <ci>n</ci>
   </interval>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (2,n)
  </annotation>
 </semantics>
</math>

-perfect shuffle, denoted 

<math display="inline" id="Faro_shuffle:6">
 <semantics>
  <msub>
   <mi>ρ</mi>
   <mi>n</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>ρ</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \rho_{n}
  </annotation>
 </semantics>
</math>

, is the composition of the 

<math display="inline" id="Faro_shuffle:7">
 <semantics>
  <mrow>
   <mo stretchy="false">(</mo>
   <mn>2</mn>
   <mo>,</mo>
   <mrow>
    <mi>n</mi>
    <mo>-</mo>
    <mn>1</mn>
   </mrow>
   <mo stretchy="false">)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <interval closure="open">
    <cn type="integer">2</cn>
    <apply>
     <minus></minus>
     <ci>n</ci>
     <cn type="integer">1</cn>
    </apply>
   </interval>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (2,n-1)
  </annotation>
 </semantics>
</math>

-perfect shuffle with an 

<math display="inline" id="Faro_shuffle:8">
 <semantics>
  <mi>n</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>n</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n
  </annotation>
 </semantics>
</math>

-cycle, so the sign of 

<math display="inline" id="Faro_shuffle:9">
 <semantics>
  <msub>
   <mi>ρ</mi>
   <mi>n</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>ρ</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \rho_{n}
  </annotation>
 </semantics>
</math>

 is:</p>

<p>

<math display="block" id="Faro_shuffle:10">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <mtext>sgn</mtext>
     <mrow>
      <mo stretchy="false">(</mo>
      <msub>
       <mi>ρ</mi>
       <mi>n</mi>
      </msub>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <msup>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
      <mrow>
       <mi>n</mi>
       <mo>+</mo>
       <mn>1</mn>
      </mrow>
     </msup>
     <mtext>sgn</mtext>
     <mrow>
      <mo stretchy="false">(</mo>
      <msub>
       <mi>ρ</mi>
       <mrow>
        <mi>n</mi>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </msub>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <mtext>sgn</mtext>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>ρ</ci>
      <ci>n</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <plus></plus>
       <ci>n</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
     <mtext>sgn</mtext>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>ρ</ci>
      <apply>
       <minus></minus>
       <ci>n</ci>
       <cn type="integer">1</cn>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mbox{sgn}(\rho_{n})=(-1)^{n+1}\mbox{sgn}(\rho_{n-1}).
  </annotation>
 </semantics>
</math>

</p>

<p>The sign is thus 4-periodic:</p>

<p>

<math display="block" id="Faro_shuffle:11">
 <semantics>
  <mrow>
   <mrow>
    <mtext>sgn</mtext>
    <mrow>
     <mo stretchy="false">(</mo>
     <msub>
      <mi>ρ</mi>
      <mi>n</mi>
     </msub>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mo>-</mo>
      <mn>1</mn>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mrow>
     <mo stretchy="false">⌊</mo>
     <mrow>
      <mi>n</mi>
      <mo>/</mo>
      <mn>2</mn>
     </mrow>
     <mo stretchy="false">⌋</mo>
    </mrow>
   </msup>
   <mo>=</mo>
   <mrow>
    <mo>{</mo>
    <mtable displaystyle="true">
     <mtr>
      <mtd columnalign="left">
       <mrow>
        <mo>+</mo>
        <mn>1</mn>
       </mrow>
      </mtd>
      <mtd columnalign="left">
       <mrow>
        <mi>n</mi>
        <mo>≡</mo>
        <mrow>
         <mn>0</mn>
         <mo>,</mo>
         <mrow>
          <mn>1</mn>
          <mspace width="veryverythickmathspace">
          </mspace>
          <mrow>
           <mo lspace="8.1pt" stretchy="false">(</mo>
           <mrow>
            <mo>mod</mo>
            <mn>4</mn>
           </mrow>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="left">
       <mrow>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </mtd>
      <mtd columnalign="left">
       <mrow>
        <mi>n</mi>
        <mo>≡</mo>
        <mrow>
         <mn>2</mn>
         <mo>,</mo>
         <mrow>
          <mn>3</mn>
          <mspace width="veryverythickmathspace">
          </mspace>
          <mrow>
           <mo lspace="8.1pt" stretchy="false">(</mo>
           <mrow>
            <mo>mod</mo>
            <mn>4</mn>
           </mrow>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <and></and>
    <apply>
     <eq></eq>
     <apply>
      <times></times>
      <mtext>sgn</mtext>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>ρ</ci>
       <ci>n</ci>
      </apply>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <floor></floor>
       <apply>
        <divide></divide>
        <ci>n</ci>
        <cn type="integer">2</cn>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <eq></eq>
     <share href="#.cmml">
     </share>
     <apply>
      <csymbol cd="latexml">cases</csymbol>
      <apply>
       <plus></plus>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <equivalent></equivalent>
       <ci>n</ci>
       <list>
        <cn type="integer">0</cn>
        <apply>
         <csymbol cd="latexml">annotated</csymbol>
         <cn type="integer">1</cn>
         <apply>
          <ci>pmod</ci>
          <cn type="integer">4</cn>
         </apply>
        </apply>
       </list>
      </apply>
      <apply>
       <minus></minus>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <equivalent></equivalent>
       <ci>n</ci>
       <list>
        <cn type="integer">2</cn>
        <apply>
         <csymbol cd="latexml">annotated</csymbol>
         <cn type="integer">3</cn>
         <apply>
          <ci>pmod</ci>
          <cn type="integer">4</cn>
         </apply>
        </apply>
       </list>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mbox{sgn}(\rho_{n})=(-1)^{\lfloor n/2\rfloor}=\begin{cases}+1&n\equiv 0,1\;\;%
(\mathop{{\rm mod}}4)\\
-1&n\equiv 2,3\;\;(\mathop{{\rm mod}}4)\end{cases}
  </annotation>
 </semantics>
</math>

</p>

<p>The first few perfect shuffles are

<math display="block" id="Faro_shuffle:12">
 <semantics>
  <msub>
   <mi>ρ</mi>
   <mn>0</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>ρ</ci>
    <cn type="integer">0</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \rho_{0}
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Faro_shuffle:13">
 <semantics>
  <msub>
   <mi>ρ</mi>
   <mn>1</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>ρ</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \rho_{1}
  </annotation>
 </semantics>
</math>

 are trivial, and 

<math display="inline" id="Faro_shuffle:14">
 <semantics>
  <msub>
   <mi>ρ</mi>
   <mn>2</mn>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>ρ</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \rho_{2}
  </annotation>
 </semantics>
</math>

 is the transposition 

<math display="inline" id="Faro_shuffle:15">
 <semantics>
  <mrow>
   <mrow>
    <mo stretchy="false">(</mo>
    <mn>23</mn>
    <mo stretchy="false">)</mo>
   </mrow>
   <mo>∈</mo>
   <msub>
    <mi>S</mi>
    <mn>4</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <in></in>
    <cn type="integer">23</cn>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>S</ci>
     <cn type="integer">4</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   (23)\in S_{4}
  </annotation>
 </semantics>
</math>

.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="In_shuffle" title="wikilink">In shuffle</a></li>
<li><a href="Out_shuffle" title="wikilink">Out shuffle</a></li>
</ul>
<h2 id="references">References</h2>
<ul>
<li></li>
</ul>
<ul>
<li></li>
</ul>
<ul>
<li></li>
</ul>
<ul>
<li></li>
</ul>
<h2 id="footnotes">Footnotes</h2>
<references>
</references>

<p>"</p>

<p><a href="Category:Card_game_terminology" title="wikilink">Category:Card game terminology</a> <a href="Category:Card_magic" title="wikilink">Category:Card magic</a> <a href="Category:Card_shuffling" title="wikilink">Category:Card shuffling</a> <a href="Category:Permutation_groups" title="wikilink">Category:Permutation groups</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">Morris 1998, 13<a href="#fnref1">↩</a></li>
<li id="fn2">, Diaconis, Graham, and Kantor 1983, 188<a href="#fnref2">↩</a></li>
<li id="fn3">Morris 1998, 111<a href="#fnref3">↩</a></li>
<li id="fn4">Maskelyne 1894, 204<a href="#fnref4">↩</a></li>
<li id="fn5">Morris 1998, 8<a href="#fnref5">↩</a></li>
<li id="fn6">Morris 1998, 11–12<a href="#fnref6">↩</a></li>
<li id="fn7">Diaconis, Graham, and Kantor 1983, 193<a href="#fnref7">↩</a></li>
<li id="fn8">Diaconis, Graham, and Kantor 1983, 191–193<a href="#fnref8">↩</a></li>
<li id="fn9">Ellis, Fan, and Shallit 2002<a href="#fnref9">↩</a></li>
</ol>
</section>
</body>

