<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="460">Precedence graph</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Precedence graph</h1>
<hr/>

<p>A <strong>precedence graph</strong>, also named <strong>conflict graph</strong> and <strong><a class="uri" href="serializability" title="wikilink">serializability</a> graph</strong>, is used in the context of <a href="concurrency_control" title="wikilink">concurrency control</a> in <a href="database" title="wikilink">databases</a>.</p>

<p>The precedence graph for a schedule S contains:</p>
<ul>
<li>A node for each committed transaction in S</li>
<li>An arc from T<sub>i</sub> to T<sub>j</sub> if an action of T<sub>i</sub> precedes and <a href="Schedule_(computer_science)#Conflicting_actions" title="wikilink">conflicts</a> with one of T<sub>j</sub>'s actions.</li>
</ul>
<h2 id="precedence-graph-example">Precedence graph example</h2>
<figure><b>(Figure)</b>
<figcaption>Precedence graph.svg</figcaption>
</figure>

<p>

<math display="block" id="Precedence_graph:0">
 <semantics>
  <mrow>
   <mi>D</mi>
   <mo>=</mo>
   <mrow>
    <mo>[</mo>
    <mtable displaystyle="true">
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>T</mi>
        <mn>1</mn>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>T</mi>
        <mn>2</mn>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>T</mi>
        <mn>3</mn>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>R</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>A</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>W</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>A</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mrow>
        <mi>W</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>A</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mrow>
        <mi>W</mi>
        <mrow>
         <mo stretchy="false">(</mo>
         <mi>A</mi>
         <mo stretchy="false">)</mo>
        </mrow>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
      <mtd columnalign="center">
       <mi></mi>
      </mtd>
     </mtr>
    </mtable>
    <mo>]</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>D</ci>
    <matrix>
     <matrixrow>
      <apply>
       <times></times>
       <ci>T</ci>
       <cn type="integer">1</cn>
      </apply>
      <apply>
       <times></times>
       <ci>T</ci>
       <cn type="integer">2</cn>
      </apply>
      <apply>
       <times></times>
       <ci>T</ci>
       <cn type="integer">3</cn>
      </apply>
     </matrixrow>
     <matrixrow>
      <apply>
       <times></times>
       <ci>R</ci>
       <ci>A</ci>
      </apply>
      <csymbol cd="latexml">absent</csymbol>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <times></times>
       <ci>W</ci>
       <ci>A</ci>
      </apply>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
     <matrixrow>
      <apply>
       <times></times>
       <ci>W</ci>
       <ci>A</ci>
      </apply>
      <csymbol cd="latexml">absent</csymbol>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <csymbol cd="latexml">absent</csymbol>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <csymbol cd="latexml">absent</csymbol>
      <apply>
       <times></times>
       <ci>W</ci>
       <ci>A</ci>
      </apply>
     </matrixrow>
     <matrixrow>
      <csymbol cd="latexml">absent</csymbol>
      <csymbol cd="latexml">absent</csymbol>
     </matrixrow>
    </matrix>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D=\begin{bmatrix}T1&T2&T3\\
R(A)&&\\
&W(A)&\\
&\\
W(A)&&\\
&&\\
&&W(A)\\
&\\
\end{bmatrix}
  </annotation>
 </semantics>
</math>

</p>

<p>or</p>
<dl>
<dd><strong>

<math display="inline" id="Precedence_graph:1">
 <semantics>
  <mrow>
   <mi>D</mi>
   <mo>=</mo>
   <mrow>
    <mi>R</mi>
    <mn>1</mn>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>A</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>D</ci>
    <apply>
     <times></times>
     <ci>R</ci>
     <cn type="integer">1</cn>
     <ci>A</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   D=R1(A)
  </annotation>
 </semantics>
</math>


 

<math display="inline" id="Precedence_graph:2">
 <semantics>
  <mrow>
   <mi>W</mi>
   <mn>2</mn>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>A</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>W</ci>
    <cn type="integer">2</cn>
    <ci>A</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   W2(A)
  </annotation>
 </semantics>
</math>

 

<math display="inline" id="Precedence_graph:3">
 <semantics>
  <mrow>
   <mi>C</mi>
   <mi>o</mi>
   <mi>m</mi>
   <mn>.2</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>C</ci>
    <ci>o</ci>
    <ci>m</ci>
    <cn type="float">.2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Com.2
  </annotation>
 </semantics>
</math>

 

<math display="inline" id="Precedence_graph:4">
 <semantics>
  <mrow>
   <mi>W</mi>
   <mn>1</mn>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>A</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>W</ci>
    <cn type="integer">1</cn>
    <ci>A</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   W1(A)
  </annotation>
 </semantics>
</math>

 

<math display="inline" id="Precedence_graph:5">
 <semantics>
  <mrow>
   <mi>C</mi>
   <mi>o</mi>
   <mi>m</mi>
   <mn>.1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>C</ci>
    <ci>o</ci>
    <ci>m</ci>
    <cn type="float">.1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Com.1
  </annotation>
 </semantics>
</math>

 

<math display="inline" id="Precedence_graph:6">
 <semantics>
  <mrow>
   <mi>W</mi>
   <mn>3</mn>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>A</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>W</ci>
    <cn type="integer">3</cn>
    <ci>A</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   W3(A)
  </annotation>
 </semantics>
</math>


 

<math display="inline" id="Precedence_graph:7">
 <semantics>
  <mrow>
   <mi>C</mi>
   <mi>o</mi>
   <mi>m</mi>
   <mn>.3</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>C</ci>
    <ci>o</ci>
    <ci>m</ci>
    <cn type="float">.3</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   Com.3
  </annotation>
 </semantics>
</math>

</strong>
</dd>
</dl>

<p>A precedence graph of the schedule D, with 3 transactions. As there is a cycle (of length 2; with two edges) through the committed transactions T1 and T2, this <a href="Schedule_(computer_science)" title="wikilink">schedule</a> (history) is <em>not</em> <a href="Serializability#View_and_conflict_serializability" title="wikilink">Conflict serializable</a>.</p>
<h2 id="testing-serializability-with-precedence-graph">Testing Serializability with Precedence Graph</h2>

<p>The drawing sequence for the precedence graph:-</p>
<ol>
<li>For each transaction T<sub>i</sub> participating in schedule S, create a node labelled T<sub>i</sub> in the precedence graph. So the precedence graph contains T<sub>1</sub>, T<sub>2</sub>, T<sub>3</sub></li>
<li>For each case in S where T<sub>i</sub> executes a write_item(X) then T<sub>j</sub> executes a read_item(X), create an edge (T<sub>i</sub> --&gt; T<sub>j</sub>) in the precedence graph. This occurs nowhere in the above example, as there is no read after write.</li>
<li>For each case in S where T<sub>i</sub> executes a read_item(X) then T<sub>j</sub> executes a write_item(X), create an edge (T<sub>i</sub> --&gt; T<sub>j</sub>) in the precedence graph. This will bring to front a directed graph from T<sub>1</sub> to T<sub>2</sub>.</li>
<li>For each case in S where T<sub>i</sub> executes a write_item(X) then T<sub>j</sub> executes a write_item(X), create an edge (T<sub>i</sub> --&gt; T<sub>j</sub>) in the precedence graph. It creates a directed graph from T<sub>2</sub> to T<sub>1</sub>, T<sub>1</sub> to T<sub>3</sub>, and T<sub>2</sub> to T<sub>3</sub>.</li>
<li>The schedule S is serializable if the precedence graph has no cycles. As T<sub>1</sub> and T<sub>2</sub> constitute a cycle, then we cannot declare S as serializable or not and serializability has to be checked using other methods.</li>
</ol>
<h2 id="external-links">External links</h2>
<ul>
<li>[<a class="uri" href="http://portal.acm.org/citation.cfm?id=1202608&amp;dl">http://portal.acm.org/citation.cfm?id=1202608&amp;dl;</a>;=GUIDE&amp;coll;=GUIDE&amp;CFID;=9802819&amp;CFTOKEN;=82728908 The Fundamentals of Database Systems, 5th Edition] the use of precedence graphs is discussed in chapter 17, as they relate to tests for <a href="serializability#View_and_conflict_serializability" title="wikilink">conflict serializability</a>.</li>
<li>Abraham Silberschatz, Henry Korth, and S. Sudarshan. 2005. Database Systems Concepts (5 ed.), PP. 628–630. McGraw-Hill, Inc., New York, NY, USA.</li>
</ul>

<p><a href="el:Γράφος_Σειριοποιησιμότητας" title="wikilink">el:Γράφος Σειριοποιησιμότητας</a> <a href="ru:Граф_предшествования" title="wikilink">ru:Граф предшествования</a>"</p>

<p><a href="Category:Database_management_systems" title="wikilink">Category:Database management systems</a></p>
</body>
</html>
