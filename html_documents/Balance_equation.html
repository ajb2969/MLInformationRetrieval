<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="184">Balance equation</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Balance equation</h1>
<hr/>

<p>In <a href="probability_theory" title="wikilink">probability theory</a>, a <strong>balance equation</strong> is an <a class="uri" href="equation" title="wikilink">equation</a> that describes the probability flux associated with a <a href="Markov_chain" title="wikilink">Markov chain</a> in and out of states or set of states.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>
<h2 id="global-balance">Global balance</h2>

<p>The <strong>global balance equations</strong> (also known as <strong>full balance equations</strong><a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a>) are a set of equations that in principle can always be solved to give the <a href="equilibrium_distribution" title="wikilink">equilibrium distribution</a> of a Markov chain (when such a distribution exists).</p>

<p>For a <a href="continuous_time_Markov_chain" title="wikilink">continuous time Markov chain</a> with state space <em>S</em>, transition rate from state <em>i</em> to <em>j</em> given by <em>q</em><sub><em>ij</em></sub> and equilibrium distribution given by 

<math display="inline" id="Balance_equation:0">
 <semantics>
  <mi>π</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>π</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle{\pi}
  </annotation>
 </semantics>
</math>

, the global balance equations are given for every state <em>i</em> in <em>S</em> by<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a></p>
<dl>
<dd><dl>
<dd>

<math display="inline" id="Balance_equation:1">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">∑</mo>
      <mrow>
       <mi>j</mi>
       <mo>∈</mo>
       <mrow>
        <mi>S</mi>
        <mo>∖</mo>
        <mrow>
         <mo stretchy="false">{</mo>
         <mi>i</mi>
         <mo stretchy="false">}</mo>
        </mrow>
       </mrow>
      </mrow>
     </msub>
     <mrow>
      <msub>
       <mi>π</mi>
       <mi>i</mi>
      </msub>
      <msub>
       <mi>q</mi>
       <mrow>
        <mi>i</mi>
        <mi>j</mi>
       </mrow>
      </msub>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">∑</mo>
      <mrow>
       <mi>j</mi>
       <mo>∈</mo>
       <mrow>
        <mi>S</mi>
        <mo>∖</mo>
        <mrow>
         <mo stretchy="false">{</mo>
         <mi>i</mi>
         <mo stretchy="false">}</mo>
        </mrow>
       </mrow>
      </mrow>
     </msub>
     <mrow>
      <msub>
       <mi>π</mi>
       <mi>j</mi>
      </msub>
      <msub>
       <mi>q</mi>
       <mrow>
        <mi>j</mi>
        <mi>i</mi>
       </mrow>
      </msub>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <in></in>
       <ci>j</ci>
       <apply>
        <setdiff></setdiff>
        <ci>S</ci>
        <set>
         <ci>i</ci>
        </set>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>π</ci>
       <ci>i</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>q</ci>
       <apply>
        <times></times>
        <ci>i</ci>
        <ci>j</ci>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <in></in>
       <ci>j</ci>
       <apply>
        <setdiff></setdiff>
        <ci>S</ci>
        <set>
         <ci>i</ci>
        </set>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>π</ci>
       <ci>j</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>q</ci>
       <apply>
        <times></times>
        <ci>j</ci>
        <ci>i</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sum_{j\in S\setminus\{i\}}\pi_{i}q_{ij}=\sum_{j\in S\setminus\{i\}}\pi_{j}q_{%
ji}.
  </annotation>
 </semantics>
</math>


</dd>
</dl>
</dd>
</dl>

<p>Here 

<math display="inline" id="Balance_equation:2">
 <semantics>
  <mrow>
   <msub>
    <mi>π</mi>
    <mi>i</mi>
   </msub>
   <msub>
    <mi>q</mi>
    <mrow>
     <mi>i</mi>
     <mi>j</mi>
    </mrow>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>π</ci>
     <ci>i</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>q</ci>
     <apply>
      <times></times>
      <ci>i</ci>
      <ci>j</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \pi_{i}q_{ij}
  </annotation>
 </semantics>
</math>

 represents the probability flux from state <em>i</em> to state <em>j</em>. In general it is computationally intractable to solve this system of equations for most queueing models.<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></p>

<p>For a <a href="discrete_time_Markov_chain" title="wikilink">discrete time Markov chain</a> with transition matrix <em>P</em> and equilibrium distribution 

<math display="inline" id="Balance_equation:3">
 <semantics>
  <mi>π</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>π</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \pi
  </annotation>
 </semantics>
</math>


 the global balance equation is</p>
<dl>
<dd><dl>
<dd>

<math display="inline" id="Balance_equation:4">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">∑</mo>
      <mrow>
       <mi>j</mi>
       <mo>∈</mo>
       <mrow>
        <mi>S</mi>
        <mo>∖</mo>
        <mrow>
         <mo stretchy="false">{</mo>
         <mi>i</mi>
         <mo stretchy="false">}</mo>
        </mrow>
       </mrow>
      </mrow>
     </msub>
     <mrow>
      <msub>
       <mi>π</mi>
       <mi>i</mi>
      </msub>
      <msub>
       <mi>p</mi>
       <mrow>
        <mi>i</mi>
        <mi>j</mi>
       </mrow>
      </msub>
     </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
     <msub>
      <mo largeop="true" symmetric="true">∑</mo>
      <mrow>
       <mi>j</mi>
       <mo>∈</mo>
       <mrow>
        <mi>S</mi>
        <mo>∖</mo>
        <mrow>
         <mo stretchy="false">{</mo>
         <mi>i</mi>
         <mo stretchy="false">}</mo>
        </mrow>
       </mrow>
      </mrow>
     </msub>
     <mrow>
      <msub>
       <mi>π</mi>
       <mi>j</mi>
      </msub>
      <msub>
       <mi>p</mi>
       <mrow>
        <mi>j</mi>
        <mi>i</mi>
       </mrow>
      </msub>
     </mrow>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <in></in>
       <ci>j</ci>
       <apply>
        <setdiff></setdiff>
        <ci>S</ci>
        <set>
         <ci>i</ci>
        </set>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>π</ci>
       <ci>i</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <apply>
        <times></times>
        <ci>i</ci>
        <ci>j</ci>
       </apply>
      </apply>
     </apply>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <apply>
       <in></in>
       <ci>j</ci>
       <apply>
        <setdiff></setdiff>
        <ci>S</ci>
        <set>
         <ci>i</ci>
        </set>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>π</ci>
       <ci>j</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>p</ci>
       <apply>
        <times></times>
        <ci>j</ci>
        <ci>i</ci>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sum_{j\in S\setminus\{i\}}\pi_{i}p_{ij}=\sum_{j\in S\setminus\{i\}}\pi_{j}p_{%
ji}.
  </annotation>
 </semantics>
</math>


</dd>
</dl>
</dd>
</dl>
<h2 id="detailed-balance">Detailed balance</h2>

<p>For a <a href="continuous_time_Markov_chain" title="wikilink">continuous time Markov chain</a> (CTMC) with <a href="transition_rate_matrix" title="wikilink">transition rate matrix</a> <em>Q</em>, if 

<math display="inline" id="Balance_equation:5">
 <semantics>
  <msub>
   <mi>π</mi>
   <mi>i</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>π</ci>
    <ci>i</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \pi_{i}
  </annotation>
 </semantics>
</math>

 can be found such that for every pair of states <em>i</em> and <em>j</em></p>
<dl>
<dd><dl>
<dd>

<math display="inline" id="Balance_equation:6">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>π</mi>
     <mi>i</mi>
    </msub>
    <msub>
     <mi>q</mi>
     <mrow>
      <mi>i</mi>
      <mi>j</mi>
     </mrow>
    </msub>
   </mrow>
   <mo>=</mo>
   <mrow>
    <msub>
     <mi>π</mi>
     <mi>j</mi>
    </msub>
    <msub>
     <mi>q</mi>
     <mrow>
      <mi>j</mi>
      <mi>i</mi>
     </mrow>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>π</ci>
      <ci>i</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>q</ci>
      <apply>
       <times></times>
       <ci>i</ci>
       <ci>j</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>π</ci>
      <ci>j</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>q</ci>
      <apply>
       <times></times>
       <ci>j</ci>
       <ci>i</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \pi_{i}q_{ij}=\pi_{j}q_{ji}
  </annotation>
 </semantics>
</math>


</dd>
</dl>
</dd>
</dl>

<p>holds, then the global balance equations are satisfied and 

<math display="inline" id="Balance_equation:7">
 <semantics>
  <mi>π</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>π</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \pi
  </annotation>
 </semantics>
</math>

 is the stationary distribution of the process.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> If such a solution can be found the resulting equations are usually much easier than directly solving the global balance equations.<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a></p>

<p>A CTMC is reversible if and only if the detailed balance conditions are satisfied for every pair of states <em>i</em> and <em>j</em>.</p>

<p>A <a href="discrete_time_Markov_chains" title="wikilink">discrete time Markov chains</a> (DTMC) with transition matrix <em>P</em> and equilibrium distribution 

<math display="inline" id="Balance_equation:8">
 <semantics>
  <mi>π</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>π</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \pi
  </annotation>
 </semantics>
</math>


 is said to be in detailed balance if for all pairs <em>i</em> and <em>j</em>,<a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a></p>
<dl>
<dd><dl>
<dd>

<math display="inline" id="Balance_equation:9">
 <semantics>
  <mrow>
   <mrow>
    <mrow>
     <msub>
      <mi>π</mi>
      <mi>i</mi>
     </msub>
     <msub>
      <mi>p</mi>
      <mrow>
       <mi>i</mi>
       <mi>j</mi>
      </mrow>
     </msub>
    </mrow>
    <mo>=</mo>
    <mrow>
     <msub>
      <mi>π</mi>
      <mi>j</mi>
     </msub>
     <msub>
      <mi>p</mi>
      <mrow>
       <mi>j</mi>
       <mi>i</mi>
      </mrow>
     </msub>
    </mrow>
   </mrow>
   <mo>.</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>π</ci>
      <ci>i</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <apply>
       <times></times>
       <ci>i</ci>
       <ci>j</ci>
      </apply>
     </apply>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>π</ci>
      <ci>j</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>p</ci>
      <apply>
       <times></times>
       <ci>j</ci>
       <ci>i</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \pi_{i}p_{ij}=\pi_{j}p_{ji}.
  </annotation>
 </semantics>
</math>


</dd>
</dl>
</dd>
</dl>

<p>When a solution can be found, as in the case of a CTMC, the computation is usually much quicker than directly solving the global balance equations.</p>
<h2 id="local-balance">Local balance</h2>

<p>In some situations, terms on either side of the global balance equations cancel. The global balance equations can then be partitioned to give a set of <strong>local balance equations</strong> (also known as <strong>partial balance equations</strong>,<a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a> <strong>independent balance equations</strong><a class="footnoteRef" href="#fn9" id="fnref9"><sup>9</sup></a> or <strong>individual balance equations</strong><a class="footnoteRef" href="#fn10" id="fnref10"><sup>10</sup></a>).<a class="footnoteRef" href="#fn11" id="fnref11"><sup>11</sup></a> These balance equations were first considered by <a href="Peter_Whittle" title="wikilink">Peter Whittle</a>.<a class="footnoteRef" href="#fn12" id="fnref12"><sup>12</sup></a><a class="footnoteRef" href="#fn13" id="fnref13"><sup>13</sup></a> The resulting equations are somewhere between detailed balance and global balance equations. Any solution 

<math display="inline" id="Balance_equation:10">
 <semantics>
  <mi>π</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>π</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \pi
  </annotation>
 </semantics>
</math>

 to the local balance equations is always a solution to the global balance equations (we can recover the global balance equations by summing the relevant local balance equations), but the converse is not always true.<a class="footnoteRef" href="#fn14" id="fnref14"><sup>14</sup></a> Often, constructing local balance equations is equivalent to removing the outer summations in the global balance equations for certain terms.<a class="footnoteRef" href="#fn15" id="fnref15"><sup>15</sup></a></p>

<p>During the 1980s it was thought local balance was a requirement for a <a href="product-form_solution" title="wikilink">product-form equilibrium distribution</a>,<a class="footnoteRef" href="#fn16" id="fnref16"><sup>16</sup></a><a class="footnoteRef" href="#fn17" id="fnref17"><sup>17</sup></a> but <a href="Erol_Gelenbe" title="wikilink">Gelenbe</a>'s <a class="uri" href="G-network" title="wikilink">G-network</a> model showed this not to be the case.<a class="footnoteRef" href="#fn18" id="fnref18"><sup>18</sup></a></p>
<h2 id="notes">Notes</h2>

<p>"</p>

<p><a href="Category:Articles_with_inconsistent_citation_formats" title="wikilink">Category:Articles with inconsistent citation formats</a> <a href="Category:Queueing_theory" title="wikilink">Category:Queueing theory</a> <a href="Category:Stochastic_processes" title="wikilink">Category:Stochastic processes</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2"><a href="#fnref2">↩</a></li>
<li id="fn3"><a href="#fnref3">↩</a></li>
<li id="fn4"><a href="#fnref4">↩</a></li>
<li id="fn5"><a href="#fnref5">↩</a></li>
<li id="fn6"></li>
<li id="fn7"><a href="#fnref7">↩</a></li>
<li id="fn8"></li>
<li id="fn9"><a href="#fnref9">↩</a></li>
<li id="fn10"><a href="#fnref10">↩</a></li>
<li id="fn11"></li>
<li id="fn12"></li>
<li id="fn13"><a href="#fnref13">↩</a></li>
<li id="fn14"></li>
<li id="fn15"></li>
<li id="fn16"><a href="#fnref16">↩</a></li>
<li id="fn17"><a href="#fnref17">↩</a></li>
<li id="fn18"><a href="#fnref18">↩</a></li>
</ol>
</section>
</body>
</html>
