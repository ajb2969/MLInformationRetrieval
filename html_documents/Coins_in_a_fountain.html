<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1058">Coins in a fountain</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Coins in a fountain</h1>
<hr/>

<p>In <a href="combinatorics" title="wikilink">combinatorial</a> mathematics, <strong>coins in a fountain</strong> is an interesting problem with an even more interesting <a href="generating_function" title="wikilink">generating function</a>. The problem is described below:  <strong>Solution</strong>:</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p><strong>First few terms of the sequence</strong><a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a><a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></p></td>
<td style="text-align: left;">
<p>0</p></td>
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p>5</p></td>
<td style="text-align: left;">
<p>6</p></td>
<td style="text-align: left;">
<p>7</p></td>
<td style="text-align: left;">
<p>8</p></td>
<td style="text-align: left;">
<p>9</p></td>
<td style="text-align: left;">
<p>10</p></td>
<td style="text-align: left;">
<p>11</p></td>
<td style="text-align: left;">
<p>12</p></td>
<td style="text-align: left;">
<p>13</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>5</p></td>
<td style="text-align: left;">
<p>9</p></td>
<td style="text-align: left;">
<p>15</p></td>
<td style="text-align: left;">
<p>26</p></td>
<td style="text-align: left;">
<p>45</p></td>
<td style="text-align: left;">
<p>78</p></td>
<td style="text-align: left;">
<p>135</p></td>
<td style="text-align: left;">
<p>234</p></td>
<td style="text-align: left;">
<p>...</p></td>
</tr>
</tbody>
</table>

<p>The above sequence show the number of ways in which <em>n</em> coins can be stacked. So, for example for 9 coins we have 45 different ways of stacking them in a fountain. The number 

<math display="inline" id="Coins_in_a_fountain:0">
 <semantics>
  <mrow>
   <mi>f</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>n</mi>
    <mo>,</mo>
    <mi>k</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>f</ci>
    <interval closure="open">
     <ci>n</ci>
     <ci>k</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f(n,k)
  </annotation>
 </semantics>
</math>

 which is the solution for the above stated problem is then given by the coefficients of the polynomial of the following generating function:</p>

<p>}} \end{align} | <mtpl><eqref>1<eqref></eqref></eqref></mtpl> }} Such <a href="generating_function" title="wikilink">generating function</a> are extensively studied in<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a></p>

<p>Specifically, the number of such fountains that can be created using <em>n</em> coins is given by the coefficients of:</p>

<p>}} \, \end{align} | <mtpl><eqref>2<eqref></eqref></eqref></mtpl> }} This is easily seen by substituting the value of <em>y</em> to be 1. This is because, suppose the generating function for () is of the form:</p>

<p>

<math display="block" id="Coins_in_a_fountain:1">
 <semantics>
  <mrow>
   <munder>
    <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
    <mi>n</mi>
   </munder>
   <mrow>
    <munder>
     <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
     <mi>k</mi>
    </munder>
    <mrow>
     <msub>
      <mi>C</mi>
      <mrow>
       <mi>n</mi>
       <mo>,</mo>
       <mi>k</mi>
      </mrow>
     </msub>
     <msup>
      <mi>x</mi>
      <mi>n</mi>
     </msup>
     <msup>
      <mi>y</mi>
      <mi>k</mi>
     </msup>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <sum></sum>
     <ci>n</ci>
    </apply>
    <apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <sum></sum>
      <ci>k</ci>
     </apply>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>C</ci>
       <list>
        <ci>n</ci>
        <ci>k</ci>
       </list>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>x</ci>
       <ci>n</ci>
      </apply>
      <apply>
       <csymbol cd="ambiguous">superscript</csymbol>
       <ci>y</ci>
       <ci>k</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sum_{n}\sum_{k}C_{n,k}x^{n}y^{k}
  </annotation>
 </semantics>
</math>

</p>

<p>then, if we want to get the total number of fountains we need to do summation over <em>k</em>. So, the number of fountains with <em>n</em> total coins can be given by:</p>

<p>

<math display="block" id="Coins_in_a_fountain:2">
 <semantics>
  <mrow>
   <munder>
    <mo largeop="true" movablelimits="false" symmetric="true">∑</mo>
    <mi>k</mi>
   </munder>
   <mrow>
    <msub>
     <mi>C</mi>
     <mrow>
      <mi>n</mi>
      <mo>,</mo>
      <mi>k</mi>
     </mrow>
    </msub>
    <msup>
     <mi>x</mi>
     <mi>n</mi>
    </msup>
    <msup>
     <mi>y</mi>
     <mi>k</mi>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <sum></sum>
     <ci>k</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>C</ci>
      <list>
       <ci>n</ci>
       <ci>k</ci>
      </list>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>x</ci>
      <ci>n</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <ci>y</ci>
      <ci>k</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \sum_{k}C_{n,k}x^{n}y^{k}
  </annotation>
 </semantics>
</math>

</p>

<p>which can be obtained by substituting the value of <em>y</em> to be 1 and observing the coefficient of <em>x</em><sup><em>n</em></sup>.</p>

<p><strong>Proof of generating function ().</strong> Consider the number of ways of forming a fountain of <em>n</em> coins with <em>k</em> coins at base to be given by 

<math display="inline" id="Coins_in_a_fountain:3">
 <semantics>
  <mrow>
   <mi>f</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>n</mi>
    <mo>,</mo>
    <mi>k</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>f</ci>
    <interval closure="open">
     <ci>n</ci>
     <ci>k</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f(n,k)
  </annotation>
 </semantics>
</math>

. Now, consider the number of ways of forming the same but with the restriction that the second most bottom layer (above the base layer) contains no gaps, i.e. it contains exactly <em>k</em> − 1 coins. Let this be called <em>primitive fountain</em> and denote it by 

<math display="inline" id="Coins_in_a_fountain:4">
 <semantics>
  <mrow>
   <mi>g</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>n</mi>
    <mo>,</mo>
    <mi>k</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>g</ci>
    <interval closure="open">
     <ci>n</ci>
     <ci>k</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   g(n,k)
  </annotation>
 </semantics>
</math>

. The two functions are related by the following equation:</p>

<p>This is because, we can view the <em>primitive fountain</em> as a normal fountain of <em>n</em> − <em>k</em>' coins with <em>k</em> − 1 coins in the base layer staked on top of a single layer of <em>k</em> coins without any gaps. Also, consider a normal fountain with a supposed gap in the second last layer (w.r.t. the base layer) in the <em>r</em> position. So, the normal fountain can be viewed as a set of two fountains:</p>
<ol>
<li>A <em>primitive fountain</em> with <em>n</em>' coins in it and base layer having <em>r</em> coins.</li>
<li>A normal fountain with <em>n</em> − <em>n</em>' coins in it and the base layer having <em>k</em> − <em>r</em> coins.</li>
</ol>

<p>So, we get the following relation: </p>

<p>Now, we can easily observe the generating function relation for () to be: </p>

<p>and for () to be: </p>

<p>Now, simply substituting () in () we get the relation:</p>

<p>

<math display="inline" id="Coins_in_a_fountain:5">
 <semantics>
  <mrow>
   <mi>F</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo>,</mo>
    <mi>y</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>F</ci>
    <interval closure="open">
     <ci>x</ci>
     <ci>y</ci>
    </interval>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \displaystyle F(x,y)
  </annotation>
 </semantics>
</math>


</p>
<h2 id="references">References</h2>

<p>"</p>

<p><a class="uri" href="Category:Combinatorics" title="wikilink">Category:Combinatorics</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">Sloane, N. J. A. (2000) The On-Line Encyclopedia of Integer Sequences. Published electronically at <a href="https://oeis.org/A005169">"Sloane's encyclopedia of sequences"</a><a href="#fnref1">↩</a></li>
<li id="fn2">Phillipe Duchon, Phillipe Flajolet, Guy Louchard and Gilles Schaeffer (2003)<a href="http://algo.inria.fr/flajolet/Publications/DuFlLoSc04.pdf">"Boltzmann Samplers for the Random Generation of Combinatorial Structures"</a><a href="#fnref2">↩</a></li>
<li id="fn3">Flajolet, P. (1980) Combinatorial aspects of continued fractions. Discrete Math. 32 125–161.<a href="#fnref3">↩</a></li>
</ol>
</section>
</body>
</html>
