<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="582">Stars and bars (combinatorics)</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Stars and bars (combinatorics)</h1>
<hr/>

<p>In the context of <a href="combinatorial_mathematics" title="wikilink">combinatorial mathematics</a>, <strong>stars and bars</strong> is a graphical aid for deriving certain <a class="uri" href="combinatorial" title="wikilink">combinatorial</a> theorems. It was popularized by <a href="William_Feller" title="wikilink">William Feller</a> in his classic book on probability. It can be used to solve many simple counting problems, such as how many ways there are to put <em>n</em> indistinguishable balls into <em>k</em> distinguishable bins.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>
<h2 id="statements-of-theorems">Statements of theorems</h2>

<p>The stars and bars method is often introduced specifically to prove the following two theorems of elementary combinatorics.</p>
<h3 id="theorem-one">Theorem one</h3>
<blockquote>

<p>For any pair of <a href="positive_integer" title="wikilink">positive integers</a> <em>n</em> and <em>k</em>, the number of <em>k</em>-<a href="tuple" title="wikilink">tuples</a> of <strong>positive</strong> integers whose sum is <em>n</em> is equal to the number of (<em>k</em> − 1)-element subsets of a set with <em>n</em> − 1 elements.</p>
</blockquote>

<p>Both of these numbers are given by the <a href="binomial_coefficient" title="wikilink">binomial coefficient</a> 

<math display="inline" id="Stars_and_bars_(combinatorics):0">
 <semantics>
  <mrow>
   <mo>(</mo>
   <mstyle scriptlevel="+1">
    <mtable columnspacing="0.4em" rowspacing="0.2ex">
     <mtr>
      <mtd>
       <mrow>
        <mi>n</mi>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd>
       <mrow>
        <mi>k</mi>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
   </mstyle>
   <mo>)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">binomial</csymbol>
    <apply>
     <minus></minus>
     <ci>n</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <minus></minus>
     <ci>k</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \textstyle{n-1\choose k-1}
  </annotation>
 </semantics>
</math>

. For example, when <em>n</em> = 3 and <em>k</em> = 2, the tuples counted by the theorem are (2, 1) and (1, 2), and there are 

<math display="inline" id="Stars_and_bars_(combinatorics):1">
 <semantics>
  <mrow>
   <mrow>
    <mo>(</mo>
    <mstyle scriptlevel="+1">
     <mtable columnspacing="0.4em" rowspacing="0.2ex">
      <mtr>
       <mtd>
        <mrow>
         <mn>3</mn>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </mtd>
      </mtr>
      <mtr>
       <mtd>
        <mrow>
         <mn>2</mn>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </mtd>
      </mtr>
     </mtable>
    </mstyle>
    <mo>)</mo>
   </mrow>
   <mo>=</mo>
   <mn>2</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="latexml">binomial</csymbol>
     <apply>
      <minus></minus>
      <cn type="integer">3</cn>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <minus></minus>
      <cn type="integer">2</cn>
      <cn type="integer">1</cn>
     </apply>
    </apply>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   {\textstyle\left({{3-1}\atop{2-1}}\right)}=2
  </annotation>
 </semantics>
</math>

 of them.</p>
<h3 id="theorem-two">Theorem two</h3>
<blockquote>

<p>For any pair of positive integers <em>n</em> and <em>k</em>, the number of <em>k</em>-<a href="tuple" title="wikilink">tuples</a> of <strong>non-negative</strong> integers whose sum is <em>n</em> is equal to the number of <a href="multiset" title="wikilink">multisets</a> of cardinality <em>k</em> − 1 taken from a set of size <em>n</em> + 1.</p>
</blockquote>

<p>Both numbers are given by the <a href="Multiset#Counting_multisets" title="wikilink">multiset number</a> 

<math display="inline" id="Stars_and_bars_(combinatorics):2">
 <semantics>
  <mrow>
   <mo rspace="0.8pt">(</mo>
   <mpadded width="-1.7pt">
    <mrow>
     <mo>(</mo>
     <mstyle scriptlevel="+1">
      <mtable columnspacing="0.4em" rowspacing="0.2ex">
       <mtr>
        <mtd>
         <mrow>
          <mi>n</mi>
          <mo>+</mo>
          <mn>1</mn>
         </mrow>
        </mtd>
       </mtr>
       <mtr>
        <mtd>
         <mrow>
          <mi>k</mi>
          <mo>-</mo>
          <mn>1</mn>
         </mrow>
        </mtd>
       </mtr>
      </mtable>
     </mstyle>
     <mo>)</mo>
    </mrow>
   </mpadded>
   <mo>)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">binomial</csymbol>
    <apply>
     <plus></plus>
     <ci>n</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <minus></minus>
     <ci>k</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \left(\!{\textstyle\left({{n+1}\atop{k-1}}\right)}\!\right)
  </annotation>
 </semantics>
</math>

, or equivalently by the binomial coefficient 

<math display="inline" id="Stars_and_bars_(combinatorics):3">
 <semantics>
  <mrow>
   <mrow>
    <mo>(</mo>
    <mstyle scriptlevel="+1">
     <mtable columnspacing="0.4em" rowspacing="0.2ex">
      <mtr>
       <mtd>
        <mrow>
         <mrow>
          <mi>n</mi>
          <mo>+</mo>
          <mi>k</mi>
         </mrow>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </mtd>
      </mtr>
      <mtr>
       <mtd>
        <mrow>
         <mi>k</mi>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </mtd>
      </mtr>
     </mtable>
    </mstyle>
    <mo>)</mo>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo>(</mo>
    <mstyle scriptlevel="+1">
     <mtable columnspacing="0.4em" rowspacing="0.2ex">
      <mtr>
       <mtd>
        <mrow>
         <mrow>
          <mi>n</mi>
          <mo>+</mo>
          <mi>k</mi>
         </mrow>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </mtd>
      </mtr>
      <mtr>
       <mtd>
        <mi>n</mi>
       </mtd>
      </mtr>
     </mtable>
    </mstyle>
    <mo>)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="latexml">binomial</csymbol>
     <apply>
      <minus></minus>
      <apply>
       <plus></plus>
       <ci>n</ci>
       <ci>k</ci>
      </apply>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <minus></minus>
      <ci>k</ci>
      <cn type="integer">1</cn>
     </apply>
    </apply>
    <apply>
     <csymbol cd="latexml">binomial</csymbol>
     <apply>
      <minus></minus>
      <apply>
       <plus></plus>
       <ci>n</ci>
       <ci>k</ci>
      </apply>
      <cn type="integer">1</cn>
     </apply>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   {\textstyle\left({{n+k-1}\atop{k-1}}\right)}={\textstyle\left({{n+k-1}\atop{n}%
}\right)}
  </annotation>
 </semantics>
</math>

 or multiset number 

<math display="inline" id="Stars_and_bars_(combinatorics):4">
 <semantics>
  <mrow>
   <mo rspace="0.8pt">(</mo>
   <mpadded width="-1.7pt">
    <mrow>
     <mo>(</mo>
     <mstyle scriptlevel="+1">
      <mtable columnspacing="0.4em" rowspacing="0.2ex">
       <mtr>
        <mtd>
         <mi>k</mi>
        </mtd>
       </mtr>
       <mtr>
        <mtd>
         <mi>n</mi>
        </mtd>
       </mtr>
      </mtable>
     </mstyle>
     <mo>)</mo>
    </mrow>
   </mpadded>
   <mo>)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">binomial</csymbol>
    <ci>k</ci>
    <ci>n</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \left(\!{\textstyle\left({{k}\atop{n}}\right)}\!\right)
  </annotation>
 </semantics>
</math>

. For example, when <em>n</em> = 3 and <em>k</em> = 2, the tuples counted by the theorem are (3, 0), (2, 1), (1, 2), and (0, 3), and there are 

<math display="inline" id="Stars_and_bars_(combinatorics):5">
 <semantics>
  <mrow>
   <mrow>
    <mo rspace="0.8pt">(</mo>
    <mpadded width="-1.7pt">
     <mrow>
      <mo>(</mo>
      <mstyle scriptlevel="+1">
       <mtable columnspacing="0.4em" rowspacing="0.2ex">
        <mtr>
         <mtd>
          <mrow>
           <mn>3</mn>
           <mo>+</mo>
           <mn>1</mn>
          </mrow>
         </mtd>
        </mtr>
        <mtr>
         <mtd>
          <mrow>
           <mn>2</mn>
           <mo>-</mo>
           <mn>1</mn>
          </mrow>
         </mtd>
        </mtr>
       </mtable>
      </mstyle>
      <mo>)</mo>
     </mrow>
    </mpadded>
    <mo>)</mo>
   </mrow>
   <mo>=</mo>
   <mn>4</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="latexml">binomial</csymbol>
     <apply>
      <plus></plus>
      <cn type="integer">3</cn>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <minus></minus>
      <cn type="integer">2</cn>
      <cn type="integer">1</cn>
     </apply>
    </apply>
    <cn type="integer">4</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \left(\!{\textstyle\left({{3+1}\atop{2-1}}\right)}\!\right)=4
  </annotation>
 </semantics>
</math>

 of them.</p>
<h2 id="proofs-via-the-method-of-stars-and-bars">Proofs via the method of stars and bars</h2>
<h3 id="theorem-one-1">Theorem one</h3>

<p>Suppose one has <em>n</em> objects (to be represented as <strong>stars</strong>; in the example below <em>n</em> = 7) to be placed into <em>k</em> bins (in the example <em>k</em> = 3), such that all bins contain at least one object; one distinguishes the bins (say they are numbered 1 to <em>k</em>) but one does not wish to distinguish the <em>n</em> stars (so configurations are only distinguished by the <em>number of stars</em> present in each bin; in fact a configuration is represented by a <em>k</em>-tuple of positive integers as in the statement of the theorem). Instead of starting to place stars into bins, one starts by placing the stars on a line:</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><table>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p>★ ★ ★ ★ ★ ★ ★</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>Fig. 1: seven objects represented by stars</p></td>
</tr>
</tbody>
</table></td>
</tr>
</tbody>
</table>

<p>where the stars for the first bin will be taken from the left, followed by the stars for the second bin, and so forth. Thus the configuration will be determined once one knows what is the first star going to the second bin, and the first star going to the third bin, and so on. One can indicate this by placing <em>k</em> − 1 separating <strong>bars</strong> at some places <em>between</em> two stars; since no bin is allowed to be empty, there can be at most one bar between a given pair of stars:</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><table>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p>★ ★ ★ ★</p></td>
<td style="text-align: left;">
<p>|</p></td>
<td style="text-align: left;">
<p>★</p></td>
<td style="text-align: left;">
<p>|</p></td>
<td style="text-align: left;">
<p>★ ★</p></td>
</tr>
</tbody>
</table></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>Fig. 2: two bars give rise to three bins containing 4, 1, and 2 objects</p></td>
</tr>
</tbody>
</table>

<p>Thus one views the <em>n</em> stars as fixed objects defining <em>n</em> − 1 gaps, in each of which there may or not be one bar (bin partition). One has to choose <em>k</em> − 1 of them to actually contain a bar; therefore there are 

<math display="inline" id="Stars_and_bars_(combinatorics):6">
 <semantics>
  <mrow>
   <mo>(</mo>
   <mstyle scriptlevel="+1">
    <mtable columnspacing="0.4em" rowspacing="0.2ex">
     <mtr>
      <mtd>
       <mrow>
        <mi>n</mi>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd>
       <mrow>
        <mi>k</mi>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
   </mstyle>
   <mo>)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">binomial</csymbol>
    <apply>
     <minus></minus>
     <ci>n</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <minus></minus>
     <ci>k</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   {\textstyle\left({{n-1}\atop{k-1}}\right)}
  </annotation>
 </semantics>
</math>

 possible configurations (see <a class="uri" href="combination" title="wikilink">combination</a>).</p>
<h3 id="theorem-two-1">Theorem two</h3>

<p>In this case, the representation of a tuple as a sequence of stars and bars, with the bars dividing the stars into bins, is unchanged. The weakened restriction of nonnegativity (instead of positivity) means that one may place multiple bars between two stars, as well as placing bars before the first star or after the last star. Thus, for example, when <em>n</em> = 7 and <em>k</em> = 5, the tuple (4, 0, 1, 2, 0) may be represented by the following diagram.</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><table>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p>★ ★ ★ ★</p></td>
<td style="text-align: left;">
<p>|</p></td>
<td style="text-align: left;">
<p>|</p></td>
<td style="text-align: left;">
<p>★</p></td>
<td style="text-align: left;">
<p>|</p></td>
<td style="text-align: left;">
<p>★ ★</p></td>
<td style="text-align: left;">
<p>|</p></td>
</tr>
</tbody>
</table></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>Fig. 3: four bars give rise to five bins containing 4, 0, 1, 2, and 0 objects</p></td>
</tr>
</tbody>
</table>

<p>This establishes a <a href="bijection" title="wikilink">one-to-one correspondence</a> between tuples of the desired form and selections with replacement of <em>k</em> − 1 gaps from the <em>n</em> + 1 available gaps, or equivalently (<em>k</em> − 1)-element <em>multi</em>sets drawn from a set of size <em>n</em> − 1. By definition, such objects are counted by the multichoose number 

<math display="inline" id="Stars_and_bars_(combinatorics):7">
 <semantics>
  <mrow>
   <mo rspace="0.8pt">(</mo>
   <mpadded width="-1.7pt">
    <mrow>
     <mo>(</mo>
     <mstyle scriptlevel="+1">
      <mtable columnspacing="0.4em" rowspacing="0.2ex">
       <mtr>
        <mtd>
         <mrow>
          <mi>n</mi>
          <mo>+</mo>
          <mn>1</mn>
         </mrow>
        </mtd>
       </mtr>
       <mtr>
        <mtd>
         <mrow>
          <mi>k</mi>
          <mo>-</mo>
          <mn>1</mn>
         </mrow>
        </mtd>
       </mtr>
      </mtable>
     </mstyle>
     <mo>)</mo>
    </mrow>
   </mpadded>
   <mo>)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">binomial</csymbol>
    <apply>
     <plus></plus>
     <ci>n</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <minus></minus>
     <ci>k</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \left(\!{\textstyle\left({{n+1}\atop{k-1}}\right)}\!\right)
  </annotation>
 </semantics>
</math>

.</p>

<p>To see that these objects are also counted by the binomial coefficient 

<math display="inline" id="Stars_and_bars_(combinatorics):8">
 <semantics>
  <mrow>
   <mo>(</mo>
   <mstyle scriptlevel="+1">
    <mtable columnspacing="0.4em" rowspacing="0.2ex">
     <mtr>
      <mtd>
       <mrow>
        <mrow>
         <mi>n</mi>
         <mo>+</mo>
         <mi>k</mi>
        </mrow>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd>
       <mrow>
        <mi>k</mi>
        <mo>-</mo>
        <mn>1</mn>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
   </mstyle>
   <mo>)</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="latexml">binomial</csymbol>
    <apply>
     <minus></minus>
     <apply>
      <plus></plus>
      <ci>n</ci>
      <ci>k</ci>
     </apply>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <minus></minus>
     <ci>k</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   {\textstyle\left({{n+k-1}\atop{k-1}}\right)}
  </annotation>
 </semantics>
</math>

, observe that the desired arrangements consist of <em>n</em> + <em>k</em> − 1 objects (<em>n</em> stars and <em>k</em> − 1 bars), and an arbitrary choice of <em>n</em> of <em>n</em> + <em>k</em> − 1 positions to hold the stars determines the entire arrangement.</p>
<h2 id="examples">Examples</h2>

<p>If <em>n</em> = 5, <em>k</em> = 4, and a set of size <em>k</em> is {a, b, c, d}, then ★|★★★||★ would represent the multiset {a, b, b, b, d} or the 4-tuple (1, 3, 0, 1). The representation of any multiset for this example would use <em>n</em> = 5 stars and <em>k</em> − 1 = 3 bars.</p>

<p>Many elementary <a href="word_problem_(mathematics_education)" title="wikilink">word problems</a> in combinatorics are resolved by the theorems above. For example, if one wishes to count the number of ways to distribute seven indistinguishable one dollar coins among Amber, Ben, and Curtis so that each of them receives at least one dollar, one may observe that distributions are essentially equivalent to tuples of three positive integers whose sum is 7. (Here the first entry in the tuple is the number of coins given to Amber, and so on.) Thus the stars and bars apply with <em>n</em> = 7 and <em>k</em> = 3, and there are 

<math display="inline" id="Stars_and_bars_(combinatorics):9">
 <semantics>
  <mrow>
   <mrow>
    <mo>(</mo>
    <mstyle scriptlevel="+1">
     <mtable columnspacing="0.4em" rowspacing="0.2ex">
      <mtr>
       <mtd>
        <mrow>
         <mn>7</mn>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </mtd>
      </mtr>
      <mtr>
       <mtd>
        <mrow>
         <mn>3</mn>
         <mo>-</mo>
         <mn>1</mn>
        </mrow>
       </mtd>
      </mtr>
     </mtable>
    </mstyle>
    <mo>)</mo>
   </mrow>
   <mo>=</mo>
   <mn>15</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="latexml">binomial</csymbol>
     <apply>
      <minus></minus>
      <cn type="integer">7</cn>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <minus></minus>
      <cn type="integer">3</cn>
      <cn type="integer">1</cn>
     </apply>
    </apply>
    <cn type="integer">15</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \textstyle{7-1\choose 3-1}=15
  </annotation>
 </semantics>
</math>

 ways to distribute the coins.</p>
<h2 id="references">References</h2>
<references>
</references>
<h2 id="further-reading">Further reading</h2>
<ul>
<li></li>
<li></li>
</ul>

<p>"</p>

<p><a href="Category:Applied_probability" title="wikilink">Stars and bars (probability)</a> <a href="Category:Combinatorics" title="wikilink">Stars and bars (probability)</a> <a href="Category:Articles_containing_proofs" title="wikilink">Category:Articles containing proofs</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="William_Feller" title="wikilink">Feller, W.</a> (1950) <em>An Introduction to Probability Theory and Its Applications</em>, Wiley, Vol 1, 2nd ed.<a href="#fnref1">↩</a></li>
</ol>
</section>
</body>
</html>
