<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1174">Wallace tree</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Wallace tree</h1>
<hr/>

<p><a href="File:Hindu_lattice_2.svg" title="wikilink">thumb |basic principle known from manual multiplication</a></p>

<p><a href="Image:wallace_tree_8x8.svg" title="wikilink">thumb | Example of reduction on 8x8 multiplier</a></p>

<p>A <strong>Wallace tree</strong> is an <a href="Computational_complexity_theory" title="wikilink">efficient</a> <a href="Computer_hardware" title="wikilink">hardware</a> implementation of a digital circuit that multiplies two integers, devised by Australian Computer Scientist <a href="Chris_Wallace_(computer_scientist)" title="wikilink">Chris Wallace</a> in 1964.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>

<p>The Wallace tree has three steps:</p>
<ol>
<li>Multiply (that is - AND) each bit of one of the arguments, by each bit of the other, yielding 

<math display="inline" id="Wallace_tree:0">
 <semantics>
  <msup>
   <mi>n</mi>
   <mn>2</mn>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>n</ci>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n^{2}
  </annotation>
 </semantics>
</math>

 results. Depending on position of the multiplied bits, the wires carry different weights, for example wire of bit carrying result of 

<math display="inline" id="Wallace_tree:1">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>2</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>3</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">3</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{2}b_{3}
  </annotation>
 </semantics>
</math>

 is 32 (see explanation of weights below).</li>
<li>Reduce the number of partial products to two by layers of full and half adders.</li>
<li>Group the wires in two numbers, and add them with a conventional <a href="adder_(electronics)" title="wikilink">adder</a>.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></li>
</ol>

<p>The second phase works as follows. As long as there are three or more wires with the same weight add a following layer:</p>
<ul>
<li>Take any three wires with the same weights and input them into a <a href="full_adder" title="wikilink">full adder</a>. The result will be an output wire of the same weight and an output wire with a higher weight for each three input wires.</li>
<li>If there are two wires of the same weight left, input them into a <a href="half_adder" title="wikilink">half adder</a>.</li>
<li>If there is just one wire left, connect it to the next layer.</li>
</ul>

<p>The benefit of the Wallace tree is that there are only 

<math display="inline" id="Wallace_tree:2">
 <semantics>
  <mrow>
   <mi>O</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mi>log</mi>
     <mi>n</mi>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>O</ci>
    <apply>
     <log></log>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   O(\log n)
  </annotation>
 </semantics>
</math>

 reduction layers, and each layer has 

<math display="inline" id="Wallace_tree:3">
 <semantics>
  <mrow>
   <mi>O</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mn>1</mn>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>O</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   O(1)
  </annotation>
 </semantics>
</math>


 propagation delay. As making the partial products is 

<math display="inline" id="Wallace_tree:4">
 <semantics>
  <mrow>
   <mi>O</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mn>1</mn>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>O</ci>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   O(1)
  </annotation>
 </semantics>
</math>

 and the final addition is 

<math display="inline" id="Wallace_tree:5">
 <semantics>
  <mrow>
   <mi>O</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mi>log</mi>
     <mi>n</mi>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>O</ci>
    <apply>
     <log></log>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   O(\log n)
  </annotation>
 </semantics>
</math>

, the multiplication is only 

<math display="inline" id="Wallace_tree:6">
 <semantics>
  <mrow>
   <mi>O</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <mi>log</mi>
     <mi>n</mi>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>O</ci>
    <apply>
     <log></log>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   O(\log n)
  </annotation>
 </semantics>
</math>

, not much slower than addition (however, much more expensive in the gate count). Naively adding partial products with regular adders would require 

<math display="inline" id="Wallace_tree:7">
 <semantics>
  <mrow>
   <mi>O</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mrow>
     <msup>
      <mi>log</mi>
      <mn>2</mn>
     </msup>
     <mi>n</mi>
    </mrow>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>O</ci>
    <apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <log></log>
      <cn type="integer">2</cn>
     </apply>
     <ci>n</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   O(\log^{2}n)
  </annotation>
 </semantics>
</math>

 time. From a <a href="computational_complexity_theory" title="wikilink">complexity theoretic</a> perspective, the Wallace tree algorithm puts multiplication in the class <a href="NC_(complexity)" title="wikilink">NC<sup>1</sup></a>.</p>

<p>These computations only consider <a href="gate_delay" title="wikilink">gate delays</a> and don't deal with wire delays, which can also be very substantial.</p>

<p>The Wallace tree can be also represented by a tree of 3/2 or 4/2 adders.</p>

<p>It is sometimes combined with <a href="Booth_encoding" title="wikilink">Booth encoding</a>.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a><a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></p>
<h2 id="weights-explained">Weights explained</h2>

<p>The weight of a wire is the <a class="uri" href="radix" title="wikilink">radix</a> (to base 2) of the digit that the wire carries. In general, 

<math display="inline" id="Wallace_tree:8">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mi>n</mi>
   </msub>
   <msub>
    <mi>b</mi>
    <mi>m</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <ci>n</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <ci>m</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{n}b_{m}
  </annotation>
 </semantics>
</math>


 – have indexes of 

<math display="inline" id="Wallace_tree:9">
 <semantics>
  <mi>n</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>n</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Wallace_tree:10">
 <semantics>
  <mi>m</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>m</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   m
  </annotation>
 </semantics>
</math>

; and since 

<math display="inline" id="Wallace_tree:11">
 <semantics>
  <mrow>
   <mrow>
    <msup>
     <mn>2</mn>
     <mi>n</mi>
    </msup>
    <msup>
     <mn>2</mn>
     <mi>m</mi>
    </msup>
   </mrow>
   <mo>=</mo>
   <msup>
    <mn>2</mn>
    <mrow>
     <mi>n</mi>
     <mo>+</mo>
     <mi>m</mi>
    </mrow>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <ci>n</ci>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <ci>m</ci>
     </apply>
    </apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <cn type="integer">2</cn>
     <apply>
      <plus></plus>
      <ci>n</ci>
      <ci>m</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{n}2^{m}=2^{n+m}
  </annotation>
 </semantics>
</math>

 the weight of 

<math display="inline" id="Wallace_tree:12">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mi>n</mi>
   </msub>
   <msub>
    <mi>b</mi>
    <mi>m</mi>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <ci>n</ci>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <ci>m</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{n}b_{m}
  </annotation>
 </semantics>
</math>

 is 

<math display="inline" id="Wallace_tree:13">
 <semantics>
  <msup>
   <mn>2</mn>
   <mrow>
    <mi>n</mi>
    <mo>+</mo>
    <mi>m</mi>
   </mrow>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <cn type="integer">2</cn>
    <apply>
     <plus></plus>
     <ci>n</ci>
     <ci>m</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{n+m}
  </annotation>
 </semantics>
</math>


.</p>
<h2 id="example">Example</h2>

<p>

<math display="inline" id="Wallace_tree:14">
 <semantics>
  <mrow>
   <mi>n</mi>
   <mo>=</mo>
   <mn>4</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <ci>n</ci>
    <cn type="integer">4</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   n=4
  </annotation>
 </semantics>
</math>

, multiplying 

<math display="inline" id="Wallace_tree:15">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>3</mn>
   </msub>
   <msub>
    <mi>a</mi>
    <mn>2</mn>
   </msub>
   <msub>
    <mi>a</mi>
    <mn>1</mn>
   </msub>
   <msub>
    <mi>a</mi>
    <mn>0</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{3}a_{2}a_{1}a_{0}
  </annotation>
 </semantics>
</math>

 by 

<math display="inline" id="Wallace_tree:16">
 <semantics>
  <mrow>
   <msub>
    <mi>b</mi>
    <mn>3</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>2</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>1</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>0</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   b_{3}b_{2}b_{1}b_{0}
  </annotation>
 </semantics>
</math>

:</p>
<ol>
<li>First we multiply every bit by every bit:
<ul>
<li>weight 1 - 

<math display="inline" id="Wallace_tree:17">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>0</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>0</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">0</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{0}b_{0}
  </annotation>
 </semantics>
</math>

</li>
<li>weight 2 - 

<math display="inline" id="Wallace_tree:18">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>0</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>1</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">0</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{0}b_{1}
  </annotation>
 </semantics>
</math>


, 

<math display="inline" id="Wallace_tree:19">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>1</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>0</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{1}b_{0}
  </annotation>
 </semantics>
</math>

</li>
<li>weight 4 - 

<math display="inline" id="Wallace_tree:20">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>0</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>2</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">0</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{0}b_{2}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Wallace_tree:21">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>1</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>1</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{1}b_{1}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Wallace_tree:22">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>2</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>0</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{2}b_{0}
  </annotation>
 </semantics>
</math>

</li>
<li>weight 8 - 

<math display="inline" id="Wallace_tree:23">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>0</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>3</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">0</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">3</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{0}b_{3}
  </annotation>
 </semantics>
</math>


, 

<math display="inline" id="Wallace_tree:24">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>1</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>2</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{1}b_{2}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Wallace_tree:25">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>2</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>1</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{2}b_{1}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Wallace_tree:26">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>3</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>0</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">0</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{3}b_{0}
  </annotation>
 </semantics>
</math>

</li>
<li>weight 16 - 

<math display="inline" id="Wallace_tree:27">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>1</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>3</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">3</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{1}b_{3}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Wallace_tree:28">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>2</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>2</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{2}b_{2}
  </annotation>
 </semantics>
</math>


, 

<math display="inline" id="Wallace_tree:29">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>3</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>1</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">1</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{3}b_{1}
  </annotation>
 </semantics>
</math>

</li>
<li>weight 32 - 

<math display="inline" id="Wallace_tree:30">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>2</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>3</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">3</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{2}b_{3}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Wallace_tree:31">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>3</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>2</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{3}b_{2}
  </annotation>
 </semantics>
</math>

</li>
<li>weight 64 - 

<math display="inline" id="Wallace_tree:32">
 <semantics>
  <mrow>
   <msub>
    <mi>a</mi>
    <mn>3</mn>
   </msub>
   <msub>
    <mi>b</mi>
    <mn>3</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>a</ci>
     <cn type="integer">3</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>b</ci>
     <cn type="integer">3</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   a_{3}b_{3}
  </annotation>
 </semantics>
</math>

</li>
</ul></li>
<li>Reduction layer 1:
<ul>
<li>Pass the only weight-1 wire through, output: 1 weight-1 wire</li>
<li>Add a half adder for weight 2, outputs: 1 weight-2 wire, 1 weight-4 wire</li>
<li>Add a full adder for weight 4, outputs: 1 weight-4 wire, 1 weight-8 wire</li>
<li>Add a full adder for weight 8, and pass the remaining wire through, outputs: 2 weight-8 wires, 1 weight-16 wire</li>
<li>Add a full adder for weight 16, outputs: 1 weight-16 wire, 1 weight-32 wire</li>
<li>Add a half adder for weight 32, outputs: 1 weight-32 wire, 1 weight-64 wire</li>
<li>Pass the only weight-64 wire through, output: 1 weight-64 wire</li>
</ul></li>
<li>Wires at the output of reduction layer 1:
<ul>
<li>weight 1 - 1</li>
<li>weight 2 - 1</li>
<li>weight 4 - 2</li>
<li>weight 8 - 3</li>
<li>weight 16 - 2</li>
<li>weight 32 - 2</li>
<li>weight 64 - 2</li>
</ul></li>
<li>Reduction layer 2:
<ul>
<li>Add a full adder for weight 8, and half adders for weights 4, 16, 32, 64</li>
</ul></li>
<li>Outputs:
<ul>
<li>weight 1 - 1</li>
<li>weight 2 - 1</li>
<li>weight 4 - 1</li>
<li>weight 8 - 2</li>
<li>weight 16 - 2</li>
<li>weight 32 - 2</li>
<li>weight 64 - 2</li>
<li>weight 128 - 1</li>
</ul></li>
<li>Group the wires into a pair integers and an adder to add them.</li>
</ol>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Dadda_tree" title="wikilink">Dadda tree</a></li>
</ul>
<h2 id="references">References</h2>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://www.openhdl.com/vhdl/655-vhdl-component-wallace-tree-multiplier-generic.html">Generic VHDL Implementation of Wallace Tree Multiplier</a>.</li>
</ul>

<p>"</p>

<p><a href="Category:Digital_circuits" title="wikilink">Category:Digital circuits</a> <a href="Category:Computer_arithmetic" title="wikilink">Category:Computer arithmetic</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">C. S. Wallace, A suggestion for a fast multiplier, IEEE Trans. on Electronic Comp. EC-13(1): 14-17 (1964)<a href="#fnref1">↩</a></li>
<li id="fn2"><a href="http://www.veech.com/index_files/Wallace%20Tree.pdf">Veech engineering</a><a href="#fnref2">↩</a></li>
<li id="fn3"><a href="http://www.eecs.tufts.edu/~ryun01/vlsi/design.htm">Tufts university</a><a href="#fnref3">↩</a></li>
<li id="fn4"><a href="http://www.cs.umass.edu/~weems/CmpSci535/Discussion7.html">University of Massachusetts, Amherst</a><a href="#fnref4">↩</a></li>
</ol>
</section>
</body>
</html>
