<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1824">Structural similarity</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Structural similarity</h1>
<hr/>

<p>The <strong>structural similarity</strong> (SSIM) index is a method for measuring the similarity between two images. The SSIM index is a <a href="full_reference_metric" title="wikilink">full reference metric</a>; in other words, the measuring of image quality based on an initial uncompressed or distortion-free image as reference. SSIM is designed to improve on traditional methods like <a href="peak_signal-to-noise_ratio" title="wikilink">peak signal-to-noise ratio</a> (PSNR) and <a href="mean_squared_error" title="wikilink">mean squared error</a> (MSE), which have proven to be inconsistent with human eye perception.</p>

<p>The difference with respect to other techniques mentioned previously such as MSE or PSNR is that these approaches estimate <em>perceived errors</em>; on the other hand, SSIM considers image degradation as <em>perceived change in structural information</em>. Structural information is the idea that the pixels have strong inter-dependencies especially when they are spatially close. These dependencies carry important information about the structure of the objects in the visual scene.</p>

<p>The SSIM metric is calculated on various windows of an image. The measure between two windows 

<math display="inline" id="Structural_similarity:0">
 <semantics>
  <mi>x</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>x</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Structural_similarity:1">
 <semantics>
  <mi>y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   y
  </annotation>
 </semantics>
</math>

 of common size <em>N</em>×<em>N</em> is:</p>

<p>

<math display="block" id="Structural_similarity:2">
 <semantics>
  <mrow>
   <mrow>
    <mtext>SSIM</mtext>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <mi>y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mrow>
        <mn>2</mn>
        <msub>
         <mi>μ</mi>
         <mi>x</mi>
        </msub>
        <msub>
         <mi>μ</mi>
         <mi>y</mi>
        </msub>
       </mrow>
       <mo>+</mo>
       <msub>
        <mi>c</mi>
        <mn>1</mn>
       </msub>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mrow>
        <mn>2</mn>
        <msub>
         <mi>σ</mi>
         <mrow>
          <mi>x</mi>
          <mi>y</mi>
         </mrow>
        </msub>
       </mrow>
       <mo>+</mo>
       <msub>
        <mi>c</mi>
        <mn>2</mn>
       </msub>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <msubsup>
        <mi>μ</mi>
        <mi>x</mi>
        <mn>2</mn>
       </msubsup>
       <mo>+</mo>
       <msubsup>
        <mi>μ</mi>
        <mi>y</mi>
        <mn>2</mn>
       </msubsup>
       <mo>+</mo>
       <msub>
        <mi>c</mi>
        <mn>1</mn>
       </msub>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <msubsup>
        <mi>σ</mi>
        <mi>x</mi>
        <mn>2</mn>
       </msubsup>
       <mo>+</mo>
       <msubsup>
        <mi>σ</mi>
        <mi>y</mi>
        <mn>2</mn>
       </msubsup>
       <mo>+</mo>
       <msub>
        <mi>c</mi>
        <mn>2</mn>
       </msub>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <mtext>SSIM</mtext>
     <interval closure="open">
      <ci>x</ci>
      <ci>y</ci>
     </interval>
    </apply>
    <apply>
     <divide></divide>
     <apply>
      <times></times>
      <apply>
       <plus></plus>
       <apply>
        <times></times>
        <cn type="integer">2</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>μ</ci>
         <ci>x</ci>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>μ</ci>
         <ci>y</ci>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>c</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <apply>
       <plus></plus>
       <apply>
        <times></times>
        <cn type="integer">2</cn>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>σ</ci>
         <apply>
          <times></times>
          <ci>x</ci>
          <ci>y</ci>
         </apply>
        </apply>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>c</ci>
        <cn type="integer">2</cn>
       </apply>
      </apply>
     </apply>
     <apply>
      <times></times>
      <apply>
       <plus></plus>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>μ</ci>
         <ci>x</ci>
        </apply>
        <cn type="integer">2</cn>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>μ</ci>
         <ci>y</ci>
        </apply>
        <cn type="integer">2</cn>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>c</ci>
        <cn type="integer">1</cn>
       </apply>
      </apply>
      <apply>
       <plus></plus>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>σ</ci>
         <ci>x</ci>
        </apply>
        <cn type="integer">2</cn>
       </apply>
       <apply>
        <csymbol cd="ambiguous">superscript</csymbol>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>σ</ci>
         <ci>y</ci>
        </apply>
        <cn type="integer">2</cn>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>c</ci>
        <cn type="integer">2</cn>
       </apply>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \hbox{SSIM}(x,y)=\frac{(2\mu_{x}\mu_{y}+c_{1})(2\sigma_{xy}+c_{2})}{(\mu_{x}^{%
2}+\mu_{y}^{2}+c_{1})(\sigma_{x}^{2}+\sigma_{y}^{2}+c_{2})}
  </annotation>
 </semantics>
</math>

</p>

<p>with</p>
<ul>
<li>

<math display="inline" id="Structural_similarity:3">
 <semantics>
  <msub>
   <mi>μ</mi>
   <mi>x</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>μ</ci>
    <ci>x</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mu_{x}
  </annotation>
 </semantics>
</math>

 the <a class="uri" href="average" title="wikilink">average</a> of 

<math display="inline" id="Structural_similarity:4">
 <semantics>
  <mi>x</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>x</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle x
  </annotation>
 </semantics>
</math>

;</li>
<li>

<math display="inline" id="Structural_similarity:5">
 <semantics>
  <msub>
   <mi>μ</mi>
   <mi>y</mi>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>μ</ci>
    <ci>y</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\mu_{y}
  </annotation>
 </semantics>
</math>

 the <a class="uri" href="average" title="wikilink">average</a> of 

<math display="inline" id="Structural_similarity:6">
 <semantics>
  <mi>y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle y
  </annotation>
 </semantics>
</math>

;</li>
<li>

<math display="inline" id="Structural_similarity:7">
 <semantics>
  <msubsup>
   <mi>σ</mi>
   <mi>x</mi>
   <mn>2</mn>
  </msubsup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>σ</ci>
     <ci>x</ci>
    </apply>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\sigma_{x}^{2}
  </annotation>
 </semantics>
</math>

 the <a class="uri" href="variance" title="wikilink">variance</a> of 

<math display="inline" id="Structural_similarity:8">
 <semantics>
  <mi>x</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>x</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle x
  </annotation>
 </semantics>
</math>

;</li>
<li>

<math display="inline" id="Structural_similarity:9">
 <semantics>
  <msubsup>
   <mi>σ</mi>
   <mi>y</mi>
   <mn>2</mn>
  </msubsup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>σ</ci>
     <ci>y</ci>
    </apply>
    <cn type="integer">2</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\sigma_{y}^{2}
  </annotation>
 </semantics>
</math>

 the <a class="uri" href="variance" title="wikilink">variance</a> of 

<math display="inline" id="Structural_similarity:10">
 <semantics>
  <mi>y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle y
  </annotation>
 </semantics>
</math>

;</li>
<li>

<math display="inline" id="Structural_similarity:11">
 <semantics>
  <msub>
   <mi>σ</mi>
   <mrow>
    <mi>x</mi>
    <mi>y</mi>
   </mrow>
  </msub>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">subscript</csymbol>
    <ci>σ</ci>
    <apply>
     <times></times>
     <ci>x</ci>
     <ci>y</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle\sigma_{xy}
  </annotation>
 </semantics>
</math>

 the <a class="uri" href="covariance" title="wikilink">covariance</a> of 

<math display="inline" id="Structural_similarity:12">
 <semantics>
  <mi>x</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>x</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle x
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Structural_similarity:13">
 <semantics>
  <mi>y</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>y</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle y
  </annotation>
 </semantics>
</math>

;</li>
<li>

<math display="inline" id="Structural_similarity:14">
 <semantics>
  <mrow>
   <msub>
    <mi>c</mi>
    <mn>1</mn>
   </msub>
   <mo>=</mo>
   <msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <msub>
       <mi>k</mi>
       <mn>1</mn>
      </msub>
      <mi>L</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mn>2</mn>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>c</ci>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>k</ci>
       <cn type="integer">1</cn>
      </apply>
      <ci>L</ci>
     </apply>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle c_{1}=(k_{1}L)^{2}
  </annotation>
 </semantics>
</math>

, 

<math display="inline" id="Structural_similarity:15">
 <semantics>
  <mrow>
   <msub>
    <mi>c</mi>
    <mn>2</mn>
   </msub>
   <mo>=</mo>
   <msup>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <msub>
       <mi>k</mi>
       <mn>2</mn>
      </msub>
      <mi>L</mi>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
    <mn>2</mn>
   </msup>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>c</ci>
     <cn type="integer">2</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <apply>
      <times></times>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <ci>k</ci>
       <cn type="integer">2</cn>
      </apply>
      <ci>L</ci>
     </apply>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle c_{2}=(k_{2}L)^{2}
  </annotation>
 </semantics>
</math>

 two variables to stabilize the division with weak denominator;</li>
<li>

<math display="inline" id="Structural_similarity:16">
 <semantics>
  <mi>L</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>L</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle L
  </annotation>
 </semantics>
</math>

 the <a href="dynamic_range" title="wikilink">dynamic range</a> of the pixel-values (typically this is 

<math display="inline" id="Structural_similarity:17">
 <semantics>
  <mrow>
   <msup>
    <mn>2</mn>
    <mrow>
     <mi mathvariant="normal">#</mi>
     <mi>b</mi>
     <mi>i</mi>
     <mi>t</mi>
     <mpadded width="+5pt">
      <mi>s</mi>
     </mpadded>
     <mi>p</mi>
     <mi>e</mi>
     <mpadded width="+5pt">
      <mi>r</mi>
     </mpadded>
     <mi>p</mi>
     <mi>i</mi>
     <mi>x</mi>
     <mi>e</mi>
     <mi>l</mi>
    </mrow>
   </msup>
   <mo>-</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <minus></minus>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <cn type="integer">2</cn>
     <apply>
      <times></times>
      <ci>normal-#</ci>
      <ci>b</ci>
      <ci>i</ci>
      <ci>t</ci>
      <ci>s</ci>
      <ci>p</ci>
      <ci>e</ci>
      <ci>r</ci>
      <ci>p</ci>
      <ci>i</ci>
      <ci>x</ci>
      <ci>e</ci>
      <ci>l</ci>
     </apply>
    </apply>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle 2^{\#bits\ per\ pixel}-1
  </annotation>
 </semantics>
</math>

);</li>
<li>

<math display="inline" id="Structural_similarity:18">
 <semantics>
  <mrow>
   <msub>
    <mi>k</mi>
    <mn>1</mn>
   </msub>
   <mo>=</mo>
   <mn>0.01</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>k</ci>
     <cn type="integer">1</cn>
    </apply>
    <cn type="float">0.01</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle k_{1}=0.01
  </annotation>
 </semantics>
</math>

 and 

<math display="inline" id="Structural_similarity:19">
 <semantics>
  <mrow>
   <msub>
    <mi>k</mi>
    <mn>2</mn>
   </msub>
   <mo>=</mo>
   <mn>0.03</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>k</ci>
     <cn type="integer">2</cn>
    </apply>
    <cn type="float">0.03</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \scriptstyle k_{2}=0.03
  </annotation>
 </semantics>
</math>

 by default.</li>
</ul>

<p>In order to evaluate the image quality this formula is applied only on <a href="Luma_(video)" title="wikilink">luma</a>. The resultant SSIM index is a decimal value between -1 and 1, and value 1 is only reachable in the case of two identical sets of data. Typically it is calculated on window sizes of 8×8. The window can be displaced pixel-by-pixel on the image but the authors propose to use only a subgroup of the possible windows to reduce the complexity of the calculation.</p>

<p>Structural dissimilarity (DSSIM) is a distance metric derived from SSIM (though the triangle inequality is not necessarily satisfied).</p>

<p>

<math display="block" id="Structural_similarity:20">
 <semantics>
  <mrow>
   <mrow>
    <mtext>DSSIM</mtext>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo>,</mo>
     <mi>y</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mfrac>
    <mrow>
     <mn>1</mn>
     <mo>-</mo>
     <mrow>
      <mtext>SSIM</mtext>
      <mrow>
       <mo stretchy="false">(</mo>
       <mi>x</mi>
       <mo>,</mo>
       <mi>y</mi>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
    </mrow>
    <mn>2</mn>
   </mfrac>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <mtext>DSSIM</mtext>
     <interval closure="open">
      <ci>x</ci>
      <ci>y</ci>
     </interval>
    </apply>
    <apply>
     <divide></divide>
     <apply>
      <minus></minus>
      <cn type="integer">1</cn>
      <apply>
       <times></times>
       <mtext>SSIM</mtext>
       <interval closure="open">
        <ci>x</ci>
        <ci>y</ci>
       </interval>
      </apply>
     </apply>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \hbox{DSSIM}(x,y)=\frac{1-\hbox{SSIM}(x,y)}{2}
  </annotation>
 </semantics>
</math>

</p>
<h2 id="discussions-over-performance">Discussions over performance</h2>

<p>Some research papers such as "A comprehensive assessment of the structural similarity index" by Richard Dosselmann and Xue Dong Yang show that SSIM is actually not very precise (not as precise as it claims to be) and that SSIM provides quality scores which are no more correlated to human judgment than MSE (Mean Square Error) values.</p>

<p>Moreover, although SSIM claims to reproduce human perception, its formula clearly does not contain any elaborate visual perception modelling and SSIM even relies on non-perceptual computations. For example, the human visual system does not compute a product between the mean values of the two images.</p>

<p>Finally, SSIM is designed to measure the quality of still images. It doesn't contain any parameter related to the effects of human perception and human judgment over time. However, some people use SSIM for video quality measurement.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a class="uri" href="PSNR" title="wikilink">PSNR</a></li>
<li><a href="Video_quality" title="wikilink">Video quality</a></li>
<li><a class="uri" href="MSE" title="wikilink">MSE</a></li>
</ul>
<h2 id="references">References</h2>
<ul>
<li>Z. Wang, A. C. Bovik, H. R. Sheikh and E. P. Simoncelli, "<a href="http://www.cns.nyu.edu/~zwang/files/papers/ssim.html">Image quality assessment: From error visibility to structural similarity</a>," <a href="IEEE_Transactions_on_Image_Processing" title="wikilink">IEEE Transactions on Image Processing</a>, vol. 13, no. 4, pp. 600-612, Apr. 2004.</li>
<li>Loza et al., "Structural Similarity-Based Object Tracking in Video Sequences", Proc. of the 9th International Conf. on Information Fusion, 2006.</li>
<li>Richard Dosselmann and Xue Dong Yang "A comprehensive assessment of the structural similarity index", <a href="http://link.springer.com/article/10.1007%2Fs11760-009-0144-1#page-1">http://link.springer.com/article/10.1007%2Fs11760-009-0144-1#page-1</a>, DOI 10.1007/s11760-009-0144-1</li>
</ul>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://www.ece.uwaterloo.ca/~z70wang/research/ssim/">Home page</a></li>
<li><a href="https://github.com/pornel/dssim">C Implementation</a></li>
<li><a href="http://mehdi.rabah.free.fr/SSIM/">C/C++ Implementation</a></li>
<li><a href="http://pholia.tdi.informatik.uni-frankfurt.de/~philipp/software/dssim.shtml">DSSIM C++ Implementation</a></li>
<li><a href="http://www.lomont.org/Software/Misc/SSIM/SSIM.html">Chris Lomont's C# Implementation</a></li>
<li><a href="http://qpsnr.youlink.org/">qpsnr implementation (multi threaded C++)</a></li>
</ul>

<p>"</p>

<p><a href="Category:Image_processing" title="wikilink">Category:Image processing</a></p>
</body>
</html>
