<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="506">Parametricity</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Parametricity</h1>
<hr/>

<p>In <a href="programming_language_theory" title="wikilink">programming language theory</a>, <strong>parametricity</strong> is an abstract uniformity property enjoyed by <a href="Parametric_polymorphism" title="wikilink">parametrically polymorphic</a> functions, which captures the intuition that all instances of a polymorphic function act the same way.</p>
<h2 id="idea">Idea</h2>

<p>Consider this example, based on a set <em>X</em> and the type <em>T</em>(<em>X</em>) = [<em>X</em> → <em>X</em>] of functions from <em>X</em> to itself. The higher-order function <em>twice</em><sub><em>X</em></sub> : <em>T</em>(<em>X</em>) → <em>T</em>(<em>X</em>) given by <em>twice</em><sub><em>X</em></sub>(<em>f</em>) = <em>f</em> ∘ <em>f</em>, is intuitively independent of the set <em>X</em>. The family of all such functions <em>twice</em><sub><em>X</em></sub>, parametrized by sets <em>X</em>, is called a "<a href="Parametric_polymorphism" title="wikilink">parametrically polymorphic function</a>". We simply write <strong>twice</strong> for the entire family of these functions and write its type as 

<math display="inline" id="Parametricity:0">
 <semantics>
  <mo>∀</mo>
  <annotation-xml encoding="MathML-Content">
   <csymbol cd="latexml">for-all</csymbol>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \forall
  </annotation>
 </semantics>
</math>

<em>X</em>. <em>T</em>(<em>X</em>) → <em>T</em>(<em>X</em>). The individual functions <em>twice</em><sub><em>X</em></sub> are called the <em>components</em> or <em>instances</em> of the polymorphic function. Notice that all the component functions <em>twice</em><sub><em>X</em></sub> act "the same way" because they are given by the same rule. Other families of functions obtained by picking one arbitrary function from each <em>T</em>(<em>X</em>) → <em>T</em>(<em>X</em>) would not have such uniformity. They are called <a href="Ad_hoc_polymorphism" title="wikilink">"<em>ad hoc</em> polymorphic functions"</a>. <em>Parametricity</em> is the abstract property enjoyed by the uniformly acting families such as <strong>twice</strong>, which distinguishes them from <em>ad hoc</em> families. With an adequate formalization of parametricity, it is possible to prove that the parametrically polymorphic functions of type 

<math display="inline" id="Parametricity:1">
 <semantics>
  <mo>∀</mo>
  <annotation-xml encoding="MathML-Content">
   <csymbol cd="latexml">for-all</csymbol>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \forall
  </annotation>
 </semantics>
</math>

<em>X</em>. <em>T</em>(<em>X</em>) → <em>T</em>(<em>X</em>) are one-to-one with natural numbers. The function corresponding to the natural number <em>n</em> is given by the rule <em>f</em> 

<math display="inline" id="Parametricity:2">
 <semantics>
  <mo>↦</mo>
  <annotation-xml encoding="MathML-Content">
   <csymbol cd="latexml">maps-to</csymbol>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mapsto
  </annotation>
 </semantics>
</math>

 <em>f</em><sup><em>n</em></sup>, i.e., the polymorphic <a href="Church_encoding" title="wikilink">Church numeral</a> for <em>n</em>. In contrast, the collection of all <em>ad hoc</em> families would be too large to be a set.</p>
<h2 id="history">History</h2>

<p>The <em>parametricity theorem</em> was originally stated by <a href="John_C._Reynolds" title="wikilink">John C. Reynolds</a>, who called it the <em>abstraction theorem</em>.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> In his paper "Theorems for free!",<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> <a href="Philip_Wadler" title="wikilink">Philip Wadler</a> described an application of parametricity to derive theorems about <a href="Parametric_polymorphism" title="wikilink">parametrically polymorphic</a> functions based on their types.</p>
<h2 id="parametricity-and-programming-language-implementation">Parametricity and programming language implementation</h2>

<p>Parametricity is the basis for many <a href="program_transformation" title="wikilink">program transformations</a> implemented in compilers for the <a href="Haskell_programming_language" title="wikilink">Haskell programming language</a>. These transformations were traditionally thought to be correct in Haskell because of Haskell's <a class="uri" href="non-strict" title="wikilink">non-strict</a> semantics. Despite being a <a href="Lazy_evaluation" title="wikilink">lazy</a> programming language, Haskell does support certain primitive operations — such as the operator <code>seq</code> — that enable so-called "selective strictness", allowing the programmer to force the evaluation of certain expressions. In their paper "Free theorems in the presence of <em>seq</em>",<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> <a href="Patricia_Johann" title="wikilink">Patricia Johann</a> and <a href="Janis_Voigtlaender" title="wikilink">Janis Voigtlaender</a> showed that because of the presence of these operations, the general parametricity theorem does not hold for Haskell programs; thus, these transformations are unsound in general.</p>
<h2 id="parametricity-and-dependent-types">Parametricity and dependent types</h2>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Parametric_polymorphism" title="wikilink">Parametric polymorphism</a></li>
<li><a href="Non-strict_programming_language" title="wikilink">Non-strict programming language</a></li>
</ul>
<h2 id="references">References</h2>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://homepages.inf.ed.ac.uk/wadler/topics/parametricity.html">Wadler: Parametricity</a></li>
</ul>

<p>"</p>

<p><a href="Category:Programming_language_topics" title="wikilink">Category:Programming language topics</a> <a href="Category:Type_theory" title="wikilink">Category:Type theory</a> <a href="Category:Polymorphism_(computer_science)" title="wikilink">Category:Polymorphism (computer science)</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2"><a href="#fnref2">↩</a></li>
<li id="fn3"><a href="#fnref3">↩</a></li>
</ol>
</section>
</body>
</html>
