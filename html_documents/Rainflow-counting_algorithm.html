<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="892">Rainflow-counting algorithm</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Rainflow-counting algorithm</h1>
<hr/>
<figure><b>(Figure)</b>
<figcaption>Figure 1: Uniform alternating loading</figcaption>
</figure>

<p>The <strong>rainflow-counting algorithm</strong> (also known as the "rain-flow counting method") is used in the analysis of <a href="fatigue_(material)" title="wikilink">fatigue</a> data in order to reduce a spectrum of varying <a href="stress_(physics)" title="wikilink">stress</a> into a set of simple stress reversals. Its importance is that it allows the application of <a href="Fatigue_(material)#Miner's_rule" title="wikilink">Miner's rule</a> in order to assess the fatigue life of a structure subject to complex loading. The <a class="uri" href="algorithm" title="wikilink">algorithm</a> was developed by <a href="Tatsuo_Endo" title="wikilink">Tatsuo Endo</a> and <a href="M._Matsuishi" title="wikilink">M. Matsuishi</a> in 1968.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> Though there are a number of cycle-counting algorithms for such applications, the rainflow method is the most popular as of 2008.</p>

<p>Downing and Socie created one of the more widely referenced and utilized rainflow cycle-counting algorithms in 1982,<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> which was included as one of many cycle-counting algorithms in ASTM E 1049-85.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> This algorithm is used in <a href="Sandia_National_Laboratories" title="wikilink">Sandia National Laboratories</a> LIFE2 code<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a> for the fatigue analysis of wind turbine components.</p>

<p><a href="Igor_Rychlik" title="wikilink">Igor Rychlik</a> gave a mathematical definition for the rainflow counting method,<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> thus enabling closed-form computations from the statistical properties of the load signal.</p>

<p>For simple periodic loadings, such as Figure 1, rainflow counting is unnecessary. That sequence clearly has 10 cycles of <a class="uri" href="amplitude" title="wikilink">amplitude</a> 10 <a class="uri" href="MPa" title="wikilink">MPa</a> and a structure's life can be estimated from a simple application of the relevant <a href="fatigue_(material)#S-N_curve" title="wikilink">S-N curve</a>.</p>

<p>Compare this with Figure 2 which cannot be assessed in terms of simply-described stress reversals.</p>
<figure><b>(Figure)</b>
<figcaption>Figure 2: Spectrum loading</figcaption>
</figure>
<h2 id="algorithm">Algorithm</h2>
<ol>
<li>Reduce the time history to a sequence of (tensile) peaks and (compressive) valleys.</li>
<li>Imagine that the time history is a template for a rigid sheet (<a class="uri" href="pagoda" title="wikilink">pagoda</a> roof).</li>
<li>Turn the sheet clockwise 90° (earliest time to the top).</li>
<li>Each <em>tensile peak</em> is imagined as a source of water that "drips" down the pagoda.</li>
<li>Count the number of half-cycles by looking for terminations in the flow occurring when either:
<ul>
<li>It reaches the end of the time history;</li>
<li>It merges with a flow that started at an earlier <em>tensile peak</em>; or</li>
<li>It flows when an opposite <em>tensile peak</em> has greater magnitude.</li>
</ul></li>
<li>Repeat step 5 for <em>compressive valleys</em>.</li>
<li>Assign a magnitude to each half-cycle equal to the stress difference between its start and termination.</li>
<li>Pair up half-cycles of identical magnitude (but opposite sense) to count the number of complete cycles. Typically, there are some residual half-cycles.</li>
</ol>
<h2 id="example">Example</h2>
<figure><b>(Figure)</b>
<figcaption>Figure 3: Rainflow analysis for tensile peaks</figcaption>
</figure>
<ul>
<li>The stress history in Figure 2 is reduced to peaks and valleys in Figure 3.</li>
<li>Half-cycle (A) starts at tensile peak (1) and terminates opposite a greater tensile stress, peak (2); its magnitude is 16 MPa.</li>
<li>Half-cycle (B) starts at tensile peak (4) and terminates where it is interrupted by a flow from an earlier peak, (3); its magnitude is 17 MPa.</li>
<li>Half-cycle (C) starts at tensile peak (5) and terminates at the end of the time history.</li>
<li>Similar half-cycles are calculated for compressive stresses (Figure 4) and the half-cycles are then matched.</li>
</ul>
<figure><b>(Figure)</b>
<figcaption>Figure 4: Rainflow analysis for compressive valleys</figcaption>
</figure>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p>Stress (MPa)</p></td>
<td style="text-align: left;">
<p>Whole cycles</p></td>
<td style="text-align: left;">
<p>Half cycles</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>10</p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>0</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>13</p></td>
<td style="text-align: left;">
<p>0</p></td>
<td style="text-align: left;">
<p>1</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>16</p></td>
<td style="text-align: left;">
<p>0</p></td>
<td style="text-align: left;">
<p>2</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>17</p></td>
<td style="text-align: left;">
<p>0</p></td>
<td style="text-align: left;">
<p>2</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>19</p></td>
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>0</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>20</p></td>
<td style="text-align: left;">
<p>0</p></td>
<td style="text-align: left;">
<p>1</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>22</p></td>
<td style="text-align: left;">
<p>0</p></td>
<td style="text-align: left;">
<p>1</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>24</p></td>
<td style="text-align: left;">
<p>0</p></td>
<td style="text-align: left;">
<p>1</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>27</p></td>
<td style="text-align: left;">
<p>0</p></td>
<td style="text-align: left;">
<p>1</p></td>
</tr>
</tbody>
</table>
<h2 id="block-loading-example">Block Loading example</h2>

<p>There are many cases in which a structure will undergo periodic loading. Assume that a specimen is loaded periodically until failure. The number of blocks endured before failure can be determined easily by using the Palmgren-Miner rule of block loading. The actual load history is shown in Figure 5.</p>

<p><a href="File:Svt_112513.png" title="wikilink">framed|center|Figure 5: Periodic Loading with Time</a></p>

<p>If all of the similar loads are grouped together, it forms a series of block loads as shown Figure 6.</p>

<p><a href="File:Blocks_112513.png" title="wikilink">framed|center|Figure 6: Periodic Loading Rearranged into Blocks</a></p>

<p>The Palmgren-Miner rule can be expressed as</p>

<p>

<math display="block" id="Rainflow-counting_algorithm:0">
 <semantics>
  <mrow>
   <mrow>
    <mi>B</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mrow>
      <mfrac>
       <msub>
        <mi>N</mi>
        <mn>1</mn>
       </msub>
       <msub>
        <mi>N</mi>
        <mrow>
         <mi>f</mi>
         <mn>1</mn>
        </mrow>
       </msub>
      </mfrac>
      <mo>+</mo>
      <mfrac>
       <msub>
        <mi>N</mi>
        <mn>2</mn>
       </msub>
       <msub>
        <mi>N</mi>
        <mrow>
         <mi>f</mi>
         <mn>2</mn>
        </mrow>
       </msub>
      </mfrac>
      <mo>+</mo>
      <mi mathvariant="normal">…</mi>
      <mo>+</mo>
      <mfrac>
       <msub>
        <mi>N</mi>
        <mi>k</mi>
       </msub>
       <msub>
        <mi>N</mi>
        <mrow>
         <mi>f</mi>
         <mi>k</mi>
        </mrow>
       </msub>
      </mfrac>
     </mrow>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>B</ci>
     <apply>
      <plus></plus>
      <apply>
       <divide></divide>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>N</ci>
        <cn type="integer">1</cn>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>N</ci>
        <apply>
         <times></times>
         <ci>f</ci>
         <cn type="integer">1</cn>
        </apply>
       </apply>
      </apply>
      <apply>
       <divide></divide>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>N</ci>
        <cn type="integer">2</cn>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>N</ci>
        <apply>
         <times></times>
         <ci>f</ci>
         <cn type="integer">2</cn>
        </apply>
       </apply>
      </apply>
      <ci>normal-…</ci>
      <apply>
       <divide></divide>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>N</ci>
        <ci>k</ci>
       </apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <ci>N</ci>
        <apply>
         <times></times>
         <ci>f</ci>
         <ci>k</ci>
        </apply>
       </apply>
      </apply>
     </apply>
    </apply>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   B(\frac{N_{1}}{N_{f1}}+\frac{N_{2}}{N_{f2}}+...+\frac{N_{k}}{N_{fk}})=1
  </annotation>
 </semantics>
</math>

</p>

<p>where,</p>
<dl>
<dd><em>B</em> = number of blocks
</dd>
<dd><em>N<sub>k</sub></em> = number of cycles of loading condition, k
</dd>
<dd><em>N<sub>fk</sub></em> =number of cycles to failure for loading condition, k
</dd>
</dl>

<p>In this example, each N<sub>k</sub>=1 because there is one instance of each load for every period of loading. To find N<sub>f</sub> (number of loads to failure) for each load the Goodman-Basquin relation can be used</p>

<p>

<math display="block" id="Rainflow-counting_algorithm:1">
 <semantics>
  <mrow>
   <msub>
    <mi>N</mi>
    <mi>f</mi>
   </msub>
   <mo>=</mo>
   <mrow>
    <mfrac>
     <mn>1</mn>
     <mn>2</mn>
    </mfrac>
    <msup>
     <mrow>
      <mo stretchy="false">(</mo>
      <mrow>
       <mfrac>
        <msub>
         <mi>σ</mi>
         <mi>a</mi>
        </msub>
        <msubsup>
         <mi>σ</mi>
         <mi>f</mi>
         <mo>′</mo>
        </msubsup>
       </mfrac>
       <mfrac>
        <mn>1</mn>
        <mrow>
         <mn>1</mn>
         <mo>-</mo>
         <mfrac>
          <msub>
           <mi>σ</mi>
           <mi>m</mi>
          </msub>
          <msub>
           <mi>σ</mi>
           <mi>u</mi>
          </msub>
         </mfrac>
        </mrow>
       </mfrac>
      </mrow>
      <mo stretchy="false">)</mo>
     </mrow>
     <mfrac>
      <mn>1</mn>
      <mi>b</mi>
     </mfrac>
    </msup>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <ci>N</ci>
     <ci>f</ci>
    </apply>
    <apply>
     <times></times>
     <apply>
      <divide></divide>
      <cn type="integer">1</cn>
      <cn type="integer">2</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <apply>
       <times></times>
       <apply>
        <divide></divide>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <ci>σ</ci>
         <ci>a</ci>
        </apply>
        <apply>
         <csymbol cd="ambiguous">subscript</csymbol>
         <apply>
          <csymbol cd="ambiguous">superscript</csymbol>
          <ci>σ</ci>
          <ci>normal-′</ci>
         </apply>
         <ci>f</ci>
        </apply>
       </apply>
       <apply>
        <divide></divide>
        <cn type="integer">1</cn>
        <apply>
         <minus></minus>
         <cn type="integer">1</cn>
         <apply>
          <divide></divide>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>σ</ci>
           <ci>m</ci>
          </apply>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <ci>σ</ci>
           <ci>u</ci>
          </apply>
         </apply>
        </apply>
       </apply>
      </apply>
      <apply>
       <divide></divide>
       <cn type="integer">1</cn>
       <ci>b</ci>
      </apply>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   N_{f}=\frac{1}{2}(\frac{\sigma_{a}}{\sigma^{\prime}_{f}}\frac{1}{1-\frac{%
\sigma_{m}}{\sigma_{u}}})^{\frac{1}{b}}
  </annotation>
 </semantics>
</math>

</p>

<p>where,</p>
<dl>
<dd><em>σ<sub>a</sub></em> = stress amplitude
</dd>
<dd><em>σ'<sub>f</sub></em> = fatigue strength coefficient (material property)
</dd>
<dd>''σ<sub>m</sub> '' = mean stress
</dd>
<dd><em>σ<sub>ult</sub></em> = ultimate stress (material property)
</dd>
<dd><em>b</em> = fatigue strength exponent (material property)
</dd>
</dl>
<h2 id="assumptions">Assumptions</h2>

<p>There are two key assumptions made in in order to rearrange the loads into blocks. These assumptions may affect the validity of the procedure depending on the situation.</p>
<ul>
<li>The loads are independent.</li>
<li>The order of loading does not matter.</li>
</ul>
<h2 id="references">References</h2>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://www.stotera.com/stoflo">StoFlo freeware rainflow cycle counting Excel template</a></li>
<li><a href="http://www.mathworks.com/matlabcentral/fileexchange/3026">Matlab Central rainflow counting method</a></li>
<li><a href="http://www.maths.lth.se/matstat/wafo/">WAFO. Wave Analysis for Fatigue and Oceanography (Matlab)</a></li>
<li><a href="http://www.gacsolucoes.com.br/publicacoes2.html">GAC freeware rainflow cycle counting</a></li>
<li><a href="http://vibrationdata.wordpress.com/?s=rainflow">Vibrationdata Rainflow Tutorials &amp; Matlab scripts</a></li>
</ul>

<p>"</p>

<p><a href="Category:Materials_science" title="wikilink">Category:Materials science</a> <a href="Category:Elasticity_(physics)" title="wikilink">Category:Elasticity (physics)</a> <a href="Category:Fracture_mechanics" title="wikilink">Category:Fracture mechanics</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">Matsuishi, M. &amp; Endo, T. (1968) Fatigue of metals subjected to varying stress, <em>Japan Soc. Mech. Engineering</em>.<a href="#fnref1">↩</a></li>
<li id="fn2">Downing, S.D., Socie, D.F. (1982). Simple rainflow counting algorithms. International Journal of Fatigue, Volume 4, Issue 1, January, 31-40.<a href="#fnref2">↩</a></li>
<li id="fn3">ASTM E 1049-85. (Reapproved 2005). "Standard practices for cycle counting in fatigue analysis". ASTM International.<a href="#fnref3">↩</a></li>
<li id="fn4">Schluter, L. (1991). Programmer's Guide for LIFE2's Rainflow Counting Algorithm. Sandia Report SAND90-2260.<a href="#fnref4">↩</a></li>
<li id="fn5">Rychlik, I. (1987) A New Definition of the Rainflow Cycle Counting Method, <em>Int. J. Fatigue 9:2, 119-121</em>.<a href="#fnref5">↩</a></li>
</ol>
</section>
</body>
</html>
