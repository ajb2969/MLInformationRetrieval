<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="747">Random permutation</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Random permutation</h1>
<style>
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
<style>
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</body></html>
<body>
<hr/>

<p>A <strong>random permutation</strong> is a <a class="uri" href="random" title="wikilink">random</a> ordering of a set of objects, that is, a <a class="uri" href="permutation" title="wikilink">permutation</a>-valued <a href="random_variable" title="wikilink">random variable</a>. The use of random permutations is often fundamental to fields that use <a href="randomized_algorithm" title="wikilink">randomized algorithms</a> such as <a href="coding_theory" title="wikilink">coding theory</a>, <a class="uri" href="cryptography" title="wikilink">cryptography</a>, and <a class="uri" href="simulation" title="wikilink">simulation</a>. A good example of a random permutation is the <a class="uri" href="shuffling" title="wikilink">shuffling</a> of a <a href="Playing_card" title="wikilink">deck of cards</a>: this is ideally a random permutation of the 52 cards.</p>
<h2 id="generating-random-permutations">Generating random permutations</h2>
<h3 id="entry-by-entry-brute-force-method">Entry-by-entry brute force method</h3>

<p>One method of generating a random permutation of a set of length <em>n</em> <a href="uniform_distribution_(discrete)" title="wikilink">uniformly at random</a> (i.e., each of the <em>n</em>! <a href="permutation" title="wikilink">permutations</a> is equally likely to appear) is to generate a <a class="uri" href="sequence" title="wikilink">sequence</a> by taking a random number between 1 and <em>n</em> sequentially, ensuring that there is no repetition, and interpreting this sequence (<em>x</em><sub>1</sub>, ..., <em>x</em><sub><em>n</em></sub>) as the permutation</p>

<p>

<math display="block" id="Random_permutation:0">
 <semantics>
  <mrow>
   <mrow>
    <mo>(</mo>
    <mtable displaystyle="true">
     <mtr>
      <mtd columnalign="center">
       <mn>1</mn>
      </mtd>
      <mtd columnalign="center">
       <mn>2</mn>
      </mtd>
      <mtd columnalign="center">
       <mn>3</mn>
      </mtd>
      <mtd columnalign="center">
       <mi mathvariant="normal">⋯</mi>
      </mtd>
      <mtd columnalign="center">
       <mi>n</mi>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="center">
       <msub>
        <mi>x</mi>
        <mn>1</mn>
       </msub>
      </mtd>
      <mtd columnalign="center">
       <msub>
        <mi>x</mi>
        <mn>2</mn>
       </msub>
      </mtd>
      <mtd columnalign="center">
       <msub>
        <mi>x</mi>
        <mn>3</mn>
       </msub>
      </mtd>
      <mtd columnalign="center">
       <mi mathvariant="normal">⋯</mi>
      </mtd>
      <mtd columnalign="center">
       <msub>
        <mi>x</mi>
        <mi>n</mi>
       </msub>
      </mtd>
     </mtr>
    </mtable>
    <mo>)</mo>
   </mrow>
   <mo>,</mo>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <matrix>
    <matrixrow>
     <cn type="integer">1</cn>
     <cn type="integer">2</cn>
     <cn type="integer">3</cn>
     <ci>normal-⋯</ci>
     <ci>n</ci>
    </matrixrow>
    <matrixrow>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <cn type="integer">2</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <cn type="integer">3</cn>
     </apply>
     <ci>normal-⋯</ci>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>x</ci>
      <ci>n</ci>
     </apply>
    </matrixrow>
   </matrix>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \begin{pmatrix}1&2&3&\cdots&n\\
x_{1}&x_{2}&x_{3}&\cdots&x_{n}\\
\end{pmatrix},
  </annotation>
 </semantics>
</math>

</p>

<p>shown here in <a href="permutation#Notation" title="wikilink">two-line notation</a>.</p>

<p>This brute-force method will require occasional retries whenever the random number picked is a repeat of a number already selected. This can be avoided if, on the <em>i</em>th step (when <em>x</em><sub>1</sub>, ..., <em>x</em><sub><em>i</em> − 1</sub> have already been chosen), one chooses a number <em>j</em> at random between 1 and <em>n</em> − <em>i</em> + 1 and sets <em>x</em><sub><em>i</em></sub> equal to the <em>j</em>th largest of the unchosen numbers.</p>
<h3 id="knuth-shuffles">Knuth shuffles</h3>

<p>A simple <a class="uri" href="algorithm" title="wikilink">algorithm</a> to generate a permutation of <em>n</em> items uniformly at random without retries, known as the <a href="Knuth_shuffle" title="wikilink">Knuth shuffle</a>, is to start with any permutation (for example, the <a href="Identity_function" title="wikilink">identity permutation</a>), and then go through the positions 1 through <em>n</em> − 1, and for each position <em>i</em> <strong>swap</strong> the element currently there with a randomly chosen element from positions <em>i</em> through <em>n</em>, inclusive. It's easy to verify that any permutation of <em>n</em> elements will be produced by this algorithm with probability exactly 1/<em>n</em>!, thus yielding a uniform distribution over all such permutations.</p>

<p>The initialization to the identity permutation and the shuffling may be combined, as in the following example. It requires a function <code>uniform(m)</code> which returns a random integer between 0 and <em>m</em> inclusive.</p>
<div class="sourceCode"><pre class="sourceCode c"><code class="sourceCode c"><span class="dt">unsigned</span> uniform(<span class="dt">unsigned</span> m); <span class="co">/* Returns a random integer 0 &lt;= uniform(m) &lt;= m */</span>

<span class="dt">void</span> initialize_and_permute(<span class="dt">unsigned</span> permutation[], <span class="dt">unsigned</span> n)
{
    <span class="dt">unsigned</span> i;
    <span class="kw">for</span> (i = <span class="dv">0</span>; i &lt; n; i++) {
        <span class="dt">unsigned</span> j = uniform(i);
        permutation[i] = permutation[j];   <span class="co">/* Swap an existing element [j] to position [i] */</span>
        permutation[j] = i;    <span class="co">/* ...and put newly-initialized element [i] in position [j] */</span>
    }
}</code></pre></div>

<p>Note that the first assignment to <code>permutation[i]</code> might be copying an uninitialized value, if <code>j</code> happens to be equal to <code>i</code>. However, in this case, it is immediately overwritten with a defined value on the next line.</p>

<p>It is also important to note that the <code>uniform()</code> function can <em>not</em> be implemented simply as <code>random() % (m+1)</code> unless a bias in the results is acceptable.</p>
<h2 id="statistics-on-random-permutations">Statistics on random permutations</h2>
<h3 id="fixed-points">Fixed points</h3>

<p>The <a href="probability_distribution" title="wikilink">probability distribution</a> of the number of <a href="Fixed_point_(mathematics)" title="wikilink">fixed points</a> of a uniformly distributed random permutation approaches a <a href="Poisson_distribution" title="wikilink">Poisson distribution</a> with <a href="expected_value" title="wikilink">expected value</a> 1 as <em>n</em> grows. In particular, it is an elegant application of the <a href="inclusion-exclusion_principle" title="wikilink">inclusion-exclusion principle</a> to show that the probability that there are no fixed points approaches 1/<em>e</em>. The first <em>n</em> <a href="moment_(mathematics)" title="wikilink">moments</a> of this distribution are exactly those of the Poisson distribution.</p>
<h2 id="randomness-testing">Randomness testing</h2>

<p>As with all random processes, the quality of the resulting distribution of an implementation of a randomized algorithm such as the Knuth shuffle (i.e., how close it is to the desired uniform distribution) depends on the quality of the underlying source of randomness, such as a <a href="pseudorandom_number_generator" title="wikilink">pseudorandom number generator</a>. There are many possible <a href="randomness_test" title="wikilink">randomness tests</a> for random permutations, such as some of the <a href="Diehard_tests" title="wikilink">Diehard tests</a>. A typical example of such a test is to take some <a href="permutation_statistic" title="wikilink">permutation statistic</a> for which the distribution is known and test whether the distribution of this statistic on a set of randomly generated permutations closely approximates the true distribution.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Ewens's_sampling_formula" title="wikilink">Ewens's sampling formula</a> — a connection with <a href="population_genetics" title="wikilink">population genetics</a></li>
<li><a href="Faro_shuffle" title="wikilink">Faro shuffle</a></li>
<li><a href="Golomb–Dickman_constant" title="wikilink">Golomb–Dickman constant</a></li>
<li><a href="Random_permutation_statistics" title="wikilink">Random permutation statistics</a></li>
<li><a href="Shuffle#Shuffling_algorithms" title="wikilink">Shuffling algorithms</a> — random sort method, iterative exchange method</li>
</ul>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://mathworld.wolfram.com/RandomPermutation.html">Random permutation</a> at <a class="uri" href="MathWorld" title="wikilink">MathWorld</a></li>
<li><a href="http://www.techuser.net/randpermgen.html">Random permutation generation</a> -- detailed and practical explanation of Knuth shuffle algorithm and its variants for generating <em>k</em>-permutations (permutations of <em>k</em> elements chosen from a list) and <em>k</em>-subsets (generating a subset of the elements in the list without replacement) with pseudocode</li>
</ul>

<p>"</p>

<p><a class="uri" href="Category:Permutations" title="wikilink">Category:Permutations</a> <a class="uri" href="Category:Randomness" title="wikilink">Category:Randomness</a></p>
</body>

