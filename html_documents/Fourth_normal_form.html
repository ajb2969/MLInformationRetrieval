<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="943">Fourth normal form</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Fourth normal form</h1>
<hr>'''Fourth normal form''' ('''4NF''') is a [[Database normalization#Normal forms|normal form]] used in [[database normalization]]. Introduced by [[Ronald Fagin]] in 1977, 4NF is the next level of normalization after [[Boyce–Codd normal form]] (BCNF). Whereas the [[Second normal form|second]], [[Third normal form|third]], and [[Boyce–Codd normal form|Boyce–Codd]] normal forms
<p><code>are concerned with </code><a href="functional_dependency" title="wikilink"><code>functional</code> <code>dependencies</code></a><code>, 4NF is concerned with a more general type of dependency known as a </code><a href="multivalued_dependency" title="wikilink"><code>multivalued</code> <code>dependency</code></a><code>. A </code><a href="Table_(database)" title="wikilink"><code>Table</code></a><code> is in 4NF </code><a href="if_and_only_if" title="wikilink"><code>if</code> <code>and</code> <code>only</code> <code>if</code></a><code>, for every one of its non-trivial multivalued dependencies </code><em><code>X</code></em><code> </code>

<math display="inline" id="Fourth_normal_form:0">
 <semantics>
  <mo>↠</mo>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-↠</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \twoheadrightarrow
  </annotation>
 </semantics>
</math>

<code> </code><em><code>Y</code></em><code>, </code><em><code>X</code></em><code> is a </code><a href="superkey" title="wikilink"><code>superkey</code></a><code>—that is, </code><em><code>X</code></em><code> is either a </code><a href="candidate_key" title="wikilink"><code>candidate</code> <code>key</code></a><code> or a superset thereof.</code><a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>
<h2 id="multivalued-dependencies">Multivalued dependencies</h2>

<p>If the column headings in a relational database table are divided into three disjoint groupings <em>X</em>, <em>Y</em>, and <em>Z</em>, then, in the context of a particular row, we can refer to the data beneath each group of headings as <em>x</em>, <em>y</em>, and <em>z</em> respectively. A <a href="multivalued_dependency" title="wikilink">multivalued dependency</a> <em>X</em> 

<math display="inline" id="Fourth_normal_form:1">
 <semantics>
  <mo>↠</mo>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-↠</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \twoheadrightarrow
  </annotation>
 </semantics>
</math>

 <em>Y</em> signifies that if we choose any <em>x</em> actually occurring in the table (call this choice <em>x<sub>c</sub></em>), and compile a list of all the <em>x<sub>c</sub>yz</em> combinations that occur in the table, we will find that <em>x<sub>c</sub></em> is associated with the same <em>y</em> entries regardless of <em>z</em>. So essentially the presence of z provides no useful information to constrain the possible values of <em>y</em>.</p>

<p>A <strong>trivial multivalued dependency</strong> <em>X</em> 

<math display="inline" id="Fourth_normal_form:2">
 <semantics>
  <mo>↠</mo>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-↠</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \twoheadrightarrow
  </annotation>
 </semantics>
</math>

 <em>Y</em> is one where either <em>Y</em> is a subset of <em>X</em>, or <em>X</em> and <em>Y</em> together form the whole set of attributes of the relation.</p>

<p>A <a href="functional_dependency" title="wikilink">functional dependency</a> is a special case of multivalued dependency. In a functional dependency <em>X</em> → <em>Y</em>, every <em>x</em> determines <em>exactly one y</em>, never more than one.</p>
<h2 id="example">Example</h2>

<p>Consider the following example:</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p>Pizza Delivery Permutations</p></td>
<td style="text-align: left;">
<p><u>Restaurant</u></p></td>
<td style="text-align: left;">
<p><u>Pizza Variety</u></p></td>
<td style="text-align: left;">
<p><u>Delivery Area</u></p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>A1 Pizza</p></td>
<td style="text-align: left;">
<p>Thick Crust</p></td>
<td style="text-align: left;">
<p>Springfield</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>A1 Pizza</p></td>
<td style="text-align: left;">
<p>Thick Crust</p></td>
<td style="text-align: left;">
<p>Shelbyville</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>A1 Pizza</p></td>
<td style="text-align: left;">
<p>Thick Crust</p></td>
<td style="text-align: left;">
<p>Capital City</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>A1 Pizza</p></td>
<td style="text-align: left;">
<p>Stuffed Crust</p></td>
<td style="text-align: left;">
<p>Springfield</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>A1 Pizza</p></td>
<td style="text-align: left;">
<p>Stuffed Crust</p></td>
<td style="text-align: left;">
<p>Shelbyville</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>A1 Pizza</p></td>
<td style="text-align: left;">
<p>Stuffed Crust</p></td>
<td style="text-align: left;">
<p>Capital City</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>Elite Pizza</p></td>
<td style="text-align: left;">
<p>Thin Crust</p></td>
<td style="text-align: left;">
<p>Capital City</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>Elite Pizza</p></td>
<td style="text-align: left;">
<p>Stuffed Crust</p></td>
<td style="text-align: left;">
<p>Capital City</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>Vincenzo's Pizza</p></td>
<td style="text-align: left;">
<p>Thick Crust</p></td>
<td style="text-align: left;">
<p>Springfield</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>Vincenzo's Pizza</p></td>
<td style="text-align: left;">
<p>Thick Crust</p></td>
<td style="text-align: left;">
<p>Shelbyville</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>Vincenzo's Pizza</p></td>
<td style="text-align: left;">
<p>Thin Crust</p></td>
<td style="text-align: left;">
<p>Springfield</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>Vincenzo's Pizza</p></td>
<td style="text-align: left;">
<p>Thin Crust</p></td>
<td style="text-align: left;">
<p>Shelbyville</p></td>
</tr>
</tbody>
</table>

<p>Each row indicates that a given restaurant can deliver a given variety of pizza to a given area.</p>

<p>The table has no non-key attributes because its only key is {Restaurant, Pizza Variety, Delivery Area}. Therefore it meets all normal forms up to BCNF. If we assume, however, that pizza varieties offered by a restaurant are not affected by delivery area (i.e. a restaurant offers all pizza varieties it makes to all areas it supplies), then it does not meet 4NF. The problem is that the table features two non-trivial multivalued dependencies on the {Restaurant} attribute (which is not a superkey). The dependencies are:</p>
<ul>
<li>{Restaurant} 

<math display="inline" id="Fourth_normal_form:3">
 <semantics>
  <mo>↠</mo>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-↠</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \twoheadrightarrow
  </annotation>
 </semantics>
</math>

 {Pizza Variety}</li>
<li>{Restaurant} 

<math display="inline" id="Fourth_normal_form:4">
 <semantics>
  <mo>↠</mo>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-↠</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \twoheadrightarrow
  </annotation>
 </semantics>
</math>

 {Delivery Area}</li>
</ul>

<p>These non-trivial multivalued dependencies on a non-superkey reflect the fact that the varieties of pizza a restaurant offers are independent from the areas to which the restaurant delivers. This state of affairs leads to <a href="Data_redundancy" title="wikilink">redundancy</a> in the table: for example, we are told three times that A1 Pizza offers Stuffed Crust, and if A1 Pizza starts producing Cheese Crust pizzas then we will need to add multiple rows, one for each of A1 Pizza's delivery areas. There is, moreover, nothing to prevent us from doing this incorrectly: we might add Cheese Crust rows for all but one of A1 Pizza's delivery areas, thereby failing to respect the multivalued dependency {Restaurant} 

<math display="inline" id="Fourth_normal_form:5">
 <semantics>
  <mo>↠</mo>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-↠</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \twoheadrightarrow
  </annotation>
 </semantics>
</math>

 {Pizza Variety}.</p>

<p>To eliminate the possibility of these anomalies, we must place the facts about varieties offered into a different table from the facts about delivery areas, yielding two tables that are both in 4NF:</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p>Varieties By Restaurant</p></td>
<td style="text-align: left;">
<p><u>Restaurant</u></p></td>
<td style="text-align: left;">
<p><u>Pizza Variety</u></p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>A1 Pizza</p></td>
<td style="text-align: left;">
<p>Thick Crust</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>A1 Pizza</p></td>
<td style="text-align: left;">
<p>Stuffed Crust</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>Elite Pizza</p></td>
<td style="text-align: left;">
<p>Thin Crust</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>Elite Pizza</p></td>
<td style="text-align: left;">
<p>Stuffed Crust</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>Vincenzo's Pizza</p></td>
<td style="text-align: left;">
<p>Thick Crust</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>Vincenzo's Pizza</p></td>
<td style="text-align: left;">
<p>Thin Crust</p></td>
</tr>
</tbody>
</table>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p>Delivery Areas By Restaurant</p></td>
<td style="text-align: left;">
<p><u>Restaurant</u></p></td>
<td style="text-align: left;">
<p><u>Delivery Area</u></p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>A1 Pizza</p></td>
<td style="text-align: left;">
<p>Springfield</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>A1 Pizza</p></td>
<td style="text-align: left;">
<p>Shelbyville</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>A1 Pizza</p></td>
<td style="text-align: left;">
<p>Capital City</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>Elite Pizza</p></td>
<td style="text-align: left;">
<p>Capital City</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>Vincenzo's Pizza</p></td>
<td style="text-align: left;">
<p>Springfield</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>Vincenzo's Pizza</p></td>
<td style="text-align: left;">
<p>Shelbyville</p></td>
</tr>
</tbody>
</table>

<p>{{-}}</p>

<p>In contrast, if the pizza varieties offered by a restaurant sometimes did legitimately vary from one delivery area to another, the original three-column table would satisfy 4NF.</p>

<p>Ronald Fagin demonstrated that it is always possible to achieve 4NF.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> <a href="Rissanen's_theorem" title="wikilink">Rissanen's theorem</a> is also applicable on <a href="Multivalued_dependency" title="wikilink">multivalued dependencies</a>.</p>
<h2 id="nf-in-practice">4NF in practice</h2>

<p>A 1992 paper by Margaret S. Wu notes that the teaching of database normalization typically stops short of 4NF, perhaps because of a belief that tables violating 4NF (but meeting all lower normal forms) are rarely encountered in business applications. This belief may not be accurate, however. Wu reports that in a study of forty organizational databases, over 20% contained one or more tables that violated 4NF while meeting all lower normal forms.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a></p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Attribute-value_system" title="wikilink">Attribute-value system</a></li>
</ul>
<h2 id="references">References</h2>
<h2 id="further-reading">Further reading</h2>
<ul>
<li>Date, C. J. (1999), <em><a href="http://www.aw-bc.com/catalog/academic/product/0,1144,0321197844,00.html">An Introduction to Database Systems</a></em> (8th ed.). Addison-Wesley Longman. ISBN 0-321-19784-4.</li>
<li>Kent, W. (1983) <em><a href="http://www.bkent.net/Doc/simple5.htm">A Simple Guide to Five Normal Forms in Relational Database Theory</a></em>, Communications of the ACM, vol. 26, pp. 120–125</li>
<li><a href="http://www.utexas.edu/its/windows/database/datamodeling/rm/rm8.html">Advanced Normalization</a> by ITS, University of Texas.</li>
</ul>

<p><a href="de:Normalisierung_(Datenbank)#Vierte_Normalform_(4NF)" title="wikilink">de:Normalisierung (Datenbank)#Vierte Normalform (4NF)</a>"</p>

<p><a href="Category:Database_normalization" title="wikilink">4NF</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><code>"A</code> <code>relation</code> <code>schema</code> <code>R*</code> <code>is</code> <code>in</code> <code>fourth</code> <code>normal</code> <code>form</code> <code>(4NF)</code> <code>if,</code> <code>whenever</code> <code>a</code> <code>nontrivial</code> <code>multivalued</code> <code>dependency</code> <code>X</code> 

<math display="inline" id="Fourth_normal_form:6">
 <semantics>
  <mo>↠</mo>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-↠</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \twoheadrightarrow
  </annotation>
 </semantics>
</math>

 <code>Y</code> <code>holds</code> <code>for</code> <code>R*,</code> <code>then</code> <code>so</code> <code>does</code> <code>the</code> <code>functional</code> <code>dependency</code> <code>X</code> <code>→</code> <code>A</code> <code>for</code> <code>every</code> <code>column</code> <code>name</code> <code>A</code> <code>of</code> <code>R*.</code> <code>Intuitively</code> <code>all</code> <code>dependencies</code> <code>are</code> <code>the</code> <code>result</code> <code>of</code> <code>keys."</code> <a href="#fnref1">↩</a></li>
<li id="fn2">Fagin, p. 268<a href="#fnref2">↩</a></li>
<li id="fn3"><a href="#fnref3">↩</a></li>
</ol>
</section>
</hr></body>
</html>
