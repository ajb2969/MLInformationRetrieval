<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title offset="903">Shapley value</title>
   <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js">
    </script>
</head>
<body>
<h1>Shapley value</h1>
<hr/>
<p>In <a href="game_theory" title="wikilink">game theory</a>, the <strong>Shapley value</strong>, named in honour of <a href="Lloyd_Shapley" title="wikilink">Lloyd Shapley</a>, who introduced it in 1953, is a solution concept in cooperative game theory.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a><a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a> To each <a href="cooperative_game" title="wikilink">cooperative game</a> it assigns a unique distribution (among the players) of a total surplus generated by the coalition of all players. The Shapley value is characterized by a collection of desirable properties. Hart (1989) provides a survey of the subject.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a><a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></p>
<p>The setup is as follows: a coalition of players cooperates, and obtains a certain overall gain from that cooperation. Since some players may contribute more to the coalition than others or may possess different bargaining power (for example threatening to destroy the whole surplus), what final distribution of generated surplus among the players should arise in any particular game? Or phrased differently: how important is each player to the overall cooperation, and what payoff can he or she reasonably expect? The Shapley value provides one possible answer to this question.</p>
<h2 id="formal-definition">Formal definition</h2>
<p>Formally, a <strong>coalitional game</strong> is defined as: There is a set <em>N</em> (of <em>n</em> players) and a <a href="function_(mathematics)" title="wikilink">function</a> <span class="LaTeX">$v$</span> that maps subsets of players to the real numbers<span class="LaTeX">$$v \; : \; 2^n \to \mathbb{R}$$</span>, with <span class="LaTeX">$v(\emptyset)=0$</span>, where <span class="LaTeX">$\emptyset$</span> denotes the empty set. The function <span class="LaTeX">$v$</span> is called a characteristic function.</p>
<p>The function <span class="LaTeX">$v$</span> has the following meaning: if <em>S</em> is a coalition of players, then <em>v</em>(<em>S</em>), called the worth of coalition <em>S</em>, describes the total expected sum of payoffs the members of <span class="LaTeX">$S$</span> can obtain by cooperation.</p>
<p>The Shapley value is one way to distribute the total gains to the players, assuming that they all collaborate. It is a "fair" distribution in the sense that it is the only distribution with certain desirable properties listed below. According to the Shapley value, the amount that player <em>i</em> gets given a coalitional game <span class="LaTeX">$( v, N)$</span> is</p>
<p><span class="LaTeX">$$\phi_i(v)=\sum_{S \subseteq N \setminus
\{i\}} \frac{|S|!\; (n-|S|-1)!}{n!}(v(S\cup\{i\})-v(S))$$</span></p>
<p>where <em>n</em> is the total number of players and the sum extends over all subsets <em>S</em> of <em>N</em> not containing player <em>i</em>. The formula can be interpreted as follows: imagine the coalition being formed one actor at a time, with each actor demanding their contribution <em>v</em>(<em>S</em>∪{<em>i</em>}) − <em>v</em>(<em>S</em>) as a fair compensation, and then for each actor take the average of this contribution over the possible different <a href="permutation" title="wikilink">permutations</a> in which the coalition can be formed.</p>
<p>An alternative equivalent formula for the Shapley value is:</p>
<p><span class="LaTeX">$$\phi_i(v)= \frac{1}{|N|!}\sum_R\left [ v(P_i^R \cup \left \{ i \right \}) - v(P_i^R) \right ]\,\!$$</span></p>
<p>where the sum ranges over all <span class="LaTeX">$|N|!$</span> orders <span class="LaTeX">$R\,\!$</span> of the players and <span class="LaTeX">$P_i^R\,\!$</span> is the set of players in <span class="LaTeX">$N\,\!$</span> which precede <span class="LaTeX">$i\,\!$</span> in the order <span class="LaTeX">$R\,\!$</span>.</p>
<h2 id="example">Example</h2>
<p>Consider a simplified description of a business. An owner, <em>o</em>, provides crucial capital in the sense that without him no gains can be obtained. There are <em>k</em> workers <em>w</em><sub>1</sub>,...,<em>w</em><sub><em>k</em></sub>, each of whom contributes an amount <em>p</em> to the total profit. So <em>N</em> = {<em>o</em>, <em>w</em><sub>1</sub>,...,<em>w</em><sub><em>k</em></sub>} and <em>v</em>(<em>S</em>) = 0 if <em>o</em> is not a member of <em>S</em> and <em>v</em>(<em>S</em>) = <em>mp</em> if <em>S</em> contains the owner and <em>m</em> workers. Computing the Shapley value for this coalition game leads to a value of <span class="LaTeX">$\frac{kp}{2}$</span> for the owner and <span class="LaTeX">$\frac{p}{2}$</span> for each worker.</p>
<h3 id="glove-game">Glove game</h3>
<p>The glove game is a coalitional game where the players have left and right hand gloves and the goal is to form pairs.</p>
<p><span class="LaTeX">$$N = \{1, 2, 3\}\,\!$$</span> where players 1 and 2 have right hand gloves and player 3 has a left hand glove</p>
<p>The value function for this coalitional game is</p>
<p><span class="LaTeX">$$v(S) = 
\begin{cases} 
  1,  & \text{if }S \in \left\{ \{1,3\},\{2,3\},\{1,2,3\} \right\}\\
  0, & \text{otherwise}\\
\end{cases}$$</span></p>
<p>Where the formula for calculating the Shapley value is:</p>
<p><span class="LaTeX">$$\phi_i(v)= \frac{1}{|N|!}\sum_R\left [ v(P_i^R \cup \left \{ i \right \}) - v(P_i^R) \right ]\,\!$$</span></p>
<p>Where <span class="LaTeX">$R\,\!$</span> is an ordering of the players and <span class="LaTeX">$P_i^R\,\!$</span> is the set of players in <span class="LaTeX">$N\,\!$</span> which precede <span class="LaTeX">$i\,\!$</span> in the order <span class="LaTeX">$R\,\!$</span></p>
<p>The following table displays the marginal contributions of Player 1</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><p>Order <span class="LaTeX">$R\,\!$</span></p></th>
<th style="text-align: left;"><p><span class="LaTeX">$MC_1$</span></p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p><span class="LaTeX">${1,2,3}\,\!$</span></p></td>
<td style="text-align: left;"><p><span class="LaTeX">$v(\{1\}) - v(\varnothing) = 0 - 0 = 0\,\!$</span></p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p><span class="LaTeX">${1,3,2}\,\!$</span></p></td>
<td style="text-align: left;"><p><span class="LaTeX">$v(\{1\}) - v(\varnothing) = 0 - 0 = 0\,\!$</span></p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p><span class="LaTeX">${2,1,3}\,\!$</span></p></td>
<td style="text-align: left;"><p><span class="LaTeX">$v(\{1,2\}) - v(\{2\}) = 0 - 0 = 0\,\!$</span></p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p><span class="LaTeX">${2,3,1}\,\!$</span></p></td>
<td style="text-align: left;"><p><span class="LaTeX">$v(\{1,2,3\}) - v(\{2,3\}) = 1 - 1 = 0\,\!$</span></p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p><span class="LaTeX">${3,1,2}\,\!$</span></p></td>
<td style="text-align: left;"><p><span class="LaTeX">$v(\{1,3\}) - v(\{3\}) = 1 - 0 =1\,\!$</span></p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p><span class="LaTeX">${3,2,1}\,\!$</span></p></td>
<td style="text-align: left;"><p><span class="LaTeX">$v(\{1,2,3\}) - v(\{2,3\}) = 1 - 1 = 0\,\!$</span></p></td>
</tr>
</tbody>
</table>
<p><span class="LaTeX">$$\phi_1(v)=(1) \!\left(\frac{1}{6}\right)=\frac{1}{6}\,\!$$</span></p>
<p>By a symmetry argument it can be shown that</p>
<p><span class="LaTeX">$$\phi_2(v)=\phi_1(v)=\frac{1}{6}\,\!$$</span></p>
<p>Due to the efficiency property the sum of all the Shapley values is equal to the grand coalition value of 1, which means that</p>
<p><span class="LaTeX">$$\phi_3(v) = \frac{4}{6} = \frac{2}{3}.\,$$</span></p>
<h2 id="properties">Properties</h2>
<p>The Shapley value has the following desirable properties:</p>
<p><strong>1. Efficiency:</strong> The total gain is distributed:</p>
<p><span class="LaTeX">$$\sum_{i\in N}\phi_i(v) = v(N)$$</span></p>
<p><strong>2. Symmetry:</strong> If <em>i</em> and <em>j</em> are two actors who are equivalent in the sense that</p>
<p><span class="LaTeX">$$v(S\cup\{i\}) = v(S\cup\{j\})$$</span> for every subset <em>S</em> of <em>N</em> which contains neither <em>i</em> nor <em>j</em>, then φ<sub><em>i</em></sub>(<em>v</em>) = φ<sub><em>j</em></sub>(<em>v</em>).</p>
<p><strong>3. Linearity:</strong> if two coalition games described by gain functions <em>v</em> and <em>w</em> are combined, then the distributed gains should correspond to the gains derived from <em>v</em> and the gains derived from <em>w</em>:</p>
<p><span class="LaTeX">$$\phi_i(v+w) = \phi_i(v) + \phi_i(w)$$</span> for every <em>i</em> in <em>N</em>. Also, for any real number <em>a</em>,</p>
<p><span class="LaTeX">$$\phi_i(a v) = a \phi_i(v)$$</span> for every <em>i</em> in <em>N</em>.</p>
<p><strong>4. Zero Player (Null player):</strong> The Shapley value <span class="LaTeX">$\phi_i(v)$</span> of a null player i in a game v is zero. A player <span class="LaTeX">$i$</span> is <em>null</em> in <span class="LaTeX">$v$</span> if <span class="LaTeX">$v(S\cup \{i\}) = v(S)$</span> for all coalitions <span class="LaTeX">$S$</span>.</p>
<p>In fact, given a player set <em>N</em>, the Shapley value is the only map from the set of all games to payoff vectors that satisfies <em>all four</em> properties 1, 2, 3, and 4 from above.</p>
<h2 id="addendum-definitions">Addendum definitions</h2>
<p><strong>1. Anonymous:</strong> If <em>i</em> and <em>j</em> are two actors, and <em>w</em> is the gain function that acts just like <em>v</em> except that the roles of <em>i</em> and <em>j</em> have been exchanged, then φ<sub><em>i</em></sub>(<em>v</em>) = φ<sub><em>j</em></sub>(<em>w</em>). In essence, this means that the labeling of the actors doesn't play a role in the assignment of their gains. Such a function is said to be <em>anonymous</em>.</p>
<p><strong>2. Marginalism:</strong> the Shapley value can be defined as a function which uses only the marginal contributions of player i as the arguments.</p>
<h2 id="aumannshapley-value">Aumann–Shapley value</h2>
<p>In their 1974 book, <a href="Lloyd_Shapley" title="wikilink">Lloyd Shapley</a> and <a href="Robert_Aumann" title="wikilink">Robert Aumann</a> extended the concept of the Shapley value to infinite games (defined with respect to a <a href="atom_(measure_theory)" title="wikilink">non-atomic</a> <a href="measure_(mathematics)" title="wikilink">measure</a>), creating the diagonal formula.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a> This was later extended by <a href="Jean-François_Mertens" title="wikilink">Jean-François Mertens</a> and <a href="Abraham_Neyman" title="wikilink">Abraham Neyman</a>.</p>
<p>As seen above, the value of an n-person game associates to each player the expectation of his contribution to the worth or the coalition or players before him in a random ordering of all the players. When there are many players and each individual plays only a minor role, the set of all players preceding a given one is heuristically thought as a good sample of the players so that the value of a given infinitesimal player <span class="LaTeX">$ds$</span> around as "his" contribution to the worth of a "perfect" sample of the population of all players.</p>
<p>Symbolically, if <span class="LaTeX">$v$</span> is the coalitional worth function associating to each coalition <span class="LaTeX">$c$</span> measured subset of a measurable set <span class="LaTeX">$I$</span> that can be thought as <span class="LaTeX">$I=[0,1]$</span> without loss of generality.</p>
<p><span class="LaTeX">$(Sv)(ds) = \int_0^1 (v(tI + ds)- v(tI))dt.$</span></p>
<p>where <span class="LaTeX">$(Sv)(ds)$</span>denotes the Shapley value of the infinitesimal player <span class="LaTeX">$ds$</span> in the game, <span class="LaTeX">$tI$</span> is a perfect sample of the all-player set <span class="LaTeX">$I$</span> containing a proportion <span class="LaTeX">$t$</span> of all the players, and <span class="LaTeX">$tI+ ds$</span> is the coalition obtained after <span class="LaTeX">$ds$</span> joins <span class="LaTeX">$tI$</span>. This is the heuristic form of the <a href="diagonal_formula" title="wikilink">diagonal formula</a>.</p>
<p>Assuming some regularity of the worth function, for example assuming <span class="LaTeX">$v$</span> can be represented as differentiable function of a non-atomic measure on <span class="LaTeX">$I$</span>, <span class="LaTeX">$\mu$</span>, <span class="LaTeX">$v(c)=f(\mu(c))$</span> with density function <span class="LaTeX">$\phi$</span>, with <span class="LaTeX">$\mu(c)=\int 1_c(u)\phi(u)du,$</span> ( <span class="LaTeX">$1_c()$</span> the characteristic function of <span class="LaTeX">$c$</span>). Under such conditions</p>
<p><span class="LaTeX">$\mu(tI)=t\mu(I)$</span><code>,</code></p>
<p>as can be shown by approximating the density by a step function and keeping the proportion <span class="LaTeX">$t$</span> for each level of the density function, and</p>
<p><span class="LaTeX">$v(tI + ds)=f(t\mu(I))+f'(t\mu(I))\mu(ds)
.$</span></p>
<p>The diagonal formula has then the form developed by Aumann and Shapley (1974)</p>
<p><span class="LaTeX">$(Sv)(ds) = \int_0^1 f'_{t\mu(I)}(\mu(ds))dt$</span></p>
<p>Above <span class="LaTeX">$\mu$</span> can be vector valued (as long as the function is defined and differentiable on the range of <span class="LaTeX">$\mu$</span>, the above formula makes sense).</p>
<p>In the argument above if the measure contains atoms <span class="LaTeX">$\mu(tI)=t\mu(I)$</span> is no longer true—this is why the diagonal formula mostly applies to non-atomic games.</p>
<p>Two approaches were deployed to extend this diagonal formula when the function <span class="LaTeX">$f$</span> is no longer differentiable. Mertens goes back to the original formula and takes the derivative after the integral thereby benefiting from the smoothing effect. Neyman took a different approach. Going back to an elementary application of Mertens's approach from Mertens (1980):<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a> <span class="LaTeX">$(Sv)(ds) =  \lim_{\epsilon \to 0, \epsilon>0} \frac{1}{\epsilon}\int_0^{1-\epsilon} (f(t+\epsilon \mu(ds))-f(t))dt$</span></p>
<p>This works for example for majority games—while the original diagonal formula cannot be used directly. How Mertens further extends this by identifying symmetries that the Shapley value should be invariant upon, and averaging over such symmetries to create further smoothing effect commuting averages with the derivative operation as above.<a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a> A survey for non atomic value is found in Neyman (2002)<a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a></p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Airport_problem" title="wikilink">Airport problem</a></li>
<li><a href="Banzhaf_power_index" title="wikilink">Banzhaf power index</a></li>
<li><a href="Shapley–Shubik_power_index" title="wikilink">Shapley–Shubik power index</a></li>
</ul>
<h2 id="further-reading">Further reading</h2>
<ul>
<li>Dehez, P., & Tellone, D. (2013). <a href="Data_games:_Sharing_public_goods_with_exclusion" title="wikilink">Data games: Sharing public goods with exclusion</a>. <em>Journal of Public Economic Theory</em>, <em>15</em>(4), 654-673.</li>
</ul>
<h2 id="references">References</h2>
<ul>
<li></li>
</ul>
<h2 id="external-links">External links</h2>
<ul>
<li></li>
</ul>
<p>"</p>
<p><a href="Category:Game_theory" title="wikilink">Category:Game theory</a> <a href="Category:Cooperative_games" title="wikilink">Category:Cooperative games</a> <a href="Category:Fair_division" title="wikilink">Category:Fair division</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">Lloyd S. Shapley. "A Value for <em>n</em>-person Games". In <em>Contributions to the Theory of Games</em>, volume II, by H.W. Kuhn and A.W. Tucker, editors. <em>Annals of Mathematical Studies</em> v. 28, pp. 307–317. Princeton University Press, 1953.<a href="#fnref1">↩</a></li>
<li id="fn2">Alvin E. Roth (editor). <em>The Shapley value, essays in honor of Lloyd S. Shapley</em>. Cambridge University Press, Cambridge, 1988.<a href="#fnref2">↩</a></li>
<li id="fn3">Sergiu Hart, <em>Shapley Value</em>, The New Palgrave: Game Theory, J. Eatwell, M. Milgate and P. Newman (Editors), Norton, pp. 210–216, 1989.<a href="#fnref3">↩</a></li>
<li id="fn4"><a href="http://www.ma.huji.ac.il/~hart/value.html"><em>A Bibliography of Cooperative Games: Value Theory</em> by Sergiu Hart</a><a href="#fnref4">↩</a></li>
<li id="fn5"><a href="#fnref5">↩</a></li>
<li id="fn6"><a href="#fnref6">↩</a></li>
<li id="fn7"><a href="#fnref7">↩</a></li>
<li id="fn8">Neyman, A., 2002. Value of Games with infinitely many Players, "Handbook of Game Theory with Economic Applications," Handbook of Game Theory with Economic Applications, Elsevier, edition 1, volume 3, number 3, 00. R.J. Aumann & S. Hart (ed.).<a href="http://ratio.huji.ac.il/dp/neyman/values.pdf">1</a><a href="#fnref8">↩</a></li>
</ol>
</section>
</body>
</html>
