<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="928">Set (abstract data type)</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Set (abstract data type)</h1>
<style>
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
<style>
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</body></html>
<body>
<hr/>

<p>In <a href="computer_science" title="wikilink">computer science</a>, a <strong>set</strong> is an <a href="abstract_data_type" title="wikilink">abstract data type</a> that can store certain values, without any particular <a href="sequence" title="wikilink">order</a>, and no repeated values. It is a computer implementation of the <a href="mathematics" title="wikilink">mathematical</a> concept of a <a href="finite_set" title="wikilink">finite set</a>. Unlike most other <a href="collection_(abstract_data_type)" title="wikilink">collection</a> types, rather than retrieving a specific element from a set, one typically tests a value for membership in a set.</p>

<p>Some set data structures are designed for <strong>static</strong> or <strong>frozen sets</strong> that do not change after they are constructed. Static sets allow only query operations on their elements ‚Äî such as checking whether a given value is in the set, or enumerating the values in some arbitrary order. Other variants, called <strong>dynamic</strong> or <strong>mutable sets</strong>, allow also the insertion and deletion of elements from the set.</p>

<p>An abstract data structure is a collection, or aggregate, of data. The data may be booleans, numbers, characters, or other data structures. If one considers the structure yielded by <a class="uri" href="packaging" title="wikilink">packaging</a> or indexing, there are four basic data structures:<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a><a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></p>
<ol>
<li>unpackaged, unindexed: <a href="bunch_(computer_science)" title="wikilink">bunch</a></li>
<li>packaged, unindexed: set</li>
<li>unpackaged, indexed: <a href="string_(computer_science)" title="wikilink">string</a> (<a class="uri" href="sequence" title="wikilink">sequence</a>)</li>
<li>packaged, indexed: <a href="list_(abstract_data_type)" title="wikilink">list</a> (<a href="array_data_type" title="wikilink">array</a>)</li>
</ol>

<p>In this view, the contents of a set are a bunch, and isolated data items are elementary bunches (elements). Whereas sets <em>contain</em> elements, bunches <em>consist of</em> elements.</p>

<p>Further structuring may be achieved by considering the multiplicity of elements (sets become multisets, bunches become hyperbunches)<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a> or their homogeneity (a record is a set of fields, not necessarily all of the same type).</p>
<h2 id="type-theory">Type theory</h2>

<p>In <a href="type_theory" title="wikilink">type theory</a>, sets are generally identified with their <a href="indicator_function" title="wikilink">indicator function</a> (characteristic function): accordingly, a set of values of type 

<math display="inline" id="Set_(abstract_data_type):0">
 <semantics>
  <mi>A</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>A</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   A
  </annotation>
 </semantics>
</math>

 may be denoted by 

<math display="inline" id="Set_(abstract_data_type):1">
 <semantics>
  <msup>
   <mn>2</mn>
   <mi>A</mi>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <cn type="integer">2</cn>
    <ci>A</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{A}
  </annotation>
 </semantics>
</math>

 or 

<math display="inline" id="Set_(abstract_data_type):2">
 <semantics>
  <mrow>
   <mi class="ltx_font_mathcaligraphic">ùí´</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>A</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>ùí´</ci>
    <ci>A</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \mathcal{P}(A)
  </annotation>
 </semantics>
</math>

. (Subtypes and subsets may be modeled by <a href="refinement_type" title="wikilink">refinement types</a>, and <a href="quotient_set" title="wikilink">quotient sets</a> may be replaced by <a href="setoid" title="wikilink">setoids</a>.) The characteristic function 

<math display="inline" id="Set_(abstract_data_type):3">
 <semantics>
  <mi>F</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>F</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F
  </annotation>
 </semantics>
</math>

 of a set 

<math display="inline" id="Set_(abstract_data_type):4">
 <semantics>
  <mi>S</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>S</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   S
  </annotation>
 </semantics>
</math>

 is defined as:</p>

<p>

<math display="block" id="Set_(abstract_data_type):5">
 <semantics>
  <mrow>
   <mrow>
    <mi>F</mi>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>x</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mo>{</mo>
    <mtable displaystyle="true">
     <mtr>
      <mtd columnalign="left">
       <mrow>
        <mn>1</mn>
        <mo>,</mo>
       </mrow>
      </mtd>
      <mtd columnalign="left">
       <mrow>
        <mrow>
         <mtext>if</mtext>
         <mi>x</mi>
        </mrow>
        <mo>‚àà</mo>
        <mi>S</mi>
       </mrow>
      </mtd>
     </mtr>
     <mtr>
      <mtd columnalign="left">
       <mrow>
        <mn>0</mn>
        <mo>,</mo>
       </mrow>
      </mtd>
      <mtd columnalign="left">
       <mrow>
        <mrow>
         <mtext>if</mtext>
         <mi>x</mi>
        </mrow>
        <mo>‚àâ</mo>
        <mi>S</mi>
       </mrow>
      </mtd>
     </mtr>
    </mtable>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <ci>F</ci>
     <ci>x</ci>
    </apply>
    <apply>
     <csymbol cd="latexml">cases</csymbol>
     <cn type="integer">1</cn>
     <apply>
      <in></in>
      <apply>
       <times></times>
       <mtext>if</mtext>
       <ci>x</ci>
      </apply>
      <ci>S</ci>
     </apply>
     <cn type="integer">0</cn>
     <apply>
      <notin></notin>
      <apply>
       <times></times>
       <mtext>if</mtext>
       <ci>x</ci>
      </apply>
      <ci>S</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   F(x)=\begin{cases}1,&\mbox{if }x\in S\\
0,&\mbox{if }x\not\in S\end{cases}
  </annotation>
 </semantics>
</math>

</p>

<p>In theory, many other abstract data structures can be viewed as set structures with additional operations and/or additional <a href="axiom" title="wikilink">axioms</a> imposed on the standard operations. For example, an abstract <a href="Heap_data_structure" title="wikilink">heap</a> can be viewed as a set structure with a <code>min(''S'')</code> operation that returns the element of smallest value.</p>
<h2 id="operations">Operations</h2>
<h3 id="core-set-theoretical-operations">Core set-theoretical operations</h3>

<p>One may define the operations of the <a href="algebra_of_sets" title="wikilink">algebra of sets</a>:</p>
<ul>
<li><code>union(''S'',''T'')</code>: returns the <a href="union_(set_theory)" title="wikilink">union</a> of sets <em>S</em> and <em>T</em>.</li>
<li><code>intersection(''S'',''T'')</code>: returns the <a href="intersection_(set_theory)" title="wikilink">intersection</a> of sets <em>S</em> and <em>T</em>.</li>
<li><code>difference(''S'',''T'')</code>: returns the <a href="difference_(set_theory)" title="wikilink">difference</a> of sets <em>S</em> and <em>T</em>.</li>
<li><code>subset(''S'',''T'')</code>: a predicate that tests whether the set <em>S</em> is a <a class="uri" href="subset" title="wikilink">subset</a> of set <em>T</em>.</li>
</ul>
<h3 id="static-sets">Static sets</h3>

<p>Typical operations that may be provided by a static set structure <em>S</em> are:</p>
<ul>
<li><code>is_element_of(''x'',''S'')</code>: checks whether the value <em>x</em> is in the set <em>S</em>.</li>
<li><code>is_empty(''S'')</code>: checks whether the set <em>S</em> is empty.</li>
<li><code>size(''S'')</code> or <code>[[cardinality]](''S'')</code>: returns the number of elements in <em>S</em>.</li>
<li><code>[[iterator|iterate]](''S'')</code>: returns a function that returns one more value of <em>S</em> at each call, in some arbitrary order.</li>
<li><code>enumerate(''S'')</code>: returns a list containing the elements of <em>S</em> in some arbitrary order.</li>
<li><code>build(''x''<sub>1</sub>,''x''<sub>2</sub>,‚Ä¶,''x''<sub>''n''</sub>,)</code>: creates a set structure with values <em>x</em><sub>1</sub>,<em>x</em><sub>2</sub>,‚Ä¶,<em>x</em><sub><em>n</em></sub>.</li>
<li><code>create_from(''collection'')</code>: creates a new set structure containing all the elements of the given <a href="collection_(computing)" title="wikilink">collection</a> or all the elements returned by the given <a class="uri" href="iterator" title="wikilink">iterator</a>.</li>
</ul>
<h3 id="dynamic-sets">Dynamic sets</h3>

<p>Dynamic set structures typically add:</p>
<ul>
<li><code>create()</code>: creates a new, initially empty set structure.
<ul>
<li><code>create_with_capacity(''n'')</code>: creates a new set structure, initially empty but capable of holding up to <em>n</em> elements.</li>
</ul></li>
<li><code>add(''S'',''x'')</code>: adds the element <em>x</em> to <em>S</em>, if it is not present already.</li>
<li><code>remove(''S'', ''x'')</code>: removes the element <em>x</em> from <em>S</em>, if it is present.</li>
<li><code>capacity(''S'')</code>: returns the maximum number of values that <em>S</em> can hold.</li>
</ul>

<p>Some set structures may allow only some of these operations. The cost of each operation will depend on the implementation, and possibly also on the particular values stored in the set, and the order in which they are inserted.</p>
<h3 id="additional-operations">Additional operations</h3>

<p>There are many other operations that can (in principle) be defined in terms of the above, such as:</p>
<ul>
<li><code>pop(''S'')</code>: returns an arbitrary element of <em>S</em>, deleting it from <em>S</em>.<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a></li>
<li><code>pick(''S'')</code>: returns an arbitrary element of <em>S</em>.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a><a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a><a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a> Functionally, the mutator <code>pop</code> can be interpreted as the pair of selectors <code>(pick, rest),</code> where <code>rest</code> returns the set consisting of all elements except for the arbitrary element.<a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a> Can be interpreted in terms of <code>iterate</code>.</li>
<li><code>[[Map (higher-order function)|map]](''F'',''S'')</code>: returns the set of distinct values resulting from applying function <em>F</em> to each element of <em>S</em>.</li>
<li><code>[[Filter (higher-order function)|filter]](''P'',''S'')</code>: returns the subset containing all elements of <em>S</em> that satisfy a given <a href="predicate_(mathematical_logic)" title="wikilink">predicate</a> <em>P</em>.</li>
<li><code>[[Fold (higher-order function)|fold]](''A<sub>0</sub>'',''F'',''S'')</code>: returns the value <em>A</em><sub>|<em>S</em>|</sub> after applying <code>''A<sub>i+1</sub>'' := ''F''(''A<sub>i</sub>'', ''e'')</code> for each element <em>e</em> of <em>S,</em> for some binary operation <em>F.</em> <em>F</em> must be associative and commutative for this to be well-defined.</li>
<li><code>clear(''S'')</code>: delete all elements of <em>S</em>.</li>
<li><code>equal(''S<sub>1</sub>'', ''S<sub>2</sub>'')</code>: checks whether the two given sets are equal (i.e. contain all and only the same elements).</li>
<li><code>hash(''S'')</code>: returns a <a href="hash_value" title="wikilink">hash value</a> for the static set <em>S</em> such that if <code>equal(''S<sub>1</sub>'', ''S<sub>2</sub>'')</code> then <code>hash(''S<sub>1</sub>'') = hash(''S<sub>2</sub>'')</code></li>
</ul>

<p>Other operations can be defined for sets with elements of a special type:</p>
<ul>
<li><code>sum(''S'')</code>: returns the sum of all elements of <em>S</em> for some definition of "sum". For example, over integers or reals, it may be defined as <code>fold(0, add, ''S'')</code>.</li>
<li><code>collapse(''S'')</code>: given a set of sets, return the union.<a class="footnoteRef" href="#fn9" id="fnref9"><sup>9</sup></a> For example, <code>collapse({{1}, {2, 3}}) == {1, 2, 3}</code>. May be considered a kind of <code>sum</code>.</li>
<li><code>flatten(''S'')</code>: given a set consisting of sets and atomic elements (elements that are not sets), returns a set whose elements are the atomic elements of the original top-level set or elements of the sets it contains. In other words, remove a level of nesting ‚Äì like <code>collapse,</code> but allow atoms. This can be done a single time, or recursively flattening to obtain a set of only atomic elements.<a class="footnoteRef" href="#fn10" id="fnref10"><sup>10</sup></a> For example, <code>flatten({1, {2, 3}}) == {1, 2, 3}</code>.</li>
<li><code>nearest(''S'',''x'')</code>: returns the element of <em>S</em> that is closest in value to <em>x</em> (by some <a href="Metric_(mathematics)" title="wikilink">metric</a>).</li>
<li><code>min(''S'')</code>, <code>max(''S'')</code>: returns the minimum/maximum element of <em>S</em>.</li>
</ul>
<h2 id="implementations">Implementations</h2>

<p>Sets can be implemented using various <a href="data_structure" title="wikilink">data structures</a>, which provide different time and space trade-offs for various operations. Some implementations are designed to improve the efficiency of very specialized operations, such as <code>nearest</code> or <code>union</code>. Implementations described as "general use" typically strive to optimize the <code>element_of</code>, <code>add</code>, and <code>delete</code> operations. A simple implementation is to use a <a href="List_(abstract_data_type)" title="wikilink">list</a>, ignoring the order of the elements and taking care to avoid repeated values. This is simple but inefficient, as operations like set membership or element deletion are <em>O</em>(<em>n</em>), as they require scanning the entire list. Sets are often instead implemented using more efficient data structures, particularly various flavors of <a href="tree_(data_structure)" title="wikilink">trees</a>, <a href="trie" title="wikilink">tries</a>, or <a href="hash_tables" title="wikilink">hash tables</a>.</p>

<p>As sets can be interpreted as a kind of map (by the indicator function), sets are commonly implemented in the same way as (partial) maps (<a href="associative_array" title="wikilink">associative arrays</a>) ‚Äì in this case in which the value of each key-value pair has the <a href="unit_type" title="wikilink">unit type</a> or a sentinel value (like 1) ‚Äì namely, a <a href="self-balancing_binary_search_tree" title="wikilink">self-balancing binary search tree</a> for sorted sets (which has O(log n) for most operations), or a <a href="hash_table" title="wikilink">hash table</a> for unsorted sets (which has O(1) average-case, but O(n) worst-case, for most operations). A sorted linear hash table<a class="footnoteRef" href="#fn11" id="fnref11"><sup>11</sup></a> may be used to provide deterministically ordered sets.</p>

<p>Further, in languages that support maps but not sets, sets can be implemented in terms of maps. For example, a common <a href="programming_idiom" title="wikilink">programming idiom</a> in <a class="uri" href="Perl" title="wikilink">Perl</a> that converts an array to a hash whose values are the sentinel value 1, for use as a set, is:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">%elements</span> = <span class="fu">map</span> { <span class="dt">$_</span> =&gt; <span class="dv">1</span> } <span class="dt">@elements</span>;</code></pre></div>

<p>Other popular methods include <a href="Array_data_structure" title="wikilink">arrays</a>. In particular a subset of the integers 1..<em>n</em> can be implemented efficiently as an <em>n</em>-bit <a href="bit_array" title="wikilink">bit array</a>, which also support very efficient union and intersection operations. A <a href="Bloom_map" title="wikilink">Bloom map</a> implements a set probabilistically, using a very compact representation but risking a small chance of false positives on queries.</p>

<p>The Boolean set operations can be implemented in terms of more elementary operations (<code>pop</code>, <code>clear</code>, and <code>add</code>), but specialized algorithms may yield lower asymptotic time bounds. If sets are implemented as sorted lists, for example, the naive algorithm for <code>union(''S'',''T'')</code> will take time proportional to the length <em>m</em> of <em>S</em> times the length <em>n</em> of <em>T</em>; whereas a variant of the <a href="Merge_algorithm" title="wikilink">list merging algorithm</a> will do the job in time proportional to <em>m</em>+<em>n</em>. Moreover, there are specialized set data structures (such as the <a href="union-find_algorithm" title="wikilink">union-find data structure</a>) that are optimized for one or more of these operations, at the expense of others.</p>
<h2 id="language-support">Language support</h2>

<p>One of the earliest languages to support sets was <a href="Pascal_programming_language" title="wikilink">Pascal</a>; many languages now include it, whether in the core language or in a <a href="standard_library" title="wikilink">standard library</a>.</p>
<ul>
<li>In <a class="uri" href="C++" title="wikilink">C++</a>, the <a href="Standard_Template_Library" title="wikilink">Standard Template Library</a> (STL) provides the <code>[[set (C++)|set]]</code> template class, which is typically implemented using a binary search tree (e.g. <a href="red-black_tree" title="wikilink">red-black tree</a>); <a href="Silicon_Graphics_International" title="wikilink">SGI</a>'s STL also provides the <code>hash_set</code> template class, which implements a set using a hash table. In sets, the elements themselves are the keys, in contrast to sequenced containers, where elements are accessed using their (relative or absolute) position. Set elements must have a strict weak ordering.</li>
<li><a href="Java_(programming_language)" title="wikilink">Java</a> offers the  <a href="Interface_(computer_science)" title="wikilink">interface</a> to support sets (with the  class implementing it using a hash table), and the  sub-interface to support sorted sets (with the  class implementing it using a binary search tree).</li>
<li><a href="Apple_Inc." title="wikilink">Apple</a>'s <a href="Foundation_Kit" title="wikilink">Foundation framework</a> (part of <a href="Cocoa_(API)" title="wikilink">Cocoa</a>) provides the <a class="uri" href="Objective-C" title="wikilink">Objective-C</a> classes <code>[http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/ NSSet]</code>, <code>[http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableSet_Class/ NSMutableSet]</code>, <code>[http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/ NSCountedSet]</code>, <code>[http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSOrderedSet_Class/Reference/Reference.html NSOrderedSet]</code>, and <code>[https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSMutableOrderedSet_Class/Reference/Reference.html NSMutableOrderedSet]</code>. The <a class="uri" href="CoreFoundation" title="wikilink">CoreFoundation</a> APIs provide the <a href="http://developer.apple.com/documentation/CoreFoundation/Reference/CFSetRef/">CFSet</a> and <a href="http://developer.apple.com/documentation/CoreFoundation/Reference/CFMutableSetRef/">CFMutableSet</a> types for use in <a href="C_(programming_language)" title="wikilink">C</a>.</li>
<li><a href="Python_(programming_language)" title="wikilink">Python</a> has built-in <a href="https://docs.python.org/library/stdtypes.html#set-types-set-frozenset"><code>set</code> and <code>frozenset</code> types</a> since 2.4, and since Python 3.0 and 2.7, supports non-empty set literals using a curly-bracket syntax, e.g.: <code>{x, y, z}</code>.</li>
<li>The <a href=".NET_Framework" title="wikilink">.NET Framework</a> provides the generic <code>[http://msdn.microsoft.com/en-us/library/bb359438.aspx HashSet]</code> and <code>[http://msdn.microsoft.com/en-us/library/dd412070.aspx SortedSet]</code> classes that implement the generic <code>[http://msdn.microsoft.com/en-us/library/dd412081.aspx ISet]</code> interface.</li>
<li><a class="uri" href="Smalltalk" title="wikilink">Smalltalk</a>'s class library includes <code>Set</code> and <code>IdentitySet</code>, using equality and identity for inclusion test respectively. Many dialects provide variations for compressed storage (<code>NumberSet</code>, <code>CharacterSet</code>), for ordering (<code>OrderedSet</code>, <code>SortedSet</code>, etc.) or for <a href="weak_reference" title="wikilink">weak references</a> (<code>WeakIdentitySet</code>).</li>
<li><a href="Ruby_(programming_language)" title="wikilink">Ruby</a>'s standard library includes a <code>[http://ruby-doc.org/stdlib/libdoc/set/rdoc/index.html set]</code> module which contains <code>Set</code> and <code>SortedSet</code> classes that implement sets using hash tables, the latter allowing iteration in sorted order.</li>
<li><a class="uri" href="OCaml" title="wikilink">OCaml</a>'s standard library contains a <code>Set</code> module, which implements a functional set data structure using binary search trees.</li>
<li>The <a href="Glasgow_Haskell_Compiler" title="wikilink">GHC</a> implementation of <a href="Haskell_(programming_language)" title="wikilink">Haskell</a> provides a <code>[https://hackage.haskell.org/package/containers/docs/Data-Set.html Data.Set]</code> module, which implements immutable sets using binary search trees.<a class="footnoteRef" href="#fn12" id="fnref12"><sup>12</sup></a></li>
<li>The <a class="uri" href="Tcl" title="wikilink">Tcl</a> <a class="uri" href="Tcllib" title="wikilink">Tcllib</a> package provides a set module which implements a set data structure based upon TCL lists.</li>
<li>The <a href="Swift_(programming_language)" title="wikilink">Swift</a> standard library contains a <code>Set</code> type, since Swift 1.2.</li>
</ul>

<p>As noted in the previous section, in languages which do not directly support sets but do support <a href="associative_array" title="wikilink">associative arrays</a>, sets can be emulated using associative arrays, by using the elements as keys, and using a dummy value as the values, which are ignored.</p>
<h2 id="multiset">Multiset</h2>

<p>A generalization of the notion of a set is that of a <strong><a class="uri" href="multiset" title="wikilink">multiset</a></strong> or <strong>bag</strong>, which is similar to a set but allows repeated ("equal") values (duplicates). This is used in two distinct senses: either equal values are considered <em>identical,</em> and are simply counted, or equal values are considered <em>equivalent,</em> and are stored as distinct items. For example, given a list of people (by name) and ages (in years), one could construct a multiset of ages, which simply counts the number of people of a given age. Alternatively, one can construct a multiset of people, where two people are considered equivalent if their ages are the same (but may be different people and have different names), in which case each pair (name, age) must be stored, and selecting on a given age gives all the people of a given age.</p>

<p>Formally, it is possible for objects in computer science to be considered "equal" under some <a href="equivalence_relation" title="wikilink">equivalence relation</a> but still distinct under another relation. Some types of multiset implementations will store distinct equal objects as separate items in the data structure; while others will collapse it down to one version (the first one encountered) and keep a positive integer count of the multiplicity of the element.</p>

<p>As with sets, multisets can naturally be implemented using hash table or trees, which yield different performance characteristics.</p>

<p>The set of all bags over type T is given by the expression bag T. If by multiset one considers equal items identical and simply counts them, then a multiset can be interpreted as a function from the input domain to the non-negative integers (<a href="natural_number" title="wikilink">natural numbers</a>), generalizing the identification of a set with its indicator function. In some cases a multiset in this counting sense may be generalized to allow negative values, as in Python.</p>
<ul>
<li>C++'s <a href="Standard_Template_Library" title="wikilink">Standard Template Library</a> implements both sorted and unsorted multisets. It provides the <code>[[Multiset (C++)|multiset]]</code> class for the sorted multiset, as a kind of <a href="Associative_containers_(C++)" title="wikilink">associative container</a>, which implements this multiset using a <a href="self-balancing_binary_search_tree" title="wikilink">self-balancing binary search tree</a>. It provides the <code>unordered_multiset</code> class for the unsorted multiset, as a kind of <a href="Unordered_associative_containers_(C++)" title="wikilink">unordered associative containers</a>, which implements this multiset using a <a href="hash_table" title="wikilink">hash table</a>. The unsorted multiset is standard as of <a class="uri" href="C++11" title="wikilink">C++11</a>; previously SGI's STL provides the <code>hash_multiset</code> class, which was copied and eventually standardized.</li>
<li>For <a href="Java_(programming_language)" title="wikilink">Java</a>, third-party libraries provide multiset functionality:
<ul>
<li><a href="Apache_Commons" title="wikilink">Apache Commons</a> Collections provides the <code>[https://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/Bag.html Bag]</code> and <code>SortedBag</code> interfaces, with implementing classes like <code>HashBag</code> and <code>TreeBag</code>.</li>
<li><a href="Google_Guava" title="wikilink">Google Guava</a> provides the <code>[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html Multiset]</code> interface, with implementing classes like <code>HashMultiset</code> and <code>TreeMultiset</code>.</li>
</ul></li>
<li>Apple provides the <code>[http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/ NSCountedSet]</code> class as part of <a href="Cocoa_(API)" title="wikilink">Cocoa</a>, and the <code>[http://developer.apple.com/documentation/CoreFoundation/Reference/CFBagRef/ CFBag]</code> and <code>[http://developer.apple.com/documentation/CoreFoundation/Reference/CFMutableBagRef/ CFMutableBag]</code> types as part of <a class="uri" href="CoreFoundation" title="wikilink">CoreFoundation</a>.</li>
<li><a href="Python_(programming_language)" title="wikilink">Python's</a> standard library includes <code>[https://docs.python.org/library/collections.html#collections.Counter collections.Counter]</code>, which is similar to a multiset.</li>
<li><a class="uri" href="Smalltalk" title="wikilink">Smalltalk</a> includes the <code>Bag</code> class, which can be instantiated to use either identity or equality as predicate for inclusion test.</li>
</ul>

<p>Where a multiset data structure is not available, a workaround is to use a regular set, but override the equality predicate of its items to always return "not equal" on distinct objects (however, such will still not be able to store multiple occurrences of the same object) or use an <a href="associative_array" title="wikilink">associative array</a> mapping the values to their integer multiplicities (this will not be able to distinguish between equal elements at all).</p>

<p>Typical operations on bags:</p>
<ul>
<li><code>contains(''B'', ''x'')</code>: checks whether the element <em>x</em> is present (at least once) in the bag <em>B</em></li>
<li><code>is_sub_bag(''B<sub>1</sub>'', ''B<sub>2</sub>'')</code>: checks whether each element in the bag <em>B<sub>1</sub></em> occurs in <em>B<sub>1</sub></em> no more often than it occurs in the bag <em>B<sub>2</sub></em>; sometimes denoted as <em>B<sub>1</sub></em> ‚äë <em>B<sub>2</sub></em>.</li>
<li><code>count(''B'', ''x'')</code>: returns the number of times that the element <em>x</em> occurs in the bag <em>B</em>; sometimes denoted as <em>B</em> # <em>x</em>.</li>
<li><code>scaled_by(''B'', ''n'')</code>: given a <a href="natural_number" title="wikilink">natural number</a> <em>n</em>, returns a bag which contains the same elements as the bag <em>B</em>, except that every element that occurs <em>m</em> times in <em>B</em> occurs <em>n</em> * <em>m</em> times in the resulting bag; sometimes denoted as n ‚äó B.</li>
<li><code>union(''B<sub>1</sub>'', ''B<sub>2</sub>'')</code>: returns a bag that containing just those values that occur in either the bag <em>B<sub>1</sub></em> or the bag <em>B<sub>2</sub></em>, except that the number of times a value <em>x</em> occurs in the resulting bag is equal to (<em>B<sub>1</sub></em> # x) + (<em>B<sub>2</sub></em> # x); sometimes denoted as <em>B<sub>1</sub></em> ‚äé <em>B<sub>2</sub></em>.</li>
</ul>
<h3 id="multisets-in-sql">Multisets in SQL</h3>

<p>In <a href="Relational_database_management_system" title="wikilink">relational databases</a>, a table can be a (mathematical) set or a multiset, depending on the presence on unicity constraints on some columns (which turns it into a candidate key).</p>

<p><a class="uri" href="SQL" title="wikilink">SQL</a> allows the selection of rows from a relational table: this operation will in general yield a multiset, unless the keyword <code>DISTINCT</code> is used to force the rows to be all different, or the selection includes the primary (or a candidate) key.</p>

<p>In <a href="Sql#Standardization" title="wikilink">ANSI SQL</a> the <code>MULTISET</code> keyword can be used to transform a subquery into a collection expression:</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> expression1, expression2... <span class="kw">FROM</span> table_name...</code></pre></div>

<p>is a general select that can be used as <em><a href="subquery_expression" title="wikilink">subquery expression</a></em> of another more general query, while</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">MULTISET</span>(<span class="kw">SELECT</span> expression1, expression2... <span class="kw">FROM</span> table_name...)</code></pre></div>

<p>transforms the subquery into a <em><a href="collection_expression" title="wikilink">collection expression</a></em> that can be used in another query, or in assignment to a column of appropriate collection type.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Bloom_filter" title="wikilink">Bloom filter</a></li>
<li><a href="Disjoint_set_(data_structure)" title="wikilink">Disjoint set</a></li>
</ul>
<h2 id="notes">Notes</h2>
<h2 id="references">References</h2>

<p>"</p>

<p><a href="Category:Data_types" title="wikilink">Category:Data types</a> <a href="Category:Composite_data_types" title="wikilink">Category:Composite data types</a> <a href="Category:Abstract_data_types" title="wikilink">Category:Abstract data types</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">‚Ü©</a></li>
<li id="fn2"><a href="#fnref2">‚Ü©</a></li>
<li id="fn3"><a href="#fnref3">‚Ü©</a></li>
<li id="fn4">Python: <a href="https://docs.python.org/3/library/stdtypes.html#set.pop">pop()</a><a href="#fnref4">‚Ü©</a></li>
<li id="fn5"><em>Management and Processing of Complex Data Structures: Third Workshop on Information Systems and Artificial Intelligence, Hamburg, Germany, February 28 - March 2, 1994. Proceedings,</em> ed. Kai v. Luck, Heinz Marburger, [<a class="uri" href="http://books.google.com/books?id=ymhoQ3y0vccC&amp;pg">http://books.google.com/books?id=ymhoQ3y0vccC&amp;pg;</a>;=PA76&amp;q;=pick#v=onepage p. 76]<a href="#fnref5">‚Ü©</a></li>
<li id="fn6">Python <a href="http://bugs.python.org/issue7212">Issue7212</a>: Retrieve an arbitrary element from a set without removing it; see <a href="http://bugs.python.org/issue7212#msg106593">msg106593</a> regarding standard name<a href="#fnref6">‚Ü©</a></li>
<li id="fn7">Ruby <a href="https://bugs.ruby-lang.org/issues/4553">Feature #4553</a>: Add Set#pick and Set#pop<a href="#fnref7">‚Ü©</a></li>
<li id="fn8"><em>Inductive Synthesis of Functional Programs: Universal Planning, Folding of Finite Programs, and Schema Abstraction by Analogical Reasoning,</em> Ute Schmid, Springer, Aug 21, 2003, [<a class="uri" href="http://books.google.com/books?id=p-Fy25LE4lMC&amp;pg">http://books.google.com/books?id=p-Fy25LE4lMC&amp;pg;</a>;=PA240&amp;q;=pick#v=onepage p. 240]<a href="#fnref8">‚Ü©</a></li>
<li id="fn9"><em>Recent Trends in Data Type Specification: 10th Workshop on Specification of Abstract Data Types Joint with the 5th COMPASS Workshop, S. Margherita, Italy, May 30 - June 3, 1994. Selected Papers, Volume 10,</em> ed. Egidio Astesiano, Gianna Reggio, Andrzej Tarlecki, [<a class="uri" href="http://books.google.co.jp/books?id=LkvQYL23v1sC&amp;pg">http://books.google.co.jp/books?id=LkvQYL23v1sC&amp;pg;</a>;=PA38&amp;q;=collapse#v=onepage p. 38]<a href="#fnref9">‚Ü©</a></li>
<li id="fn10">Ruby: <a href="http://www.ruby-doc.org/stdlib-2.1.2/libdoc/set/rdoc/Set.html#method-i-flatten">flatten()</a><a href="#fnref10">‚Ü©</a></li>
<li id="fn11"><a href="#fnref11">‚Ü©</a></li>
<li id="fn12">Stephen Adams, <a href="http://www.swiss.ai.mit.edu/~adams/BB">"<em>Efficient sets: a balancing act</em>"</a>, Journal of Functional Programming 3(4):553-562, October 1993. Retrieved on 2015-03-11.<a href="#fnref12">‚Ü©</a></li>
</ol>
</section>
</body>

