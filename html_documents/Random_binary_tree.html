<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title offset="197">Random binary tree</title>
   <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js">
    </script>
</head>
<body>
<h1>Random binary tree</h1>
<hr/>
<p>In <a href="computer_science" title="wikilink">computer science</a> and <a href="probability_theory" title="wikilink">probability theory</a>, a <strong>random binary tree</strong> refers to a <a href="binary_tree" title="wikilink">binary tree</a> selected at random from some <a href="probability_distribution" title="wikilink">probability distribution</a> on binary trees. Two different distributions are commonly used: binary trees formed by inserting nodes one at a time according to a <a href="random_permutation" title="wikilink">random permutation</a>, and binary trees chosen from a <a href="Uniform_distribution_(discrete)" title="wikilink">uniform discrete distribution</a> in which all distinct trees are equally likely. It is also possible to form other distributions, for instance by repeated splitting. Adding and removing nodes directly in a random binary tree will in general disrupt its random structure, but the <a class="uri" href="treap" title="wikilink">treap</a> and related randomized binary search tree <a href="data_structure" title="wikilink">data structures</a> use the principle of binary trees formed from a random permutation in order to maintain a <a href="balanced_binary_search_tree" title="wikilink">balanced binary search tree</a> dynamically as nodes are inserted and deleted.</p>
<p>For random trees that are not necessarily binary, see <a href="random_tree" title="wikilink">random tree</a>.</p>
<h2 id="binary-trees-from-random-permutations">Binary trees from random permutations</h2>
<p>For any set of numbers (or, more generally, values from some <a href="total_order" title="wikilink">total order</a>), one may form a <a href="binary_search_tree" title="wikilink">binary search tree</a> in which each number is inserted in sequence as a leaf of the tree, without changing the structure of the previously inserted numbers. The position into which each number should be inserted is uniquely determined by a <a href="binary_search" title="wikilink">binary search</a> in the tree formed by the previous numbers. For instance, if the three numbers (1,3,2) are inserted into a tree in that sequence, the number 1 will sit at the root of the tree, the number 3 will be placed as its right child, and the number 2 as the left child of the number 3. There are six different permutations of the numbers (1,2,3), but only five trees may be constructed from them. That is because the permutations (2,1,3) and (2,3,1) form the same tree.</p>
<h3 id="expected-depth-of-a-node">Expected depth of a node</h3>
<p>For any fixed choice of a value <span class="LaTeX">$x$</span> in a given set of <span class="LaTeX">$n$</span> numbers, if one randomly permutes the numbers and forms a binary tree from them as described above, the <a href="expected_value" title="wikilink">expected value</a> of the length of the path from the root of the tree to <span class="LaTeX">$x$</span> is at most <span class="LaTeX">$2 log n + O (1)$</span>, where "<span class="LaTeX">$log$</span>" denotes the <a href="natural_logarithm" title="wikilink">natural logarithm</a> function and the <span class="LaTeX">$O$</span> introduces <a href="big_O_notation" title="wikilink">big O notation</a>. For, the expected number of ancestors of <span class="LaTeX">$x$</span> is by linearity of expectation equal to the sum, over all other values <span class="LaTeX">$y$</span> in the set, of the probability that <span class="LaTeX">$y$</span> is an ancestor of <span class="LaTeX">$x$</span>. And a value <span class="LaTeX">$y$</span> is an ancestor of <span class="LaTeX">$x$</span> exactly when <span class="LaTeX">$y$</span> is the first element to be inserted from the elements in the interval <span class="LaTeX">$x x , y$</span>. Thus, the values that are adjacent to <span class="LaTeX">$x$</span> in the sorted sequence of values have probability <span class="LaTeX">$1/2$</span> of being an ancestor of <span class="LaTeX">$x$</span>, the values one step away have probability <span class="LaTeX">$1/3$</span>, etc. Adding these probabilities for all positions in the sorted sequence gives twice a <a href="Harmonic_number" title="wikilink">Harmonic number</a>, leading to the bound above. A bound of this form holds also for the expected search length of a path to a fixed value <span class="LaTeX">$x$</span> that is not part of the given set.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>
<h3 id="the-longest-path">The longest path</h3>
<p>Although not as easy to analyze as the average path length, there has also been much research on determining the expectation (or high probability bounds) of the length of the longest path in a binary search tree generated from a random insertion order. It is now known that this length, for a tree with <span class="LaTeX">$n$</span> nodes, is almost surely</p>
<p><span class="LaTeX">$$\frac{1}{\beta}\log n \approx 4.311\log n,$$</span> where <span class="LaTeX">$β$</span> is the unique number in the range <span class="LaTeX">$0  satisfying the equation</span></p>
<p><span class="LaTeX">$$\displaystyle 2\beta e^{1-\beta}=1.$$</span><a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></p>
<h3 id="expected-number-of-leaves">Expected number of leaves</h3>
<p>In the random permutation model, each of the numbers from the set of numbers used to form the tree, except for the smallest and largest of the numbers, has probability <span class="LaTeX">$1/3$</span> of being a leaf in the tree, for it is a leaf when it inserted after its two neighbors, and any of the six permutations of these two neighbors and it are equally likely. By similar reasoning, the smallest and largest of the numbers have probability <span class="LaTeX">$1/2$</span> of being a leaf. Therefore, the expected number of leaves is the sum of these probabilities, which for <span class="LaTeX">$n ≥ 2$</span> is exactly <span class="LaTeX">$( n + 1)/3$</span>.</p>
<h3 id="treaps-and-randomized-binary-search-trees">Treaps and randomized binary search trees</h3>
<p>In applications of binary search tree data structures, it is rare for the values in the tree to be inserted without deletion in a random order, limiting the direct applications of random binary trees. However, algorithm designers have devised data structures that allow insertions and deletions to be performed in a binary search tree, at each step maintaining as an invariant the property that the shape of the tree is a random variable with the same distribution as a random binary search tree.</p>
<p>If a given set of ordered numbers is assigned numeric priorities (distinct numbers unrelated to their values), these priorities may be used to construct a <a href="Cartesian_tree" title="wikilink">Cartesian tree</a> for the numbers, a binary tree that has as its inorder traversal sequence the sorted sequence of the numbers and that is <a href="binary_heap" title="wikilink">heap-ordered</a> by priorities. Although more efficient construction algorithms are known, it is helpful to think of a Cartesian tree as being constructed by inserting the given numbers into a binary search tree in priority order. Thus, by choosing the priorities either to be a set of independent random real numbers in the unit interval, or by choosing them to be a random permutation of the numbers from <span class="LaTeX">$1$</span> to <span class="LaTeX">$n$</span> (where <span class="LaTeX">$n$</span> is the number of nodes in the tree), and by maintaining the heap ordering property using <a href="tree_rotation" title="wikilink">tree rotations</a> after any insertion or deletion of a node, it is possible to maintain a data structure that behaves like a random binary search tree. Such a data structure is known as a <a class="uri" href="treap" title="wikilink">treap</a> or a randomized binary search tree.<a class="footnoteRef" href="#fn3" id="fnref3"><sup>3</sup></a></p>
<h2 id="uniformly-random-binary-trees">Uniformly random binary trees</h2>
<p>The number of binary trees with <em>n</em> nodes is a <a href="Catalan_number" title="wikilink">Catalan number</a>: for <span class="LaTeX">$ n = 1, 2, 3, ...$</span> these numbers of trees are</p>
<dl>
<dd><span class="LaTeX">$1, 2, 5, 14, 42, 132, 429, 1430, 4862, 16796, …$</span> .
</dd>
</dl>
<p>Thus, if one of these trees is selected uniformly at random, its probability is the <a href="multiplicative_inverse" title="wikilink">reciprocal</a> of a Catalan number. Trees in this model have expected depth proportional to the square root of <span class="LaTeX">$n$</span>, rather than to the logarithm;<a class="footnoteRef" href="#fn4" id="fnref4"><sup>4</sup></a> however, the <a href="Strahler_number" title="wikilink">Strahler number</a> of a uniformly random binary tree, a more sensitive measure of the distance from a leaf in which a node has Strahler number <span class="LaTeX">$i$</span> whenever it has either a child with that number or two children with number <span class="LaTeX">$i − 1$</span>, is with high probability logarithmic.<a class="footnoteRef" href="#fn5" id="fnref5"><sup>5</sup></a></p>
<p>Due to their large heights, this model of equiprobable random trees is not generally used for binary search trees, but it has been applied to problems of modeling the <a href="parse_tree" title="wikilink">parse trees</a> of <a href="Expression_(mathematics)" title="wikilink">algebraic expressions</a> in <a class="uri" href="compiler" title="wikilink">compiler</a> design<a class="footnoteRef" href="#fn6" id="fnref6"><sup>6</sup></a> (where the above-mentioned bound on Strahler number translates into the <a href="register_allocation" title="wikilink">number of registers</a> needed to evaluate an expression<a class="footnoteRef" href="#fn7" id="fnref7"><sup>7</sup></a>) and for modeling <a href="evolutionary_tree" title="wikilink">evolutionary trees</a>.<a class="footnoteRef" href="#fn8" id="fnref8"><sup>8</sup></a> In some cases the analysis of random binary trees under the random permutation model can be automatically transferred to the uniform model.<a class="footnoteRef" href="#fn9" id="fnref9"><sup>9</sup></a></p>
<h2 id="random-split-trees">Random split trees</h2>
<p>generate random binary trees with <span class="LaTeX">$n$</span> nodes by generating a real-valued random variable <span class="LaTeX">$x$</span> in the unit interval <span class="LaTeX">$(0,1)$</span>, assigning the first <span class="LaTeX">$xn$</span> nodes (rounded down to an integer number of nodes) to the left subtree, the next node to the root, and the remaining nodes to the right subtree, and continuing recursively in each subtree. If <span class="LaTeX">$x$</span> is chosen uniformly at random in the interval, the result is the same as the random binary search tree generated by a random permutation of the nodes, as any node is equally likely to be chosen as root; however, this formulation allows other distributions to be used instead. For instance, in the uniformly random binary tree model, once a root is fixed each of its two subtrees must also be uniformly random, so the uniformly random model may also be generated by a different choice of distribution for <span class="LaTeX">$x$</span>. As Devroye and Kruszewski show, by choosing a <a href="beta_distribution" title="wikilink">beta distribution</a> on <span class="LaTeX">$x$</span> and by using an appropriate choice of shape to draw each of the branches, the mathematical trees generated by this process can be used to create realistic-looking botanical trees.</p>
<h2 id="notes">Notes</h2>
<h2 id="references">References</h2>
<ul>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
<li>
<p>.</p></li>
</ul>
<h2 id="external-links">External links</h2>
<ul>
<li><a href="http://opendatastructures.org/versions/edition-0.1e/ods-java/7_Random_Binary_Search_Tree.html">Open Data Structures - Chapter 7 - Random Binary Search Trees</a></li>
</ul>
<p>"</p>
<p><a href="Category:Binary_trees" title="wikilink">Category:Binary trees</a> <a class="uri" href="Category:Randomness" title="wikilink">Category:Randomness</a> <a href="Category:Probabilistic_data_structures" title="wikilink">Category:Probabilistic data structures</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1">; ; , p. 75.<a href="#fnref1">↩</a></li>
<li id="fn2">; ; ; , pp. 91–99; .<a href="#fnref2">↩</a></li>
<li id="fn3">; .<a href="#fnref3">↩</a></li>
<li id="fn4">, p. 15.<a href="#fnref4">↩</a></li>
<li id="fn5">. That it is at most logarithmic is trivial, because the Strahler number of every tree is bounded by the logarithm of the number of its nodes.<a href="#fnref5">↩</a></li>
<li id="fn6">, p. 63.<a href="#fnref6">↩</a></li>
<li id="fn7">.<a href="#fnref7">↩</a></li>
<li id="fn8">.<a href="#fnref8">↩</a></li>
<li id="fn9">, p. 70.<a href="#fnref9">↩</a></li>
</ol>
</section>
</body>
</html>
