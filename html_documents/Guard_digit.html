<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1134">Guard digit</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Guard digit</h1>
<style>
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
<style>
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</body></html>
<body>
<hr/>

<p>In <a href="numerical_analysis" title="wikilink">numerical analysis</a>, one or more <strong>guard digits</strong> can be used to reduce the amount of <a href="Rounding" title="wikilink">roundoff</a> error.</p>

<p>For example, suppose that the final result of a long, multi-step calculation can be safely rounded off to <em>N</em> decimal places. That is to say, the roundoff error introduced by this final roundoff makes a negligible contribution to the overall uncertainty.</p>

<p>However, it is quite likely that it is <em>not</em> safe to round off the intermediate steps in the calculation to the same number of digits. Be aware that roundoff errors can accumulate. If <em>M</em> decimal places are used in the intermediate calculation, we say there are <em>M−N</em> guard digits.</p>

<p>Guard digits are also used in floating point operations in most computer systems. Given 

<math display="inline" id="Guard_digit:0">
 <semantics>
  <mrow>
   <mrow>
    <msup>
     <mn>2</mn>
     <mn>1</mn>
    </msup>
    <mo>×</mo>
    <msub>
     <mn>0.100</mn>
     <mn>2</mn>
    </msub>
   </mrow>
   <mo>-</mo>
   <mrow>
    <msup>
     <mn>2</mn>
     <mn>0</mn>
    </msup>
    <mo>×</mo>
    <msub>
     <mn>0.111</mn>
     <mn>2</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <minus></minus>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <cn type="float">0.100</cn>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <cn type="integer">0</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <cn type="float">0.111</cn>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{1}\times 0.100_{2}-2^{0}\times 0.111_{2}
  </annotation>
 </semantics>
</math>

 we have to line up the binary points. This means we must add an extra digit to the first operand—a guard digit. This gives us 

<math display="inline" id="Guard_digit:1">
 <semantics>
  <mrow>
   <mrow>
    <msup>
     <mn>2</mn>
     <mn>1</mn>
    </msup>
    <mo>×</mo>
    <msub>
     <mn>0.1000</mn>
     <mn>2</mn>
    </msub>
   </mrow>
   <mo>-</mo>
   <mrow>
    <msup>
     <mn>2</mn>
     <mn>1</mn>
    </msup>
    <mo>×</mo>
    <msub>
     <mn>0.0111</mn>
     <mn>2</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <minus></minus>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <cn type="float">0.1000</cn>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <cn type="float">0.0111</cn>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{1}\times 0.1000_{2}-2^{1}\times 0.0111_{2}
  </annotation>
 </semantics>
</math>

. Performing this operation gives us 

<math display="inline" id="Guard_digit:2">
 <semantics>
  <mrow>
   <msup>
    <mn>2</mn>
    <mn>1</mn>
   </msup>
   <mo>×</mo>
   <msub>
    <mn>0.0001</mn>
    <mn>2</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <cn type="integer">2</cn>
     <cn type="integer">1</cn>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <cn type="float">0.0001</cn>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{1}\times 0.0001_{2}
  </annotation>
 </semantics>
</math>

 or 

<math display="inline" id="Guard_digit:3">
 <semantics>
  <mrow>
   <msup>
    <mn>2</mn>
    <mrow>
     <mo>-</mo>
     <mn>2</mn>
    </mrow>
   </msup>
   <mo>×</mo>
   <msub>
    <mn>0.100</mn>
    <mn>2</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <cn type="integer">2</cn>
     <apply>
      <minus></minus>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <cn type="float">0.100</cn>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{-2}\times 0.100_{2}
  </annotation>
 </semantics>
</math>

. Without using a guard digit we have 

<math display="inline" id="Guard_digit:4">
 <semantics>
  <mrow>
   <mrow>
    <msup>
     <mn>2</mn>
     <mn>1</mn>
    </msup>
    <mo>×</mo>
    <msub>
     <mn>0.100</mn>
     <mn>2</mn>
    </msub>
   </mrow>
   <mo>-</mo>
   <mrow>
    <msup>
     <mn>2</mn>
     <mn>1</mn>
    </msup>
    <mo>×</mo>
    <msub>
     <mn>0.011</mn>
     <mn>2</mn>
    </msub>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <minus></minus>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <cn type="float">0.100</cn>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <cn type="float">0.011</cn>
      <cn type="integer">2</cn>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{1}\times 0.100_{2}-2^{1}\times 0.011_{2}
  </annotation>
 </semantics>
</math>

, yielding 

<math display="inline" id="Guard_digit:5">
 <semantics>
  <mrow>
   <mrow>
    <msup>
     <mn>2</mn>
     <mn>1</mn>
    </msup>
    <mo>×</mo>
    <msub>
     <mn>0.001</mn>
     <mn>2</mn>
    </msub>
   </mrow>
   <mo>=</mo>
   <mi></mi>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">superscript</csymbol>
      <cn type="integer">2</cn>
      <cn type="integer">1</cn>
     </apply>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <cn type="float">0.001</cn>
      <cn type="integer">2</cn>
     </apply>
    </apply>
    <csymbol cd="latexml">absent</csymbol>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{1}\times 0.001_{2}=
  </annotation>
 </semantics>
</math>

 or 

<math display="inline" id="Guard_digit:6">
 <semantics>
  <mrow>
   <msup>
    <mn>2</mn>
    <mrow>
     <mo>-</mo>
     <mn>1</mn>
    </mrow>
   </msup>
   <mo>×</mo>
   <msub>
    <mn>0.100</mn>
    <mn>2</mn>
   </msub>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <cn type="integer">2</cn>
     <apply>
      <minus></minus>
      <cn type="integer">1</cn>
     </apply>
    </apply>
    <apply>
     <csymbol cd="ambiguous">subscript</csymbol>
     <cn type="float">0.100</cn>
     <cn type="integer">2</cn>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{-1}\times 0.100_{2}
  </annotation>
 </semantics>
</math>

. This gives us a relative error of 1. Therefore we can see how important guard digits can be.</p>

<p>An example of the error caused by floating point roundoff is illustrated in the following <a href="C_(programming_language)" title="wikilink">C</a> code.</p>
<div class="sourceCode"><pre class="sourceCode c"><code class="sourceCode c"><span class="dt">int</span> main(){
   <span class="dt">double</span> a;
   <span class="dt">int</span> i;
   a = <span class="fl">0.2</span>; a += <span class="fl">0.1</span>; a -= <span class="fl">0.3</span>;
   <span class="kw">for</span>(i=<span class="dv">0</span> ; a&lt;<span class="fl">1.0</span> ; i++) a += a;
   printf(<span class="st">" i=%d a=%f</span><span class="ch">\n</span><span class="st">"</span>,i,a);
   <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre></div>

<p>It appears that the program should not terminate. Yet the output is : i=54 a=1.000000</p>

<p>Another example is:</p>

<p>Take 2 numbers:<br/>
2.56*10^0 and<br/>
2.34*10^2<br/>
we bring the first number to the same power of 10 as the second one:<br/>
0.0256*10^2</p>

<p>The addition of the 2 numbers is:<br/>
0.0256*10^2 +<br/>
2.3400*10^2<br/>
____________<br/>
2.3656*10^2<br/>
After padding the second number with 0, the bit after 4 is the guard digit and the bit after is the round digit. The result after rounding is 2.37 as opposed to 2.36 without the extra bits (guard and round bits), i.e. by considering only 0.02+2.34 = 2.36. The error therefore is 0.01.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="Forman_S._Acton" title="wikilink">Forman S. Acton</a>. <em>Numerical Methods that Work</em>, The Mathematical Association of America (August 1997).</li>
<li>Higham, Nicholas J. <em>Accuracy and Stability of Numerical Algorithms</em>, Washington D.C.: Society for Industrial &amp; Applied Mathematics, 2002.</li>
</ul>

<p>"</p>

<p><a href="Category:Numerical_analysis" title="wikilink">Category:Numerical analysis</a> <a href="Category:Articles_with_example_C_code" title="wikilink">Category:Articles with example C code</a></p>
</body>

