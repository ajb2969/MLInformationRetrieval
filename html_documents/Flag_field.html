<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="152">Flag field</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Flag field</h1>
<style>
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
<style>
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</body></html>
<body>
<hr/>

<p>In <a href="computer_programming" title="wikilink">computer programming</a>, a <strong>flag field</strong> is an <a href="integer_(computer_science)" title="wikilink">integer</a> interpreted as a sequence of <a href="boolean_algebra" title="wikilink">boolean</a> <a href="bit" title="wikilink">bits</a>, each called a "flag".</p>

<p>Flags are typically found as members of a defined <a href="data_structure" title="wikilink">data structure</a>, such as a <a href="Row_(database)" title="wikilink">database record</a>, and the meaning of the value contained in a flag will generally be defined in relation to the data structure it is part of. In many cases, the binary value of a flag will be understood to represent one of several possible states or statuses. In other cases, the binary values may represent one or more attributes in a <a href="bit_field" title="wikilink">bit field</a>, often related to abilities or permissions, such as "can be written to" or "can be deleted". However, there are many other possible meanings that can be assigned to flag values. One common use of flags is to mark or designate data structures for future processing.</p>

<p>Within <a href="microprocessor" title="wikilink">microprocessors</a> and other logic devices, flags are commonly used to control or indicate the intermediate or final state or outcome of different operations. Microprocessors typically have, for example, a <a href="status_register" title="wikilink">status register</a> that is composed of such flags, and the flags are used to indicate various post-operation conditions, such as when there has been an <a href="arithmetic_overflow" title="wikilink">arithmetic overflow</a>. The flags can be utilized in subsequent operations, such as in processing conditional <a href="Branch_(computer_science)" title="wikilink">jump instructions</a>. For example a <em>je</em> (Jump if Equal) instruction in the <a href="x86_assembly_language#Programming_flow" title="wikilink">x86 assembly language</a> will result in a jump if the Z (zero) flag was set by some previous operation.</p>

<p>A <a href="Command-line_interface#Command-line_option" title="wikilink">command-line switch</a> is also known as a flag. <a href="Command-line_interface" title="wikilink">Command line</a> programs often start with an option <a href="Parsing" title="wikilink">parser</a> that translates command line switches into flags in the sense of this article.</p>
<h2 id="examples">Examples</h2>
<h3 id="processor-status-register">Processor status register</h3>

<p>Taking the example of a <a href="MOS_Technology_6502" title="wikilink">6502</a> processor's <a href="status_register" title="wikilink">status register</a>, the following information was held within 8 bits:</p>
<ul>
<li>Bit 7. Negative flag</li>
<li>Bit 6. Overflow flag</li>
<li>Bit 5. Unused</li>
<li>Bit 4. Break flag</li>
<li>Bit 3. Decimal flag</li>
<li>Bit 2. Interrupt-disable flag</li>
<li>Bit 1. Carry flag</li>
<li>Bit 0. Zero flag</li>
</ul>
<h3 id="unix-process-exit-code">Unix process exit code</h3>

<p>A more general example would be the use of a <a class="uri" href="Unix" title="wikilink">Unix</a> <a href="exit_status" title="wikilink">exit status</a> as a flag word. In this case, the exit code is used by the programmer to pass status information to another process. An imaginary program which returns the status of 8 burglar alarm switches connected to the printer port could set each of the bits in the exit code in turn, depending on whether the switches are closed or open.</p>
<h2 id="extracting-bits-from-flag-words">Extracting bits from flag words</h2>

<p>A subset of flags in a flag field may be extracted by <a href="Logical_conjunction" title="wikilink">ANDing</a> with a <a href="Mask_(computing)" title="wikilink">mask</a>.</p>

<p>Suppose that status byte 103 (decimal) is returned, and that we want to check flag bit 5.</p>

<p>The flag we want to read is number 5 (counting from zero) - so the mask byte will be 

<math display="inline" id="Flag_field:0">
 <semantics>
  <mrow>
   <msup>
    <mn>2</mn>
    <mn>5</mn>
   </msup>
   <mo>=</mo>
   <mn>32</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <csymbol cd="ambiguous">superscript</csymbol>
     <cn type="integer">2</cn>
     <cn type="integer">5</cn>
    </apply>
    <cn type="integer">32</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   2^{5}=32
  </annotation>
 </semantics>
</math>

. ANDing 32 with 103 gives 32, which means the flag bit is set. If the flag bit was not set, the result would have been 0.</p>

<p>In modern computing, the <a href="logical_shift" title="wikilink">shift</a> operator (</p>

<p><code>int set_bit(int val, int bit_position)</code><br/>
<code>{</code><br/>
<code>  return val | (1 </code></p>

<p>To clear a bit, perform a <a href="Negation" title="wikilink">NOT</a> operation on the mask byte, then AND it with the status byte. The result will have the appropriate flag cleared (set to 0).</p>
<div class="sourceCode"><pre class="sourceCode c"><code class="sourceCode c"> <span class="dt">int</span> clear_bit(<span class="dt">int</span> val, <span class="dt">int</span> bit_position)
 {
   <span class="kw">return</span> val &amp; ~(<span class="dv">1</span> &lt;&lt; bit_position);
 }</code></pre></div>

<p>To toggle a bit, <a href="Exclusive_disjunction" title="wikilink">XOR</a> the status byte and the mask byte. This will set a bit if it is cleared or clear a bit if it is set.</p>
<div class="sourceCode"><pre class="sourceCode c"><code class="sourceCode c"> <span class="dt">int</span> toggle_bit(<span class="dt">int</span> val, <span class="dt">int</span> bit_position)
 {
   <span class="kw">return</span> val ^ (<span class="dv">1</span> &lt;&lt; bit_position);
 }</code></pre></div>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Bit_field" title="wikilink">Bit field</a></li>
<li><a href="Bit_array" title="wikilink">Bit array</a></li>
<li><a href="Status_register" title="wikilink">Status register</a></li>
<li><a href="FLAGS_register_(computing)" title="wikilink">FLAGS register (computing)</a></li>
<li><a href="Program_status_word" title="wikilink">Program status word</a></li>
<li><a href="Control_register" title="wikilink">Control register</a></li>
</ul>

<p>"</p>

<p><a href="Category:Programming_idioms" title="wikilink">Category:Programming idioms</a> <a href="Category:Operating_system_technology" title="wikilink">Category:Operating system technology</a> <a href="Category:Central_processing_unit" title="wikilink">Category:Central processing unit</a> <a href="Category:Digital_registers" title="wikilink">Category:Digital registers</a></p>
</body>

