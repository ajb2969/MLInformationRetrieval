<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="907">Top-hat transform</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Top-hat transform</h1>
<hr/>

<p>In <a href="mathematical_morphology" title="wikilink">mathematical morphology</a> and <a href="digital_image_processing" title="wikilink">digital image processing</a>, <strong>top-hat transform</strong> is an operation that extracts small elements and details from given <a href="image" title="wikilink">images</a>. There exist two types of top-hat transform: The <em>white top-hat transform</em> is defined as the difference between the input image and its <a href="opening_(morphology)" title="wikilink">opening</a> by some <a href="structuring_element" title="wikilink">structuring element</a>; The <em>black top-hat transform</em> is defined dually as the difference between the <a href="closing_(morphology)" title="wikilink">closing</a> and the input image. Top-hat transforms are used for various image processing tasks, such as <a href="feature_extraction" title="wikilink">feature extraction</a>, background equalization, <a href="image_enhancement" title="wikilink">image enhancement</a>, and others.</p>
<h2 id="mathematical-definitions">Mathematical definitions</h2>

<p>Let 

<math display="inline" id="Top-hat_transform:0">
 <semantics>
  <mrow>
   <mi>f</mi>
   <mo>:</mo>
   <mrow>
    <mi>E</mi>
    <mo>↦</mo>
    <mi>R</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <ci>normal-:</ci>
    <ci>f</ci>
    <apply>
     <csymbol cd="latexml">maps-to</csymbol>
     <ci>E</ci>
     <ci>R</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   f:E\mapsto R
  </annotation>
 </semantics>
</math>

 be a <a class="uri" href="grayscale" title="wikilink">grayscale</a> image, mapping points from an <a href="Euclidean_space" title="wikilink">Euclidean space</a> or discrete <a href="Lattice_graph" title="wikilink">grid</a> <em>E</em> (such as <em>R</em><sup>2</sup> or <em>Z</em><sup>2</sup>) into the real line. Let 

<math display="inline" id="Top-hat_transform:1">
 <semantics>
  <mrow>
   <mi>b</mi>
   <mrow>
    <mo stretchy="false">(</mo>
    <mi>x</mi>
    <mo stretchy="false">)</mo>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <times></times>
    <ci>b</ci>
    <ci>x</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   b(x)
  </annotation>
 </semantics>
</math>

 be a grayscale structuring element.</p>

<p>Then, the white top-hat transform of <em>f</em> is given by:</p>

<p>

<math display="block" id="Top-hat_transform:2">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>T</mi>
     <mi>w</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>f</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mi>f</mi>
    <mo>-</mo>
    <mrow>
     <mi>f</mi>
     <mo>∘</mo>
     <mi>b</mi>
    </mrow>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>T</ci>
      <ci>w</ci>
     </apply>
     <ci>f</ci>
    </apply>
    <apply>
     <minus></minus>
     <ci>f</ci>
     <apply>
      <compose></compose>
      <ci>f</ci>
      <ci>b</ci>
     </apply>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   T_{w}(f)=f-f\circ b
  </annotation>
 </semantics>
</math>

,</p>

<p>where 

<math display="inline" id="Top-hat_transform:3">
 <semantics>
  <mo>∘</mo>
  <annotation-xml encoding="MathML-Content">
   <compose></compose>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \circ
  </annotation>
 </semantics>
</math>


 denotes the opening operation.</p>

<p>The black top-hat transform of <em>f</em> (sometimes called the <em>bottom-hat</em> transform<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a> ) is given by:</p>

<p>

<math display="block" id="Top-hat_transform:4">
 <semantics>
  <mrow>
   <mrow>
    <msub>
     <mi>T</mi>
     <mi>b</mi>
    </msub>
    <mrow>
     <mo stretchy="false">(</mo>
     <mi>f</mi>
     <mo stretchy="false">)</mo>
    </mrow>
   </mrow>
   <mo>=</mo>
   <mrow>
    <mrow>
     <mi>f</mi>
     <mo>∙</mo>
     <mi>b</mi>
    </mrow>
    <mo>-</mo>
    <mi>f</mi>
   </mrow>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <eq></eq>
    <apply>
     <times></times>
     <apply>
      <csymbol cd="ambiguous">subscript</csymbol>
      <ci>T</ci>
      <ci>b</ci>
     </apply>
     <ci>f</ci>
    </apply>
    <apply>
     <minus></minus>
     <apply>
      <ci>normal-∙</ci>
      <ci>f</ci>
      <ci>b</ci>
     </apply>
     <ci>f</ci>
    </apply>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   T_{b}(f)=f\bullet b-f
  </annotation>
 </semantics>
</math>

,</p>

<p>where 

<math display="inline" id="Top-hat_transform:5">
 <semantics>
  <mo>∙</mo>
  <annotation-xml encoding="MathML-Content">
   <ci>normal-∙</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \bullet
  </annotation>
 </semantics>
</math>

 is the closing operation.</p>
<h2 id="properties">Properties</h2>

<p>The white top-hat transform returns an image, containing those "objects" or "elements" of an input image that:</p>
<ul>
<li>Are "smaller" than the structuring element (i.e., places where the structuring element does not fit in), and</li>
<li>are <strong>brighter</strong> than their surroundings.</li>
</ul>

<p>The black top-hat returns an image, containing the "objects" or "elements" that:</p>
<ul>
<li>Are "smaller" than the structuring element, and</li>
<li>are <strong>darker</strong> than their surroundings.</li>
</ul>

<p>The size, or width, of the elements that are extracted by the top-hat transforms can be controlled by the choice of the structuring element 

<math display="inline" id="Top-hat_transform:6">
 <semantics>
  <mi>b</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>b</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   b
  </annotation>
 </semantics>
</math>

. The bigger the latter, the larger the elements extracted.</p>

<p>Both top-hat transforms are images that contain only non-negative values at all pixels.</p>
<h2 id="references">References</h2>
<ul>
<li><cite id="serra82"><em>Image Analysis and Mathematical Morphology</em> by Jean Serra, ISBN 0-12-637240-3 (1982)</cite></li>
<li><em>Image Analysis and Mathematical Morphology, Volume 2: Theoretical Advances</em> by Jean Serra, ISBN 0-12-637241-1 (1988)</li>
<li><em>An Introduction to Morphological Image Processing</em> by Edward R. Dougherty, ISBN 0-8194-0845-X (1992)</li>
<li><em>Hands-on Morphological Image Processing</em> by Edward R. Dougherty and R. Lotufo, ISBN 0-8194-4720-X (2003)</li>
</ul>

<p>"</p>

<p><a href="Category:Mathematical_morphology" title="wikilink">Category:Mathematical morphology</a> <a href="Category:Digital_geometry" title="wikilink">Category:Digital geometry</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
</ol>
</section>
</body>
</html>
