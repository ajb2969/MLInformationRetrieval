<html lang="en">
<head>
<meta charset="utf-8"/>
<title offset="1665">Elias delta coding</title>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG.js" type="text/javascript">
</script>
</head>
<body>
<h1>Elias delta coding</h1>
<style>
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
<style>
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</body></html>
<body>
<hr/>

<p><strong>Elias delta code</strong> is a <a href="Universal_code_(data_compression)" title="wikilink">universal code</a> encoding the positive integers developed by <a href="Peter_Elias" title="wikilink">Peter Elias</a>.<a class="footnoteRef" href="#fn1" id="fnref1"><sup>1</sup></a></p>
<h2 id="encoding">Encoding</h2>

<p>To code a number <em>X</em>≥1:</p>
<ol>
<li>Let <em>N</em>=⌊log<sub>2</sub> <em>X</em>⌋ be the highest power of 2 in <em>X</em>, so 2<sup><em>N</em></sup> ≤ <em>X</em> <em>N</em>+1.</li>
<li>Let <em>L</em>=⌊log<sub>2</sub> <em>N</em>+1⌋ be the highest power of 2 in <em>N</em>+1, so 2<sup><em>L</em></sup> ≤ <em>N</em>+1 <em>L</em>+1.</li>
<li>Write <em>L</em> zeros, followed by</li>
<li>the <em>L</em>+1-bit binary representation of <em>N</em>+1, followed by</li>
<li>all but the leading bit (i.e. the last <em>N</em> bits) of <em>X</em>.</li>
</ol>

<p>An equivalent way to express the same process:</p>
<ol>
<li>Separate <em>X</em> into the highest power of 2 it contains (2<sup><em>N</em></sup>) and the remaining <em>N</em> binary digits.</li>
<li>Encode <em>N</em>+1 with <a href="Elias_gamma_coding" title="wikilink">Elias gamma coding</a>.</li>
<li>Append the remaining <em>N</em> binary digits to this representation of <em>N</em>+1.</li>
</ol>

<p>To represent a number 

<math display="inline" id="Elias_delta_coding:0">
 <semantics>
  <mi>x</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>x</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   x
  </annotation>
 </semantics>
</math>

, Elias delta uses 

<math display="inline" id="Elias_delta_coding:1">
 <semantics>
  <mrow>
   <mrow>
    <mo stretchy="false">⌊</mo>
    <mrow>
     <msub>
      <mi>log</mi>
      <mn>2</mn>
     </msub>
     <mrow>
      <mo stretchy="false">(</mo>
      <mi>x</mi>
      <mo stretchy="false">)</mo>
     </mrow>
    </mrow>
    <mo stretchy="false">⌋</mo>
   </mrow>
   <mo>+</mo>
   <mrow>
    <mn>2</mn>
    <mrow>
     <mo stretchy="false">⌊</mo>
     <mrow>
      <msub>
       <mi>log</mi>
       <mn>2</mn>
      </msub>
      <mrow>
       <mo stretchy="false">(</mo>
       <mrow>
        <mrow>
         <mo stretchy="false">⌊</mo>
         <mrow>
          <msub>
           <mi>log</mi>
           <mn>2</mn>
          </msub>
          <mrow>
           <mo stretchy="false">(</mo>
           <mi>x</mi>
           <mo stretchy="false">)</mo>
          </mrow>
         </mrow>
         <mo stretchy="false">⌋</mo>
        </mrow>
        <mo>+</mo>
        <mn>1</mn>
       </mrow>
       <mo stretchy="false">)</mo>
      </mrow>
     </mrow>
     <mo stretchy="false">⌋</mo>
    </mrow>
   </mrow>
   <mo>+</mo>
   <mn>1</mn>
  </mrow>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <plus></plus>
    <apply>
     <floor></floor>
     <apply>
      <apply>
       <csymbol cd="ambiguous">subscript</csymbol>
       <log></log>
       <cn type="integer">2</cn>
      </apply>
      <ci>x</ci>
     </apply>
    </apply>
    <apply>
     <times></times>
     <cn type="integer">2</cn>
     <apply>
      <floor></floor>
      <apply>
       <apply>
        <csymbol cd="ambiguous">subscript</csymbol>
        <log></log>
        <cn type="integer">2</cn>
       </apply>
       <apply>
        <plus></plus>
        <apply>
         <floor></floor>
         <apply>
          <apply>
           <csymbol cd="ambiguous">subscript</csymbol>
           <log></log>
           <cn type="integer">2</cn>
          </apply>
          <ci>x</ci>
         </apply>
        </apply>
        <cn type="integer">1</cn>
       </apply>
      </apply>
     </apply>
    </apply>
    <cn type="integer">1</cn>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \lfloor\log_{2}(x)\rfloor+2\lfloor\log_{2}(\lfloor\log_{2}(x)\rfloor+1)\rfloor+1
  </annotation>
 </semantics>
</math>

 bits.<a class="footnoteRef" href="#fn2" id="fnref2"><sup>2</sup></a></p>

<p>The code begins, using 

<math display="inline" id="Elias_delta_coding:2">
 <semantics>
  <msup>
   <mi>γ</mi>
   <mo>′</mo>
  </msup>
  <annotation-xml encoding="MathML-Content">
   <apply>
    <csymbol cd="ambiguous">superscript</csymbol>
    <ci>γ</ci>
    <ci>normal-′</ci>
   </apply>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \gamma^{\prime}
  </annotation>
 </semantics>
</math>

 instead of 

<math display="inline" id="Elias_delta_coding:3">
 <semantics>
  <mi>γ</mi>
  <annotation-xml encoding="MathML-Content">
   <ci>γ</ci>
  </annotation-xml>
  <annotation encoding="application/x-tex">
   \gamma
  </annotation>
 </semantics>
</math>

:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">
<p>Number</p></th>
<th style="text-align: left;">
<p>N</p></th>
<th style="text-align: left;">
<p>N+1</p></th>
<th style="text-align: left;">
<p>Encoding</p></th>
<th style="text-align: left;">
<p>Implied probability</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<p>1 = 2<sup>0</sup></p></td>
<td style="text-align: left;">
<p>0</p></td>
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p><code>1</code></p></td>
<td style="text-align: left;">
<p>1/2</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>2 = 2<sup>1</sup> + <em>0</em></p></td>
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p><code>0 1 0 ''0''</code></p></td>
<td style="text-align: left;">
<p>1/16</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>3 = 2<sup>1</sup> + <em>1</em></p></td>
<td style="text-align: left;">
<p>1</p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p><code>0 1 0 ''1''</code></p></td>
<td style="text-align: left;">
<p>1/16</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>4 = 2<sup>2</sup> + <em>0</em></p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p><code>0 1 1 ''00''</code></p></td>
<td style="text-align: left;">
<p>1/32</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>5 = 2<sup>2</sup> + <em>1</em></p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p><code>0 1 1 ''01''</code></p></td>
<td style="text-align: left;">
<p>1/32</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>6 = 2<sup>2</sup> + <em>2</em></p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p><code>0 1 1 ''10''</code></p></td>
<td style="text-align: left;">
<p>1/32</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>7 = 2<sup>2</sup> + <em>3</em></p></td>
<td style="text-align: left;">
<p>2</p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p><code>0 1 1 ''11''</code></p></td>
<td style="text-align: left;">
<p>1/32</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>8 = 2<sup>3</sup> + <em>0</em></p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p><code>00 1 00 ''000''</code></p></td>
<td style="text-align: left;">
<p>1/256</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>9 = 2<sup>3</sup> + <em>1</em></p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p><code>00 1 00 ''001''</code></p></td>
<td style="text-align: left;">
<p>1/256</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>10 = 2<sup>3</sup> + <em>2</em></p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p><code>00 1 00 ''010''</code></p></td>
<td style="text-align: left;">
<p>1/256</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>11 = 2<sup>3</sup> + <em>3</em></p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p><code>00 1 00 ''011''</code></p></td>
<td style="text-align: left;">
<p>1/256</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>12 = 2<sup>3</sup> + <em>4</em></p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p><code>00 1 00 ''100''</code></p></td>
<td style="text-align: left;">
<p>1/256</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>13 = 2<sup>3</sup> + <em>5</em></p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p><code>00 1 00 ''101''</code></p></td>
<td style="text-align: left;">
<p>1/256</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>14 = 2<sup>3</sup> + <em>6</em></p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p><code>00 1 00 ''110''</code></p></td>
<td style="text-align: left;">
<p>1/256</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>15 = 2<sup>3</sup> + <em>7</em></p></td>
<td style="text-align: left;">
<p>3</p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p><code>00 1 00 ''111''</code></p></td>
<td style="text-align: left;">
<p>1/256</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">
<p>16 = 2<sup>4</sup> + <em>0</em></p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p>5</p></td>
<td style="text-align: left;">
<p><code>00 1 01 ''0000''</code></p></td>
<td style="text-align: left;">
<p>1/512</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<p>17 = 2<sup>4</sup> + <em>1</em></p></td>
<td style="text-align: left;">
<p>4</p></td>
<td style="text-align: left;">
<p>5</p></td>
<td style="text-align: left;">
<p><code>00 1 01 ''0001''</code></p></td>
<td style="text-align: left;">
<p>1/512</p></td>
</tr>
</tbody>
</table>

<p>To decode an Elias delta-coded integer:</p>
<ol>
<li>Read and count zeros from the stream until you reach the first one. Call this count of zeros <em>L</em>.</li>
<li>Considering the one that was reached to be the first digit of an integer, with a value of 2<sup><em>L</em></sup>, read the remaining <em>L</em> digits of the integer. Call this integer <em>N</em>+1, and subtract one to get <em>N</em>.</li>
<li>Put a one in the first place of our final output, representing the value 2<sup><em>N</em></sup>.</li>
<li>Read and append the following <em>N</em> digits.</li>
</ol>

<p>Example:</p>

<p><code>001010011</code><br/>
<code>1. 2 leading zeros in 001</code><br/>
<code>2. read 2 more bits i.e. 00101</code><br/>
<code>3. decode N+1 = 00101 = 5</code><br/>
<code>4. get N = 5 − 1 = 4 remaining bits for the complete code i.e. '0011'</code><br/>
<code>5. encoded number = 2</code><sup><code>4</code></sup><code> + 3 = 19</code></p>

<p>This code can be generalized to zero or negative integers in the same ways described in <a href="Elias_gamma_coding#Generalizations" title="wikilink">Elias gamma coding</a>.</p>
<h2 id="example-code">Example code</h2>
<h3 id="encoding-1">Encoding</h3>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">void</span> eliasDeltaEncode(<span class="dt">char</span>* source, <span class="dt">char</span>* dest)
{
    IntReader intreader(source);
    BitWriter bitwriter(dest);
    <span class="kw">while</span> (intreader.hasLeft())
    {
        <span class="dt">int</span> num = intreader.getInt();
        <span class="dt">int</span> len = <span class="dv">0</span>;
        <span class="dt">int</span> lengthOfLen = <span class="dv">0</span>;
        <span class="kw">for</span> (<span class="dt">int</span> temp = num; temp &gt; <span class="dv">0</span>; temp &gt;&gt;= <span class="dv">1</span>)  <span class="co">// calculate 1+floor(log2(num))</span>
            len++;
        <span class="kw">for</span> (<span class="dt">int</span> temp = len; temp &gt; <span class="dv">1</span>; temp &gt;&gt;= <span class="dv">1</span>)  <span class="co">// calculate floor(log2(len))</span>
            lengthOfLen++;
        <span class="kw">for</span> (<span class="dt">int</span> i = lengthOfLen; i &gt; <span class="dv">0</span>; --i)
            bitwriter.outputBit(<span class="dv">0</span>);
        <span class="kw">for</span> (<span class="dt">int</span> i = lengthOfLen; i &gt;= <span class="dv">0</span>; --i)
            bitwriter.outputBit((len &gt;&gt; i) &amp; <span class="dv">1</span>);
        <span class="kw">for</span> (<span class="dt">int</span> i = len<span class="dv">-2</span>; i &gt;= <span class="dv">0</span>; i--)
            bitwriter.outputBit((num &gt;&gt; i) &amp; <span class="dv">1</span>);
    }
    bitwriter.close();
    intreader.close();
}</code></pre></div>
<h3 id="decoding">Decoding</h3>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">void</span> eliasDeltaDecode(<span class="dt">char</span>* source, <span class="dt">char</span>* dest)
{
    BitReader bitreader(source);
    IntWriter intwriter(dest);
    <span class="kw">while</span> (bitreader.hasLeft())
    {
        <span class="dt">int</span> num = <span class="dv">1</span>;
        <span class="dt">int</span> len = <span class="dv">1</span>;
        <span class="dt">int</span> lengthOfLen = <span class="dv">0</span>;
        <span class="kw">while</span> (!bitreader.inputBit())     <span class="co">// potentially dangerous with malformed files.</span>
            lengthOfLen++;
        <span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; lengthOfLen; i++)
        {
            len &lt;&lt;= <span class="dv">1</span>;
            <span class="kw">if</span> (bitreader.inputBit())
                len |= <span class="dv">1</span>;
        }
        <span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; len<span class="dv">-1</span>; i++)
        {
            num &lt;&lt;= <span class="dv">1</span>;
            <span class="kw">if</span> (bitreader.inputBit())
                num |= <span class="dv">1</span>;
        }
        intwriter.putInt(num);            <span class="co">// write out the value</span>
    }
    bitreader.close();
    intwriter.close();
}</code></pre></div>
<h2 id="generalizations">Generalizations</h2>

<p>Elias delta coding does not code zero or negative integers. One way to code all non negative integers is to add 1 before coding and then subtract 1 after decoding. One way to code all integers is to set up a <a class="uri" href="bijection" title="wikilink">bijection</a>, mapping integers all integers (0, 1, −1, 2, −2, 3, −3, ...) to strictly positive integers (1, 2, 3, 4, 5, 6, 7, ...) before coding. This bijection can be performed using the <a href="Comparison_of_data_serialization_formats" title="wikilink">"ZigZag" encoding from Protocol Buffers</a> (not to be confused with <a href="Zigzag_code" title="wikilink">Zigzag code</a>, nor the <a href="JPEG#Entropy_coding" title="wikilink">JPEG Zig-zag entropy coding</a>).</p>
<h2 id="references">References</h2>
<references>
</references>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="Elias_gamma_coding" title="wikilink">Elias gamma coding</a></li>
<li><a href="Elias_omega_coding" title="wikilink">Elias omega coding</a></li>
</ul>

<p>"</p>

<p><a href="Category:Numeral_systems" title="wikilink">Category:Numeral systems</a> <a href="Category:Lossless_compression_algorithms" title="wikilink">Category:Lossless compression algorithms</a></p>
<section class="footnotes">
<hr/>
<ol>
<li id="fn1"><a href="#fnref1">↩</a></li>
<li id="fn2"></li>
</ol>
</section>
</body>

